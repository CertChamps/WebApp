(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function jD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vb={exports:{}},Ld={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox;function HD(){if(ox)return Ld;ox=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var c in i)c!=="key"&&(o[c]=i[c])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:o}}return Ld.Fragment=e,Ld.jsx=n,Ld.jsxs=n,Ld}var sx;function GD(){return sx||(sx=1,Vb.exports=HD()),Vb.exports}var Ee=GD(),Fb={exports:{}},at={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function WD(){if(lx)return at;lx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function v(V){return V===null||typeof V!="object"?null:(V=y&&V[y]||V["@@iterator"],typeof V=="function"?V:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,R={};function I(V,se,de){this.props=V,this.context=se,this.refs=R,this.updater=de||x}I.prototype.isReactComponent={},I.prototype.setState=function(V,se){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,se,"setState")},I.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function L(){}L.prototype=I.prototype;function j(V,se,de){this.props=V,this.context=se,this.refs=R,this.updater=de||x}var z=j.prototype=new L;z.constructor=j,S(z,I.prototype),z.isPureReactComponent=!0;var G=Array.isArray,ie={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function M(V,se,de,ce,Ae,Ue){return de=Ue.ref,{$$typeof:t,type:V,key:se,ref:de!==void 0?de:null,props:Ue}}function A(V,se){return M(V.type,se,void 0,void 0,void 0,V.props)}function C(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function P(V){var se={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(de){return se[de]})}var D=/\/+/g;function U(V,se){return typeof V=="object"&&V!==null&&V.key!=null?P(""+V.key):se.toString(36)}function O(){}function ke(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(O,O):(V.status="pending",V.then(function(se){V.status==="pending"&&(V.status="fulfilled",V.value=se)},function(se){V.status==="pending"&&(V.status="rejected",V.reason=se)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Ke(V,se,de,ce,Ae){var Ue=typeof V;(Ue==="undefined"||Ue==="boolean")&&(V=null);var Pe=!1;if(V===null)Pe=!0;else switch(Ue){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(V.$$typeof){case t:case e:Pe=!0;break;case p:return Pe=V._init,Ke(Pe(V._payload),se,de,ce,Ae)}}if(Pe)return Ae=Ae(V),Pe=ce===""?"."+U(V,0):ce,G(Ae)?(de="",Pe!=null&&(de=Pe.replace(D,"$&/")+"/"),Ke(Ae,se,de,"",function(dr){return dr})):Ae!=null&&(C(Ae)&&(Ae=A(Ae,de+(Ae.key==null||V&&V.key===Ae.key?"":(""+Ae.key).replace(D,"$&/")+"/")+Pe)),se.push(Ae)),1;Pe=0;var on=ce===""?".":ce+":";if(G(V))for(var it=0;it<V.length;it++)ce=V[it],Ue=on+U(ce,it),Pe+=Ke(ce,se,de,Ue,Ae);else if(it=v(V),typeof it=="function")for(V=it.call(V),it=0;!(ce=V.next()).done;)ce=ce.value,Ue=on+U(ce,it++),Pe+=Ke(ce,se,de,Ue,Ae);else if(Ue==="object"){if(typeof V.then=="function")return Ke(ke(V),se,de,ce,Ae);throw se=String(V),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function W(V,se,de){if(V==null)return V;var ce=[],Ae=0;return Ke(V,ce,"","",function(Ue){return se.call(de,Ue,Ae++)}),ce}function ue(V){if(V._status===-1){var se=V._result;se=se(),se.then(function(de){(V._status===0||V._status===-1)&&(V._status=1,V._result=de)},function(de){(V._status===0||V._status===-1)&&(V._status=2,V._result=de)}),V._status===-1&&(V._status=0,V._result=se)}if(V._status===1)return V._result.default;throw V._result}var ve=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function De(){}return at.Children={map:W,forEach:function(V,se,de){W(V,function(){se.apply(this,arguments)},de)},count:function(V){var se=0;return W(V,function(){se++}),se},toArray:function(V){return W(V,function(se){return se})||[]},only:function(V){if(!C(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},at.Component=I,at.Fragment=n,at.Profiler=i,at.PureComponent=j,at.StrictMode=r,at.Suspense=d,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,at.__COMPILER_RUNTIME={__proto__:null,c:function(V){return ie.H.useMemoCache(V)}},at.cache=function(V){return function(){return V.apply(null,arguments)}},at.cloneElement=function(V,se,de){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ce=S({},V.props),Ae=V.key,Ue=void 0;if(se!=null)for(Pe in se.ref!==void 0&&(Ue=void 0),se.key!==void 0&&(Ae=""+se.key),se)!B.call(se,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&se.ref===void 0||(ce[Pe]=se[Pe]);var Pe=arguments.length-2;if(Pe===1)ce.children=de;else if(1<Pe){for(var on=Array(Pe),it=0;it<Pe;it++)on[it]=arguments[it+2];ce.children=on}return M(V.type,Ae,void 0,void 0,Ue,ce)},at.createContext=function(V){return V={$$typeof:l,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},at.createElement=function(V,se,de){var ce,Ae={},Ue=null;if(se!=null)for(ce in se.key!==void 0&&(Ue=""+se.key),se)B.call(se,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Ae[ce]=se[ce]);var Pe=arguments.length-2;if(Pe===1)Ae.children=de;else if(1<Pe){for(var on=Array(Pe),it=0;it<Pe;it++)on[it]=arguments[it+2];Ae.children=on}if(V&&V.defaultProps)for(ce in Pe=V.defaultProps,Pe)Ae[ce]===void 0&&(Ae[ce]=Pe[ce]);return M(V,Ue,void 0,void 0,null,Ae)},at.createRef=function(){return{current:null}},at.forwardRef=function(V){return{$$typeof:c,render:V}},at.isValidElement=C,at.lazy=function(V){return{$$typeof:p,_payload:{_status:-1,_result:V},_init:ue}},at.memo=function(V,se){return{$$typeof:f,type:V,compare:se===void 0?null:se}},at.startTransition=function(V){var se=ie.T,de={};ie.T=de;try{var ce=V(),Ae=ie.S;Ae!==null&&Ae(de,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(De,ve)}catch(Ue){ve(Ue)}finally{ie.T=se}},at.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},at.use=function(V){return ie.H.use(V)},at.useActionState=function(V,se,de){return ie.H.useActionState(V,se,de)},at.useCallback=function(V,se){return ie.H.useCallback(V,se)},at.useContext=function(V){return ie.H.useContext(V)},at.useDebugValue=function(){},at.useDeferredValue=function(V,se){return ie.H.useDeferredValue(V,se)},at.useEffect=function(V,se,de){var ce=ie.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(V,se)},at.useId=function(){return ie.H.useId()},at.useImperativeHandle=function(V,se,de){return ie.H.useImperativeHandle(V,se,de)},at.useInsertionEffect=function(V,se){return ie.H.useInsertionEffect(V,se)},at.useLayoutEffect=function(V,se){return ie.H.useLayoutEffect(V,se)},at.useMemo=function(V,se){return ie.H.useMemo(V,se)},at.useOptimistic=function(V,se){return ie.H.useOptimistic(V,se)},at.useReducer=function(V,se,de){return ie.H.useReducer(V,se,de)},at.useRef=function(V){return ie.H.useRef(V)},at.useState=function(V){return ie.H.useState(V)},at.useSyncExternalStore=function(V,se,de){return ie.H.useSyncExternalStore(V,se,de)},at.useTransition=function(){return ie.H.useTransition()},at.version="19.1.1",at}var ux;function S2(){return ux||(ux=1,Fb.exports=WD()),Fb.exports}var ne=S2();const lu=jD(ne);var Ub={exports:{}},Rd={},Kb={exports:{}},$b={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function XD(){return cx||(cx=1,function(t){function e(W,ue){var ve=W.length;W.push(ue);e:for(;0<ve;){var De=ve-1>>>1,V=W[De];if(0<i(V,ue))W[De]=ue,W[ve]=V,ve=De;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ue=W[0],ve=W.pop();if(ve!==ue){W[0]=ve;e:for(var De=0,V=W.length,se=V>>>1;De<se;){var de=2*(De+1)-1,ce=W[de],Ae=de+1,Ue=W[Ae];if(0>i(ce,ve))Ae<V&&0>i(Ue,ce)?(W[De]=Ue,W[Ae]=ve,De=Ae):(W[De]=ce,W[de]=ve,De=de);else if(Ae<V&&0>i(Ue,ve))W[De]=Ue,W[Ae]=ve,De=Ae;else break e}}return ue}function i(W,ue){var ve=W.sortIndex-ue.sortIndex;return ve!==0?ve:W.id-ue.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,y=null,v=3,x=!1,S=!1,R=!1,I=!1,L=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function G(W){for(var ue=n(f);ue!==null;){if(ue.callback===null)r(f);else if(ue.startTime<=W)r(f),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=n(f)}}function ie(W){if(R=!1,G(W),!S)if(n(d)!==null)S=!0,B||(B=!0,U());else{var ue=n(f);ue!==null&&Ke(ie,ue.startTime-W)}}var B=!1,M=-1,A=5,C=-1;function P(){return I?!0:!(t.unstable_now()-C<A)}function D(){if(I=!1,B){var W=t.unstable_now();C=W;var ue=!0;try{e:{S=!1,R&&(R=!1,j(M),M=-1),x=!0;var ve=v;try{t:{for(G(W),y=n(d);y!==null&&!(y.expirationTime>W&&P());){var De=y.callback;if(typeof De=="function"){y.callback=null,v=y.priorityLevel;var V=De(y.expirationTime<=W);if(W=t.unstable_now(),typeof V=="function"){y.callback=V,G(W),ue=!0;break t}y===n(d)&&r(d),G(W)}else r(d);y=n(d)}if(y!==null)ue=!0;else{var se=n(f);se!==null&&Ke(ie,se.startTime-W),ue=!1}}break e}finally{y=null,v=ve,x=!1}ue=void 0}}finally{ue?U():B=!1}}}var U;if(typeof z=="function")U=function(){z(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ke=O.port2;O.port1.onmessage=D,U=function(){ke.postMessage(null)}}else U=function(){L(D,0)};function Ke(W,ue){M=L(function(){W(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(W){switch(v){case 1:case 2:case 3:var ue=3;break;default:ue=v}var ve=v;v=ue;try{return W()}finally{v=ve}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(W,ue){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ve=v;v=W;try{return ue()}finally{v=ve}},t.unstable_scheduleCallback=function(W,ue,ve){var De=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?De+ve:De):ve=De,W){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ve+V,W={id:p++,callback:ue,priorityLevel:W,startTime:ve,expirationTime:V,sortIndex:-1},ve>De?(W.sortIndex=ve,e(f,W),n(d)===null&&W===n(f)&&(R?(j(M),M=-1):R=!0,Ke(ie,ve-De))):(W.sortIndex=V,e(d,W),S||x||(S=!0,B||(B=!0,U()))),W},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(W){var ue=v;return function(){var ve=v;v=ue;try{return W.apply(this,arguments)}finally{v=ve}}}}($b)),$b}var hx;function YD(){return hx||(hx=1,Kb.exports=XD()),Kb.exports}var qb={exports:{}},rr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function QD(){if(dx)return rr;dx=1;var t=S2();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(d,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:d,containerInfo:f,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return rr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rr.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,p)},rr.flushSync=function(d){var f=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=f,r.p=p,r.d.f()}},rr.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},rr.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},rr.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:x}):p==="script"&&r.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},rr.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},rr.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin);r.d.L(d,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},rr.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},rr.requestFormReset=function(d){r.d.r(d)},rr.unstable_batchedUpdates=function(d,f){return d(f)},rr.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},rr.useFormStatus=function(){return l.H.useHostTransitionStatus()},rr.version="19.1.1",rr}var fx;function oS(){if(fx)return qb.exports;fx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qb.exports=QD(),qb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function JD(){if(mx)return Rd;mx=1;var t=YD(),e=S2(),n=oS();function r(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var s=a,u=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(u=s.return),a=s.return;while(a)}return s.tag===3?u:null}function l(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function c(a){if(o(a)!==a)throw Error(r(188))}function d(a){var s=a.alternate;if(!s){if(s=o(a),s===null)throw Error(r(188));return s!==a?null:a}for(var u=a,h=s;;){var g=u.return;if(g===null)break;var b=g.alternate;if(b===null){if(h=g.return,h!==null){u=h;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===u)return c(g),a;if(b===h)return c(g),s;b=b.sibling}throw Error(r(188))}if(u.return!==h.return)u=g,h=b;else{for(var E=!1,k=g.child;k;){if(k===u){E=!0,u=g,h=b;break}if(k===h){E=!0,h=g,u=b;break}k=k.sibling}if(!E){for(k=b.child;k;){if(k===u){E=!0,u=b,h=g;break}if(k===h){E=!0,h=b,u=g;break}k=k.sibling}if(!E)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?a:s}function f(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=f(a),s!==null)return s;a=a.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),j=Symbol.for("react.consumer"),z=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function U(a){return a===null||typeof a!="object"?null:(a=D&&a[D]||a["@@iterator"],typeof a=="function"?a:null)}var O=Symbol.for("react.client.reference");function ke(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===O?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case I:return"Profiler";case R:return"StrictMode";case ie:return"Suspense";case B:return"SuspenseList";case C:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case z:return(a.displayName||"Context")+".Provider";case j:return(a._context.displayName||"Context")+".Consumer";case G:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case M:return s=a.displayName||null,s!==null?s:ke(a.type)||"Memo";case A:s=a._payload,a=a._init;try{return ke(a(s))}catch{}}return null}var Ke=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},De=[],V=-1;function se(a){return{current:a}}function de(a){0>V||(a.current=De[V],De[V]=null,V--)}function ce(a,s){V++,De[V]=a.current,a.current=s}var Ae=se(null),Ue=se(null),Pe=se(null),on=se(null);function it(a,s){switch(ce(Pe,s),ce(Ue,a),ce(Ae,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?B5(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=B5(s),a=O5(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}de(Ae),ce(Ae,a)}function dr(){de(Ae),de(Ue),de(Pe)}function Ot(a){a.memoizedState!==null&&ce(on,a);var s=Ae.current,u=O5(s,a.type);s!==u&&(ce(Ue,a),ce(Ae,u))}function Nt(a){Ue.current===a&&(de(Ae),de(Ue)),on.current===a&&(de(on),Cd._currentValue=ve)}var Mr=Object.prototype.hasOwnProperty,ni=t.unstable_scheduleCallback,fr=t.unstable_cancelCallback,sl=t.unstable_shouldYield,Ou=t.unstable_requestPaint,mr=t.unstable_now,Ih=t.unstable_getCurrentPriorityLevel,ll=t.unstable_ImmediatePriority,Ro=t.unstable_UserBlockingPriority,Na=t.unstable_NormalPriority,Ri=t.unstable_LowPriority,ri=t.unstable_IdlePriority,Io=t.log,Bo=t.unstable_setDisableYieldValue,kt=null,ot=null;function tr(a){if(typeof Io=="function"&&Bo(a),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(kt,a)}catch{}}var pn=Math.clz32?Math.clz32:Xi,Nu=Math.log,ii=Math.LN2;function Xi(a){return a>>>=0,a===0?32:31-(Nu(a)/ii|0)|0}var Yi=256,Qi=4194304;function zr(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Pa(a,s,u){var h=a.pendingLanes;if(h===0)return 0;var g=0,b=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var k=h&134217727;return k!==0?(h=k&~b,h!==0?g=zr(h):(E&=k,E!==0?g=zr(E):u||(u=k&~a,u!==0&&(g=zr(u))))):(k=h&~b,k!==0?g=zr(k):E!==0?g=zr(E):u||(u=h&~a,u!==0&&(g=zr(u)))),g===0?0:s!==0&&s!==g&&(s&b)===0&&(b=g&-g,u=s&-s,b>=u||b===32&&(u&4194048)!==0)?s:g}function ai(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function Oo(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function za(){var a=Yi;return Yi<<=1,(Yi&4194048)===0&&(Yi=256),a}function ul(){var a=Qi;return Qi<<=1,(Qi&62914560)===0&&(Qi=4194304),a}function oi(a){for(var s=[],u=0;31>u;u++)s.push(a);return s}function Ii(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function No(a,s,u,h,g,b){var E=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var k=a.entanglements,F=a.expirationTimes,J=a.hiddenUpdates;for(u=E&~u;0<u;){var le=31-pn(u),fe=1<<le;k[le]=0,F[le]=-1;var ee=J[le];if(ee!==null)for(J[le]=null,le=0;le<ee.length;le++){var te=ee[le];te!==null&&(te.lane&=-536870913)}u&=~fe}h!==0&&pr(a,h,0),b!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=b&~(E&~s))}function pr(a,s,u){a.pendingLanes|=s,a.suspendedLanes&=~s;var h=31-pn(s);a.entangledLanes|=s,a.entanglements[h]=a.entanglements[h]|1073741824|u&4194090}function Ji(a,s){var u=a.entangledLanes|=s;for(a=a.entanglements;u;){var h=31-pn(u),g=1<<h;g&s|a[h]&s&&(a[h]|=s),u&=~g}}function Zi(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Po(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function K(){var a=ue.p;return a!==0?a:(a=window.event,a===void 0?32:ex(a.type))}function X(a,s){var u=ue.p;try{return ue.p=a,s()}finally{ue.p=u}}var Z=Math.random().toString(36).slice(2),pe="__reactFiber$"+Z,_e="__reactProps$"+Z,Ce="__reactContainer$"+Z,Oe="__reactEvents$"+Z,Le="__reactListeners$"+Z,Re="__reactHandles$"+Z,Ve="__reactResources$"+Z,Ie="__reactMarker$"+Z;function Be(a){delete a[pe],delete a[_e],delete a[Oe],delete a[Le],delete a[Re]}function nt(a){var s=a[pe];if(s)return s;for(var u=a.parentNode;u;){if(s=u[Ce]||u[pe]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(a=V5(a);a!==null;){if(u=a[pe])return u;a=V5(a)}return s}a=u,u=a.parentNode}return null}function wt(a){if(a=a[pe]||a[Ce]){var s=a.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return a}return null}function jt(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(r(33))}function Ct(a){var s=a[Ve];return s||(s=a[Ve]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function et(a){a[Ie]=!0}var Mt=new Set,Ar={};function qn(a,s){Bn(a,s),Bn(a+"Capture",s)}function Bn(a,s){for(Ar[a]=s,a=0;a<s.length;a++)Mt.add(s[a])}var gr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zo={},Vr={};function si(a){return Mr.call(Vr,a)?!0:Mr.call(zo,a)?!1:gr.test(a)?Vr[a]=!0:(zo[a]=!0,!1)}function Fr(a,s,u){if(si(s))if(u===null)a.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+u)}}function yr(a,s,u){if(u===null)a.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+u)}}function Xe(a,s,u,h){if(h===null)a.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(s,u,""+h)}}var en,Va;function br(a){if(en===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);en=s&&s[1]||"",Va=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+en+a+Va}var Wt=!1;function Bi(a,s){if(!a||Wt)return"";Wt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(te){var ee=te}Reflect.construct(a,[],fe)}else{try{fe.call()}catch(te){ee=te}a.call(fe.prototype)}}else{try{throw Error()}catch(te){ee=te}(fe=a())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(te){if(te&&ee&&typeof te.stack=="string")return[te.stack,ee.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),E=b[0],k=b[1];if(E&&k){var F=E.split(`
`),J=k.split(`
`);for(g=h=0;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(h===F.length||g===J.length)for(h=F.length-1,g=J.length-1;1<=h&&0<=g&&F[h]!==J[g];)g--;for(;1<=h&&0<=g;h--,g--)if(F[h]!==J[g]){if(h!==1||g!==1)do if(h--,g--,0>g||F[h]!==J[g]){var le=`
`+F[h].replace(" at new "," at ");return a.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",a.displayName)),le}while(1<=h&&0<=g);break}}}finally{Wt=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?br(u):""}function Vo(a){switch(a.tag){case 26:case 27:case 5:return br(a.type);case 16:return br("Lazy");case 13:return br("Suspense");case 19:return br("SuspenseList");case 0:case 15:return Bi(a.type,!1);case 11:return Bi(a.type.render,!1);case 1:return Bi(a.type,!0);case 31:return br("Activity");default:return""}}function Fo(a){try{var s="";do s+=Vo(a),a=a.return;while(a);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function vr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Bh(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $1(a){var s=Bh(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),h=""+a[s];if(!a.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,b=u.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return g.call(this)},set:function(E){h=""+E,b.call(this,E)}}),Object.defineProperty(a,s,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Pu(a){a._valueTracker||(a._valueTracker=$1(a))}function Oh(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var u=s.getValue(),h="";return a&&(h=Bh(a)?a.checked?"true":"false":a.value),a=h,a!==u?(s.setValue(a),!0):!1}function cl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var q1=/[\n"\\]/g;function gn(a){return a.replace(q1,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ur(a,s,u,h,g,b,E,k){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),s!=null?E==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+vr(s)):a.value!==""+vr(s)&&(a.value=""+vr(s)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),s!=null?Uo(a,E,vr(s)):u!=null?Uo(a,E,vr(u)):h!=null&&a.removeAttribute("value"),g==null&&b!=null&&(a.defaultChecked=!!b),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?a.name=""+vr(k):a.removeAttribute("name")}function hl(a,s,u,h,g,b,E,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),s!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||s!=null))return;u=u!=null?""+vr(u):"",s=s!=null?""+vr(s):u,k||s===a.value||(a.value=s),a.defaultValue=s}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,a.checked=k?a.checked:!!h,a.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E)}function Uo(a,s,u){s==="number"&&cl(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Fa(a,s,u,h){if(a=a.options,s){s={};for(var g=0;g<u.length;g++)s["$"+u[g]]=!0;for(u=0;u<a.length;u++)g=s.hasOwnProperty("$"+a[u].value),a[u].selected!==g&&(a[u].selected=g),g&&h&&(a[u].defaultSelected=!0)}else{for(u=""+vr(u),s=null,g=0;g<a.length;g++){if(a[g].value===u){a[g].selected=!0,h&&(a[g].defaultSelected=!0);return}s!==null||a[g].disabled||(s=a[g])}s!==null&&(s.selected=!0)}}function Ut(a,s,u){if(s!=null&&(s=""+vr(s),s!==a.value&&(a.value=s),u==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=u!=null?""+vr(u):""}function dl(a,s,u,h){if(s==null){if(h!=null){if(u!=null)throw Error(r(92));if(Ke(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),s=u}u=vr(s),a.defaultValue=u,h=a.textContent,h===u&&h!==""&&h!==null&&(a.value=h)}function li(a,s){if(s){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=s;return}}a.textContent=s}var fl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fm(a,s,u){var h=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":h?a.setProperty(s,u):typeof u!="number"||u===0||fl.has(s)?s==="float"?a.cssFloat=u:a[s]=(""+u).trim():a[s]=u+"px"}function Nh(a,s,u){if(s!=null&&typeof s!="object")throw Error(r(62));if(a=a.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?a.setProperty(h,""):h==="float"?a.cssFloat="":a[h]="");for(var g in s)h=s[g],s.hasOwnProperty(g)&&u[g]!==h&&fm(a,g,h)}else for(var b in s)s.hasOwnProperty(b)&&fm(a,b,s[b])}function Ph(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var j1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),H1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zu(a){return H1.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Ua=null;function ui(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ka=null,$a=null;function zh(a){var s=wt(a);if(s&&(a=s.stateNode)){var u=a[_e]||null;e:switch(a=s.stateNode,s.type){case"input":if(Ur(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+gn(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var h=u[s];if(h!==a&&h.form===a.form){var g=h[_e]||null;if(!g)throw Error(r(90));Ur(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<u.length;s++)h=u[s],h.form===a.form&&Oh(h)}break e;case"textarea":Ut(a,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&Fa(a,!!u.multiple,s,!1)}}}var ea=!1;function mm(a,s,u){if(ea)return a(s,u);ea=!0;try{var h=a(s);return h}finally{if(ea=!1,(Ka!==null||$a!==null)&&(sp(),Ka&&(s=Ka,a=$a,$a=Ka=null,zh(s),a)))for(s=0;s<a.length;s++)zh(a[s])}}function ml(a,s){var u=a.stateNode;if(u===null)return null;var h=u[_e]||null;if(h===null)return null;u=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(a=a.type,h=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!h;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(r(231,s,typeof u));return u}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ci=!1;if(Oi)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){ci=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{ci=!1}var ta=null,Ko=null,qa=null;function Vh(){if(qa)return qa;var a,s=Ko,u=s.length,h,g="value"in ta?ta.value:ta.textContent,b=g.length;for(a=0;a<u&&s[a]===g[a];a++);var E=u-a;for(h=1;h<=E&&s[u-h]===g[b-h];h++);return qa=g.slice(a,1<h?1-h:void 0)}function na(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function ra(){return!0}function Fh(){return!1}function On(a){function s(u,h,g,b,E){this._reactName=u,this._targetInst=g,this.type=h,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var k in a)a.hasOwnProperty(k)&&(u=a[k],this[k]=u?u(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ra:Fh,this.isPropagationStopped=Fh,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),s}var Rt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vu=On(Rt),gl=p({},Rt,{view:0,detail:0}),pm=On(gl),Fu,Uu,ia,yl=p({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_l,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ia&&(ia&&a.type==="mousemove"?(Fu=a.screenX-ia.screenX,Uu=a.screenY-ia.screenY):Uu=Fu=0,ia=a),Fu)},movementY:function(a){return"movementY"in a?a.movementY:Uu}}),hi=On(yl),gm=p({},yl,{dataTransfer:0}),G1=On(gm),bl=p({},gl,{relatedTarget:0}),Ku=On(bl),Uh=p({},Rt,{animationName:0,elapsedTime:0,pseudoElement:0}),$u=On(Uh),ym=p({},Rt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),qu=On(ym),W1=p({},Rt,{data:0}),Kh=On(W1),vl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $h(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=vm[a])?!!s[a]:!1}function _l(){return $h}var _m=p({},gl,{key:function(a){if(a.key){var s=vl[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=na(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?bm[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_l,charCode:function(a){return a.type==="keypress"?na(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?na(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ju=On(_m),xm=p({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qh=On(xm),ja=p({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_l}),wm=On(ja),Em=p({},Rt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sm=On(Em),km=p({},yl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Hu=On(km),_r=p({},Rt,{newState:0,oldState:0}),Cm=On(_r),Mm=[9,13,27,32],aa=Oi&&"CompositionEvent"in window,m=null;Oi&&"documentMode"in document&&(m=document.documentMode);var _=Oi&&"TextEvent"in window&&!m,w=Oi&&(!aa||m&&8<m&&11>=m),T=" ",Y=!1;function ae(a,s){switch(a){case"keyup":return Mm.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xe(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var yt=!1;function Sn(a,s){switch(a){case"compositionend":return xe(s);case"keypress":return s.which!==32?null:(Y=!0,T);case"textInput":return a=s.data,a===T&&Y?null:a;default:return null}}function bt(a,s){if(yt)return a==="compositionend"||!aa&&ae(a,s)?(a=Vh(),qa=Ko=ta=null,yt=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return w&&s.locale!=="ko"?null:s.data;default:return null}}var Nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kn(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!Nn[a.type]:s==="textarea"}function Ha(a,s,u,h){Ka?$a?$a.push(h):$a=[h]:Ka=h,s=fp(s,"onChange"),0<s.length&&(u=new Vu("onChange","change",null,u,h),a.push({event:u,listeners:s}))}var jn=null,oa=null;function jh(a){T5(a,0)}function Am(a){var s=jt(a);if(Oh(s))return a}function Y3(a,s){if(a==="change")return s}var Q3=!1;if(Oi){var X1;if(Oi){var Y1="oninput"in document;if(!Y1){var J3=document.createElement("div");J3.setAttribute("oninput","return;"),Y1=typeof J3.oninput=="function"}X1=Y1}else X1=!1;Q3=X1&&(!document.documentMode||9<document.documentMode)}function Z3(){jn&&(jn.detachEvent("onpropertychange",e_),oa=jn=null)}function e_(a){if(a.propertyName==="value"&&Am(oa)){var s=[];Ha(s,oa,a,ui(a)),mm(jh,s)}}function xT(a,s,u){a==="focusin"?(Z3(),jn=s,oa=u,jn.attachEvent("onpropertychange",e_)):a==="focusout"&&Z3()}function wT(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Am(oa)}function ET(a,s){if(a==="click")return Am(s)}function ST(a,s){if(a==="input"||a==="change")return Am(s)}function kT(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var Kr=typeof Object.is=="function"?Object.is:kT;function Hh(a,s){if(Kr(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var u=Object.keys(a),h=Object.keys(s);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var g=u[h];if(!Mr.call(s,g)||!Kr(a[g],s[g]))return!1}return!0}function t_(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function n_(a,s){var u=t_(a);a=0;for(var h;u;){if(u.nodeType===3){if(h=a+u.textContent.length,a<=s&&h>=s)return{node:u,offset:s-a};a=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=t_(u)}}function r_(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?r_(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function i_(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=cl(a.document);s instanceof a.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)a=s.contentWindow;else break;s=cl(a.document)}return s}function Q1(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var CT=Oi&&"documentMode"in document&&11>=document.documentMode,Gu=null,J1=null,Gh=null,Z1=!1;function a_(a,s,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Z1||Gu==null||Gu!==cl(h)||(h=Gu,"selectionStart"in h&&Q1(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Gh&&Hh(Gh,h)||(Gh=h,h=fp(J1,"onSelect"),0<h.length&&(s=new Vu("onSelect","select",null,s,u),a.push({event:s,listeners:h}),s.target=Gu)))}function xl(a,s){var u={};return u[a.toLowerCase()]=s.toLowerCase(),u["Webkit"+a]="webkit"+s,u["Moz"+a]="moz"+s,u}var Wu={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionrun:xl("Transition","TransitionRun"),transitionstart:xl("Transition","TransitionStart"),transitioncancel:xl("Transition","TransitionCancel"),transitionend:xl("Transition","TransitionEnd")},ey={},o_={};Oi&&(o_=document.createElement("div").style,"AnimationEvent"in window||(delete Wu.animationend.animation,delete Wu.animationiteration.animation,delete Wu.animationstart.animation),"TransitionEvent"in window||delete Wu.transitionend.transition);function wl(a){if(ey[a])return ey[a];if(!Wu[a])return a;var s=Wu[a],u;for(u in s)if(s.hasOwnProperty(u)&&u in o_)return ey[a]=s[u];return a}var s_=wl("animationend"),l_=wl("animationiteration"),u_=wl("animationstart"),MT=wl("transitionrun"),AT=wl("transitionstart"),TT=wl("transitioncancel"),c_=wl("transitionend"),h_=new Map,ty="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ty.push("scrollEnd");function Ni(a,s){h_.set(a,s),qn(s,[a])}var d_=new WeakMap;function di(a,s){if(typeof a=="object"&&a!==null){var u=d_.get(a);return u!==void 0?u:(s={value:a,source:s,stack:Fo(s)},d_.set(a,s),s)}return{value:a,source:s,stack:Fo(s)}}var fi=[],Xu=0,ny=0;function Tm(){for(var a=Xu,s=ny=Xu=0;s<a;){var u=fi[s];fi[s++]=null;var h=fi[s];fi[s++]=null;var g=fi[s];fi[s++]=null;var b=fi[s];if(fi[s++]=null,h!==null&&g!==null){var E=h.pending;E===null?g.next=g:(g.next=E.next,E.next=g),h.pending=g}b!==0&&f_(u,g,b)}}function Dm(a,s,u,h){fi[Xu++]=a,fi[Xu++]=s,fi[Xu++]=u,fi[Xu++]=h,ny|=h,a.lanes|=h,a=a.alternate,a!==null&&(a.lanes|=h)}function ry(a,s,u,h){return Dm(a,s,u,h),Lm(a)}function Yu(a,s){return Dm(a,null,null,s),Lm(a)}function f_(a,s,u){a.lanes|=u;var h=a.alternate;h!==null&&(h.lanes|=u);for(var g=!1,b=a.return;b!==null;)b.childLanes|=u,h=b.alternate,h!==null&&(h.childLanes|=u),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(g=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,g&&s!==null&&(g=31-pn(u),a=b.hiddenUpdates,h=a[g],h===null?a[g]=[s]:h.push(s),s.lane=u|536870912),b):null}function Lm(a){if(50<bd)throw bd=0,ub=null,Error(r(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var Qu={};function DT(a,s,u,h){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(a,s,u,h){return new DT(a,s,u,h)}function iy(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ga(a,s){var u=a.alternate;return u===null?(u=$r(a.tag,s,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=s,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,s=a.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function m_(a,s){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,s=u.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function Rm(a,s,u,h,g,b){var E=0;if(h=a,typeof a=="function")iy(a)&&(E=1);else if(typeof a=="string")E=RD(a,u,Ae.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case C:return a=$r(31,u,s,g),a.elementType=C,a.lanes=b,a;case S:return El(u.children,g,b,s);case R:E=8,g|=24;break;case I:return a=$r(12,u,s,g|2),a.elementType=I,a.lanes=b,a;case ie:return a=$r(13,u,s,g),a.elementType=ie,a.lanes=b,a;case B:return a=$r(19,u,s,g),a.elementType=B,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case L:case z:E=10;break e;case j:E=9;break e;case G:E=11;break e;case M:E=14;break e;case A:E=16,h=null;break e}E=29,u=Error(r(130,a===null?"null":typeof a,"")),h=null}return s=$r(E,u,s,g),s.elementType=a,s.type=h,s.lanes=b,s}function El(a,s,u,h){return a=$r(7,a,h,s),a.lanes=u,a}function ay(a,s,u){return a=$r(6,a,null,s),a.lanes=u,a}function oy(a,s,u){return s=$r(4,a.children!==null?a.children:[],a.key,s),s.lanes=u,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var Ju=[],Zu=0,Im=null,Bm=0,mi=[],pi=0,Sl=null,Wa=1,Xa="";function kl(a,s){Ju[Zu++]=Bm,Ju[Zu++]=Im,Im=a,Bm=s}function p_(a,s,u){mi[pi++]=Wa,mi[pi++]=Xa,mi[pi++]=Sl,Sl=a;var h=Wa;a=Xa;var g=32-pn(h)-1;h&=~(1<<g),u+=1;var b=32-pn(s)+g;if(30<b){var E=g-g%5;b=(h&(1<<E)-1).toString(32),h>>=E,g-=E,Wa=1<<32-pn(s)+g|u<<g|h,Xa=b+a}else Wa=1<<b|u<<g|h,Xa=a}function sy(a){a.return!==null&&(kl(a,1),p_(a,1,0))}function ly(a){for(;a===Im;)Im=Ju[--Zu],Ju[Zu]=null,Bm=Ju[--Zu],Ju[Zu]=null;for(;a===Sl;)Sl=mi[--pi],mi[pi]=null,Xa=mi[--pi],mi[pi]=null,Wa=mi[--pi],mi[pi]=null}var xr=null,sn=null,At=!1,Cl=null,sa=!1,uy=Error(r(519));function Ml(a){var s=Error(r(418,""));throw Yh(di(s,a)),uy}function g_(a){var s=a.stateNode,u=a.type,h=a.memoizedProps;switch(s[pe]=a,s[_e]=h,u){case"dialog":ht("cancel",s),ht("close",s);break;case"iframe":case"object":case"embed":ht("load",s);break;case"video":case"audio":for(u=0;u<_d.length;u++)ht(_d[u],s);break;case"source":ht("error",s);break;case"img":case"image":case"link":ht("error",s),ht("load",s);break;case"details":ht("toggle",s);break;case"input":ht("invalid",s),hl(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Pu(s);break;case"select":ht("invalid",s);break;case"textarea":ht("invalid",s),dl(s,h.value,h.defaultValue,h.children),Pu(s)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||h.suppressHydrationWarning===!0||I5(s.textContent,u)?(h.popover!=null&&(ht("beforetoggle",s),ht("toggle",s)),h.onScroll!=null&&ht("scroll",s),h.onScrollEnd!=null&&ht("scrollend",s),h.onClick!=null&&(s.onclick=mp),s=!0):s=!1,s||Ml(a)}function y_(a){for(xr=a.return;xr;)switch(xr.tag){case 5:case 13:sa=!1;return;case 27:case 3:sa=!0;return;default:xr=xr.return}}function Wh(a){if(a!==xr)return!1;if(!At)return y_(a),At=!0,!1;var s=a.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||kb(a.type,a.memoizedProps)),u=!u),u&&sn&&Ml(a),y_(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(s===0){sn=zi(a.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++;a=a.nextSibling}sn=null}}else s===27?(s=sn,is(a.type)?(a=Tb,Tb=null,sn=a):sn=s):sn=xr?zi(a.stateNode.nextSibling):null;return!0}function Xh(){sn=xr=null,At=!1}function b_(){var a=Cl;return a!==null&&(Lr===null?Lr=a:Lr.push.apply(Lr,a),Cl=null),a}function Yh(a){Cl===null?Cl=[a]:Cl.push(a)}var cy=se(null),Al=null,Ya=null;function $o(a,s,u){ce(cy,s._currentValue),s._currentValue=u}function Qa(a){a._currentValue=cy.current,de(cy)}function hy(a,s,u){for(;a!==null;){var h=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),a===u)break;a=a.return}}function dy(a,s,u,h){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var b=g.dependencies;if(b!==null){var E=g.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=g;for(var F=0;F<s.length;F++)if(k.context===s[F]){b.lanes|=u,k=b.alternate,k!==null&&(k.lanes|=u),hy(b.return,u,a),h||(E=null);break e}b=k.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(r(341));E.lanes|=u,b=E.alternate,b!==null&&(b.lanes|=u),hy(E,u,a),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===a){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Qh(a,s,u,h){a=null;for(var g=s,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var k=g.type;Kr(g.pendingProps.value,E.value)||(a!==null?a.push(k):a=[k])}}else if(g===on.current){if(E=g.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(Cd):a=[Cd])}g=g.return}a!==null&&dy(s,a,u,h),s.flags|=262144}function Om(a){for(a=a.firstContext;a!==null;){if(!Kr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Tl(a){Al=a,Ya=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function nr(a){return v_(Al,a)}function Nm(a,s){return Al===null&&Tl(a),v_(a,s)}function v_(a,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},Ya===null){if(a===null)throw Error(r(308));Ya=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else Ya=Ya.next=s;return u}var LT=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(u,h){a.push(h)}};this.abort=function(){s.aborted=!0,a.forEach(function(u){return u()})}},RT=t.unstable_scheduleCallback,IT=t.unstable_NormalPriority,Cn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fy(){return{controller:new LT,data:new Map,refCount:0}}function Jh(a){a.refCount--,a.refCount===0&&RT(IT,function(){a.controller.abort()})}var Zh=null,my=0,ec=0,tc=null;function BT(a,s){if(Zh===null){var u=Zh=[];my=0,ec=gb(),tc={status:"pending",value:void 0,then:function(h){u.push(h)}}}return my++,s.then(__,__),s}function __(){if(--my===0&&Zh!==null){tc!==null&&(tc.status="fulfilled");var a=Zh;Zh=null,ec=0,tc=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function OT(a,s){var u=[],h={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return a.then(function(){h.status="fulfilled",h.value=s;for(var g=0;g<u.length;g++)(0,u[g])(s)},function(g){for(h.status="rejected",h.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),h}var x_=W.S;W.S=function(a,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&BT(a,s),x_!==null&&x_(a,s)};var Dl=se(null);function py(){var a=Dl.current;return a!==null?a:Xt.pooledCache}function Pm(a,s){s===null?ce(Dl,Dl.current):ce(Dl,s.pool)}function w_(){var a=py();return a===null?null:{parent:Cn._currentValue,pool:a}}var ed=Error(r(460)),E_=Error(r(474)),zm=Error(r(542)),gy={then:function(){}};function S_(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Vm(){}function k_(a,s,u){switch(u=a[u],u===void 0?a.push(s):u!==s&&(s.then(Vm,Vm),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,M_(a),a;default:if(typeof s.status=="string")s.then(Vm,Vm);else{if(a=Xt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=s,a.status="pending",a.then(function(h){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=h}},function(h){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,M_(a),a}throw td=s,ed}}var td=null;function C_(){if(td===null)throw Error(r(459));var a=td;return td=null,a}function M_(a){if(a===ed||a===zm)throw Error(r(483))}var qo=!1;function yy(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function by(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function jo(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ho(a,s,u){var h=a.updateQueue;if(h===null)return null;if(h=h.shared,(Pt&2)!==0){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,s=Lm(a),f_(a,null,u),s}return Dm(a,h,s,u),Lm(a)}function nd(a,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var h=s.lanes;h&=a.pendingLanes,u|=h,s.lanes=u,Ji(a,u)}}function vy(a,s){var u=a.updateQueue,h=a.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var g=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var E={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?g=b=E:b=b.next=E,u=u.next}while(u!==null);b===null?g=b=s:b=b.next=s}else g=b=s;u={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=s:a.next=s,u.lastBaseUpdate=s}var _y=!1;function rd(){if(_y){var a=tc;if(a!==null)throw a}}function id(a,s,u,h){_y=!1;var g=a.updateQueue;qo=!1;var b=g.firstBaseUpdate,E=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var F=k,J=F.next;F.next=null,E===null?b=J:E.next=J,E=F;var le=a.alternate;le!==null&&(le=le.updateQueue,k=le.lastBaseUpdate,k!==E&&(k===null?le.firstBaseUpdate=J:k.next=J,le.lastBaseUpdate=F))}if(b!==null){var fe=g.baseState;E=0,le=J=F=null,k=b;do{var ee=k.lane&-536870913,te=ee!==k.lane;if(te?(vt&ee)===ee:(h&ee)===ee){ee!==0&&ee===ec&&(_y=!0),le!==null&&(le=le.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var We=a,$e=k;ee=s;var qt=u;switch($e.tag){case 1:if(We=$e.payload,typeof We=="function"){fe=We.call(qt,fe,ee);break e}fe=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=$e.payload,ee=typeof We=="function"?We.call(qt,fe,ee):We,ee==null)break e;fe=p({},fe,ee);break e;case 2:qo=!0}}ee=k.callback,ee!==null&&(a.flags|=64,te&&(a.flags|=8192),te=g.callbacks,te===null?g.callbacks=[ee]:te.push(ee))}else te={lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},le===null?(J=le=te,F=fe):le=le.next=te,E|=ee;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;te=k,k=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);le===null&&(F=fe),g.baseState=F,g.firstBaseUpdate=J,g.lastBaseUpdate=le,b===null&&(g.shared.lanes=0),es|=E,a.lanes=E,a.memoizedState=fe}}function A_(a,s){if(typeof a!="function")throw Error(r(191,a));a.call(s)}function T_(a,s){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)A_(u[a],s)}var nc=se(null),Fm=se(0);function D_(a,s){a=io,ce(Fm,a),ce(nc,s),io=a|s.baseLanes}function xy(){ce(Fm,io),ce(nc,nc.current)}function wy(){io=Fm.current,de(nc),de(Fm)}var Go=0,st=null,Kt=null,yn=null,Um=!1,rc=!1,Ll=!1,Km=0,ad=0,ic=null,NT=0;function cn(){throw Error(r(321))}function Ey(a,s){if(s===null)return!1;for(var u=0;u<s.length&&u<a.length;u++)if(!Kr(a[u],s[u]))return!1;return!0}function Sy(a,s,u,h,g,b){return Go=b,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=a===null||a.memoizedState===null?f6:m6,Ll=!1,b=u(h,g),Ll=!1,rc&&(b=R_(s,u,h,g)),L_(a),b}function L_(a){W.H=Wm;var s=Kt!==null&&Kt.next!==null;if(Go=0,yn=Kt=st=null,Um=!1,ad=0,ic=null,s)throw Error(r(300));a===null||Pn||(a=a.dependencies,a!==null&&Om(a)&&(Pn=!0))}function R_(a,s,u,h){st=a;var g=0;do{if(rc&&(ic=null),ad=0,rc=!1,25<=g)throw Error(r(301));if(g+=1,yn=Kt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}W.H=$T,b=s(u,h)}while(rc);return b}function PT(){var a=W.H,s=a.useState()[0];return s=typeof s.then=="function"?od(s):s,a=a.useState()[0],(Kt!==null?Kt.memoizedState:null)!==a&&(st.flags|=1024),s}function ky(){var a=Km!==0;return Km=0,a}function Cy(a,s,u){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~u}function My(a){if(Um){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}Um=!1}Go=0,yn=Kt=st=null,rc=!1,ad=Km=0,ic=null}function Tr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?st.memoizedState=yn=a:yn=yn.next=a,yn}function bn(){if(Kt===null){var a=st.alternate;a=a!==null?a.memoizedState:null}else a=Kt.next;var s=yn===null?st.memoizedState:yn.next;if(s!==null)yn=s,Kt=a;else{if(a===null)throw st.alternate===null?Error(r(467)):Error(r(310));Kt=a,a={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},yn===null?st.memoizedState=yn=a:yn=yn.next=a}return yn}function Ay(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function od(a){var s=ad;return ad+=1,ic===null&&(ic=[]),a=k_(ic,a,s),s=st,(yn===null?s.memoizedState:yn.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?f6:m6),a}function $m(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return od(a);if(a.$$typeof===z)return nr(a)}throw Error(r(438,String(a)))}function Ty(a){var s=null,u=st.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var h=st.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=Ay(),st.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(a),h=0;h<a;h++)u[h]=P;return s.index++,u}function Ja(a,s){return typeof s=="function"?s(a):s}function qm(a){var s=bn();return Dy(s,Kt,a)}function Dy(a,s,u){var h=a.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var g=a.baseQueue,b=h.pending;if(b!==null){if(g!==null){var E=g.next;g.next=b.next,b.next=E}s.baseQueue=g=b,h.pending=null}if(b=a.baseState,g===null)a.memoizedState=b;else{s=g.next;var k=E=null,F=null,J=s,le=!1;do{var fe=J.lane&-536870913;if(fe!==J.lane?(vt&fe)===fe:(Go&fe)===fe){var ee=J.revertLane;if(ee===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),fe===ec&&(le=!0);else if((Go&ee)===ee){J=J.next,ee===ec&&(le=!0);continue}else fe={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},F===null?(k=F=fe,E=b):F=F.next=fe,st.lanes|=ee,es|=ee;fe=J.action,Ll&&u(b,fe),b=J.hasEagerState?J.eagerState:u(b,fe)}else ee={lane:fe,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},F===null?(k=F=ee,E=b):F=F.next=ee,st.lanes|=fe,es|=fe;J=J.next}while(J!==null&&J!==s);if(F===null?E=b:F.next=k,!Kr(b,a.memoizedState)&&(Pn=!0,le&&(u=tc,u!==null)))throw u;a.memoizedState=b,a.baseState=E,a.baseQueue=F,h.lastRenderedState=b}return g===null&&(h.lanes=0),[a.memoizedState,h.dispatch]}function Ly(a){var s=bn(),u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var h=u.dispatch,g=u.pending,b=s.memoizedState;if(g!==null){u.pending=null;var E=g=g.next;do b=a(b,E.action),E=E.next;while(E!==g);Kr(b,s.memoizedState)||(Pn=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),u.lastRenderedState=b}return[b,h]}function I_(a,s,u){var h=st,g=bn(),b=At;if(b){if(u===void 0)throw Error(r(407));u=u()}else u=s();var E=!Kr((Kt||g).memoizedState,u);E&&(g.memoizedState=u,Pn=!0),g=g.queue;var k=N_.bind(null,h,g,a);if(sd(2048,8,k,[a]),g.getSnapshot!==s||E||yn!==null&&yn.memoizedState.tag&1){if(h.flags|=2048,ac(9,jm(),O_.bind(null,h,g,u,s),null),Xt===null)throw Error(r(349));b||(Go&124)!==0||B_(h,s,u)}return u}function B_(a,s,u){a.flags|=16384,a={getSnapshot:s,value:u},s=st.updateQueue,s===null?(s=Ay(),st.updateQueue=s,s.stores=[a]):(u=s.stores,u===null?s.stores=[a]:u.push(a))}function O_(a,s,u,h){s.value=u,s.getSnapshot=h,P_(s)&&z_(a)}function N_(a,s,u){return u(function(){P_(s)&&z_(a)})}function P_(a){var s=a.getSnapshot;a=a.value;try{var u=s();return!Kr(a,u)}catch{return!0}}function z_(a){var s=Yu(a,2);s!==null&&Wr(s,a,2)}function Ry(a){var s=Tr();if(typeof a=="function"){var u=a;if(a=u(),Ll){tr(!0);try{u()}finally{tr(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:a},s}function V_(a,s,u,h){return a.baseState=u,Dy(a,Kt,typeof h=="function"?h:Ja)}function zT(a,s,u,h,g){if(Gm(a))throw Error(r(485));if(a=s.action,a!==null){var b={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};W.T!==null?u(!0):b.isTransition=!1,h(b),u=s.pending,u===null?(b.next=s.pending=b,F_(s,b)):(b.next=u.next,s.pending=u.next=b)}}function F_(a,s){var u=s.action,h=s.payload,g=a.state;if(s.isTransition){var b=W.T,E={};W.T=E;try{var k=u(g,h),F=W.S;F!==null&&F(E,k),U_(a,s,k)}catch(J){Iy(a,s,J)}finally{W.T=b}}else try{b=u(g,h),U_(a,s,b)}catch(J){Iy(a,s,J)}}function U_(a,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){K_(a,s,h)},function(h){return Iy(a,s,h)}):K_(a,s,u)}function K_(a,s,u){s.status="fulfilled",s.value=u,$_(s),a.state=u,s=a.pending,s!==null&&(u=s.next,u===s?a.pending=null:(u=u.next,s.next=u,F_(a,u)))}function Iy(a,s,u){var h=a.pending;if(a.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=u,$_(s),s=s.next;while(s!==h)}a.action=null}function $_(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function q_(a,s){return s}function j_(a,s){if(At){var u=Xt.formState;if(u!==null){e:{var h=st;if(At){if(sn){t:{for(var g=sn,b=sa;g.nodeType!==8;){if(!b){g=null;break t}if(g=zi(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){sn=zi(g.nextSibling),h=g.data==="F!";break e}}Ml(h)}h=!1}h&&(s=u[0])}}return u=Tr(),u.memoizedState=u.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:q_,lastRenderedState:s},u.queue=h,u=c6.bind(null,st,h),h.dispatch=u,h=Ry(!1),b=zy.bind(null,st,!1,h.queue),h=Tr(),g={state:s,dispatch:null,action:a,pending:null},h.queue=g,u=zT.bind(null,st,g,b,u),g.dispatch=u,h.memoizedState=a,[s,u,!1]}function H_(a){var s=bn();return G_(s,Kt,a)}function G_(a,s,u){if(s=Dy(a,s,q_)[0],a=qm(Ja)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=od(s)}catch(E){throw E===ed?zm:E}else h=s;s=bn();var g=s.queue,b=g.dispatch;return u!==s.memoizedState&&(st.flags|=2048,ac(9,jm(),VT.bind(null,g,u),null)),[h,b,a]}function VT(a,s){a.action=s}function W_(a){var s=bn(),u=Kt;if(u!==null)return G_(s,u,a);bn(),s=s.memoizedState,u=bn();var h=u.queue.dispatch;return u.memoizedState=a,[s,h,!1]}function ac(a,s,u,h){return a={tag:a,create:u,deps:h,inst:s,next:null},s=st.updateQueue,s===null&&(s=Ay(),st.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=a.next=a:(h=u.next,u.next=a,a.next=h,s.lastEffect=a),a}function jm(){return{destroy:void 0,resource:void 0}}function X_(){return bn().memoizedState}function Hm(a,s,u,h){var g=Tr();h=h===void 0?null:h,st.flags|=a,g.memoizedState=ac(1|s,jm(),u,h)}function sd(a,s,u,h){var g=bn();h=h===void 0?null:h;var b=g.memoizedState.inst;Kt!==null&&h!==null&&Ey(h,Kt.memoizedState.deps)?g.memoizedState=ac(s,b,u,h):(st.flags|=a,g.memoizedState=ac(1|s,b,u,h))}function Y_(a,s){Hm(8390656,8,a,s)}function Q_(a,s){sd(2048,8,a,s)}function J_(a,s){return sd(4,2,a,s)}function Z_(a,s){return sd(4,4,a,s)}function e6(a,s){if(typeof s=="function"){a=a();var u=s(a);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function t6(a,s,u){u=u!=null?u.concat([a]):null,sd(4,4,e6.bind(null,s,a),u)}function By(){}function n6(a,s){var u=bn();s=s===void 0?null:s;var h=u.memoizedState;return s!==null&&Ey(s,h[1])?h[0]:(u.memoizedState=[a,s],a)}function r6(a,s){var u=bn();s=s===void 0?null:s;var h=u.memoizedState;if(s!==null&&Ey(s,h[1]))return h[0];if(h=a(),Ll){tr(!0);try{a()}finally{tr(!1)}}return u.memoizedState=[h,s],h}function Oy(a,s,u){return u===void 0||(Go&1073741824)!==0?a.memoizedState=s:(a.memoizedState=u,a=o5(),st.lanes|=a,es|=a,u)}function i6(a,s,u,h){return Kr(u,s)?u:nc.current!==null?(a=Oy(a,u,h),Kr(a,s)||(Pn=!0),a):(Go&42)===0?(Pn=!0,a.memoizedState=u):(a=o5(),st.lanes|=a,es|=a,s)}function a6(a,s,u,h,g){var b=ue.p;ue.p=b!==0&&8>b?b:8;var E=W.T,k={};W.T=k,zy(a,!1,s,u);try{var F=g(),J=W.S;if(J!==null&&J(k,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var le=OT(F,h);ld(a,s,le,Gr(a))}else ld(a,s,h,Gr(a))}catch(fe){ld(a,s,{then:function(){},status:"rejected",reason:fe},Gr())}finally{ue.p=b,W.T=E}}function FT(){}function Ny(a,s,u,h){if(a.tag!==5)throw Error(r(476));var g=o6(a).queue;a6(a,g,s,ve,u===null?FT:function(){return s6(a),u(h)})}function o6(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:ve},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:u},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function s6(a){var s=o6(a).next.queue;ld(a,s,{},Gr())}function Py(){return nr(Cd)}function l6(){return bn().memoizedState}function u6(){return bn().memoizedState}function UT(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var u=Gr();a=jo(u);var h=Ho(s,a,u);h!==null&&(Wr(h,s,u),nd(h,s,u)),s={cache:fy()},a.payload=s;return}s=s.return}}function KT(a,s,u){var h=Gr();u={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Gm(a)?h6(s,u):(u=ry(a,s,u,h),u!==null&&(Wr(u,a,h),d6(u,s,h)))}function c6(a,s,u){var h=Gr();ld(a,s,u,h)}function ld(a,s,u,h){var g={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Gm(a))h6(s,g);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var E=s.lastRenderedState,k=b(E,u);if(g.hasEagerState=!0,g.eagerState=k,Kr(k,E))return Dm(a,s,g,0),Xt===null&&Tm(),!1}catch{}finally{}if(u=ry(a,s,g,h),u!==null)return Wr(u,a,h),d6(u,s,h),!0}return!1}function zy(a,s,u,h){if(h={lane:2,revertLane:gb(),action:h,hasEagerState:!1,eagerState:null,next:null},Gm(a)){if(s)throw Error(r(479))}else s=ry(a,u,h,2),s!==null&&Wr(s,a,2)}function Gm(a){var s=a.alternate;return a===st||s!==null&&s===st}function h6(a,s){rc=Um=!0;var u=a.pending;u===null?s.next=s:(s.next=u.next,u.next=s),a.pending=s}function d6(a,s,u){if((u&4194048)!==0){var h=s.lanes;h&=a.pendingLanes,u|=h,s.lanes=u,Ji(a,u)}}var Wm={readContext:nr,use:$m,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn},f6={readContext:nr,use:$m,useCallback:function(a,s){return Tr().memoizedState=[a,s===void 0?null:s],a},useContext:nr,useEffect:Y_,useImperativeHandle:function(a,s,u){u=u!=null?u.concat([a]):null,Hm(4194308,4,e6.bind(null,s,a),u)},useLayoutEffect:function(a,s){return Hm(4194308,4,a,s)},useInsertionEffect:function(a,s){Hm(4,2,a,s)},useMemo:function(a,s){var u=Tr();s=s===void 0?null:s;var h=a();if(Ll){tr(!0);try{a()}finally{tr(!1)}}return u.memoizedState=[h,s],h},useReducer:function(a,s,u){var h=Tr();if(u!==void 0){var g=u(s);if(Ll){tr(!0);try{u(s)}finally{tr(!1)}}}else g=s;return h.memoizedState=h.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},h.queue=a,a=a.dispatch=KT.bind(null,st,a),[h.memoizedState,a]},useRef:function(a){var s=Tr();return a={current:a},s.memoizedState=a},useState:function(a){a=Ry(a);var s=a.queue,u=c6.bind(null,st,s);return s.dispatch=u,[a.memoizedState,u]},useDebugValue:By,useDeferredValue:function(a,s){var u=Tr();return Oy(u,a,s)},useTransition:function(){var a=Ry(!1);return a=a6.bind(null,st,a.queue,!0,!1),Tr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,u){var h=st,g=Tr();if(At){if(u===void 0)throw Error(r(407));u=u()}else{if(u=s(),Xt===null)throw Error(r(349));(vt&124)!==0||B_(h,s,u)}g.memoizedState=u;var b={value:u,getSnapshot:s};return g.queue=b,Y_(N_.bind(null,h,b,a),[a]),h.flags|=2048,ac(9,jm(),O_.bind(null,h,b,u,s),null),u},useId:function(){var a=Tr(),s=Xt.identifierPrefix;if(At){var u=Xa,h=Wa;u=(h&~(1<<32-pn(h)-1)).toString(32)+u,s="«"+s+"R"+u,u=Km++,0<u&&(s+="H"+u.toString(32)),s+="»"}else u=NT++,s="«"+s+"r"+u.toString(32)+"»";return a.memoizedState=s},useHostTransitionStatus:Py,useFormState:j_,useActionState:j_,useOptimistic:function(a){var s=Tr();s.memoizedState=s.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=zy.bind(null,st,!0,u),u.dispatch=s,[a,s]},useMemoCache:Ty,useCacheRefresh:function(){return Tr().memoizedState=UT.bind(null,st)}},m6={readContext:nr,use:$m,useCallback:n6,useContext:nr,useEffect:Q_,useImperativeHandle:t6,useInsertionEffect:J_,useLayoutEffect:Z_,useMemo:r6,useReducer:qm,useRef:X_,useState:function(){return qm(Ja)},useDebugValue:By,useDeferredValue:function(a,s){var u=bn();return i6(u,Kt.memoizedState,a,s)},useTransition:function(){var a=qm(Ja)[0],s=bn().memoizedState;return[typeof a=="boolean"?a:od(a),s]},useSyncExternalStore:I_,useId:l6,useHostTransitionStatus:Py,useFormState:H_,useActionState:H_,useOptimistic:function(a,s){var u=bn();return V_(u,Kt,a,s)},useMemoCache:Ty,useCacheRefresh:u6},$T={readContext:nr,use:$m,useCallback:n6,useContext:nr,useEffect:Q_,useImperativeHandle:t6,useInsertionEffect:J_,useLayoutEffect:Z_,useMemo:r6,useReducer:Ly,useRef:X_,useState:function(){return Ly(Ja)},useDebugValue:By,useDeferredValue:function(a,s){var u=bn();return Kt===null?Oy(u,a,s):i6(u,Kt.memoizedState,a,s)},useTransition:function(){var a=Ly(Ja)[0],s=bn().memoizedState;return[typeof a=="boolean"?a:od(a),s]},useSyncExternalStore:I_,useId:l6,useHostTransitionStatus:Py,useFormState:W_,useActionState:W_,useOptimistic:function(a,s){var u=bn();return Kt!==null?V_(u,Kt,a,s):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:Ty,useCacheRefresh:u6},oc=null,ud=0;function Xm(a){var s=ud;return ud+=1,oc===null&&(oc=[]),k_(oc,a,s)}function cd(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function Ym(a,s){throw s.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(s),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function p6(a){var s=a._init;return s(a._payload)}function g6(a){function s(H,$){if(a){var Q=H.deletions;Q===null?(H.deletions=[$],H.flags|=16):Q.push($)}}function u(H,$){if(!a)return null;for(;$!==null;)s(H,$),$=$.sibling;return null}function h(H){for(var $=new Map;H!==null;)H.key!==null?$.set(H.key,H):$.set(H.index,H),H=H.sibling;return $}function g(H,$){return H=Ga(H,$),H.index=0,H.sibling=null,H}function b(H,$,Q){return H.index=Q,a?(Q=H.alternate,Q!==null?(Q=Q.index,Q<$?(H.flags|=67108866,$):Q):(H.flags|=67108866,$)):(H.flags|=1048576,$)}function E(H){return a&&H.alternate===null&&(H.flags|=67108866),H}function k(H,$,Q,he){return $===null||$.tag!==6?($=ay(Q,H.mode,he),$.return=H,$):($=g($,Q),$.return=H,$)}function F(H,$,Q,he){var Te=Q.type;return Te===S?le(H,$,Q.props.children,he,Q.key):$!==null&&($.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&p6(Te)===$.type)?($=g($,Q.props),cd($,Q),$.return=H,$):($=Rm(Q.type,Q.key,Q.props,null,H.mode,he),cd($,Q),$.return=H,$)}function J(H,$,Q,he){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=oy(Q,H.mode,he),$.return=H,$):($=g($,Q.children||[]),$.return=H,$)}function le(H,$,Q,he,Te){return $===null||$.tag!==7?($=El(Q,H.mode,he,Te),$.return=H,$):($=g($,Q),$.return=H,$)}function fe(H,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=ay(""+$,H.mode,Q),$.return=H,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case v:return Q=Rm($.type,$.key,$.props,null,H.mode,Q),cd(Q,$),Q.return=H,Q;case x:return $=oy($,H.mode,Q),$.return=H,$;case A:var he=$._init;return $=he($._payload),fe(H,$,Q)}if(Ke($)||U($))return $=El($,H.mode,Q,null),$.return=H,$;if(typeof $.then=="function")return fe(H,Xm($),Q);if($.$$typeof===z)return fe(H,Nm(H,$),Q);Ym(H,$)}return null}function ee(H,$,Q,he){var Te=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Te!==null?null:k(H,$,""+Q,he);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case v:return Q.key===Te?F(H,$,Q,he):null;case x:return Q.key===Te?J(H,$,Q,he):null;case A:return Te=Q._init,Q=Te(Q._payload),ee(H,$,Q,he)}if(Ke(Q)||U(Q))return Te!==null?null:le(H,$,Q,he,null);if(typeof Q.then=="function")return ee(H,$,Xm(Q),he);if(Q.$$typeof===z)return ee(H,$,Nm(H,Q),he);Ym(H,Q)}return null}function te(H,$,Q,he,Te){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return H=H.get(Q)||null,k($,H,""+he,Te);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case v:return H=H.get(he.key===null?Q:he.key)||null,F($,H,he,Te);case x:return H=H.get(he.key===null?Q:he.key)||null,J($,H,he,Te);case A:var ut=he._init;return he=ut(he._payload),te(H,$,Q,he,Te)}if(Ke(he)||U(he))return H=H.get(Q)||null,le($,H,he,Te,null);if(typeof he.then=="function")return te(H,$,Q,Xm(he),Te);if(he.$$typeof===z)return te(H,$,Q,Nm($,he),Te);Ym($,he)}return null}function We(H,$,Q,he){for(var Te=null,ut=null,ze=$,je=$=0,Vn=null;ze!==null&&je<Q.length;je++){ze.index>je?(Vn=ze,ze=null):Vn=ze.sibling;var St=ee(H,ze,Q[je],he);if(St===null){ze===null&&(ze=Vn);break}a&&ze&&St.alternate===null&&s(H,ze),$=b(St,$,je),ut===null?Te=St:ut.sibling=St,ut=St,ze=Vn}if(je===Q.length)return u(H,ze),At&&kl(H,je),Te;if(ze===null){for(;je<Q.length;je++)ze=fe(H,Q[je],he),ze!==null&&($=b(ze,$,je),ut===null?Te=ze:ut.sibling=ze,ut=ze);return At&&kl(H,je),Te}for(ze=h(ze);je<Q.length;je++)Vn=te(ze,H,je,Q[je],he),Vn!==null&&(a&&Vn.alternate!==null&&ze.delete(Vn.key===null?je:Vn.key),$=b(Vn,$,je),ut===null?Te=Vn:ut.sibling=Vn,ut=Vn);return a&&ze.forEach(function(us){return s(H,us)}),At&&kl(H,je),Te}function $e(H,$,Q,he){if(Q==null)throw Error(r(151));for(var Te=null,ut=null,ze=$,je=$=0,Vn=null,St=Q.next();ze!==null&&!St.done;je++,St=Q.next()){ze.index>je?(Vn=ze,ze=null):Vn=ze.sibling;var us=ee(H,ze,St.value,he);if(us===null){ze===null&&(ze=Vn);break}a&&ze&&us.alternate===null&&s(H,ze),$=b(us,$,je),ut===null?Te=us:ut.sibling=us,ut=us,ze=Vn}if(St.done)return u(H,ze),At&&kl(H,je),Te;if(ze===null){for(;!St.done;je++,St=Q.next())St=fe(H,St.value,he),St!==null&&($=b(St,$,je),ut===null?Te=St:ut.sibling=St,ut=St);return At&&kl(H,je),Te}for(ze=h(ze);!St.done;je++,St=Q.next())St=te(ze,H,je,St.value,he),St!==null&&(a&&St.alternate!==null&&ze.delete(St.key===null?je:St.key),$=b(St,$,je),ut===null?Te=St:ut.sibling=St,ut=St);return a&&ze.forEach(function(qD){return s(H,qD)}),At&&kl(H,je),Te}function qt(H,$,Q,he){if(typeof Q=="object"&&Q!==null&&Q.type===S&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case v:e:{for(var Te=Q.key;$!==null;){if($.key===Te){if(Te=Q.type,Te===S){if($.tag===7){u(H,$.sibling),he=g($,Q.props.children),he.return=H,H=he;break e}}else if($.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&p6(Te)===$.type){u(H,$.sibling),he=g($,Q.props),cd(he,Q),he.return=H,H=he;break e}u(H,$);break}else s(H,$);$=$.sibling}Q.type===S?(he=El(Q.props.children,H.mode,he,Q.key),he.return=H,H=he):(he=Rm(Q.type,Q.key,Q.props,null,H.mode,he),cd(he,Q),he.return=H,H=he)}return E(H);case x:e:{for(Te=Q.key;$!==null;){if($.key===Te)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){u(H,$.sibling),he=g($,Q.children||[]),he.return=H,H=he;break e}else{u(H,$);break}else s(H,$);$=$.sibling}he=oy(Q,H.mode,he),he.return=H,H=he}return E(H);case A:return Te=Q._init,Q=Te(Q._payload),qt(H,$,Q,he)}if(Ke(Q))return We(H,$,Q,he);if(U(Q)){if(Te=U(Q),typeof Te!="function")throw Error(r(150));return Q=Te.call(Q),$e(H,$,Q,he)}if(typeof Q.then=="function")return qt(H,$,Xm(Q),he);if(Q.$$typeof===z)return qt(H,$,Nm(H,Q),he);Ym(H,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,$!==null&&$.tag===6?(u(H,$.sibling),he=g($,Q),he.return=H,H=he):(u(H,$),he=ay(Q,H.mode,he),he.return=H,H=he),E(H)):u(H,$)}return function(H,$,Q,he){try{ud=0;var Te=qt(H,$,Q,he);return oc=null,Te}catch(ze){if(ze===ed||ze===zm)throw ze;var ut=$r(29,ze,null,H.mode);return ut.lanes=he,ut.return=H,ut}finally{}}}var sc=g6(!0),y6=g6(!1),gi=se(null),la=null;function Wo(a){var s=a.alternate;ce(Mn,Mn.current&1),ce(gi,a),la===null&&(s===null||nc.current!==null||s.memoizedState!==null)&&(la=a)}function b6(a){if(a.tag===22){if(ce(Mn,Mn.current),ce(gi,a),la===null){var s=a.alternate;s!==null&&s.memoizedState!==null&&(la=a)}}else Xo()}function Xo(){ce(Mn,Mn.current),ce(gi,gi.current)}function Za(a){de(gi),la===a&&(la=null),de(Mn)}var Mn=se(0);function Qm(a){for(var s=a;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Ab(u)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Vy(a,s,u,h){s=a.memoizedState,u=u(h,s),u=u==null?s:p({},s,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var Fy={enqueueSetState:function(a,s,u){a=a._reactInternals;var h=Gr(),g=jo(h);g.payload=s,u!=null&&(g.callback=u),s=Ho(a,g,h),s!==null&&(Wr(s,a,h),nd(s,a,h))},enqueueReplaceState:function(a,s,u){a=a._reactInternals;var h=Gr(),g=jo(h);g.tag=1,g.payload=s,u!=null&&(g.callback=u),s=Ho(a,g,h),s!==null&&(Wr(s,a,h),nd(s,a,h))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var u=Gr(),h=jo(u);h.tag=2,s!=null&&(h.callback=s),s=Ho(a,h,u),s!==null&&(Wr(s,a,u),nd(s,a,u))}};function v6(a,s,u,h,g,b,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(h,b,E):s.prototype&&s.prototype.isPureReactComponent?!Hh(u,h)||!Hh(g,b):!0}function _6(a,s,u,h){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,h),s.state!==a&&Fy.enqueueReplaceState(s,s.state,null)}function Rl(a,s){var u=s;if("ref"in s){u={};for(var h in s)h!=="ref"&&(u[h]=s[h])}if(a=a.defaultProps){u===s&&(u=p({},u));for(var g in a)u[g]===void 0&&(u[g]=a[g])}return u}var Jm=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function x6(a){Jm(a)}function w6(a){console.error(a)}function E6(a){Jm(a)}function Zm(a,s){try{var u=a.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function S6(a,s,u){try{var h=a.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Uy(a,s,u){return u=jo(u),u.tag=3,u.payload={element:null},u.callback=function(){Zm(a,s)},u}function k6(a){return a=jo(a),a.tag=3,a}function C6(a,s,u,h){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var b=h.value;a.payload=function(){return g(b)},a.callback=function(){S6(s,u,h)}}var E=u.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){S6(s,u,h),typeof g!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var k=h.stack;this.componentDidCatch(h.value,{componentStack:k!==null?k:""})})}function qT(a,s,u,h,g){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=u.alternate,s!==null&&Qh(s,u,g,!0),u=gi.current,u!==null){switch(u.tag){case 13:return la===null?hb():u.alternate===null&&ln===0&&(ln=3),u.flags&=-257,u.flags|=65536,u.lanes=g,h===gy?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([h]):s.add(h),fb(a,h,g)),!1;case 22:return u.flags|=65536,h===gy?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([h]):u.add(h)),fb(a,h,g)),!1}throw Error(r(435,u.tag))}return fb(a,h,g),hb(),!1}if(At)return s=gi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,h!==uy&&(a=Error(r(422),{cause:h}),Yh(di(a,u)))):(h!==uy&&(s=Error(r(423),{cause:h}),Yh(di(s,u))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,h=di(h,u),g=Uy(a.stateNode,h,g),vy(a,g),ln!==4&&(ln=2)),!1;var b=Error(r(520),{cause:h});if(b=di(b,u),yd===null?yd=[b]:yd.push(b),ln!==4&&(ln=2),s===null)return!0;h=di(h,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,a=g&-g,u.lanes|=a,a=Uy(u.stateNode,h,a),vy(u,a),!1;case 1:if(s=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ts===null||!ts.has(b))))return u.flags|=65536,g&=-g,u.lanes|=g,g=k6(g),C6(g,a,u,h),vy(u,g),!1}u=u.return}while(u!==null);return!1}var M6=Error(r(461)),Pn=!1;function Hn(a,s,u,h){s.child=a===null?y6(s,null,u,h):sc(s,a.child,u,h)}function A6(a,s,u,h,g){u=u.render;var b=s.ref;if("ref"in h){var E={};for(var k in h)k!=="ref"&&(E[k]=h[k])}else E=h;return Tl(s),h=Sy(a,s,u,E,b,g),k=ky(),a!==null&&!Pn?(Cy(a,s,g),eo(a,s,g)):(At&&k&&sy(s),s.flags|=1,Hn(a,s,h,g),s.child)}function T6(a,s,u,h,g){if(a===null){var b=u.type;return typeof b=="function"&&!iy(b)&&b.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=b,D6(a,s,b,h,g)):(a=Rm(u.type,null,h,s,s.mode,g),a.ref=s.ref,a.return=s,s.child=a)}if(b=a.child,!Xy(a,g)){var E=b.memoizedProps;if(u=u.compare,u=u!==null?u:Hh,u(E,h)&&a.ref===s.ref)return eo(a,s,g)}return s.flags|=1,a=Ga(b,h),a.ref=s.ref,a.return=s,s.child=a}function D6(a,s,u,h,g){if(a!==null){var b=a.memoizedProps;if(Hh(b,h)&&a.ref===s.ref)if(Pn=!1,s.pendingProps=h=b,Xy(a,g))(a.flags&131072)!==0&&(Pn=!0);else return s.lanes=a.lanes,eo(a,s,g)}return Ky(a,s,u,h,g)}function L6(a,s,u){var h=s.pendingProps,g=h.children,b=a!==null?a.memoizedState:null;if(h.mode==="hidden"){if((s.flags&128)!==0){if(h=b!==null?b.baseLanes|u:u,a!==null){for(g=s.child=a.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;s.childLanes=b&~h}else s.childLanes=0,s.child=null;return R6(a,s,h,u)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&Pm(s,b!==null?b.cachePool:null),b!==null?D_(s,b):xy(),b6(s);else return s.lanes=s.childLanes=536870912,R6(a,s,b!==null?b.baseLanes|u:u,u)}else b!==null?(Pm(s,b.cachePool),D_(s,b),Xo(),s.memoizedState=null):(a!==null&&Pm(s,null),xy(),Xo());return Hn(a,s,g,u),s.child}function R6(a,s,u,h){var g=py();return g=g===null?null:{parent:Cn._currentValue,pool:g},s.memoizedState={baseLanes:u,cachePool:g},a!==null&&Pm(s,null),xy(),b6(s),a!==null&&Qh(a,s,h,!0),null}function ep(a,s){var u=s.ref;if(u===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(a===null||a.ref!==u)&&(s.flags|=4194816)}}function Ky(a,s,u,h,g){return Tl(s),u=Sy(a,s,u,h,void 0,g),h=ky(),a!==null&&!Pn?(Cy(a,s,g),eo(a,s,g)):(At&&h&&sy(s),s.flags|=1,Hn(a,s,u,g),s.child)}function I6(a,s,u,h,g,b){return Tl(s),s.updateQueue=null,u=R_(s,h,u,g),L_(a),h=ky(),a!==null&&!Pn?(Cy(a,s,b),eo(a,s,b)):(At&&h&&sy(s),s.flags|=1,Hn(a,s,u,b),s.child)}function B6(a,s,u,h,g){if(Tl(s),s.stateNode===null){var b=Qu,E=u.contextType;typeof E=="object"&&E!==null&&(b=nr(E)),b=new u(h,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Fy,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=h,b.state=s.memoizedState,b.refs={},yy(s),E=u.contextType,b.context=typeof E=="object"&&E!==null?nr(E):Qu,b.state=s.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(Vy(s,u,E,h),b.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&Fy.enqueueReplaceState(b,b.state,null),id(s,h,b,g),rd(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(a===null){b=s.stateNode;var k=s.memoizedProps,F=Rl(u,k);b.props=F;var J=b.context,le=u.contextType;E=Qu,typeof le=="object"&&le!==null&&(E=nr(le));var fe=u.getDerivedStateFromProps;le=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||J!==E)&&_6(s,b,h,E),qo=!1;var ee=s.memoizedState;b.state=ee,id(s,h,b,g),rd(),J=s.memoizedState,k||ee!==J||qo?(typeof fe=="function"&&(Vy(s,u,fe,h),J=s.memoizedState),(F=qo||v6(s,u,F,h,ee,J,E))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=J),b.props=h,b.state=J,b.context=E,h=F):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{b=s.stateNode,by(a,s),E=s.memoizedProps,le=Rl(u,E),b.props=le,fe=s.pendingProps,ee=b.context,J=u.contextType,F=Qu,typeof J=="object"&&J!==null&&(F=nr(J)),k=u.getDerivedStateFromProps,(J=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==fe||ee!==F)&&_6(s,b,h,F),qo=!1,ee=s.memoizedState,b.state=ee,id(s,h,b,g),rd();var te=s.memoizedState;E!==fe||ee!==te||qo||a!==null&&a.dependencies!==null&&Om(a.dependencies)?(typeof k=="function"&&(Vy(s,u,k,h),te=s.memoizedState),(le=qo||v6(s,u,le,h,ee,te,F)||a!==null&&a.dependencies!==null&&Om(a.dependencies))?(J||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,te,F),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,te,F)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&ee===a.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&ee===a.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=te),b.props=h,b.state=te,b.context=F,h=le):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&ee===a.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&ee===a.memoizedState||(s.flags|=1024),h=!1)}return b=h,ep(a,s),h=(s.flags&128)!==0,b||h?(b=s.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,a!==null&&h?(s.child=sc(s,a.child,null,g),s.child=sc(s,null,u,g)):Hn(a,s,u,g),s.memoizedState=b.state,a=s.child):a=eo(a,s,g),a}function O6(a,s,u,h){return Xh(),s.flags|=256,Hn(a,s,u,h),s.child}var $y={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qy(a){return{baseLanes:a,cachePool:w_()}}function jy(a,s,u){return a=a!==null?a.childLanes&~u:0,s&&(a|=yi),a}function N6(a,s,u){var h=s.pendingProps,g=!1,b=(s.flags&128)!==0,E;if((E=b)||(E=a!==null&&a.memoizedState===null?!1:(Mn.current&2)!==0),E&&(g=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,a===null){if(At){if(g?Wo(s):Xo(),At){var k=sn,F;if(F=k){e:{for(F=k,k=sa;F.nodeType!==8;){if(!k){k=null;break e}if(F=zi(F.nextSibling),F===null){k=null;break e}}k=F}k!==null?(s.memoizedState={dehydrated:k,treeContext:Sl!==null?{id:Wa,overflow:Xa}:null,retryLane:536870912,hydrationErrors:null},F=$r(18,null,null,0),F.stateNode=k,F.return=s,s.child=F,xr=s,sn=null,F=!0):F=!1}F||Ml(s)}if(k=s.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Ab(k)?s.lanes=32:s.lanes=536870912,null;Za(s)}return k=h.children,h=h.fallback,g?(Xo(),g=s.mode,k=tp({mode:"hidden",children:k},g),h=El(h,g,u,null),k.return=s,h.return=s,k.sibling=h,s.child=k,g=s.child,g.memoizedState=qy(u),g.childLanes=jy(a,E,u),s.memoizedState=$y,h):(Wo(s),Hy(s,k))}if(F=a.memoizedState,F!==null&&(k=F.dehydrated,k!==null)){if(b)s.flags&256?(Wo(s),s.flags&=-257,s=Gy(a,s,u)):s.memoizedState!==null?(Xo(),s.child=a.child,s.flags|=128,s=null):(Xo(),g=h.fallback,k=s.mode,h=tp({mode:"visible",children:h.children},k),g=El(g,k,u,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,sc(s,a.child,null,u),h=s.child,h.memoizedState=qy(u),h.childLanes=jy(a,E,u),s.memoizedState=$y,s=g);else if(Wo(s),Ab(k)){if(E=k.nextSibling&&k.nextSibling.dataset,E)var J=E.dgst;E=J,h=Error(r(419)),h.stack="",h.digest=E,Yh({value:h,source:null,stack:null}),s=Gy(a,s,u)}else if(Pn||Qh(a,s,u,!1),E=(u&a.childLanes)!==0,Pn||E){if(E=Xt,E!==null&&(h=u&-u,h=(h&42)!==0?1:Zi(h),h=(h&(E.suspendedLanes|u))!==0?0:h,h!==0&&h!==F.retryLane))throw F.retryLane=h,Yu(a,h),Wr(E,a,h),M6;k.data==="$?"||hb(),s=Gy(a,s,u)}else k.data==="$?"?(s.flags|=192,s.child=a.child,s=null):(a=F.treeContext,sn=zi(k.nextSibling),xr=s,At=!0,Cl=null,sa=!1,a!==null&&(mi[pi++]=Wa,mi[pi++]=Xa,mi[pi++]=Sl,Wa=a.id,Xa=a.overflow,Sl=s),s=Hy(s,h.children),s.flags|=4096);return s}return g?(Xo(),g=h.fallback,k=s.mode,F=a.child,J=F.sibling,h=Ga(F,{mode:"hidden",children:h.children}),h.subtreeFlags=F.subtreeFlags&65011712,J!==null?g=Ga(J,g):(g=El(g,k,u,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,k=a.child.memoizedState,k===null?k=qy(u):(F=k.cachePool,F!==null?(J=Cn._currentValue,F=F.parent!==J?{parent:J,pool:J}:F):F=w_(),k={baseLanes:k.baseLanes|u,cachePool:F}),g.memoizedState=k,g.childLanes=jy(a,E,u),s.memoizedState=$y,h):(Wo(s),u=a.child,a=u.sibling,u=Ga(u,{mode:"visible",children:h.children}),u.return=s,u.sibling=null,a!==null&&(E=s.deletions,E===null?(s.deletions=[a],s.flags|=16):E.push(a)),s.child=u,s.memoizedState=null,u)}function Hy(a,s){return s=tp({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function tp(a,s){return a=$r(22,a,null,s),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Gy(a,s,u){return sc(s,a.child,null,u),a=Hy(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function P6(a,s,u){a.lanes|=s;var h=a.alternate;h!==null&&(h.lanes|=s),hy(a.return,s,u)}function Wy(a,s,u,h,g){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:g}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=h,b.tail=u,b.tailMode=g)}function z6(a,s,u){var h=s.pendingProps,g=h.revealOrder,b=h.tail;if(Hn(a,s,h.children,u),h=Mn.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&P6(a,u,s);else if(a.tag===19)P6(a,u,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}h&=1}switch(ce(Mn,h),g){case"forwards":for(u=s.child,g=null;u!==null;)a=u.alternate,a!==null&&Qm(a)===null&&(g=u),u=u.sibling;u=g,u===null?(g=s.child,s.child=null):(g=u.sibling,u.sibling=null),Wy(s,!1,g,u,b);break;case"backwards":for(u=null,g=s.child,s.child=null;g!==null;){if(a=g.alternate,a!==null&&Qm(a)===null){s.child=g;break}a=g.sibling,g.sibling=u,u=g,g=a}Wy(s,!0,u,null,b);break;case"together":Wy(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function eo(a,s,u){if(a!==null&&(s.dependencies=a.dependencies),es|=s.lanes,(u&s.childLanes)===0)if(a!==null){if(Qh(a,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(r(153));if(s.child!==null){for(a=s.child,u=Ga(a,a.pendingProps),s.child=u,u.return=s;a.sibling!==null;)a=a.sibling,u=u.sibling=Ga(a,a.pendingProps),u.return=s;u.sibling=null}return s.child}function Xy(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&Om(a)))}function jT(a,s,u){switch(s.tag){case 3:it(s,s.stateNode.containerInfo),$o(s,Cn,a.memoizedState.cache),Xh();break;case 27:case 5:Ot(s);break;case 4:it(s,s.stateNode.containerInfo);break;case 10:$o(s,s.type,s.memoizedProps.value);break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Wo(s),s.flags|=128,null):(u&s.child.childLanes)!==0?N6(a,s,u):(Wo(s),a=eo(a,s,u),a!==null?a.sibling:null);Wo(s);break;case 19:var g=(a.flags&128)!==0;if(h=(u&s.childLanes)!==0,h||(Qh(a,s,u,!1),h=(u&s.childLanes)!==0),g){if(h)return z6(a,s,u);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ce(Mn,Mn.current),h)break;return null;case 22:case 23:return s.lanes=0,L6(a,s,u);case 24:$o(s,Cn,a.memoizedState.cache)}return eo(a,s,u)}function V6(a,s,u){if(a!==null)if(a.memoizedProps!==s.pendingProps)Pn=!0;else{if(!Xy(a,u)&&(s.flags&128)===0)return Pn=!1,jT(a,s,u);Pn=(a.flags&131072)!==0}else Pn=!1,At&&(s.flags&1048576)!==0&&p_(s,Bm,s.index);switch(s.lanes=0,s.tag){case 16:e:{a=s.pendingProps;var h=s.elementType,g=h._init;if(h=g(h._payload),s.type=h,typeof h=="function")iy(h)?(a=Rl(h,a),s.tag=1,s=B6(null,s,h,a,u)):(s.tag=0,s=Ky(null,s,h,a,u));else{if(h!=null){if(g=h.$$typeof,g===G){s.tag=11,s=A6(null,s,h,a,u);break e}else if(g===M){s.tag=14,s=T6(null,s,h,a,u);break e}}throw s=ke(h)||h,Error(r(306,s,""))}}return s;case 0:return Ky(a,s,s.type,s.pendingProps,u);case 1:return h=s.type,g=Rl(h,s.pendingProps),B6(a,s,h,g,u);case 3:e:{if(it(s,s.stateNode.containerInfo),a===null)throw Error(r(387));h=s.pendingProps;var b=s.memoizedState;g=b.element,by(a,s),id(s,h,null,u);var E=s.memoizedState;if(h=E.cache,$o(s,Cn,h),h!==b.cache&&dy(s,[Cn],u,!0),rd(),h=E.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=O6(a,s,h,u);break e}else if(h!==g){g=di(Error(r(424)),s),Yh(g),s=O6(a,s,h,u);break e}else{switch(a=s.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(sn=zi(a.firstChild),xr=s,At=!0,Cl=null,sa=!0,u=y6(s,null,h,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Xh(),h===g){s=eo(a,s,u);break e}Hn(a,s,h,u)}s=s.child}return s;case 26:return ep(a,s),a===null?(u=$5(s.type,null,s.pendingProps,null))?s.memoizedState=u:At||(u=s.type,a=s.pendingProps,h=pp(Pe.current).createElement(u),h[pe]=s,h[_e]=a,Wn(h,u,a),et(h),s.stateNode=h):s.memoizedState=$5(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return Ot(s),a===null&&At&&(h=s.stateNode=F5(s.type,s.pendingProps,Pe.current),xr=s,sa=!0,g=sn,is(s.type)?(Tb=g,sn=zi(h.firstChild)):sn=g),Hn(a,s,s.pendingProps.children,u),ep(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&At&&((g=h=sn)&&(h=vD(h,s.type,s.pendingProps,sa),h!==null?(s.stateNode=h,xr=s,sn=zi(h.firstChild),sa=!1,g=!0):g=!1),g||Ml(s)),Ot(s),g=s.type,b=s.pendingProps,E=a!==null?a.memoizedProps:null,h=b.children,kb(g,b)?h=null:E!==null&&kb(g,E)&&(s.flags|=32),s.memoizedState!==null&&(g=Sy(a,s,PT,null,null,u),Cd._currentValue=g),ep(a,s),Hn(a,s,h,u),s.child;case 6:return a===null&&At&&((a=u=sn)&&(u=_D(u,s.pendingProps,sa),u!==null?(s.stateNode=u,xr=s,sn=null,a=!0):a=!1),a||Ml(s)),null;case 13:return N6(a,s,u);case 4:return it(s,s.stateNode.containerInfo),h=s.pendingProps,a===null?s.child=sc(s,null,h,u):Hn(a,s,h,u),s.child;case 11:return A6(a,s,s.type,s.pendingProps,u);case 7:return Hn(a,s,s.pendingProps,u),s.child;case 8:return Hn(a,s,s.pendingProps.children,u),s.child;case 12:return Hn(a,s,s.pendingProps.children,u),s.child;case 10:return h=s.pendingProps,$o(s,s.type,h.value),Hn(a,s,h.children,u),s.child;case 9:return g=s.type._context,h=s.pendingProps.children,Tl(s),g=nr(g),h=h(g),s.flags|=1,Hn(a,s,h,u),s.child;case 14:return T6(a,s,s.type,s.pendingProps,u);case 15:return D6(a,s,s.type,s.pendingProps,u);case 19:return z6(a,s,u);case 31:return h=s.pendingProps,u=s.mode,h={mode:h.mode,children:h.children},a===null?(u=tp(h,u),u.ref=s.ref,s.child=u,u.return=s,s=u):(u=Ga(a.child,h),u.ref=s.ref,s.child=u,u.return=s,s=u),s;case 22:return L6(a,s,u);case 24:return Tl(s),h=nr(Cn),a===null?(g=py(),g===null&&(g=Xt,b=fy(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=u),g=b),s.memoizedState={parent:h,cache:g},yy(s),$o(s,Cn,g)):((a.lanes&u)!==0&&(by(a,s),id(s,null,null,u),rd()),g=a.memoizedState,b=s.memoizedState,g.parent!==h?(g={parent:h,cache:h},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),$o(s,Cn,h)):(h=b.cache,$o(s,Cn,h),h!==g.cache&&dy(s,[Cn],u,!0))),Hn(a,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function to(a){a.flags|=4}function F6(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!W5(s)){if(s=gi.current,s!==null&&((vt&4194048)===vt?la!==null:(vt&62914560)!==vt&&(vt&536870912)===0||s!==la))throw td=gy,E_;a.flags|=8192}}function np(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?ul():536870912,a.lanes|=s,hc|=s)}function hd(a,s){if(!At)switch(a.tailMode){case"hidden":s=a.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:h.sibling=null}}function rn(a){var s=a.alternate!==null&&a.alternate.child===a.child,u=0,h=0;if(s)for(var g=a.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=h,a.childLanes=u,s}function HT(a,s,u){var h=s.pendingProps;switch(ly(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(s),null;case 1:return rn(s),null;case 3:return u=s.stateNode,h=null,a!==null&&(h=a.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Qa(Cn),dr(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(Wh(s)?to(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,b_())),rn(s),null;case 26:return u=s.memoizedState,a===null?(to(s),u!==null?(rn(s),F6(s,u)):(rn(s),s.flags&=-16777217)):u?u!==a.memoizedState?(to(s),rn(s),F6(s,u)):(rn(s),s.flags&=-16777217):(a.memoizedProps!==h&&to(s),rn(s),s.flags&=-16777217),null;case 27:Nt(s),u=Pe.current;var g=s.type;if(a!==null&&s.stateNode!=null)a.memoizedProps!==h&&to(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return rn(s),null}a=Ae.current,Wh(s)?g_(s):(a=F5(g,h,u),s.stateNode=a,to(s))}return rn(s),null;case 5:if(Nt(s),u=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==h&&to(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return rn(s),null}if(a=Ae.current,Wh(s))g_(s);else{switch(g=pp(Pe.current),a){case 1:a=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=g.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?a.multiple=!0:h.size&&(a.size=h.size);break;default:a=typeof h.is=="string"?g.createElement(u,{is:h.is}):g.createElement(u)}}a[pe]=s,a[_e]=h;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=a;e:switch(Wn(a,u,h),u){case"button":case"input":case"select":case"textarea":a=!!h.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&to(s)}}return rn(s),s.flags&=-16777217,null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==h&&to(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(r(166));if(a=Pe.current,Wh(s)){if(a=s.stateNode,u=s.memoizedProps,h=null,g=xr,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}a[pe]=s,a=!!(a.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||I5(a.nodeValue,u)),a||Ml(s)}else a=pp(a).createTextNode(h),a[pe]=s,s.stateNode=a}return rn(s),null;case 13:if(h=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=Wh(s),h!==null&&h.dehydrated!==null){if(a===null){if(!g)throw Error(r(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[pe]=s}else Xh(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rn(s),g=!1}else g=b_(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Za(s),s):(Za(s),null)}if(Za(s),(s.flags&128)!==0)return s.lanes=u,s;if(u=h!==null,a=a!==null&&a.memoizedState!==null,u){h=s.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var b=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==g&&(h.flags|=2048)}return u!==a&&u&&(s.child.flags|=8192),np(s,s.updateQueue),rn(s),null;case 4:return dr(),a===null&&_b(s.stateNode.containerInfo),rn(s),null;case 10:return Qa(s.type),rn(s),null;case 19:if(de(Mn),g=s.memoizedState,g===null)return rn(s),null;if(h=(s.flags&128)!==0,b=g.rendering,b===null)if(h)hd(g,!1);else{if(ln!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(b=Qm(a),b!==null){for(s.flags|=128,hd(g,!1),a=b.updateQueue,s.updateQueue=a,np(s,a),s.subtreeFlags=0,a=u,u=s.child;u!==null;)m_(u,a),u=u.sibling;return ce(Mn,Mn.current&1|2),s.child}a=a.sibling}g.tail!==null&&mr()>ap&&(s.flags|=128,h=!0,hd(g,!1),s.lanes=4194304)}else{if(!h)if(a=Qm(b),a!==null){if(s.flags|=128,h=!0,a=a.updateQueue,s.updateQueue=a,np(s,a),hd(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!At)return rn(s),null}else 2*mr()-g.renderingStartTime>ap&&u!==536870912&&(s.flags|=128,h=!0,hd(g,!1),s.lanes=4194304);g.isBackwards?(b.sibling=s.child,s.child=b):(a=g.last,a!==null?a.sibling=b:s.child=b,g.last=b)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=mr(),s.sibling=null,a=Mn.current,ce(Mn,h?a&1|2:a&1),s):(rn(s),null);case 22:case 23:return Za(s),wy(),h=s.memoizedState!==null,a!==null?a.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(u&536870912)!==0&&(s.flags&128)===0&&(rn(s),s.subtreeFlags&6&&(s.flags|=8192)):rn(s),u=s.updateQueue,u!==null&&np(s,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==u&&(s.flags|=2048),a!==null&&de(Dl),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Qa(Cn),rn(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function GT(a,s){switch(ly(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return Qa(Cn),dr(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return Nt(s),null;case 13:if(Za(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Xh()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return de(Mn),null;case 4:return dr(),null;case 10:return Qa(s.type),null;case 22:case 23:return Za(s),wy(),a!==null&&de(Dl),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return Qa(Cn),null;case 25:return null;default:return null}}function U6(a,s){switch(ly(s),s.tag){case 3:Qa(Cn),dr();break;case 26:case 27:case 5:Nt(s);break;case 4:dr();break;case 13:Za(s);break;case 19:de(Mn);break;case 10:Qa(s.type);break;case 22:case 23:Za(s),wy(),a!==null&&de(Dl);break;case 24:Qa(Cn)}}function dd(a,s){try{var u=s.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var g=h.next;u=g;do{if((u.tag&a)===a){h=void 0;var b=u.create,E=u.inst;h=b(),E.destroy=h}u=u.next}while(u!==g)}}catch(k){Ht(s,s.return,k)}}function Yo(a,s,u){try{var h=s.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var b=g.next;h=b;do{if((h.tag&a)===a){var E=h.inst,k=E.destroy;if(k!==void 0){E.destroy=void 0,g=s;var F=u,J=k;try{J()}catch(le){Ht(g,F,le)}}}h=h.next}while(h!==b)}}catch(le){Ht(s,s.return,le)}}function K6(a){var s=a.updateQueue;if(s!==null){var u=a.stateNode;try{T_(s,u)}catch(h){Ht(a,a.return,h)}}}function $6(a,s,u){u.props=Rl(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(h){Ht(a,s,h)}}function fd(a,s){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var h=a.stateNode;break;case 30:h=a.stateNode;break;default:h=a.stateNode}typeof u=="function"?a.refCleanup=u(h):u.current=h}}catch(g){Ht(a,s,g)}}function ua(a,s){var u=a.ref,h=a.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(g){Ht(a,s,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){Ht(a,s,g)}else u.current=null}function q6(a){var s=a.type,u=a.memoizedProps,h=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(g){Ht(a,a.return,g)}}function Yy(a,s,u){try{var h=a.stateNode;mD(h,a.type,u,s),h[_e]=s}catch(g){Ht(a,a.return,g)}}function j6(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&is(a.type)||a.tag===4}function Qy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||j6(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&is(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Jy(a,s,u){var h=a.tag;if(h===5||h===6)a=a.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(a),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=mp));else if(h!==4&&(h===27&&is(a.type)&&(u=a.stateNode,s=null),a=a.child,a!==null))for(Jy(a,s,u),a=a.sibling;a!==null;)Jy(a,s,u),a=a.sibling}function rp(a,s,u){var h=a.tag;if(h===5||h===6)a=a.stateNode,s?u.insertBefore(a,s):u.appendChild(a);else if(h!==4&&(h===27&&is(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(rp(a,s,u),a=a.sibling;a!==null;)rp(a,s,u),a=a.sibling}function H6(a){var s=a.stateNode,u=a.memoizedProps;try{for(var h=a.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Wn(s,h,u),s[pe]=a,s[_e]=u}catch(b){Ht(a,a.return,b)}}var no=!1,hn=!1,Zy=!1,G6=typeof WeakSet=="function"?WeakSet:Set,zn=null;function WT(a,s){if(a=a.containerInfo,Eb=xp,a=i_(a),Q1(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var g=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var E=0,k=-1,F=-1,J=0,le=0,fe=a,ee=null;t:for(;;){for(var te;fe!==u||g!==0&&fe.nodeType!==3||(k=E+g),fe!==b||h!==0&&fe.nodeType!==3||(F=E+h),fe.nodeType===3&&(E+=fe.nodeValue.length),(te=fe.firstChild)!==null;)ee=fe,fe=te;for(;;){if(fe===a)break t;if(ee===u&&++J===g&&(k=E),ee===b&&++le===h&&(F=E),(te=fe.nextSibling)!==null)break;fe=ee,ee=fe.parentNode}fe=te}u=k===-1||F===-1?null:{start:k,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Sb={focusedElem:a,selectionRange:u},xp=!1,zn=s;zn!==null;)if(s=zn,a=s.child,(s.subtreeFlags&1024)!==0&&a!==null)a.return=s,zn=a;else for(;zn!==null;){switch(s=zn,b=s.alternate,a=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,u=s,g=b.memoizedProps,b=b.memoizedState,h=u.stateNode;try{var We=Rl(u.type,g,u.elementType===u.type);a=h.getSnapshotBeforeUpdate(We,b),h.__reactInternalSnapshotBeforeUpdate=a}catch($e){Ht(u,u.return,$e)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,u=a.nodeType,u===9)Mb(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Mb(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=s.sibling,a!==null){a.return=s.return,zn=a;break}zn=s.return}}function W6(a,s,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:Qo(a,u),h&4&&dd(5,u);break;case 1:if(Qo(a,u),h&4)if(a=u.stateNode,s===null)try{a.componentDidMount()}catch(E){Ht(u,u.return,E)}else{var g=Rl(u.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(g,s,a.__reactInternalSnapshotBeforeUpdate)}catch(E){Ht(u,u.return,E)}}h&64&&K6(u),h&512&&fd(u,u.return);break;case 3:if(Qo(a,u),h&64&&(a=u.updateQueue,a!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{T_(a,s)}catch(E){Ht(u,u.return,E)}}break;case 27:s===null&&h&4&&H6(u);case 26:case 5:Qo(a,u),s===null&&h&4&&q6(u),h&512&&fd(u,u.return);break;case 12:Qo(a,u);break;case 13:Qo(a,u),h&4&&Q6(a,u),h&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=rD.bind(null,u),xD(a,u))));break;case 22:if(h=u.memoizedState!==null||no,!h){s=s!==null&&s.memoizedState!==null||hn,g=no;var b=hn;no=h,(hn=s)&&!b?Jo(a,u,(u.subtreeFlags&8772)!==0):Qo(a,u),no=g,hn=b}break;case 30:break;default:Qo(a,u)}}function X6(a){var s=a.alternate;s!==null&&(a.alternate=null,X6(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&Be(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var tn=null,Dr=!1;function ro(a,s,u){for(u=u.child;u!==null;)Y6(a,s,u),u=u.sibling}function Y6(a,s,u){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(kt,u)}catch{}switch(u.tag){case 26:hn||ua(u,s),ro(a,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:hn||ua(u,s);var h=tn,g=Dr;is(u.type)&&(tn=u.stateNode,Dr=!1),ro(a,s,u),wd(u.stateNode),tn=h,Dr=g;break;case 5:hn||ua(u,s);case 6:if(h=tn,g=Dr,tn=null,ro(a,s,u),tn=h,Dr=g,tn!==null)if(Dr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(u.stateNode)}catch(b){Ht(u,s,b)}else try{tn.removeChild(u.stateNode)}catch(b){Ht(u,s,b)}break;case 18:tn!==null&&(Dr?(a=tn,z5(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),Dd(a)):z5(tn,u.stateNode));break;case 4:h=tn,g=Dr,tn=u.stateNode.containerInfo,Dr=!0,ro(a,s,u),tn=h,Dr=g;break;case 0:case 11:case 14:case 15:hn||Yo(2,u,s),hn||Yo(4,u,s),ro(a,s,u);break;case 1:hn||(ua(u,s),h=u.stateNode,typeof h.componentWillUnmount=="function"&&$6(u,s,h)),ro(a,s,u);break;case 21:ro(a,s,u);break;case 22:hn=(h=hn)||u.memoizedState!==null,ro(a,s,u),hn=h;break;default:ro(a,s,u)}}function Q6(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Dd(a)}catch(u){Ht(s,s.return,u)}}function XT(a){switch(a.tag){case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new G6),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new G6),s;default:throw Error(r(435,a.tag))}}function eb(a,s){var u=XT(a);s.forEach(function(h){var g=iD.bind(null,a,h);u.has(h)||(u.add(h),h.then(g,g))})}function qr(a,s){var u=s.deletions;if(u!==null)for(var h=0;h<u.length;h++){var g=u[h],b=a,E=s,k=E;e:for(;k!==null;){switch(k.tag){case 27:if(is(k.type)){tn=k.stateNode,Dr=!1;break e}break;case 5:tn=k.stateNode,Dr=!1;break e;case 3:case 4:tn=k.stateNode.containerInfo,Dr=!0;break e}k=k.return}if(tn===null)throw Error(r(160));Y6(b,E,g),tn=null,Dr=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)J6(s,a),s=s.sibling}var Pi=null;function J6(a,s){var u=a.alternate,h=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:qr(s,a),jr(a),h&4&&(Yo(3,a,a.return),dd(3,a),Yo(5,a,a.return));break;case 1:qr(s,a),jr(a),h&512&&(hn||u===null||ua(u,u.return)),h&64&&no&&(a=a.updateQueue,a!==null&&(h=a.callbacks,h!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var g=Pi;if(qr(s,a),jr(a),h&512&&(hn||u===null||ua(u,u.return)),h&4){var b=u!==null?u.memoizedState:null;if(h=a.memoizedState,u===null)if(h===null)if(a.stateNode===null){e:{h=a.type,u=a.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Ie]||b[pe]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(h),g.head.insertBefore(b,g.querySelector("head > title"))),Wn(b,h,u),b[pe]=a,et(b),h=b;break e;case"link":var E=H5("link","href",g).get(h+(u.href||""));if(E){for(var k=0;k<E.length;k++)if(b=E[k],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){E.splice(k,1);break t}}b=g.createElement(h),Wn(b,h,u),g.head.appendChild(b);break;case"meta":if(E=H5("meta","content",g).get(h+(u.content||""))){for(k=0;k<E.length;k++)if(b=E[k],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){E.splice(k,1);break t}}b=g.createElement(h),Wn(b,h,u),g.head.appendChild(b);break;default:throw Error(r(468,h))}b[pe]=a,et(b),h=b}a.stateNode=h}else G5(g,a.type,a.stateNode);else a.stateNode=j5(g,h,a.memoizedProps);else b!==h?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,h===null?G5(g,a.type,a.stateNode):j5(g,h,a.memoizedProps)):h===null&&a.stateNode!==null&&Yy(a,a.memoizedProps,u.memoizedProps)}break;case 27:qr(s,a),jr(a),h&512&&(hn||u===null||ua(u,u.return)),u!==null&&h&4&&Yy(a,a.memoizedProps,u.memoizedProps);break;case 5:if(qr(s,a),jr(a),h&512&&(hn||u===null||ua(u,u.return)),a.flags&32){g=a.stateNode;try{li(g,"")}catch(te){Ht(a,a.return,te)}}h&4&&a.stateNode!=null&&(g=a.memoizedProps,Yy(a,g,u!==null?u.memoizedProps:g)),h&1024&&(Zy=!0);break;case 6:if(qr(s,a),jr(a),h&4){if(a.stateNode===null)throw Error(r(162));h=a.memoizedProps,u=a.stateNode;try{u.nodeValue=h}catch(te){Ht(a,a.return,te)}}break;case 3:if(bp=null,g=Pi,Pi=gp(s.containerInfo),qr(s,a),Pi=g,jr(a),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Dd(s.containerInfo)}catch(te){Ht(a,a.return,te)}Zy&&(Zy=!1,Z6(a));break;case 4:h=Pi,Pi=gp(a.stateNode.containerInfo),qr(s,a),jr(a),Pi=h;break;case 12:qr(s,a),jr(a);break;case 13:qr(s,a),jr(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ob=mr()),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,eb(a,h)));break;case 22:g=a.memoizedState!==null;var F=u!==null&&u.memoizedState!==null,J=no,le=hn;if(no=J||g,hn=le||F,qr(s,a),hn=le,no=J,jr(a),h&8192)e:for(s=a.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(u===null||F||no||hn||Il(a)),u=null,s=a;;){if(s.tag===5||s.tag===26){if(u===null){F=u=s;try{if(b=F.stateNode,g)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{k=F.stateNode;var fe=F.memoizedProps.style,ee=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;k.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(te){Ht(F,F.return,te)}}}else if(s.tag===6){if(u===null){F=s;try{F.stateNode.nodeValue=g?"":F.memoizedProps}catch(te){Ht(F,F.return,te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=a.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,eb(a,u))));break;case 19:qr(s,a),jr(a),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,eb(a,h)));break;case 30:break;case 21:break;default:qr(s,a),jr(a)}}function jr(a){var s=a.flags;if(s&2){try{for(var u,h=a.return;h!==null;){if(j6(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var g=u.stateNode,b=Qy(a);rp(a,b,g);break;case 5:var E=u.stateNode;u.flags&32&&(li(E,""),u.flags&=-33);var k=Qy(a);rp(a,k,E);break;case 3:case 4:var F=u.stateNode.containerInfo,J=Qy(a);Jy(a,J,F);break;default:throw Error(r(161))}}catch(le){Ht(a,a.return,le)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function Z6(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;Z6(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function Qo(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)W6(a,s.alternate,s),s=s.sibling}function Il(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:Yo(4,s,s.return),Il(s);break;case 1:ua(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&$6(s,s.return,u),Il(s);break;case 27:wd(s.stateNode);case 26:case 5:ua(s,s.return),Il(s);break;case 22:s.memoizedState===null&&Il(s);break;case 30:Il(s);break;default:Il(s)}a=a.sibling}}function Jo(a,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,g=a,b=s,E=b.flags;switch(b.tag){case 0:case 11:case 15:Jo(g,b,u),dd(4,b);break;case 1:if(Jo(g,b,u),h=b,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){Ht(h,h.return,J)}if(h=b,g=h.updateQueue,g!==null){var k=h.stateNode;try{var F=g.shared.hiddenCallbacks;if(F!==null)for(g.shared.hiddenCallbacks=null,g=0;g<F.length;g++)A_(F[g],k)}catch(J){Ht(h,h.return,J)}}u&&E&64&&K6(b),fd(b,b.return);break;case 27:H6(b);case 26:case 5:Jo(g,b,u),u&&h===null&&E&4&&q6(b),fd(b,b.return);break;case 12:Jo(g,b,u);break;case 13:Jo(g,b,u),u&&E&4&&Q6(g,b);break;case 22:b.memoizedState===null&&Jo(g,b,u),fd(b,b.return);break;case 30:break;default:Jo(g,b,u)}s=s.sibling}}function tb(a,s){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Jh(u))}function nb(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Jh(a))}function ca(a,s,u,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)e5(a,s,u,h),s=s.sibling}function e5(a,s,u,h){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ca(a,s,u,h),g&2048&&dd(9,s);break;case 1:ca(a,s,u,h);break;case 3:ca(a,s,u,h),g&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Jh(a)));break;case 12:if(g&2048){ca(a,s,u,h),a=s.stateNode;try{var b=s.memoizedProps,E=b.id,k=b.onPostCommit;typeof k=="function"&&k(E,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(F){Ht(s,s.return,F)}}else ca(a,s,u,h);break;case 13:ca(a,s,u,h);break;case 23:break;case 22:b=s.stateNode,E=s.alternate,s.memoizedState!==null?b._visibility&2?ca(a,s,u,h):md(a,s):b._visibility&2?ca(a,s,u,h):(b._visibility|=2,lc(a,s,u,h,(s.subtreeFlags&10256)!==0)),g&2048&&tb(E,s);break;case 24:ca(a,s,u,h),g&2048&&nb(s.alternate,s);break;default:ca(a,s,u,h)}}function lc(a,s,u,h,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var b=a,E=s,k=u,F=h,J=E.flags;switch(E.tag){case 0:case 11:case 15:lc(b,E,k,F,g),dd(8,E);break;case 23:break;case 22:var le=E.stateNode;E.memoizedState!==null?le._visibility&2?lc(b,E,k,F,g):md(b,E):(le._visibility|=2,lc(b,E,k,F,g)),g&&J&2048&&tb(E.alternate,E);break;case 24:lc(b,E,k,F,g),g&&J&2048&&nb(E.alternate,E);break;default:lc(b,E,k,F,g)}s=s.sibling}}function md(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=a,h=s,g=h.flags;switch(h.tag){case 22:md(u,h),g&2048&&tb(h.alternate,h);break;case 24:md(u,h),g&2048&&nb(h.alternate,h);break;default:md(u,h)}s=s.sibling}}var pd=8192;function uc(a){if(a.subtreeFlags&pd)for(a=a.child;a!==null;)t5(a),a=a.sibling}function t5(a){switch(a.tag){case 26:uc(a),a.flags&pd&&a.memoizedState!==null&&BD(Pi,a.memoizedState,a.memoizedProps);break;case 5:uc(a);break;case 3:case 4:var s=Pi;Pi=gp(a.stateNode.containerInfo),uc(a),Pi=s;break;case 22:a.memoizedState===null&&(s=a.alternate,s!==null&&s.memoizedState!==null?(s=pd,pd=16777216,uc(a),pd=s):uc(a));break;default:uc(a)}}function n5(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function gd(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var h=s[u];zn=h,i5(h,a)}n5(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)r5(a),a=a.sibling}function r5(a){switch(a.tag){case 0:case 11:case 15:gd(a),a.flags&2048&&Yo(9,a,a.return);break;case 3:gd(a);break;case 12:gd(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,ip(a)):gd(a);break;default:gd(a)}}function ip(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var h=s[u];zn=h,i5(h,a)}n5(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:Yo(8,s,s.return),ip(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,ip(s));break;default:ip(s)}a=a.sibling}}function i5(a,s){for(;zn!==null;){var u=zn;switch(u.tag){case 0:case 11:case 15:Yo(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Jh(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,zn=h;else e:for(u=a;zn!==null;){h=zn;var g=h.sibling,b=h.return;if(X6(h),h===u){zn=null;break e}if(g!==null){g.return=b,zn=g;break e}zn=b}}}var YT={getCacheForType:function(a){var s=nr(Cn),u=s.data.get(a);return u===void 0&&(u=a(),s.data.set(a,u)),u}},QT=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Xt=null,ct=null,vt=0,zt=0,Hr=null,Zo=!1,cc=!1,rb=!1,io=0,ln=0,es=0,Bl=0,ib=0,yi=0,hc=0,yd=null,Lr=null,ab=!1,ob=0,ap=1/0,op=null,ts=null,Gn=0,ns=null,dc=null,fc=0,sb=0,lb=null,a5=null,bd=0,ub=null;function Gr(){if((Pt&2)!==0&&vt!==0)return vt&-vt;if(W.T!==null){var a=ec;return a!==0?a:gb()}return K()}function o5(){yi===0&&(yi=(vt&536870912)===0||At?za():536870912);var a=gi.current;return a!==null&&(a.flags|=32),yi}function Wr(a,s,u){(a===Xt&&(zt===2||zt===9)||a.cancelPendingCommit!==null)&&(mc(a,0),rs(a,vt,yi,!1)),Ii(a,u),((Pt&2)===0||a!==Xt)&&(a===Xt&&((Pt&2)===0&&(Bl|=u),ln===4&&rs(a,vt,yi,!1)),ha(a))}function s5(a,s,u){if((Pt&6)!==0)throw Error(r(327));var h=!u&&(s&124)===0&&(s&a.expiredLanes)===0||ai(a,s),g=h?eD(a,s):db(a,s,!0),b=h;do{if(g===0){cc&&!h&&rs(a,s,0,!1);break}else{if(u=a.current.alternate,b&&!JT(u)){g=db(a,s,!1),b=!1;continue}if(g===2){if(b=s,a.errorRecoveryDisabledLanes&b)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var k=a;g=yd;var F=k.current.memoizedState.isDehydrated;if(F&&(mc(k,E).flags|=256),E=db(k,E,!1),E!==2){if(rb&&!F){k.errorRecoveryDisabledLanes|=b,Bl|=b,g=4;break e}b=Lr,Lr=g,b!==null&&(Lr===null?Lr=b:Lr.push.apply(Lr,b))}g=E}if(b=!1,g!==2)continue}}if(g===1){mc(a,0),rs(a,s,0,!0);break}e:{switch(h=a,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:rs(h,s,yi,!Zo);break e;case 2:Lr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(g=ob+300-mr(),10<g)){if(rs(h,s,yi,!Zo),Pa(h,0,!0)!==0)break e;h.timeoutHandle=N5(l5.bind(null,h,u,Lr,op,ab,s,yi,Bl,hc,Zo,b,2,-0,0),g);break e}l5(h,u,Lr,op,ab,s,yi,Bl,hc,Zo,b,0,-0,0)}}break}while(!0);ha(a)}function l5(a,s,u,h,g,b,E,k,F,J,le,fe,ee,te){if(a.timeoutHandle=-1,fe=s.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(kd={stylesheets:null,count:0,unsuspend:ID},t5(s),fe=OD(),fe!==null)){a.cancelPendingCommit=fe(p5.bind(null,a,s,b,u,h,g,E,k,F,le,1,ee,te)),rs(a,b,E,!J);return}p5(a,s,b,u,h,g,E,k,F)}function JT(a){for(var s=a;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var g=u[h],b=g.getSnapshot;g=g.value;try{if(!Kr(b(),g))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rs(a,s,u,h){s&=~ib,s&=~Bl,a.suspendedLanes|=s,a.pingedLanes&=~s,h&&(a.warmLanes|=s),h=a.expirationTimes;for(var g=s;0<g;){var b=31-pn(g),E=1<<b;h[b]=-1,g&=~E}u!==0&&pr(a,u,s)}function sp(){return(Pt&6)===0?(vd(0),!1):!0}function cb(){if(ct!==null){if(zt===0)var a=ct.return;else a=ct,Ya=Al=null,My(a),oc=null,ud=0,a=ct;for(;a!==null;)U6(a.alternate,a),a=a.return;ct=null}}function mc(a,s){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,gD(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),cb(),Xt=a,ct=u=Ga(a.current,null),vt=s,zt=0,Hr=null,Zo=!1,cc=ai(a,s),rb=!1,hc=yi=ib=Bl=es=ln=0,Lr=yd=null,ab=!1,(s&8)!==0&&(s|=s&32);var h=a.entangledLanes;if(h!==0)for(a=a.entanglements,h&=s;0<h;){var g=31-pn(h),b=1<<g;s|=a[g],h&=~b}return io=s,Tm(),u}function u5(a,s){st=null,W.H=Wm,s===ed||s===zm?(s=C_(),zt=3):s===E_?(s=C_(),zt=4):zt=s===M6?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Hr=s,ct===null&&(ln=1,Zm(a,di(s,a.current)))}function c5(){var a=W.H;return W.H=Wm,a===null?Wm:a}function h5(){var a=W.A;return W.A=YT,a}function hb(){ln=4,Zo||(vt&4194048)!==vt&&gi.current!==null||(cc=!0),(es&134217727)===0&&(Bl&134217727)===0||Xt===null||rs(Xt,vt,yi,!1)}function db(a,s,u){var h=Pt;Pt|=2;var g=c5(),b=h5();(Xt!==a||vt!==s)&&(op=null,mc(a,s)),s=!1;var E=ln;e:do try{if(zt!==0&&ct!==null){var k=ct,F=Hr;switch(zt){case 8:cb(),E=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(s=!0);var J=zt;if(zt=0,Hr=null,pc(a,k,F,J),u&&cc){E=0;break e}break;default:J=zt,zt=0,Hr=null,pc(a,k,F,J)}}ZT(),E=ln;break}catch(le){u5(a,le)}while(!0);return s&&a.shellSuspendCounter++,Ya=Al=null,Pt=h,W.H=g,W.A=b,ct===null&&(Xt=null,vt=0,Tm()),E}function ZT(){for(;ct!==null;)d5(ct)}function eD(a,s){var u=Pt;Pt|=2;var h=c5(),g=h5();Xt!==a||vt!==s?(op=null,ap=mr()+500,mc(a,s)):cc=ai(a,s);e:do try{if(zt!==0&&ct!==null){s=ct;var b=Hr;t:switch(zt){case 1:zt=0,Hr=null,pc(a,s,b,1);break;case 2:case 9:if(S_(b)){zt=0,Hr=null,f5(s);break}s=function(){zt!==2&&zt!==9||Xt!==a||(zt=7),ha(a)},b.then(s,s);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:S_(b)?(zt=0,Hr=null,f5(s)):(zt=0,Hr=null,pc(a,s,b,7));break;case 5:var E=null;switch(ct.tag){case 26:E=ct.memoizedState;case 5:case 27:var k=ct;if(!E||W5(E)){zt=0,Hr=null;var F=k.sibling;if(F!==null)ct=F;else{var J=k.return;J!==null?(ct=J,lp(J)):ct=null}break t}}zt=0,Hr=null,pc(a,s,b,5);break;case 6:zt=0,Hr=null,pc(a,s,b,6);break;case 8:cb(),ln=6;break e;default:throw Error(r(462))}}tD();break}catch(le){u5(a,le)}while(!0);return Ya=Al=null,W.H=h,W.A=g,Pt=u,ct!==null?0:(Xt=null,vt=0,Tm(),ln)}function tD(){for(;ct!==null&&!sl();)d5(ct)}function d5(a){var s=V6(a.alternate,a,io);a.memoizedProps=a.pendingProps,s===null?lp(a):ct=s}function f5(a){var s=a,u=s.alternate;switch(s.tag){case 15:case 0:s=I6(u,s,s.pendingProps,s.type,void 0,vt);break;case 11:s=I6(u,s,s.pendingProps,s.type.render,s.ref,vt);break;case 5:My(s);default:U6(u,s),s=ct=m_(s,io),s=V6(u,s,io)}a.memoizedProps=a.pendingProps,s===null?lp(a):ct=s}function pc(a,s,u,h){Ya=Al=null,My(s),oc=null,ud=0;var g=s.return;try{if(qT(a,g,s,u,vt)){ln=1,Zm(a,di(u,a.current)),ct=null;return}}catch(b){if(g!==null)throw ct=g,b;ln=1,Zm(a,di(u,a.current)),ct=null;return}s.flags&32768?(At||h===1?a=!0:cc||(vt&536870912)!==0?a=!1:(Zo=a=!0,(h===2||h===9||h===3||h===6)&&(h=gi.current,h!==null&&h.tag===13&&(h.flags|=16384))),m5(s,a)):lp(s)}function lp(a){var s=a;do{if((s.flags&32768)!==0){m5(s,Zo);return}a=s.return;var u=HT(s.alternate,s,io);if(u!==null){ct=u;return}if(s=s.sibling,s!==null){ct=s;return}ct=s=a}while(s!==null);ln===0&&(ln=5)}function m5(a,s){do{var u=GT(a.alternate,a);if(u!==null){u.flags&=32767,ct=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(a=a.sibling,a!==null)){ct=a;return}ct=a=u}while(a!==null);ln=6,ct=null}function p5(a,s,u,h,g,b,E,k,F){a.cancelPendingCommit=null;do up();while(Gn!==0);if((Pt&6)!==0)throw Error(r(327));if(s!==null){if(s===a.current)throw Error(r(177));if(b=s.lanes|s.childLanes,b|=ny,No(a,u,b,E,k,F),a===Xt&&(ct=Xt=null,vt=0),dc=s,ns=a,fc=u,sb=b,lb=g,a5=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,aD(Na,function(){return _5(),null})):(a.callbackNode=null,a.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=W.T,W.T=null,g=ue.p,ue.p=2,E=Pt,Pt|=4;try{WT(a,s,u)}finally{Pt=E,ue.p=g,W.T=h}}Gn=1,g5(),y5(),b5()}}function g5(){if(Gn===1){Gn=0;var a=ns,s=dc,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=W.T,W.T=null;var h=ue.p;ue.p=2;var g=Pt;Pt|=4;try{J6(s,a);var b=Sb,E=i_(a.containerInfo),k=b.focusedElem,F=b.selectionRange;if(E!==k&&k&&k.ownerDocument&&r_(k.ownerDocument.documentElement,k)){if(F!==null&&Q1(k)){var J=F.start,le=F.end;if(le===void 0&&(le=J),"selectionStart"in k)k.selectionStart=J,k.selectionEnd=Math.min(le,k.value.length);else{var fe=k.ownerDocument||document,ee=fe&&fe.defaultView||window;if(ee.getSelection){var te=ee.getSelection(),We=k.textContent.length,$e=Math.min(F.start,We),qt=F.end===void 0?$e:Math.min(F.end,We);!te.extend&&$e>qt&&(E=qt,qt=$e,$e=E);var H=n_(k,$e),$=n_(k,qt);if(H&&$&&(te.rangeCount!==1||te.anchorNode!==H.node||te.anchorOffset!==H.offset||te.focusNode!==$.node||te.focusOffset!==$.offset)){var Q=fe.createRange();Q.setStart(H.node,H.offset),te.removeAllRanges(),$e>qt?(te.addRange(Q),te.extend($.node,$.offset)):(Q.setEnd($.node,$.offset),te.addRange(Q))}}}}for(fe=[],te=k;te=te.parentNode;)te.nodeType===1&&fe.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<fe.length;k++){var he=fe[k];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}xp=!!Eb,Sb=Eb=null}finally{Pt=g,ue.p=h,W.T=u}}a.current=s,Gn=2}}function y5(){if(Gn===2){Gn=0;var a=ns,s=dc,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=W.T,W.T=null;var h=ue.p;ue.p=2;var g=Pt;Pt|=4;try{W6(a,s.alternate,s)}finally{Pt=g,ue.p=h,W.T=u}}Gn=3}}function b5(){if(Gn===4||Gn===3){Gn=0,Ou();var a=ns,s=dc,u=fc,h=a5;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Gn=5:(Gn=0,dc=ns=null,v5(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(ts=null),Po(u),s=s.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(kt,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=W.T,g=ue.p,ue.p=2,W.T=null;try{for(var b=a.onRecoverableError,E=0;E<h.length;E++){var k=h[E];b(k.value,{componentStack:k.stack})}}finally{W.T=s,ue.p=g}}(fc&3)!==0&&up(),ha(a),g=a.pendingLanes,(u&4194090)!==0&&(g&42)!==0?a===ub?bd++:(bd=0,ub=a):bd=0,vd(0)}}function v5(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,Jh(s)))}function up(a){return g5(),y5(),b5(),_5()}function _5(){if(Gn!==5)return!1;var a=ns,s=sb;sb=0;var u=Po(fc),h=W.T,g=ue.p;try{ue.p=32>u?32:u,W.T=null,u=lb,lb=null;var b=ns,E=fc;if(Gn=0,dc=ns=null,fc=0,(Pt&6)!==0)throw Error(r(331));var k=Pt;if(Pt|=4,r5(b.current),e5(b,b.current,E,u),Pt=k,vd(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(kt,b)}catch{}return!0}finally{ue.p=g,W.T=h,v5(a,s)}}function x5(a,s,u){s=di(u,s),s=Uy(a.stateNode,s,2),a=Ho(a,s,2),a!==null&&(Ii(a,2),ha(a))}function Ht(a,s,u){if(a.tag===3)x5(a,a,u);else for(;s!==null;){if(s.tag===3){x5(s,a,u);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ts===null||!ts.has(h))){a=di(u,a),u=k6(2),h=Ho(s,u,2),h!==null&&(C6(u,h,s,a),Ii(h,2),ha(h));break}}s=s.return}}function fb(a,s,u){var h=a.pingCache;if(h===null){h=a.pingCache=new QT;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(u)||(rb=!0,g.add(u),a=nD.bind(null,a,s,u),s.then(a,a))}function nD(a,s,u){var h=a.pingCache;h!==null&&h.delete(s),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,Xt===a&&(vt&u)===u&&(ln===4||ln===3&&(vt&62914560)===vt&&300>mr()-ob?(Pt&2)===0&&mc(a,0):ib|=u,hc===vt&&(hc=0)),ha(a)}function w5(a,s){s===0&&(s=ul()),a=Yu(a,s),a!==null&&(Ii(a,s),ha(a))}function rD(a){var s=a.memoizedState,u=0;s!==null&&(u=s.retryLane),w5(a,u)}function iD(a,s){var u=0;switch(a.tag){case 13:var h=a.stateNode,g=a.memoizedState;g!==null&&(u=g.retryLane);break;case 19:h=a.stateNode;break;case 22:h=a.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(s),w5(a,u)}function aD(a,s){return ni(a,s)}var cp=null,gc=null,mb=!1,hp=!1,pb=!1,Ol=0;function ha(a){a!==gc&&a.next===null&&(gc===null?cp=gc=a:gc=gc.next=a),hp=!0,mb||(mb=!0,sD())}function vd(a,s){if(!pb&&hp){pb=!0;do for(var u=!1,h=cp;h!==null;){if(a!==0){var g=h.pendingLanes;if(g===0)var b=0;else{var E=h.suspendedLanes,k=h.pingedLanes;b=(1<<31-pn(42|a)+1)-1,b&=g&~(E&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,C5(h,b))}else b=vt,b=Pa(h,h===Xt?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||ai(h,b)||(u=!0,C5(h,b));h=h.next}while(u);pb=!1}}function oD(){E5()}function E5(){hp=mb=!1;var a=0;Ol!==0&&(pD()&&(a=Ol),Ol=0);for(var s=mr(),u=null,h=cp;h!==null;){var g=h.next,b=S5(h,s);b===0?(h.next=null,u===null?cp=g:u.next=g,g===null&&(gc=u)):(u=h,(a!==0||(b&3)!==0)&&(hp=!0)),h=g}vd(a)}function S5(a,s){for(var u=a.suspendedLanes,h=a.pingedLanes,g=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var E=31-pn(b),k=1<<E,F=g[E];F===-1?((k&u)===0||(k&h)!==0)&&(g[E]=Oo(k,s)):F<=s&&(a.expiredLanes|=k),b&=~k}if(s=Xt,u=vt,u=Pa(a,a===s?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),h=a.callbackNode,u===0||a===s&&(zt===2||zt===9)||a.cancelPendingCommit!==null)return h!==null&&h!==null&&fr(h),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||ai(a,u)){if(s=u&-u,s===a.callbackPriority)return s;switch(h!==null&&fr(h),Po(u)){case 2:case 8:u=Ro;break;case 32:u=Na;break;case 268435456:u=ri;break;default:u=Na}return h=k5.bind(null,a),u=ni(u,h),a.callbackPriority=s,a.callbackNode=u,s}return h!==null&&h!==null&&fr(h),a.callbackPriority=2,a.callbackNode=null,2}function k5(a,s){if(Gn!==0&&Gn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(up()&&a.callbackNode!==u)return null;var h=vt;return h=Pa(a,a===Xt?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),h===0?null:(s5(a,h,s),S5(a,mr()),a.callbackNode!=null&&a.callbackNode===u?k5.bind(null,a):null)}function C5(a,s){if(up())return null;s5(a,s,!0)}function sD(){yD(function(){(Pt&6)!==0?ni(ll,oD):E5()})}function gb(){return Ol===0&&(Ol=za()),Ol}function M5(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:zu(""+a)}function A5(a,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,a.id&&u.setAttribute("form",a.id),s.parentNode.insertBefore(u,s),a=new FormData(a),u.parentNode.removeChild(u),a}function lD(a,s,u,h,g){if(s==="submit"&&u&&u.stateNode===g){var b=M5((g[_e]||null).action),E=h.submitter;E&&(s=(s=E[_e]||null)?M5(s.formAction):E.getAttribute("formAction"),s!==null&&(b=s,E=null));var k=new Vu("action","action",null,h,g);a.push({event:k,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ol!==0){var F=E?A5(g,E):new FormData(g);Ny(u,{pending:!0,data:F,method:g.method,action:b},null,F)}}else typeof b=="function"&&(k.preventDefault(),F=E?A5(g,E):new FormData(g),Ny(u,{pending:!0,data:F,method:g.method,action:b},b,F))},currentTarget:g}]})}}for(var yb=0;yb<ty.length;yb++){var bb=ty[yb],uD=bb.toLowerCase(),cD=bb[0].toUpperCase()+bb.slice(1);Ni(uD,"on"+cD)}Ni(s_,"onAnimationEnd"),Ni(l_,"onAnimationIteration"),Ni(u_,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(MT,"onTransitionRun"),Ni(AT,"onTransitionStart"),Ni(TT,"onTransitionCancel"),Ni(c_,"onTransitionEnd"),Bn("onMouseEnter",["mouseout","mouseover"]),Bn("onMouseLeave",["mouseout","mouseover"]),Bn("onPointerEnter",["pointerout","pointerover"]),Bn("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_d));function T5(a,s){s=(s&4)!==0;for(var u=0;u<a.length;u++){var h=a[u],g=h.event;h=h.listeners;e:{var b=void 0;if(s)for(var E=h.length-1;0<=E;E--){var k=h[E],F=k.instance,J=k.currentTarget;if(k=k.listener,F!==b&&g.isPropagationStopped())break e;b=k,g.currentTarget=J;try{b(g)}catch(le){Jm(le)}g.currentTarget=null,b=F}else for(E=0;E<h.length;E++){if(k=h[E],F=k.instance,J=k.currentTarget,k=k.listener,F!==b&&g.isPropagationStopped())break e;b=k,g.currentTarget=J;try{b(g)}catch(le){Jm(le)}g.currentTarget=null,b=F}}}}function ht(a,s){var u=s[Oe];u===void 0&&(u=s[Oe]=new Set);var h=a+"__bubble";u.has(h)||(D5(s,a,2,!1),u.add(h))}function vb(a,s,u){var h=0;s&&(h|=4),D5(u,a,h,s)}var dp="_reactListening"+Math.random().toString(36).slice(2);function _b(a){if(!a[dp]){a[dp]=!0,Mt.forEach(function(u){u!=="selectionchange"&&(hD.has(u)||vb(u,!1,a),vb(u,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[dp]||(s[dp]=!0,vb("selectionchange",!1,s))}}function D5(a,s,u,h){switch(ex(s)){case 2:var g=zD;break;case 8:g=VD;break;default:g=Bb}u=g.bind(null,s,u,a),g=void 0,!ci||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?a.addEventListener(s,u,{capture:!0,passive:g}):a.addEventListener(s,u,!0):g!==void 0?a.addEventListener(s,u,{passive:g}):a.addEventListener(s,u,!1)}function xb(a,s,u,h,g){var b=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var k=h.stateNode.containerInfo;if(k===g)break;if(E===4)for(E=h.return;E!==null;){var F=E.tag;if((F===3||F===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;k!==null;){if(E=nt(k),E===null)return;if(F=E.tag,F===5||F===6||F===26||F===27){h=b=E;continue e}k=k.parentNode}}h=h.return}mm(function(){var J=b,le=ui(u),fe=[];e:{var ee=h_.get(a);if(ee!==void 0){var te=Vu,We=a;switch(a){case"keypress":if(na(u)===0)break e;case"keydown":case"keyup":te=ju;break;case"focusin":We="focus",te=Ku;break;case"focusout":We="blur",te=Ku;break;case"beforeblur":case"afterblur":te=Ku;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=hi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=G1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=wm;break;case s_:case l_:case u_:te=$u;break;case c_:te=Sm;break;case"scroll":case"scrollend":te=pm;break;case"wheel":te=Hu;break;case"copy":case"cut":case"paste":te=qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=qh;break;case"toggle":case"beforetoggle":te=Cm}var $e=(s&4)!==0,qt=!$e&&(a==="scroll"||a==="scrollend"),H=$e?ee!==null?ee+"Capture":null:ee;$e=[];for(var $=J,Q;$!==null;){var he=$;if(Q=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||Q===null||H===null||(he=ml($,H),he!=null&&$e.push(xd($,he,Q))),qt)break;$=$.return}0<$e.length&&(ee=new te(ee,We,null,u,le),fe.push({event:ee,listeners:$e}))}}if((s&7)===0){e:{if(ee=a==="mouseover"||a==="pointerover",te=a==="mouseout"||a==="pointerout",ee&&u!==Ua&&(We=u.relatedTarget||u.fromElement)&&(nt(We)||We[Ce]))break e;if((te||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,te?(We=u.relatedTarget||u.toElement,te=J,We=We?nt(We):null,We!==null&&(qt=o(We),$e=We.tag,We!==qt||$e!==5&&$e!==27&&$e!==6)&&(We=null)):(te=null,We=J),te!==We)){if($e=hi,he="onMouseLeave",H="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&($e=qh,he="onPointerLeave",H="onPointerEnter",$="pointer"),qt=te==null?ee:jt(te),Q=We==null?ee:jt(We),ee=new $e(he,$+"leave",te,u,le),ee.target=qt,ee.relatedTarget=Q,he=null,nt(le)===J&&($e=new $e(H,$+"enter",We,u,le),$e.target=Q,$e.relatedTarget=qt,he=$e),qt=he,te&&We)t:{for($e=te,H=We,$=0,Q=$e;Q;Q=yc(Q))$++;for(Q=0,he=H;he;he=yc(he))Q++;for(;0<$-Q;)$e=yc($e),$--;for(;0<Q-$;)H=yc(H),Q--;for(;$--;){if($e===H||H!==null&&$e===H.alternate)break t;$e=yc($e),H=yc(H)}$e=null}else $e=null;te!==null&&L5(fe,ee,te,$e,!1),We!==null&&qt!==null&&L5(fe,qt,We,$e,!0)}}e:{if(ee=J?jt(J):window,te=ee.nodeName&&ee.nodeName.toLowerCase(),te==="select"||te==="input"&&ee.type==="file")var Te=Y3;else if(kn(ee))if(Q3)Te=ST;else{Te=wT;var ut=xT}else te=ee.nodeName,!te||te.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&Ph(J.elementType)&&(Te=Y3):Te=ET;if(Te&&(Te=Te(a,J))){Ha(fe,Te,u,le);break e}ut&&ut(a,ee,J),a==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Uo(ee,"number",ee.value)}switch(ut=J?jt(J):window,a){case"focusin":(kn(ut)||ut.contentEditable==="true")&&(Gu=ut,J1=J,Gh=null);break;case"focusout":Gh=J1=Gu=null;break;case"mousedown":Z1=!0;break;case"contextmenu":case"mouseup":case"dragend":Z1=!1,a_(fe,u,le);break;case"selectionchange":if(CT)break;case"keydown":case"keyup":a_(fe,u,le)}var ze;if(aa)e:{switch(a){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else yt?ae(a,u)&&(je="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(je="onCompositionStart");je&&(w&&u.locale!=="ko"&&(yt||je!=="onCompositionStart"?je==="onCompositionEnd"&&yt&&(ze=Vh()):(ta=le,Ko="value"in ta?ta.value:ta.textContent,yt=!0)),ut=fp(J,je),0<ut.length&&(je=new Kh(je,a,null,u,le),fe.push({event:je,listeners:ut}),ze?je.data=ze:(ze=xe(u),ze!==null&&(je.data=ze)))),(ze=_?Sn(a,u):bt(a,u))&&(je=fp(J,"onBeforeInput"),0<je.length&&(ut=new Kh("onBeforeInput","beforeinput",null,u,le),fe.push({event:ut,listeners:je}),ut.data=ze)),lD(fe,a,J,u,le)}T5(fe,s)})}function xd(a,s,u){return{instance:a,listener:s,currentTarget:u}}function fp(a,s){for(var u=s+"Capture",h=[];a!==null;){var g=a,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=ml(a,u),g!=null&&h.unshift(xd(a,g,b)),g=ml(a,s),g!=null&&h.push(xd(a,g,b))),a.tag===3)return h;a=a.return}return[]}function yc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function L5(a,s,u,h,g){for(var b=s._reactName,E=[];u!==null&&u!==h;){var k=u,F=k.alternate,J=k.stateNode;if(k=k.tag,F!==null&&F===h)break;k!==5&&k!==26&&k!==27||J===null||(F=J,g?(J=ml(u,b),J!=null&&E.unshift(xd(u,J,F))):g||(J=ml(u,b),J!=null&&E.push(xd(u,J,F)))),u=u.return}E.length!==0&&a.push({event:s,listeners:E})}var dD=/\r\n?/g,fD=/\u0000|\uFFFD/g;function R5(a){return(typeof a=="string"?a:""+a).replace(dD,`
`).replace(fD,"")}function I5(a,s){return s=R5(s),R5(a)===s}function mp(){}function $t(a,s,u,h,g,b){switch(u){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||li(a,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&li(a,""+h);break;case"className":yr(a,"class",h);break;case"tabIndex":yr(a,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":yr(a,u,h);break;case"style":Nh(a,h,b);break;case"data":if(s!=="object"){yr(a,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||u!=="href")){a.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){a.removeAttribute(u);break}h=zu(""+h),a.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(s!=="input"&&$t(a,s,"name",g.name,g,null),$t(a,s,"formEncType",g.formEncType,g,null),$t(a,s,"formMethod",g.formMethod,g,null),$t(a,s,"formTarget",g.formTarget,g,null)):($t(a,s,"encType",g.encType,g,null),$t(a,s,"method",g.method,g,null),$t(a,s,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){a.removeAttribute(u);break}h=zu(""+h),a.setAttribute(u,h);break;case"onClick":h!=null&&(a.onclick=mp);break;case"onScroll":h!=null&&ht("scroll",a);break;case"onScrollEnd":h!=null&&ht("scrollend",a);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"multiple":a.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":a.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){a.removeAttribute("xlink:href");break}u=zu(""+h),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(u,""+h):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":h===!0?a.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(u,h):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?a.setAttribute(u,h):a.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?a.removeAttribute(u):a.setAttribute(u,h);break;case"popover":ht("beforetoggle",a),ht("toggle",a),Fr(a,"popover",h);break;case"xlinkActuate":Xe(a,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Xe(a,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Xe(a,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Xe(a,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Xe(a,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Xe(a,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Xe(a,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Xe(a,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Xe(a,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Fr(a,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=j1.get(u)||u,Fr(a,u,h))}}function wb(a,s,u,h,g,b){switch(u){case"style":Nh(a,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"children":typeof h=="string"?li(a,h):(typeof h=="number"||typeof h=="bigint")&&li(a,""+h);break;case"onScroll":h!=null&&ht("scroll",a);break;case"onScrollEnd":h!=null&&ht("scrollend",a);break;case"onClick":h!=null&&(a.onclick=mp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ar.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),s=u.slice(2,g?u.length-7:void 0),b=a[_e]||null,b=b!=null?b[u]:null,typeof b=="function"&&a.removeEventListener(s,b,g),typeof h=="function")){typeof b!="function"&&b!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(s,h,g);break e}u in a?a[u]=h:h===!0?a.setAttribute(u,""):Fr(a,u,h)}}}function Wn(a,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",a),ht("load",a);var h=!1,g=!1,b;for(b in u)if(u.hasOwnProperty(b)){var E=u[b];if(E!=null)switch(b){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:$t(a,s,b,E,u,null)}}g&&$t(a,s,"srcSet",u.srcSet,u,null),h&&$t(a,s,"src",u.src,u,null);return;case"input":ht("invalid",a);var k=b=E=g=null,F=null,J=null;for(h in u)if(u.hasOwnProperty(h)){var le=u[h];if(le!=null)switch(h){case"name":g=le;break;case"type":E=le;break;case"checked":F=le;break;case"defaultChecked":J=le;break;case"value":b=le;break;case"defaultValue":k=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,s));break;default:$t(a,s,h,le,u,null)}}hl(a,b,k,F,J,E,g,!1),Pu(a);return;case"select":ht("invalid",a),h=E=b=null;for(g in u)if(u.hasOwnProperty(g)&&(k=u[g],k!=null))switch(g){case"value":b=k;break;case"defaultValue":E=k;break;case"multiple":h=k;default:$t(a,s,g,k,u,null)}s=b,u=E,a.multiple=!!h,s!=null?Fa(a,!!h,s,!1):u!=null&&Fa(a,!!h,u,!0);return;case"textarea":ht("invalid",a),b=g=h=null;for(E in u)if(u.hasOwnProperty(E)&&(k=u[E],k!=null))switch(E){case"value":h=k;break;case"defaultValue":g=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:$t(a,s,E,k,u,null)}dl(a,h,g,b),Pu(a);return;case"option":for(F in u)if(u.hasOwnProperty(F)&&(h=u[F],h!=null))switch(F){case"selected":a.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:$t(a,s,F,h,u,null)}return;case"dialog":ht("beforetoggle",a),ht("toggle",a),ht("cancel",a),ht("close",a);break;case"iframe":case"object":ht("load",a);break;case"video":case"audio":for(h=0;h<_d.length;h++)ht(_d[h],a);break;case"image":ht("error",a),ht("load",a);break;case"details":ht("toggle",a);break;case"embed":case"source":case"link":ht("error",a),ht("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in u)if(u.hasOwnProperty(J)&&(h=u[J],h!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:$t(a,s,J,h,u,null)}return;default:if(Ph(s)){for(le in u)u.hasOwnProperty(le)&&(h=u[le],h!==void 0&&wb(a,s,le,h,u,void 0));return}}for(k in u)u.hasOwnProperty(k)&&(h=u[k],h!=null&&$t(a,s,k,h,u,null))}function mD(a,s,u,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,E=null,k=null,F=null,J=null,le=null;for(te in u){var fe=u[te];if(u.hasOwnProperty(te)&&fe!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":F=fe;default:h.hasOwnProperty(te)||$t(a,s,te,null,h,fe)}}for(var ee in h){var te=h[ee];if(fe=u[ee],h.hasOwnProperty(ee)&&(te!=null||fe!=null))switch(ee){case"type":b=te;break;case"name":g=te;break;case"checked":J=te;break;case"defaultChecked":le=te;break;case"value":E=te;break;case"defaultValue":k=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:te!==fe&&$t(a,s,ee,te,h,fe)}}Ur(a,E,k,F,J,le,b,g);return;case"select":te=E=k=ee=null;for(b in u)if(F=u[b],u.hasOwnProperty(b)&&F!=null)switch(b){case"value":break;case"multiple":te=F;default:h.hasOwnProperty(b)||$t(a,s,b,null,h,F)}for(g in h)if(b=h[g],F=u[g],h.hasOwnProperty(g)&&(b!=null||F!=null))switch(g){case"value":ee=b;break;case"defaultValue":k=b;break;case"multiple":E=b;default:b!==F&&$t(a,s,g,b,h,F)}s=k,u=E,h=te,ee!=null?Fa(a,!!u,ee,!1):!!h!=!!u&&(s!=null?Fa(a,!!u,s,!0):Fa(a,!!u,u?[]:"",!1));return;case"textarea":te=ee=null;for(k in u)if(g=u[k],u.hasOwnProperty(k)&&g!=null&&!h.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:$t(a,s,k,null,h,g)}for(E in h)if(g=h[E],b=u[E],h.hasOwnProperty(E)&&(g!=null||b!=null))switch(E){case"value":ee=g;break;case"defaultValue":te=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&$t(a,s,E,g,h,b)}Ut(a,ee,te);return;case"option":for(var We in u)if(ee=u[We],u.hasOwnProperty(We)&&ee!=null&&!h.hasOwnProperty(We))switch(We){case"selected":a.selected=!1;break;default:$t(a,s,We,null,h,ee)}for(F in h)if(ee=h[F],te=u[F],h.hasOwnProperty(F)&&ee!==te&&(ee!=null||te!=null))switch(F){case"selected":a.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:$t(a,s,F,ee,h,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in u)ee=u[$e],u.hasOwnProperty($e)&&ee!=null&&!h.hasOwnProperty($e)&&$t(a,s,$e,null,h,ee);for(J in h)if(ee=h[J],te=u[J],h.hasOwnProperty(J)&&ee!==te&&(ee!=null||te!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:$t(a,s,J,ee,h,te)}return;default:if(Ph(s)){for(var qt in u)ee=u[qt],u.hasOwnProperty(qt)&&ee!==void 0&&!h.hasOwnProperty(qt)&&wb(a,s,qt,void 0,h,ee);for(le in h)ee=h[le],te=u[le],!h.hasOwnProperty(le)||ee===te||ee===void 0&&te===void 0||wb(a,s,le,ee,h,te);return}}for(var H in u)ee=u[H],u.hasOwnProperty(H)&&ee!=null&&!h.hasOwnProperty(H)&&$t(a,s,H,null,h,ee);for(fe in h)ee=h[fe],te=u[fe],!h.hasOwnProperty(fe)||ee===te||ee==null&&te==null||$t(a,s,fe,ee,h,te)}var Eb=null,Sb=null;function pp(a){return a.nodeType===9?a:a.ownerDocument}function B5(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function O5(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function kb(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Cb=null;function pD(){var a=window.event;return a&&a.type==="popstate"?a===Cb?!1:(Cb=a,!0):(Cb=null,!1)}var N5=typeof setTimeout=="function"?setTimeout:void 0,gD=typeof clearTimeout=="function"?clearTimeout:void 0,P5=typeof Promise=="function"?Promise:void 0,yD=typeof queueMicrotask=="function"?queueMicrotask:typeof P5<"u"?function(a){return P5.resolve(null).then(a).catch(bD)}:N5;function bD(a){setTimeout(function(){throw a})}function is(a){return a==="head"}function z5(a,s){var u=s,h=0,g=0;do{var b=u.nextSibling;if(a.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"){if(0<h&&8>h){u=h;var E=a.ownerDocument;if(u&1&&wd(E.documentElement),u&2&&wd(E.body),u&4)for(u=E.head,wd(u),E=u.firstChild;E;){var k=E.nextSibling,F=E.nodeName;E[Ie]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=k}}if(g===0){a.removeChild(b),Dd(s);return}g--}else u==="$"||u==="$?"||u==="$!"?g++:h=u.charCodeAt(0)-48;else h=0;u=b}while(u);Dd(s)}function Mb(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Mb(u),Be(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function vD(a,s,u,h){for(;a.nodeType===1;){var g=u;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(h){if(!a[Ie])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=zi(a.nextSibling),a===null)break}return null}function _D(a,s,u){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=zi(a.nextSibling),a===null))return null;return a}function Ab(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function xD(a,s){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")s();else{var h=function(){s(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),a._reactRetry=h}}function zi(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return a}var Tb=null;function V5(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return a;s--}else u==="/$"&&s++}a=a.previousSibling}return null}function F5(a,s,u){switch(s=pp(u),a){case"html":if(a=s.documentElement,!a)throw Error(r(452));return a;case"head":if(a=s.head,!a)throw Error(r(453));return a;case"body":if(a=s.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function wd(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);Be(a)}var bi=new Map,U5=new Set;function gp(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ao=ue.d;ue.d={f:wD,r:ED,D:SD,C:kD,L:CD,m:MD,X:TD,S:AD,M:DD};function wD(){var a=ao.f(),s=sp();return a||s}function ED(a){var s=wt(a);s!==null&&s.tag===5&&s.type==="form"?s6(s):ao.r(a)}var bc=typeof document>"u"?null:document;function K5(a,s,u){var h=bc;if(h&&typeof s=="string"&&s){var g=gn(s);g='link[rel="'+a+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),U5.has(g)||(U5.add(g),a={rel:a,crossOrigin:u,href:s},h.querySelector(g)===null&&(s=h.createElement("link"),Wn(s,"link",a),et(s),h.head.appendChild(s)))}}function SD(a){ao.D(a),K5("dns-prefetch",a,null)}function kD(a,s){ao.C(a,s),K5("preconnect",a,s)}function CD(a,s,u){ao.L(a,s,u);var h=bc;if(h&&a&&s){var g='link[rel="preload"][as="'+gn(s)+'"]';s==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+gn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+gn(u.imageSizes)+'"]')):g+='[href="'+gn(a)+'"]';var b=g;switch(s){case"style":b=vc(a);break;case"script":b=_c(a)}bi.has(b)||(a=p({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:a,as:s},u),bi.set(b,a),h.querySelector(g)!==null||s==="style"&&h.querySelector(Ed(b))||s==="script"&&h.querySelector(Sd(b))||(s=h.createElement("link"),Wn(s,"link",a),et(s),h.head.appendChild(s)))}}function MD(a,s){ao.m(a,s);var u=bc;if(u&&a){var h=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+gn(h)+'"][href="'+gn(a)+'"]',b=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=_c(a)}if(!bi.has(b)&&(a=p({rel:"modulepreload",href:a},s),bi.set(b,a),u.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Sd(b)))return}h=u.createElement("link"),Wn(h,"link",a),et(h),u.head.appendChild(h)}}}function AD(a,s,u){ao.S(a,s,u);var h=bc;if(h&&a){var g=Ct(h).hoistableStyles,b=vc(a);s=s||"default";var E=g.get(b);if(!E){var k={loading:0,preload:null};if(E=h.querySelector(Ed(b)))k.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":s},u),(u=bi.get(b))&&Db(a,u);var F=E=h.createElement("link");et(F),Wn(F,"link",a),F._p=new Promise(function(J,le){F.onload=J,F.onerror=le}),F.addEventListener("load",function(){k.loading|=1}),F.addEventListener("error",function(){k.loading|=2}),k.loading|=4,yp(E,s,h)}E={type:"stylesheet",instance:E,count:1,state:k},g.set(b,E)}}}function TD(a,s){ao.X(a,s);var u=bc;if(u&&a){var h=Ct(u).hoistableScripts,g=_c(a),b=h.get(g);b||(b=u.querySelector(Sd(g)),b||(a=p({src:a,async:!0},s),(s=bi.get(g))&&Lb(a,s),b=u.createElement("script"),et(b),Wn(b,"link",a),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function DD(a,s){ao.M(a,s);var u=bc;if(u&&a){var h=Ct(u).hoistableScripts,g=_c(a),b=h.get(g);b||(b=u.querySelector(Sd(g)),b||(a=p({src:a,async:!0,type:"module"},s),(s=bi.get(g))&&Lb(a,s),b=u.createElement("script"),et(b),Wn(b,"link",a),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function $5(a,s,u,h){var g=(g=Pe.current)?gp(g):null;if(!g)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=vc(u.href),u=Ct(g).hoistableStyles,h=u.get(s),h||(h={type:"style",instance:null,count:0,state:null},u.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=vc(u.href);var b=Ct(g).hoistableStyles,E=b.get(a);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,E),(b=g.querySelector(Ed(a)))&&!b._p&&(E.instance=b,E.state.loading=5),bi.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},bi.set(a,u),b||LD(g,a,u,E.state))),s&&h===null)throw Error(r(528,""));return E}if(s&&h!==null)throw Error(r(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=_c(u),u=Ct(g).hoistableScripts,h=u.get(s),h||(h={type:"script",instance:null,count:0,state:null},u.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function vc(a){return'href="'+gn(a)+'"'}function Ed(a){return'link[rel="stylesheet"]['+a+"]"}function q5(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function LD(a,s,u,h){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=a.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),Wn(s,"link",u),et(s),a.head.appendChild(s))}function _c(a){return'[src="'+gn(a)+'"]'}function Sd(a){return"script[async]"+a}function j5(a,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var h=a.querySelector('style[data-href~="'+gn(u.href)+'"]');if(h)return s.instance=h,et(h),h;var g=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(a.ownerDocument||a).createElement("style"),et(h),Wn(h,"style",g),yp(h,u.precedence,a),s.instance=h;case"stylesheet":g=vc(u.href);var b=a.querySelector(Ed(g));if(b)return s.state.loading|=4,s.instance=b,et(b),b;h=q5(u),(g=bi.get(g))&&Db(h,g),b=(a.ownerDocument||a).createElement("link"),et(b);var E=b;return E._p=new Promise(function(k,F){E.onload=k,E.onerror=F}),Wn(b,"link",h),s.state.loading|=4,yp(b,u.precedence,a),s.instance=b;case"script":return b=_c(u.src),(g=a.querySelector(Sd(b)))?(s.instance=g,et(g),g):(h=u,(g=bi.get(b))&&(h=p({},u),Lb(h,g)),a=a.ownerDocument||a,g=a.createElement("script"),et(g),Wn(g,"link",h),a.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,yp(h,u.precedence,a));return s.instance}function yp(a,s,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,b=g,E=0;E<h.length;E++){var k=h[E];if(k.dataset.precedence===s)b=k;else if(b!==g)break}b?b.parentNode.insertBefore(a,b.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(a,s.firstChild))}function Db(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function Lb(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var bp=null;function H5(a,s,u){if(bp===null){var h=new Map,g=bp=new Map;g.set(u,h)}else g=bp,h=g.get(u),h||(h=new Map,g.set(u,h));if(h.has(a))return h;for(h.set(a,null),u=u.getElementsByTagName(a),g=0;g<u.length;g++){var b=u[g];if(!(b[Ie]||b[pe]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(s)||"";E=a+E;var k=h.get(E);k?k.push(b):h.set(E,[b])}}return h}function G5(a,s,u){a=a.ownerDocument||a,a.head.insertBefore(u,s==="title"?a.querySelector("head > title"):null)}function RD(a,s,u){if(u===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return a=s.disabled,typeof s.precedence=="string"&&a==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function W5(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var kd=null;function ID(){}function BD(a,s,u){if(kd===null)throw Error(r(475));var h=kd;if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=vc(u.href),b=a.querySelector(Ed(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(h.count++,h=vp.bind(h),a.then(h,h)),s.state.loading|=4,s.instance=b,et(b);return}b=a.ownerDocument||a,u=q5(u),(g=bi.get(g))&&Db(u,g),b=b.createElement("link"),et(b);var E=b;E._p=new Promise(function(k,F){E.onload=k,E.onerror=F}),Wn(b,"link",u),s.instance=b}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(h.count++,s=vp.bind(h),a.addEventListener("load",s),a.addEventListener("error",s))}}function OD(){if(kd===null)throw Error(r(475));var a=kd;return a.stylesheets&&a.count===0&&Rb(a,a.stylesheets),0<a.count?function(s){var u=setTimeout(function(){if(a.stylesheets&&Rb(a,a.stylesheets),a.unsuspend){var h=a.unsuspend;a.unsuspend=null,h()}},6e4);return a.unsuspend=s,function(){a.unsuspend=null,clearTimeout(u)}}:null}function vp(){if(this.count--,this.count===0){if(this.stylesheets)Rb(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var _p=null;function Rb(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,_p=new Map,s.forEach(ND,a),_p=null,vp.call(a))}function ND(a,s){if(!(s.state.loading&4)){var u=_p.get(a);if(u)var h=u.get(null);else{u=new Map,_p.set(a,u);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var E=g[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(u.set(E.dataset.precedence,E),h=E)}h&&u.set(null,h)}g=s.instance,E=g.getAttribute("data-precedence"),b=u.get(E)||h,b===h&&u.set(null,g),u.set(E,g),this.count++,h=vp.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),b?b.parentNode.insertBefore(g,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),s.state.loading|=4}}var Cd={$$typeof:z,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function PD(a,s,u,h,g,b,E,k){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oi(0),this.hiddenUpdates=oi(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function X5(a,s,u,h,g,b,E,k,F,J,le,fe){return a=new PD(a,s,u,E,k,F,J,fe),s=1,b===!0&&(s|=24),b=$r(3,null,null,s),a.current=b,b.stateNode=a,s=fy(),s.refCount++,a.pooledCache=s,s.refCount++,b.memoizedState={element:h,isDehydrated:u,cache:s},yy(b),a}function Y5(a){return a?(a=Qu,a):Qu}function Q5(a,s,u,h,g,b){g=Y5(g),h.context===null?h.context=g:h.pendingContext=g,h=jo(s),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),u=Ho(a,h,s),u!==null&&(Wr(u,a,s),nd(u,a,s))}function J5(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<s?u:s}}function Ib(a,s){J5(a,s),(a=a.alternate)&&J5(a,s)}function Z5(a){if(a.tag===13){var s=Yu(a,67108864);s!==null&&Wr(s,a,67108864),Ib(a,67108864)}}var xp=!0;function zD(a,s,u,h){var g=W.T;W.T=null;var b=ue.p;try{ue.p=2,Bb(a,s,u,h)}finally{ue.p=b,W.T=g}}function VD(a,s,u,h){var g=W.T;W.T=null;var b=ue.p;try{ue.p=8,Bb(a,s,u,h)}finally{ue.p=b,W.T=g}}function Bb(a,s,u,h){if(xp){var g=Ob(h);if(g===null)xb(a,s,h,wp,u),tx(a,h);else if(UD(g,a,s,u,h))h.stopPropagation();else if(tx(a,h),s&4&&-1<FD.indexOf(a)){for(;g!==null;){var b=wt(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=zr(b.pendingLanes);if(E!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;E;){var F=1<<31-pn(E);k.entanglements[1]|=F,E&=~F}ha(b),(Pt&6)===0&&(ap=mr()+500,vd(0))}}break;case 13:k=Yu(b,2),k!==null&&Wr(k,b,2),sp(),Ib(b,2)}if(b=Ob(h),b===null&&xb(a,s,h,wp,u),b===g)break;g=b}g!==null&&h.stopPropagation()}else xb(a,s,h,null,u)}}function Ob(a){return a=ui(a),Nb(a)}var wp=null;function Nb(a){if(wp=null,a=nt(a),a!==null){var s=o(a);if(s===null)a=null;else{var u=s.tag;if(u===13){if(a=l(s),a!==null)return a;a=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return wp=a,null}function ex(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ih()){case ll:return 2;case Ro:return 8;case Na:case Ri:return 32;case ri:return 268435456;default:return 32}default:return 32}}var Pb=!1,as=null,os=null,ss=null,Md=new Map,Ad=new Map,ls=[],FD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tx(a,s){switch(a){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":Md.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ad.delete(s.pointerId)}}function Td(a,s,u,h,g,b){return a===null||a.nativeEvent!==b?(a={blockedOn:s,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[g]},s!==null&&(s=wt(s),s!==null&&Z5(s)),a):(a.eventSystemFlags|=h,s=a.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),a)}function UD(a,s,u,h,g){switch(s){case"focusin":return as=Td(as,a,s,u,h,g),!0;case"dragenter":return os=Td(os,a,s,u,h,g),!0;case"mouseover":return ss=Td(ss,a,s,u,h,g),!0;case"pointerover":var b=g.pointerId;return Md.set(b,Td(Md.get(b)||null,a,s,u,h,g)),!0;case"gotpointercapture":return b=g.pointerId,Ad.set(b,Td(Ad.get(b)||null,a,s,u,h,g)),!0}return!1}function nx(a){var s=nt(a.target);if(s!==null){var u=o(s);if(u!==null){if(s=u.tag,s===13){if(s=l(u),s!==null){a.blockedOn=s,X(a.priority,function(){if(u.tag===13){var h=Gr();h=Zi(h);var g=Yu(u,h);g!==null&&Wr(g,u,h),Ib(u,h)}});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ep(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var u=Ob(a.nativeEvent);if(u===null){u=a.nativeEvent;var h=new u.constructor(u.type,u);Ua=h,u.target.dispatchEvent(h),Ua=null}else return s=wt(u),s!==null&&Z5(s),a.blockedOn=u,!1;s.shift()}return!0}function rx(a,s,u){Ep(a)&&u.delete(s)}function KD(){Pb=!1,as!==null&&Ep(as)&&(as=null),os!==null&&Ep(os)&&(os=null),ss!==null&&Ep(ss)&&(ss=null),Md.forEach(rx),Ad.forEach(rx)}function Sp(a,s){a.blockedOn===s&&(a.blockedOn=null,Pb||(Pb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,KD)))}var kp=null;function ix(a){kp!==a&&(kp=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){kp===a&&(kp=null);for(var s=0;s<a.length;s+=3){var u=a[s],h=a[s+1],g=a[s+2];if(typeof h!="function"){if(Nb(h||u)===null)continue;break}var b=wt(u);b!==null&&(a.splice(s,3),s-=3,Ny(b,{pending:!0,data:g,method:u.method,action:h},h,g))}}))}function Dd(a){function s(F){return Sp(F,a)}as!==null&&Sp(as,a),os!==null&&Sp(os,a),ss!==null&&Sp(ss,a),Md.forEach(s),Ad.forEach(s);for(var u=0;u<ls.length;u++){var h=ls[u];h.blockedOn===a&&(h.blockedOn=null)}for(;0<ls.length&&(u=ls[0],u.blockedOn===null);)nx(u),u.blockedOn===null&&ls.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var g=u[h],b=u[h+1],E=g[_e]||null;if(typeof b=="function")E||ix(u);else if(E){var k=null;if(b&&b.hasAttribute("formAction")){if(g=b,E=b[_e]||null)k=E.formAction;else if(Nb(g)!==null)continue}else k=E.action;typeof k=="function"?u[h+1]=k:(u.splice(h,3),h-=3),ix(u)}}}function zb(a){this._internalRoot=a}Cp.prototype.render=zb.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(r(409));var u=s.current,h=Gr();Q5(u,h,a,s,null,null)},Cp.prototype.unmount=zb.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;Q5(a.current,2,null,a,null,null),sp(),s[Ce]=null}};function Cp(a){this._internalRoot=a}Cp.prototype.unstable_scheduleHydration=function(a){if(a){var s=K();a={blockedOn:null,target:a,priority:s};for(var u=0;u<ls.length&&s!==0&&s<ls[u].priority;u++);ls.splice(u,0,a),u===0&&nx(a)}};var ax=e.version;if(ax!=="19.1.1")throw Error(r(527,ax,"19.1.1"));ue.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=d(s),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var $D={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mp.isDisabled&&Mp.supportsFiber)try{kt=Mp.inject($D),ot=Mp}catch{}}return Rd.createRoot=function(a,s){if(!i(a))throw Error(r(299));var u=!1,h="",g=x6,b=w6,E=E6,k=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(k=s.unstable_transitionCallbacks)),s=X5(a,1,!1,null,null,u,h,g,b,E,k,null),a[Ce]=s.current,_b(a),new zb(s)},Rd.hydrateRoot=function(a,s,u){if(!i(a))throw Error(r(299));var h=!1,g="",b=x6,E=w6,k=E6,F=null,J=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(k=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(F=u.unstable_transitionCallbacks),u.formState!==void 0&&(J=u.formState)),s=X5(a,1,!0,s,u??null,h,g,b,E,k,F,J),s.context=Y5(null),u=s.current,h=Gr(),h=Zi(h),g=jo(h),g.callback=null,Ho(u,g,h),u=h,s.current.lanes=u,Ii(s,u),ha(s),a[Ce]=s.current,_b(a),new Cp(s)},Rd.version="19.1.1",Rd}var px;function ZD(){if(px)return Ub.exports;px=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ub.exports=JD(),Ub.exports}var eL=ZD();const o1=ne.createContext({user:{uid:"",username:"",email:"",picture:"",friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,questionStreak:0,savedQuestions:[],decks:[]},setUser:()=>{}}),sS=ne.createContext({options:{theme:"light"},setOptions:()=>{}});/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lS=t=>{throw TypeError(t)},tL=(t,e,n)=>e.has(t)||lS("Cannot "+n),jb=(t,e,n)=>(tL(t,e,"read from private field"),n?n.call(t):e.get(t)),nL=(t,e,n)=>e.has(t)?lS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),gx="popstate";function rL(t={}){function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return Af("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:qs(i)}return aL(e,n,null,t)}function dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function En(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iL(){return Math.random().toString(36).substring(2,10)}function yx(t,e){return{usr:t.state,key:t.key,idx:e}}function Af(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?tl(e):e,state:n,key:e&&e.key||r||iL()}}function qs({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function tl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function aL(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function y(){c="POP";let I=p(),L=I==null?null:I-f;f=I,d&&d({action:c,location:R.location,delta:L})}function v(I,L){c="PUSH";let j=Af(R.location,I,L);f=p()+1;let z=yx(j,f),G=R.createHref(j);try{l.pushState(z,"",G)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;i.location.assign(G)}o&&d&&d({action:c,location:R.location,delta:1})}function x(I,L){c="REPLACE";let j=Af(R.location,I,L);f=p();let z=yx(j,f),G=R.createHref(j);l.replaceState(z,"",G),o&&d&&d({action:c,location:R.location,delta:0})}function S(I){return uS(I)}let R={get action(){return c},get location(){return t(i,l)},listen(I){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(gx,y),d=I,()=>{i.removeEventListener(gx,y),d=null}},createHref(I){return e(i,I)},createURL:S,encodeLocation(I){let L=S(I);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:x,go(I){return l.go(I)}};return R}function uS(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:qs(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var sf,bx=class{constructor(t){if(nL(this,sf,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(jb(this,sf).has(t))return jb(this,sf).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){jb(this,sf).set(t,e)}};sf=new WeakMap;var oL=new Set(["lazy","caseSensitive","path","id","index","children"]);function sL(t){return oL.has(t)}var lL=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function uL(t){return lL.has(t)}function cL(t){return t.index===!0}function Tf(t,e,n=[],r={},i=!1){return t.map((o,l)=>{let c=[...n,String(l)],d=typeof o.id=="string"?o.id:c.join("-");if(dt(o.index!==!0||!o.children,"Cannot specify children on an index route"),dt(i||!r[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),cL(o)){let f={...o,...e(o),id:d};return r[d]=f,f}else{let f={...o,...e(o),id:d,children:void 0};return r[d]=f,o.children&&(f.children=Tf(o.children,e,c,r,i)),f}})}function Ls(t,e,n="/"){return $0(t,e,n,!1)}function $0(t,e,n,r){let i=typeof e=="string"?tl(e):e,o=Ai(i.pathname||"/",n);if(o==null)return null;let l=cS(t);dL(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let f=EL(o);c=xL(l[d],f,r)}return c}function hL(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function cS(t,e=[],n=[],r=""){let i=(o,l,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(dt(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let f=Sa([r,d.relativePath]),p=n.concat(d);o.children&&o.children.length>0&&(dt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),cS(o.children,e,p,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:vL(f,o.index),routesMeta:p})};return t.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of hS(o.path))i(o,l,c)}),e}function hS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=hS(r.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),i&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function dL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_L(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var fL=/^:[\w-]+$/,mL=3,pL=2,gL=1,yL=10,bL=-2,vx=t=>t==="*";function vL(t,e){let n=t.split("/"),r=n.length;return n.some(vx)&&(r+=bL),e&&(r+=pL),n.filter(i=>!vx(i)).reduce((i,o)=>i+(fL.test(o)?mL:o===""?gL:yL),r)}function _L(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function xL(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],f=c===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",y=pg({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),v=d.route;if(!y&&f&&n&&!r[r.length-1].route.index&&(y=pg({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!y)return null;Object.assign(i,y.params),l.push({params:i,pathname:Sa([o,y.pathname]),pathnameBase:ML(Sa([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=Sa([o,y.pathnameBase]))}return l}function pg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wL(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:y},v)=>{if(p==="*"){let S=c[v]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const x=c[v];return y&&!x?f[p]=void 0:f[p]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:t}}function wL(t,e=!1,n=!0){En(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function EL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return En(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ai(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function SL({basename:t,pathname:e}){return e==="/"?t:Sa([t,e])}function kL(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?tl(t):t;return{pathname:n?n.startsWith("/")?n:CL(n,e):e,search:AL(r),hash:TL(i)}}function CL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hb(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function k2(t){let e=dS(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function C2(t,e,n,r=!1){let i;typeof t=="string"?i=tl(t):(i={...t},dt(!i.pathname||!i.pathname.includes("?"),Hb("?","pathname","search",i)),dt(!i.pathname||!i.pathname.includes("#"),Hb("#","pathname","hash",i)),dt(!i.search||!i.search.includes("#"),Hb("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=n;else{let y=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;i.pathname=v.join("/")}c=y>=0?e[y]:"/"}let d=kL(i,c),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var Sa=t=>t.join("/").replace(/\/\/+/g,"/"),ML=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,gg=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Df(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var fS=["POST","PUT","PATCH","DELETE"],DL=new Set(fS),LL=["GET",...fS],RL=new Set(LL),IL=new Set([301,302,303,307,308]),BL=new Set([307,308]),Gb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},OL={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Id={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},NL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M2=t=>NL.test(t),PL=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),mS="remix-router-transitions",pS=Symbol("ResetLoaderData");function zL(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";dt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||PL,o={},l=Tf(t.routes,i,void 0,o),c,d=t.basename||"/",f=t.dataStrategy||$L,p={unstable_middleware:!1,...t.future},y=null,v=new Set,x=null,S=null,R=null,I=t.hydrationData!=null,L=Ls(l,t.history.location,d),j=!1,z=null,G;if(L==null&&!t.patchRoutesOnNavigation){let K=Si(404,{pathname:t.history.location.pathname}),{matches:X,route:Z}=Lx(l);G=!0,L=X,z={[Z.id]:K}}else if(L&&!t.hydrationData&&pr(L,l,t.history.location.pathname).active&&(L=null),L)if(L.some(K=>K.route.lazy))G=!1;else if(!L.some(K=>K.route.loader))G=!0;else{let K=t.hydrationData?t.hydrationData.loaderData:null,X=t.hydrationData?t.hydrationData.errors:null;if(X){let Z=L.findIndex(pe=>X[pe.route.id]!==void 0);G=L.slice(0,Z+1).every(pe=>!d4(pe.route,K,X))}else G=L.every(Z=>!d4(Z.route,K,X))}else{G=!1,L=[];let K=pr(null,l,t.history.location.pathname);K.active&&K.matches&&(j=!0,L=K.matches)}let ie,B={historyAction:t.history.action,location:t.history.location,matches:L,initialized:G,navigation:Gb,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||z,fetchers:new Map,blockers:new Map},M="POP",A=!1,C,P=!1,D=new Map,U=null,O=!1,ke=!1,Ke=new Set,W=new Map,ue=0,ve=-1,De=new Map,V=new Set,se=new Map,de=new Map,ce=new Set,Ae=new Map,Ue,Pe=null;function on(){if(y=t.history.listen(({action:K,location:X,delta:Z})=>{if(Ue){Ue(),Ue=void 0;return}En(Ae.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let pe=Oo({currentLocation:B.location,nextLocation:X,historyAction:K});if(pe&&Z!=null){let _e=new Promise(Ce=>{Ue=Ce});t.history.go(Z*-1),ai(pe,{state:"blocked",location:X,proceed(){ai(pe,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),_e.then(()=>t.history.go(Z))},reset(){let Ce=new Map(B.blockers);Ce.set(pe,Id),Ot({blockers:Ce})}});return}return fr(K,X)}),n){eR(e,D);let K=()=>tR(e,D);e.addEventListener("pagehide",K),U=()=>e.removeEventListener("pagehide",K)}return B.initialized||fr("POP",B.location,{initialHydration:!0}),ie}function it(){y&&y(),U&&U(),v.clear(),C&&C.abort(),B.fetchers.forEach((K,X)=>pn(X)),B.blockers.forEach((K,X)=>Pa(X))}function dr(K){return v.add(K),()=>v.delete(K)}function Ot(K,X={}){K.matches&&(K.matches=K.matches.map(_e=>{let Ce=o[_e.route.id],Oe=_e.route;return Oe.element!==Ce.element||Oe.errorElement!==Ce.errorElement||Oe.hydrateFallbackElement!==Ce.hydrateFallbackElement?{..._e,route:Ce}:_e})),B={...B,...K};let Z=[],pe=[];B.fetchers.forEach((_e,Ce)=>{_e.state==="idle"&&(ce.has(Ce)?Z.push(Ce):pe.push(Ce))}),ce.forEach(_e=>{!B.fetchers.has(_e)&&!W.has(_e)&&Z.push(_e)}),[...v].forEach(_e=>_e(B,{deletedFetchers:Z,viewTransitionOpts:X.viewTransitionOpts,flushSync:X.flushSync===!0})),Z.forEach(_e=>pn(_e)),pe.forEach(_e=>B.fetchers.delete(_e))}function Nt(K,X,{flushSync:Z}={}){let pe=B.actionData!=null&&B.navigation.formMethod!=null&&Or(B.navigation.formMethod)&&B.navigation.state==="loading"&&K.state?._isRedirect!==!0,_e;X.actionData?Object.keys(X.actionData).length>0?_e=X.actionData:_e=null:pe?_e=B.actionData:_e=null;let Ce=X.loaderData?Tx(B.loaderData,X.loaderData,X.matches||[],X.errors):B.loaderData,Oe=B.blockers;Oe.size>0&&(Oe=new Map(Oe),Oe.forEach((Ie,Be)=>Oe.set(Be,Id)));let Le=O?!1:No(K,X.matches||B.matches),Re=A===!0||B.navigation.formMethod!=null&&Or(B.navigation.formMethod)&&K.state?._isRedirect!==!0;c&&(l=c,c=void 0),O||M==="POP"||(M==="PUSH"?t.history.push(K,K.state):M==="REPLACE"&&t.history.replace(K,K.state));let Ve;if(M==="POP"){let Ie=D.get(B.location.pathname);Ie&&Ie.has(K.pathname)?Ve={currentLocation:B.location,nextLocation:K}:D.has(K.pathname)&&(Ve={currentLocation:K,nextLocation:B.location})}else if(P){let Ie=D.get(B.location.pathname);Ie?Ie.add(K.pathname):(Ie=new Set([K.pathname]),D.set(B.location.pathname,Ie)),Ve={currentLocation:B.location,nextLocation:K}}Ot({...X,actionData:_e,loaderData:Ce,historyAction:M,location:K,initialized:!0,navigation:Gb,revalidation:"idle",restoreScrollPosition:Le,preventScrollReset:Re,blockers:Oe},{viewTransitionOpts:Ve,flushSync:Z===!0}),M="POP",A=!1,P=!1,O=!1,ke=!1,Pe?.resolve(),Pe=null}async function Mr(K,X){if(typeof K=="number"){t.history.go(K);return}let Z=h4(B.location,B.matches,d,K,X?.fromRouteId,X?.relative),{path:pe,submission:_e,error:Ce}=_x(!1,Z,X),Oe=B.location,Le=Af(B.location,pe,X&&X.state);Le={...Le,...t.history.encodeLocation(Le)};let Re=X&&X.replace!=null?X.replace:void 0,Ve="PUSH";Re===!0?Ve="REPLACE":Re===!1||_e!=null&&Or(_e.formMethod)&&_e.formAction===B.location.pathname+B.location.search&&(Ve="REPLACE");let Ie=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,Be=(X&&X.flushSync)===!0,nt=Oo({currentLocation:Oe,nextLocation:Le,historyAction:Ve});if(nt){ai(nt,{state:"blocked",location:Le,proceed(){ai(nt,{state:"proceeding",proceed:void 0,reset:void 0,location:Le}),Mr(K,X)},reset(){let wt=new Map(B.blockers);wt.set(nt,Id),Ot({blockers:wt})}});return}await fr(Ve,Le,{submission:_e,pendingError:Ce,preventScrollReset:Ie,replace:X&&X.replace,enableViewTransition:X&&X.viewTransition,flushSync:Be})}function ni(){Pe||(Pe=nR()),Bo(),Ot({revalidation:"loading"});let K=Pe.promise;return B.navigation.state==="submitting"?K:B.navigation.state==="idle"?(fr(B.historyAction,B.location,{startUninterruptedRevalidation:!0}),K):(fr(M||B.historyAction,B.navigation.location,{overrideNavigation:B.navigation,enableViewTransition:P===!0}),K)}async function fr(K,X,Z){C&&C.abort(),C=null,M=K,O=(Z&&Z.startUninterruptedRevalidation)===!0,Ii(B.location,B.matches),A=(Z&&Z.preventScrollReset)===!0,P=(Z&&Z.enableViewTransition)===!0;let pe=c||l,_e=Z&&Z.overrideNavigation,Ce=Z?.initialHydration&&B.matches&&B.matches.length>0&&!j?B.matches:Ls(pe,X,d),Oe=(Z&&Z.flushSync)===!0;if(Ce&&B.initialized&&!ke&&XL(B.location,X)&&!(Z&&Z.submission&&Or(Z.submission.formMethod))){Nt(X,{matches:Ce},{flushSync:Oe});return}let Le=pr(Ce,pe,X.pathname);if(Le.active&&Le.matches&&(Ce=Le.matches),!Ce){let{error:Ct,notFoundMatches:et,route:Mt}=za(X.pathname);Nt(X,{matches:et,loaderData:{},errors:{[Mt.id]:Ct}},{flushSync:Oe});return}C=new AbortController;let Re=zc(t.history,X,C.signal,Z&&Z.submission),Ve=new bx(t.unstable_getContext?await t.unstable_getContext():void 0),Ie;if(Z&&Z.pendingError)Ie=[Zl(Ce).route.id,{type:"error",error:Z.pendingError}];else if(Z&&Z.submission&&Or(Z.submission.formMethod)){let Ct=await sl(Re,X,Z.submission,Ce,Ve,Le.active,Z&&Z.initialHydration===!0,{replace:Z.replace,flushSync:Oe});if(Ct.shortCircuited)return;if(Ct.pendingActionResult){let[et,Mt]=Ct.pendingActionResult;if(Zr(Mt)&&Df(Mt.error)&&Mt.error.status===404){C=null,Nt(X,{matches:Ct.matches,loaderData:{},errors:{[et]:Mt.error}});return}}Ce=Ct.matches||Ce,Ie=Ct.pendingActionResult,_e=Wb(X,Z.submission),Oe=!1,Le.active=!1,Re=zc(t.history,Re.url,Re.signal)}let{shortCircuited:Be,matches:nt,loaderData:wt,errors:jt}=await Ou(Re,X,Ce,Ve,Le.active,_e,Z&&Z.submission,Z&&Z.fetcherSubmission,Z&&Z.replace,Z&&Z.initialHydration===!0,Oe,Ie);Be||(C=null,Nt(X,{matches:nt||Ce,...Dx(Ie),loaderData:wt,errors:jt}))}async function sl(K,X,Z,pe,_e,Ce,Oe,Le={}){Bo();let Re=JL(X,Z);if(Ot({navigation:Re},{flushSync:Le.flushSync===!0}),Ce){let Be=await Ji(pe,X.pathname,K.signal);if(Be.type==="aborted")return{shortCircuited:!0};if(Be.type==="error"){let nt=Zl(Be.partialMatches).route.id;return{matches:Be.partialMatches,pendingActionResult:[nt,{type:"error",error:Be.error}]}}else if(Be.matches)pe=Be.matches;else{let{notFoundMatches:nt,error:wt,route:jt}=za(X.pathname);return{matches:nt,pendingActionResult:[jt.id,{type:"error",error:wt}]}}}let Ve,Ie=q0(pe,X);if(!Ie.route.action&&!Ie.route.lazy)Ve={type:"error",error:Si(405,{method:K.method,pathname:X.pathname,routeId:Ie.route.id})};else{let Be=Zc(i,o,K,pe,Ie,Oe?[]:r,_e),nt=await ri(K,Be,_e,null);if(Ve=nt[Ie.route.id],!Ve){for(let wt of pe)if(nt[wt.route.id]){Ve=nt[wt.route.id];break}}if(K.signal.aborted)return{shortCircuited:!0}}if(ru(Ve)){let Be;return Le&&Le.replace!=null?Be=Le.replace:Be=Cx(Ve.response.headers.get("Location"),new URL(K.url),d)===B.location.pathname+B.location.search,await Ri(K,Ve,!0,{submission:Z,replace:Be}),{shortCircuited:!0}}if(Zr(Ve)){let Be=Zl(pe,Ie.route.id);return(Le&&Le.replace)!==!0&&(M="PUSH"),{matches:pe,pendingActionResult:[Be.route.id,Ve,Ie.route.id]}}return{matches:pe,pendingActionResult:[Ie.route.id,Ve]}}async function Ou(K,X,Z,pe,_e,Ce,Oe,Le,Re,Ve,Ie,Be){let nt=Ce||Wb(X,Oe),wt=Oe||Le||Ix(nt),jt=!O&&!Ve;if(_e){if(jt){let en=mr(Be);Ot({navigation:nt,...en!==void 0?{actionData:en}:{}},{flushSync:Ie})}let Xe=await Ji(Z,X.pathname,K.signal);if(Xe.type==="aborted")return{shortCircuited:!0};if(Xe.type==="error"){let en=Zl(Xe.partialMatches).route.id;return{matches:Xe.partialMatches,loaderData:{},errors:{[en]:Xe.error}}}else if(Xe.matches)Z=Xe.matches;else{let{error:en,notFoundMatches:Va,route:br}=za(X.pathname);return{matches:Va,loaderData:{},errors:{[br.id]:en}}}}let Ct=c||l,{dsMatches:et,revalidatingFetchers:Mt}=xx(K,pe,i,o,t.history,B,Z,wt,X,Ve?[]:r,Ve===!0,ke,Ke,ce,se,V,Ct,d,t.patchRoutesOnNavigation!=null,Be);if(ve=++ue,!t.dataStrategy&&!et.some(Xe=>Xe.shouldLoad)&&Mt.length===0){let Xe=Yi();return Nt(X,{matches:Z,loaderData:{},errors:Be&&Zr(Be[1])?{[Be[0]]:Be[1].error}:null,...Dx(Be),...Xe?{fetchers:new Map(B.fetchers)}:{}},{flushSync:Ie}),{shortCircuited:!0}}if(jt){let Xe={};if(!_e){Xe.navigation=nt;let en=mr(Be);en!==void 0&&(Xe.actionData=en)}Mt.length>0&&(Xe.fetchers=Ih(Mt)),Ot(Xe,{flushSync:Ie})}Mt.forEach(Xe=>{ii(Xe.key),Xe.controller&&W.set(Xe.key,Xe.controller)});let Ar=()=>Mt.forEach(Xe=>ii(Xe.key));C&&C.signal.addEventListener("abort",Ar);let{loaderResults:qn,fetcherResults:Bn}=await Io(et,Mt,K,pe);if(K.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",Ar),Mt.forEach(Xe=>W.delete(Xe.key));let gr=Ap(qn);if(gr)return await Ri(K,gr.result,!0,{replace:Re}),{shortCircuited:!0};if(gr=Ap(Bn),gr)return V.add(gr.key),await Ri(K,gr.result,!0,{replace:Re}),{shortCircuited:!0};let{loaderData:zo,errors:Vr}=Ax(B,Z,qn,Be,Mt,Bn);Ve&&B.errors&&(Vr={...B.errors,...Vr});let si=Yi(),Fr=Qi(ve),yr=si||Fr||Mt.length>0;return{matches:Z,loaderData:zo,errors:Vr,...yr?{fetchers:new Map(B.fetchers)}:{}}}function mr(K){if(K&&!Zr(K[1]))return{[K[0]]:K[1].data};if(B.actionData)return Object.keys(B.actionData).length===0?null:B.actionData}function Ih(K){return K.forEach(X=>{let Z=B.fetchers.get(X.key),pe=Bd(void 0,Z?Z.data:void 0);B.fetchers.set(X.key,pe)}),new Map(B.fetchers)}async function ll(K,X,Z,pe){ii(K);let _e=(pe&&pe.flushSync)===!0,Ce=c||l,Oe=h4(B.location,B.matches,d,Z,X,pe?.relative),Le=Ls(Ce,Oe,d),Re=pr(Le,Ce,Oe);if(Re.active&&Re.matches&&(Le=Re.matches),!Le){ot(K,X,Si(404,{pathname:Oe}),{flushSync:_e});return}let{path:Ve,submission:Ie,error:Be}=_x(!0,Oe,pe);if(Be){ot(K,X,Be,{flushSync:_e});return}let nt=new bx(t.unstable_getContext?await t.unstable_getContext():void 0),wt=(pe&&pe.preventScrollReset)===!0;if(Ie&&Or(Ie.formMethod)){await Ro(K,X,Ve,Le,nt,Re.active,_e,wt,Ie);return}se.set(K,{routeId:X,path:Ve}),await Na(K,X,Ve,Le,nt,Re.active,_e,wt,Ie)}async function Ro(K,X,Z,pe,_e,Ce,Oe,Le,Re){Bo(),se.delete(K);let Ve=B.fetchers.get(K);kt(K,ZL(Re,Ve),{flushSync:Oe});let Ie=new AbortController,Be=zc(t.history,Z,Ie.signal,Re);if(Ce){let Wt=await Ji(pe,new URL(Be.url).pathname,Be.signal,K);if(Wt.type==="aborted")return;if(Wt.type==="error"){ot(K,X,Wt.error,{flushSync:Oe});return}else if(Wt.matches)pe=Wt.matches;else{ot(K,X,Si(404,{pathname:Z}),{flushSync:Oe});return}}let nt=q0(pe,Z);if(!nt.route.action&&!nt.route.lazy){let Wt=Si(405,{method:Re.formMethod,pathname:Z,routeId:X});ot(K,X,Wt,{flushSync:Oe});return}W.set(K,Ie);let wt=ue,jt=Zc(i,o,Be,pe,nt,r,_e),et=(await ri(Be,jt,_e,K))[nt.route.id];if(Be.signal.aborted){W.get(K)===Ie&&W.delete(K);return}if(ce.has(K)){if(ru(et)||Zr(et)){kt(K,Cs(void 0));return}}else{if(ru(et))if(W.delete(K),ve>wt){kt(K,Cs(void 0));return}else return V.add(K),kt(K,Bd(Re)),Ri(Be,et,!1,{fetcherSubmission:Re,preventScrollReset:Le});if(Zr(et)){ot(K,X,et.error);return}}let Mt=B.navigation.location||B.location,Ar=zc(t.history,Mt,Ie.signal),qn=c||l,Bn=B.navigation.state!=="idle"?Ls(qn,B.navigation.location,d):B.matches;dt(Bn,"Didn't find any matches after fetcher action");let gr=++ue;De.set(K,gr);let zo=Bd(Re,et.data);B.fetchers.set(K,zo);let{dsMatches:Vr,revalidatingFetchers:si}=xx(Ar,_e,i,o,t.history,B,Bn,Re,Mt,r,!1,ke,Ke,ce,se,V,qn,d,t.patchRoutesOnNavigation!=null,[nt.route.id,et]);si.filter(Wt=>Wt.key!==K).forEach(Wt=>{let Bi=Wt.key,Vo=B.fetchers.get(Bi),Fo=Bd(void 0,Vo?Vo.data:void 0);B.fetchers.set(Bi,Fo),ii(Bi),Wt.controller&&W.set(Bi,Wt.controller)}),Ot({fetchers:new Map(B.fetchers)});let Fr=()=>si.forEach(Wt=>ii(Wt.key));Ie.signal.addEventListener("abort",Fr);let{loaderResults:yr,fetcherResults:Xe}=await Io(Vr,si,Ar,_e);if(Ie.signal.aborted)return;if(Ie.signal.removeEventListener("abort",Fr),De.delete(K),W.delete(K),si.forEach(Wt=>W.delete(Wt.key)),B.fetchers.has(K)){let Wt=Cs(et.data);B.fetchers.set(K,Wt)}let en=Ap(yr);if(en)return Ri(Ar,en.result,!1,{preventScrollReset:Le});if(en=Ap(Xe),en)return V.add(en.key),Ri(Ar,en.result,!1,{preventScrollReset:Le});let{loaderData:Va,errors:br}=Ax(B,Bn,yr,void 0,si,Xe);Qi(gr),B.navigation.state==="loading"&&gr>ve?(dt(M,"Expected pending action"),C&&C.abort(),Nt(B.navigation.location,{matches:Bn,loaderData:Va,errors:br,fetchers:new Map(B.fetchers)})):(Ot({errors:br,loaderData:Tx(B.loaderData,Va,Bn,br),fetchers:new Map(B.fetchers)}),ke=!1)}async function Na(K,X,Z,pe,_e,Ce,Oe,Le,Re){let Ve=B.fetchers.get(K);kt(K,Bd(Re,Ve?Ve.data:void 0),{flushSync:Oe});let Ie=new AbortController,Be=zc(t.history,Z,Ie.signal);if(Ce){let Mt=await Ji(pe,new URL(Be.url).pathname,Be.signal,K);if(Mt.type==="aborted")return;if(Mt.type==="error"){ot(K,X,Mt.error,{flushSync:Oe});return}else if(Mt.matches)pe=Mt.matches;else{ot(K,X,Si(404,{pathname:Z}),{flushSync:Oe});return}}let nt=q0(pe,Z);W.set(K,Ie);let wt=ue,jt=Zc(i,o,Be,pe,nt,r,_e),et=(await ri(Be,jt,_e,K))[nt.route.id];if(W.get(K)===Ie&&W.delete(K),!Be.signal.aborted){if(ce.has(K)){kt(K,Cs(void 0));return}if(ru(et))if(ve>wt){kt(K,Cs(void 0));return}else{V.add(K),await Ri(Be,et,!1,{preventScrollReset:Le});return}if(Zr(et)){ot(K,X,et.error);return}kt(K,Cs(et.data))}}async function Ri(K,X,Z,{submission:pe,fetcherSubmission:_e,preventScrollReset:Ce,replace:Oe}={}){X.response.headers.has("X-Remix-Revalidate")&&(ke=!0);let Le=X.response.headers.get("Location");dt(Le,"Expected a Location header on the redirect Response"),Le=Cx(Le,new URL(K.url),d);let Re=Af(B.location,Le,{_isRedirect:!0});if(n){let jt=!1;if(X.response.headers.has("X-Remix-Reload-Document"))jt=!0;else if(M2(Le)){const Ct=uS(Le,!0);jt=Ct.origin!==e.location.origin||Ai(Ct.pathname,d)==null}if(jt){Oe?e.location.replace(Le):e.location.assign(Le);return}}C=null;let Ve=Oe===!0||X.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ie,formAction:Be,formEncType:nt}=B.navigation;!pe&&!_e&&Ie&&Be&&nt&&(pe=Ix(B.navigation));let wt=pe||_e;if(BL.has(X.response.status)&&wt&&Or(wt.formMethod))await fr(Ve,Re,{submission:{...wt,formAction:Le},preventScrollReset:Ce||A,enableViewTransition:Z?P:void 0});else{let jt=Wb(Re,pe);await fr(Ve,Re,{overrideNavigation:jt,fetcherSubmission:_e,preventScrollReset:Ce||A,enableViewTransition:Z?P:void 0})}}async function ri(K,X,Z,pe){let _e,Ce={};try{_e=await qL(f,K,X,pe,Z,!1)}catch(Oe){return X.filter(Le=>Le.shouldLoad).forEach(Le=>{Ce[Le.route.id]={type:"error",error:Oe}}),Ce}if(K.signal.aborted)return Ce;for(let[Oe,Le]of Object.entries(_e))if(YL(Le)){let Re=Le.result;Ce[Oe]={type:"redirect",response:GL(Re,K,Oe,X,d)}}else Ce[Oe]=await HL(Le);return Ce}async function Io(K,X,Z,pe){let _e=ri(Z,K,pe,null),Ce=Promise.all(X.map(async Re=>{if(Re.matches&&Re.match&&Re.request&&Re.controller){let Ie=(await ri(Re.request,Re.matches,pe,Re.key))[Re.match.route.id];return{[Re.key]:Ie}}else return Promise.resolve({[Re.key]:{type:"error",error:Si(404,{pathname:Re.path})}})})),Oe=await _e,Le=(await Ce).reduce((Re,Ve)=>Object.assign(Re,Ve),{});return{loaderResults:Oe,fetcherResults:Le}}function Bo(){ke=!0,se.forEach((K,X)=>{W.has(X)&&Ke.add(X),ii(X)})}function kt(K,X,Z={}){B.fetchers.set(K,X),Ot({fetchers:new Map(B.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function ot(K,X,Z,pe={}){let _e=Zl(B.matches,X);pn(K),Ot({errors:{[_e.route.id]:Z},fetchers:new Map(B.fetchers)},{flushSync:(pe&&pe.flushSync)===!0})}function tr(K){return de.set(K,(de.get(K)||0)+1),ce.has(K)&&ce.delete(K),B.fetchers.get(K)||OL}function pn(K){let X=B.fetchers.get(K);W.has(K)&&!(X&&X.state==="loading"&&De.has(K))&&ii(K),se.delete(K),De.delete(K),V.delete(K),ce.delete(K),Ke.delete(K),B.fetchers.delete(K)}function Nu(K){let X=(de.get(K)||0)-1;X<=0?(de.delete(K),ce.add(K)):de.set(K,X),Ot({fetchers:new Map(B.fetchers)})}function ii(K){let X=W.get(K);X&&(X.abort(),W.delete(K))}function Xi(K){for(let X of K){let Z=tr(X),pe=Cs(Z.data);B.fetchers.set(X,pe)}}function Yi(){let K=[],X=!1;for(let Z of V){let pe=B.fetchers.get(Z);dt(pe,`Expected fetcher: ${Z}`),pe.state==="loading"&&(V.delete(Z),K.push(Z),X=!0)}return Xi(K),X}function Qi(K){let X=[];for(let[Z,pe]of De)if(pe<K){let _e=B.fetchers.get(Z);dt(_e,`Expected fetcher: ${Z}`),_e.state==="loading"&&(ii(Z),De.delete(Z),X.push(Z))}return Xi(X),X.length>0}function zr(K,X){let Z=B.blockers.get(K)||Id;return Ae.get(K)!==X&&Ae.set(K,X),Z}function Pa(K){B.blockers.delete(K),Ae.delete(K)}function ai(K,X){let Z=B.blockers.get(K)||Id;dt(Z.state==="unblocked"&&X.state==="blocked"||Z.state==="blocked"&&X.state==="blocked"||Z.state==="blocked"&&X.state==="proceeding"||Z.state==="blocked"&&X.state==="unblocked"||Z.state==="proceeding"&&X.state==="unblocked",`Invalid blocker state transition: ${Z.state} -> ${X.state}`);let pe=new Map(B.blockers);pe.set(K,X),Ot({blockers:pe})}function Oo({currentLocation:K,nextLocation:X,historyAction:Z}){if(Ae.size===0)return;Ae.size>1&&En(!1,"A router only supports one blocker at a time");let pe=Array.from(Ae.entries()),[_e,Ce]=pe[pe.length-1],Oe=B.blockers.get(_e);if(!(Oe&&Oe.state==="proceeding")&&Ce({currentLocation:K,nextLocation:X,historyAction:Z}))return _e}function za(K){let X=Si(404,{pathname:K}),Z=c||l,{matches:pe,route:_e}=Lx(Z);return{notFoundMatches:pe,route:_e,error:X}}function ul(K,X,Z){if(x=K,R=X,S=Z||null,!I&&B.navigation===Gb){I=!0;let pe=No(B.location,B.matches);pe!=null&&Ot({restoreScrollPosition:pe})}return()=>{x=null,R=null,S=null}}function oi(K,X){return S&&S(K,X.map(pe=>hL(pe,B.loaderData)))||K.key}function Ii(K,X){if(x&&R){let Z=oi(K,X);x[Z]=R()}}function No(K,X){if(x){let Z=oi(K,X),pe=x[Z];if(typeof pe=="number")return pe}return null}function pr(K,X,Z){if(t.patchRoutesOnNavigation)if(K){if(Object.keys(K[0].params).length>0)return{active:!0,matches:$0(X,Z,d,!0)}}else return{active:!0,matches:$0(X,Z,d,!0)||[]};return{active:!1,matches:null}}async function Ji(K,X,Z,pe){if(!t.patchRoutesOnNavigation)return{type:"success",matches:K};let _e=K;for(;;){let Ce=c==null,Oe=c||l,Le=o;try{await t.patchRoutesOnNavigation({signal:Z,path:X,matches:_e,fetcherKey:pe,patch:(Ie,Be)=>{Z.aborted||wx(Ie,Be,Oe,Le,i,!1)}})}catch(Ie){return{type:"error",error:Ie,partialMatches:_e}}finally{Ce&&!Z.aborted&&(l=[...l])}if(Z.aborted)return{type:"aborted"};let Re=Ls(Oe,X,d);if(Re)return{type:"success",matches:Re};let Ve=$0(Oe,X,d,!0);if(!Ve||_e.length===Ve.length&&_e.every((Ie,Be)=>Ie.route.id===Ve[Be].route.id))return{type:"success",matches:null};_e=Ve}}function Zi(K){o={},c=Tf(K,i,void 0,o)}function Po(K,X,Z=!1){let pe=c==null;wx(K,X,c||l,o,i,Z),pe&&(l=[...l],Ot({}))}return ie={get basename(){return d},get future(){return p},get state(){return B},get routes(){return l},get window(){return e},initialize:on,subscribe:dr,enableScrollRestoration:ul,navigate:Mr,fetch:ll,revalidate:ni,createHref:K=>t.history.createHref(K),encodeLocation:K=>t.history.encodeLocation(K),getFetcher:tr,deleteFetcher:Nu,dispose:it,getBlocker:zr,deleteBlocker:Pa,patchRoutes:Po,_internalFetchControllers:W,_internalSetRoutes:Zi,_internalSetStateDoNotUseOrYouWillBreakYourApp(K){Ot(K)}},ie}function VL(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function h4(t,e,n,r,i,o){let l,c;if(i){l=[];for(let f of e)if(l.push(f),f.route.id===i){c=f;break}}else l=e,c=e[e.length-1];let d=C2(r||".",k2(l),Ai(t.pathname,n)||t.pathname,o==="path");if(r==null&&(d.search=t.search,d.hash=t.hash),(r==null||r===""||r===".")&&c){let f=A2(d.search);if(c.route.index&&!f)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&f){let p=new URLSearchParams(d.search),y=p.getAll("index");p.delete("index"),y.filter(x=>x).forEach(x=>p.append("index",x));let v=p.toString();d.search=v?`?${v}`:""}}return n!=="/"&&(d.pathname=SL({basename:n,pathname:d.pathname})),qs(d)}function _x(t,e,n){if(!n||!VL(n))return{path:e};if(n.formMethod&&!QL(n.formMethod))return{path:e,error:Si(405,{method:n.formMethod})};let r=()=>({path:e,error:Si(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),l=xS(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Or(o))return r();let y=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((v,[x,S])=>`${v}${x}=${S}
`,""):String(n.body);return{path:e,submission:{formMethod:o,formAction:l,formEncType:n.formEncType,formData:void 0,json:void 0,text:y}}}else if(n.formEncType==="application/json"){if(!Or(o))return r();try{let y=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:o,formAction:l,formEncType:n.formEncType,formData:void 0,json:y,text:void 0}}}catch{return r()}}}dt(typeof FormData=="function","FormData is not available in this environment");let c,d;if(n.formData)c=m4(n.formData),d=n.formData;else if(n.body instanceof FormData)c=m4(n.body),d=n.body;else if(n.body instanceof URLSearchParams)c=n.body,d=Mx(c);else if(n.body==null)c=new URLSearchParams,d=new FormData;else try{c=new URLSearchParams(n.body),d=Mx(c)}catch{return r()}let f={formMethod:o,formAction:l,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(Or(f.formMethod))return{path:e,submission:f};let p=tl(e);return t&&p.search&&A2(p.search)&&c.append("index",""),p.search=`?${c}`,{path:qs(p),submission:f}}function xx(t,e,n,r,i,o,l,c,d,f,p,y,v,x,S,R,I,L,j,z){let G=z?Zr(z[1])?z[1].error:z[1].data:void 0,ie=i.createURL(o.location),B=i.createURL(d),M;if(p&&o.errors){let O=Object.keys(o.errors)[0];M=l.findIndex(ke=>ke.route.id===O)}else if(z&&Zr(z[1])){let O=z[0];M=l.findIndex(ke=>ke.route.id===O)-1}let A=z?z[1].statusCode:void 0,C=A&&A>=400,P={currentUrl:ie,currentParams:o.matches[0]?.params||{},nextUrl:B,nextParams:l[0].params,...c,actionResult:G,actionStatus:A},D=l.map((O,ke)=>{let{route:Ke}=O,W=null;if(M!=null&&ke>M?W=!1:Ke.lazy?W=!0:Ke.loader==null?W=!1:p?W=d4(Ke,o.loaderData,o.errors):FL(o.loaderData,o.matches[ke],O)&&(W=!0),W!==null)return f4(n,r,t,O,f,e,W);let ue=C?!1:y||ie.pathname+ie.search===B.pathname+B.search||ie.search!==B.search||UL(o.matches[ke],O),ve={...P,defaultShouldRevalidate:ue},De=yg(O,ve);return f4(n,r,t,O,f,e,De,ve)}),U=[];return S.forEach((O,ke)=>{if(p||!l.some(de=>de.route.id===O.routeId)||x.has(ke))return;let Ke=o.fetchers.get(ke),W=Ke&&Ke.state!=="idle"&&Ke.data===void 0,ue=Ls(I,O.path,L);if(!ue){if(j&&W)return;U.push({key:ke,routeId:O.routeId,path:O.path,matches:null,match:null,request:null,controller:null});return}if(R.has(ke))return;let ve=q0(ue,O.path),De=new AbortController,V=zc(i,O.path,De.signal),se=null;if(v.has(ke))v.delete(ke),se=Zc(n,r,V,ue,ve,f,e);else if(W)y&&(se=Zc(n,r,V,ue,ve,f,e));else{let de={...P,defaultShouldRevalidate:C?!1:y};yg(ve,de)&&(se=Zc(n,r,V,ue,ve,f,e,de))}se&&U.push({key:ke,routeId:O.routeId,path:O.path,matches:se,match:ve,request:V,controller:De})}),{dsMatches:D,revalidatingFetchers:U}}function d4(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&t.id in e,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function FL(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function UL(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function yg(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function wx(t,e,n,r,i,o){let l;if(t){let f=r[t];dt(f,`No route found to patch children into: routeId = ${t}`),f.children||(f.children=[]),l=f.children}else l=n;let c=[],d=[];if(e.forEach(f=>{let p=l.find(y=>gS(f,y));p?d.push({existingRoute:p,newRoute:f}):c.push(f)}),c.length>0){let f=Tf(c,i,[t||"_","patch",String(l?.length||"0")],r);l.push(...f)}if(o&&d.length>0)for(let f=0;f<d.length;f++){let{existingRoute:p,newRoute:y}=d[f],v=p,[x]=Tf([y],i,[],{},!0);Object.assign(v,{element:x.element?x.element:v.element,errorElement:x.errorElement?x.errorElement:v.errorElement,hydrateFallbackElement:x.hydrateFallbackElement?x.hydrateFallbackElement:v.hydrateFallbackElement})}}function gS(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>e.children?.some(i=>gS(n,i))):!1}var Ex=new WeakMap,yS=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(dt(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let o=i.lazy[t];if(!o)return;let l=Ex.get(i);l||(l={},Ex.set(i,l));let c=l[t];if(c)return c;let d=(async()=>{let f=sL(t),y=i[t]!==void 0&&t!=="hasErrorBoundary";if(f)En(!f,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),l[t]=Promise.resolve();else if(y)En(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let v=await o();v!=null&&(Object.assign(i,{[t]:v}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(v=>v===void 0)&&(i.lazy=void 0))})();return l[t]=d,d},Sx=new WeakMap;function KL(t,e,n,r,i){let o=n[t.id];if(dt(o,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let p=Sx.get(o);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let y=(async()=>{dt(typeof t.lazy=="function","No lazy route function found");let v=await t.lazy(),x={};for(let S in v){let R=v[S];if(R===void 0)continue;let I=uL(S),j=o[S]!==void 0&&S!=="hasErrorBoundary";I?En(!I,"Route property "+S+" is not a supported property to be returned from a lazy route function. This property will be ignored."):j?En(!j,`Route "${o.id}" has a static property "${S}" defined but its lazy function is also returning a value for this property. The lazy route property "${S}" will be ignored.`):x[S]=R}Object.assign(o,x),Object.assign(o,{...r(o),lazy:void 0})})();return Sx.set(o,y),y.catch(()=>{}),{lazyRoutePromise:y,lazyHandlerPromise:y}}let l=Object.keys(t.lazy),c=[],d;for(let p of l){if(i&&i.includes(p))continue;let y=yS({key:p,route:t,manifest:n,mapRouteProperties:r});y&&(c.push(y),p===e&&(d=y))}let f=c.length>0?Promise.all(c).then(()=>{}):void 0;return f?.catch(()=>{}),d?.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:d}}async function kx(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,o)=>{n[e[o].route.id]=i}),n}async function $L(t){return t.matches.some(e=>e.route.unstable_middleware)?bS(t,!1,()=>kx(t),(e,n)=>({[n]:{type:"error",result:e}})):kx(t)}async function bS(t,e,n,r){let{matches:i,request:o,params:l,context:c}=t,d={handlerResult:void 0};try{let f=i.flatMap(y=>y.route.unstable_middleware?y.route.unstable_middleware.map(v=>[y.route.id,v]):[]),p=await vS({request:o,params:l,context:c},f,e,d,n);return e?p:d.handlerResult}catch(f){if(!d.middlewareError)throw f;let p=await r(d.middlewareError.error,d.middlewareError.routeId);return d.handlerResult?Object.assign(d.handlerResult,p):p}}async function vS(t,e,n,r,i,o=0){let{request:l}=t;if(l.signal.aborted)throw l.signal.reason?l.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${l.method} ${l.url}`);let c=e[o];if(!c)return r.handlerResult=await i(),r.handlerResult;let[d,f]=c,p=!1,y,v=async()=>{if(p)throw new Error("You may only call `next()` once per middleware");p=!0,await vS(t,e,n,r,i,o+1)};try{let x=await f({request:t.request,params:t.params,context:t.context},v);return p?x===void 0?y:x:v()}catch(x){throw r.middlewareError?r.middlewareError.error!==x&&(r.middlewareError={routeId:d,error:x}):r.middlewareError={routeId:d,error:x},x}}function _S(t,e,n,r,i){let o=yS({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:t}),l=KL(r.route,Or(n.method)?"action":"loader",e,t,i);return{middleware:o,route:l.lazyRoutePromise,handler:l.lazyHandlerPromise}}function f4(t,e,n,r,i,o,l,c=null){let d=!1,f=_S(t,e,n,r,i);return{...r,_lazyPromises:f,shouldLoad:l,unstable_shouldRevalidateArgs:c,unstable_shouldCallHandler(p){return d=!0,c?typeof p=="boolean"?yg(r,{...c,defaultShouldRevalidate:p}):yg(r,c):l},resolve(p){return d||l||p&&!Or(n.method)&&(r.route.lazy||r.route.loader)?jL({request:n,match:r,lazyHandlerPromise:f?.handler,lazyRoutePromise:f?.route,handlerOverride:p,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function Zc(t,e,n,r,i,o,l,c=null){return r.map(d=>d.route.id!==i.route.id?{...d,shouldLoad:!1,unstable_shouldRevalidateArgs:c,unstable_shouldCallHandler:()=>!1,_lazyPromises:_S(t,e,n,d,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:f4(t,e,n,d,o,l,!0,c))}async function qL(t,e,n,r,i,o){n.some(f=>f._lazyPromises?.middleware)&&await Promise.all(n.map(f=>f._lazyPromises?.middleware));let l={request:e,params:n[0].params,context:i,matches:n},d=await t({...l,fetcherKey:r,unstable_runClientMiddleware:f=>{let p=l;return bS(p,!1,()=>f({...p,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(y,v)=>({[v]:{type:"error",result:y}}))}});try{await Promise.all(n.flatMap(f=>[f._lazyPromises?.handler,f._lazyPromises?.route]))}catch{}return d}async function jL({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:i,scopedContext:o}){let l,c,d=Or(t.method),f=d?"action":"loader",p=y=>{let v,x=new Promise((I,L)=>v=L);c=()=>v(),t.signal.addEventListener("abort",c);let S=I=>typeof y!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${f}" [routeId: ${e.route.id}]`)):y({request:t,params:e.params,context:o},...I!==void 0?[I]:[]),R=(async()=>{try{return{type:"data",result:await(i?i(L=>S(L)):S())}}catch(I){return{type:"error",result:I}}})();return Promise.race([R,x])};try{let y=d?e.route.action:e.route.loader;if(n||r)if(y){let v,[x]=await Promise.all([p(y).catch(S=>{v=S}),n,r]);if(v!==void 0)throw v;l=x}else{await n;let v=d?e.route.action:e.route.loader;if(v)[l]=await Promise.all([p(v),r]);else if(f==="action"){let x=new URL(t.url),S=x.pathname+x.search;throw Si(405,{method:t.method,pathname:S,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(y)l=await p(y);else{let v=new URL(t.url),x=v.pathname+v.search;throw Si(404,{pathname:x})}}catch(y){return{type:"error",result:y}}finally{c&&t.signal.removeEventListener("abort",c)}return l}async function HL(t){let{result:e,type:n}=t;if(wS(e)){let r;try{let i=e.headers.get("Content-Type");i&&/\bapplication\/json\b/.test(i)?e.body==null?r=null:r=await e.json():r=await e.text()}catch(i){return{type:"error",error:i}}return n==="error"?{type:"error",error:new gg(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}return n==="error"?Rx(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new gg(e.init?.status||500,void 0,e.data),statusCode:Df(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Df(e)?e.status:void 0}:Rx(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function GL(t,e,n,r,i){let o=t.headers.get("Location");if(dt(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!M2(o)){let l=r.slice(0,r.findIndex(c=>c.route.id===n)+1);o=h4(new URL(e.url),l,i,o),t.headers.set("Location",o)}return t}function Cx(t,e,n){if(M2(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Ai(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function zc(t,e,n,r){let i=t.createURL(xS(e)).toString(),o={signal:n};if(r&&Or(r.formMethod)){let{formMethod:l,formEncType:c}=r;o.method=l.toUpperCase(),c==="application/json"?(o.headers=new Headers({"Content-Type":c}),o.body=JSON.stringify(r.json)):c==="text/plain"?o.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?o.body=m4(r.formData):o.body=r.formData}return new Request(i,o)}function m4(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Mx(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function WL(t,e,n,r=!1,i=!1){let o={},l=null,c,d=!1,f={},p=n&&Zr(n[1])?n[1].error:void 0;return t.forEach(y=>{if(!(y.route.id in e))return;let v=y.route.id,x=e[v];if(dt(!ru(x),"Cannot handle redirect results in processLoaderData"),Zr(x)){let S=x.error;if(p!==void 0&&(S=p,p=void 0),l=l||{},i)l[v]=S;else{let R=Zl(t,v);l[R.route.id]==null&&(l[R.route.id]=S)}r||(o[v]=pS),d||(d=!0,c=Df(x.error)?x.error.status:500),x.headers&&(f[v]=x.headers)}else o[v]=x.data,x.statusCode&&x.statusCode!==200&&!d&&(c=x.statusCode),x.headers&&(f[v]=x.headers)}),p!==void 0&&n&&(l={[n[0]]:p},n[2]&&(o[n[2]]=void 0)),{loaderData:o,errors:l,statusCode:c||200,loaderHeaders:f}}function Ax(t,e,n,r,i,o){let{loaderData:l,errors:c}=WL(e,n,r);return i.filter(d=>!d.matches||d.matches.some(f=>f.shouldLoad)).forEach(d=>{let{key:f,match:p,controller:y}=d,v=o[f];if(dt(v,"Did not find corresponding fetcher result"),!(y&&y.signal.aborted))if(Zr(v)){let x=Zl(t.matches,p?.route.id);c&&c[x.route.id]||(c={...c,[x.route.id]:v.error}),t.fetchers.delete(f)}else if(ru(v))dt(!1,"Unhandled fetcher revalidation redirect");else{let x=Cs(v.data);t.fetchers.set(f,x)}}),{loaderData:l,errors:c}}function Tx(t,e,n,r){let i=Object.entries(e).filter(([,o])=>o!==pS).reduce((o,[l,c])=>(o[l]=c,o),{});for(let o of n){let l=o.route.id;if(!e.hasOwnProperty(l)&&t.hasOwnProperty(l)&&o.route.loader&&(i[l]=t[l]),r&&r.hasOwnProperty(l))break}return i}function Dx(t){return t?Zr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Zl(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Lx(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Si(t,{pathname:e,routeId:n,method:r,type:i,message:o}={}){let l="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(l="Bad Request",r&&e&&n?c=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(c="Unable to encode submission body")):t===403?(l="Forbidden",c=`Route "${n}" does not match URL "${e}"`):t===404?(l="Not Found",c=`No route matches URL "${e}"`):t===405&&(l="Method Not Allowed",r&&e&&n?c=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(c=`Invalid request method "${r.toUpperCase()}"`)),new gg(t||500,l,new Error(c),!0)}function Ap(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(ru(i))return{key:r,result:i}}}function xS(t){let e=typeof t=="string"?tl(t):t;return qs({...e,hash:""})}function XL(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function YL(t){return wS(t.result)&&IL.has(t.result.status)}function Zr(t){return t.type==="error"}function ru(t){return(t&&t.type)==="redirect"}function Rx(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function wS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function QL(t){return RL.has(t.toUpperCase())}function Or(t){return DL.has(t.toUpperCase())}function A2(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function q0(t,e){let n=typeof e=="string"?tl(e).search:e.search;if(t[t.length-1].route.index&&A2(n||""))return t[t.length-1];let r=dS(t);return r[r.length-1]}function Ix(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:l}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:l,text:void 0}}}function Wb(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function JL(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Bd(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ZL(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Cs(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function eR(t,e){try{let n=t.sessionStorage.getItem(mS);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function tR(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(mS,JSON.stringify(n))}catch(r){En(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function nR(){let t,e,n=new Promise((r,i)=>{t=async o=>{r(o);try{await n}catch{}},e=async o=>{i(o);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var ku=ne.createContext(null);ku.displayName="DataRouter";var Gf=ne.createContext(null);Gf.displayName="DataRouterState";ne.createContext(!1);var T2=ne.createContext({isTransitioning:!1});T2.displayName="ViewTransition";var ES=ne.createContext(new Map);ES.displayName="Fetchers";var rR=ne.createContext(null);rR.displayName="Await";var Ba=ne.createContext(null);Ba.displayName="Navigation";var s1=ne.createContext(null);s1.displayName="Location";var To=ne.createContext({outlet:null,matches:[],isDataRoute:!1});To.displayName="Route";var D2=ne.createContext(null);D2.displayName="RouteError";function iR(t,{relative:e}={}){dt(Wf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=ne.useContext(Ba),{hash:i,pathname:o,search:l}=Xf(t,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:Sa([n,o])),r.createHref({pathname:c,search:l,hash:i})}function Wf(){return ne.useContext(s1)!=null}function Cu(){return dt(Wf(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(s1).location}var SS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kS(t){ne.useContext(Ba).static||ne.useLayoutEffect(t)}function L2(){let{isDataRoute:t}=ne.useContext(To);return t?yR():aR()}function aR(){dt(Wf(),"useNavigate() may be used only in the context of a <Router> component.");let t=ne.useContext(ku),{basename:e,navigator:n}=ne.useContext(Ba),{matches:r}=ne.useContext(To),{pathname:i}=Cu(),o=JSON.stringify(k2(r)),l=ne.useRef(!1);return kS(()=>{l.current=!0}),ne.useCallback((d,f={})=>{if(En(l.current,SS),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=C2(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Sa([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,o,i,t])}ne.createContext(null);function Xf(t,{relative:e}={}){let{matches:n}=ne.useContext(To),{pathname:r}=Cu(),i=JSON.stringify(k2(n));return ne.useMemo(()=>C2(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function oR(t,e,n,r){dt(Wf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=ne.useContext(Ba),{matches:o}=ne.useContext(To),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let L=p&&p.path||"";CS(d,!p||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let y=Cu(),v;v=y;let x=v.pathname||"/",S=x;if(f!=="/"){let L=f.replace(/^\//,"").split("/");S="/"+x.replace(/^\//,"").split("/").slice(L.length).join("/")}let R=Ls(t,{pathname:S});return En(p||R!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),En(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),hR(R&&R.map(L=>Object.assign({},L,{params:Object.assign({},c,L.params),pathname:Sa([f,i.encodeLocation?i.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?f:Sa([f,i.encodeLocation?i.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),o,n,r)}function sR(){let t=gR(),e=Df(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=ne.createElement(ne.Fragment,null,ne.createElement("p",null,"💿 Hey developer 👋"),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:o},"ErrorBoundary")," or"," ",ne.createElement("code",{style:o},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),n?ne.createElement("pre",{style:i},n):null,l)}var lR=ne.createElement(sR,null),uR=class extends ne.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?ne.createElement(To.Provider,{value:this.props.routeContext},ne.createElement(D2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cR({routeContext:t,match:e,children:n}){let r=ne.useContext(ku);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ne.createElement(To.Provider,{value:t},n)}function hR(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n?.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);dt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(n)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:y}=n,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,f,p)=>{let y,v=!1,x=null,S=null;n&&(y=o&&f.route.id?o[f.route.id]:void 0,x=f.route.errorElement||lR,l&&(c<0&&p===0?(CS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):c===p&&(v=!0,S=f.route.hydrateFallbackElement||null)));let R=e.concat(i.slice(0,p+1)),I=()=>{let L;return y?L=x:v?L=S:f.route.Component?L=ne.createElement(f.route.Component,null):f.route.element?L=f.route.element:L=d,ne.createElement(cR,{match:f,routeContext:{outlet:d,matches:R,isDataRoute:n!=null},children:L})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?ne.createElement(uR,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:I(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):I()},null)}function R2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dR(t){let e=ne.useContext(ku);return dt(e,R2(t)),e}function fR(t){let e=ne.useContext(Gf);return dt(e,R2(t)),e}function mR(t){let e=ne.useContext(To);return dt(e,R2(t)),e}function I2(t){let e=mR(t),n=e.matches[e.matches.length-1];return dt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function pR(){return I2("useRouteId")}function gR(){let t=ne.useContext(D2),e=fR("useRouteError"),n=I2("useRouteError");return t!==void 0?t:e.errors?.[n]}function yR(){let{router:t}=dR("useNavigate"),e=I2("useNavigate"),n=ne.useRef(!1);return kS(()=>{n.current=!0}),ne.useCallback(async(i,o={})=>{En(n.current,SS),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var Bx={};function CS(t,e,n){!e&&!Bx[t]&&(Bx[t]=!0,En(!1,n))}var Ox={};function Nx(t,e){!t&&!Ox[e]&&(Ox[e]=!0,console.warn(e))}function bR(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&En(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:ne.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&En(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:ne.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&En(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:ne.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var vR=["HydrateFallback","hydrateFallbackElement"],_R=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function xR({router:t,flushSync:e}){let[n,r]=ne.useState(t.state),[i,o]=ne.useState(),[l,c]=ne.useState({isTransitioning:!1}),[d,f]=ne.useState(),[p,y]=ne.useState(),[v,x]=ne.useState(),S=ne.useRef(new Map),R=ne.useCallback((z,{deletedFetchers:G,flushSync:ie,viewTransitionOpts:B})=>{z.fetchers.forEach((A,C)=>{A.data!==void 0&&S.current.set(C,A.data)}),G.forEach(A=>S.current.delete(A)),Nx(ie===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let M=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(Nx(B==null||M,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!B||!M){e&&ie?e(()=>r(z)):ne.startTransition(()=>r(z));return}if(e&&ie){e(()=>{p&&(d&&d.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:B.currentLocation,nextLocation:B.nextLocation})});let A=t.window.document.startViewTransition(()=>{e(()=>r(z))});A.finished.finally(()=>{e(()=>{f(void 0),y(void 0),o(void 0),c({isTransitioning:!1})})}),e(()=>y(A));return}p?(d&&d.resolve(),p.skipTransition(),x({state:z,currentLocation:B.currentLocation,nextLocation:B.nextLocation})):(o(z),c({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}))},[t.window,e,p,d]);ne.useLayoutEffect(()=>t.subscribe(R),[t,R]),ne.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new _R)},[l]),ne.useEffect(()=>{if(d&&i&&t.window){let z=i,G=d.promise,ie=t.window.document.startViewTransition(async()=>{ne.startTransition(()=>r(z)),await G});ie.finished.finally(()=>{f(void 0),y(void 0),o(void 0),c({isTransitioning:!1})}),y(ie)}},[i,d,t.window]),ne.useEffect(()=>{d&&i&&n.location.key===i.location.key&&d.resolve()},[d,p,n.location,i]),ne.useEffect(()=>{!l.isTransitioning&&v&&(o(v.state),c({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),x(void 0))},[l.isTransitioning,v]);let I=ne.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:z=>t.navigate(z),push:(z,G,ie)=>t.navigate(z,{state:G,preventScrollReset:ie?.preventScrollReset}),replace:(z,G,ie)=>t.navigate(z,{replace:!0,state:G,preventScrollReset:ie?.preventScrollReset})}),[t]),L=t.basename||"/",j=ne.useMemo(()=>({router:t,navigator:I,static:!1,basename:L}),[t,I,L]);return ne.createElement(ne.Fragment,null,ne.createElement(ku.Provider,{value:j},ne.createElement(Gf.Provider,{value:n},ne.createElement(ES.Provider,{value:S.current},ne.createElement(T2.Provider,{value:l},ne.createElement(SR,{basename:L,location:n.location,navigationType:n.historyAction,navigator:I},ne.createElement(wR,{routes:t.routes,future:t.future,state:n})))))),null)}var wR=ne.memo(ER);function ER({routes:t,future:e,state:n}){return oR(t,void 0,n,e)}function SR({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){dt(!Wf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=ne.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);typeof n=="string"&&(n=tl(n));let{pathname:d="/",search:f="",hash:p="",state:y=null,key:v="default"}=n,x=ne.useMemo(()=>{let S=Ai(d,l);return S==null?null:{location:{pathname:S,search:f,hash:p,state:y,key:v},navigationType:r}},[l,d,f,p,y,v,r]);return En(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:ne.createElement(Ba.Provider,{value:c},ne.createElement(s1.Provider,{children:e,value:x}))}var j0="get",H0="application/x-www-form-urlencoded";function l1(t){return t!=null&&typeof t.tagName=="string"}function kR(t){return l1(t)&&t.tagName.toLowerCase()==="button"}function CR(t){return l1(t)&&t.tagName.toLowerCase()==="form"}function MR(t){return l1(t)&&t.tagName.toLowerCase()==="input"}function AR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function TR(t,e){return t.button===0&&(!e||e==="_self")&&!AR(t)}var Tp=null;function DR(){if(Tp===null)try{new FormData(document.createElement("form"),0),Tp=!1}catch{Tp=!0}return Tp}var LR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xb(t){return t!=null&&!LR.has(t)?(En(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${H0}"`),null):t}function RR(t,e){let n,r,i,o,l;if(CR(t)){let c=t.getAttribute("action");r=c?Ai(c,e):null,n=t.getAttribute("method")||j0,i=Xb(t.getAttribute("enctype"))||H0,o=new FormData(t)}else if(kR(t)||MR(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||c.getAttribute("action");if(r=d?Ai(d,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||j0,i=Xb(t.getAttribute("formenctype"))||Xb(c.getAttribute("enctype"))||H0,o=new FormData(c,t),!DR()){let{name:f,type:p,value:y}=t;if(p==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(l1(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=j0,r=null,i=H0,l=t}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function B2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function IR(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ai(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function BR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function NR(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await BR(o,n);return l.links?l.links():[]}return[]}));return FR(r.flat(1).filter(OR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Px(t,e,n,r,i,o){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,c=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||c(d,f)):o==="data"?e.filter((d,f)=>{let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||c(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function PR(t,e,{includeHydrateFallback:n}={}){return zR(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function zR(t){return[...new Set(t)]}function VR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function FR(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(VR(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function MS(){let t=ne.useContext(ku);return B2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function UR(){let t=ne.useContext(Gf);return B2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var O2=ne.createContext(void 0);O2.displayName="FrameworkContext";function AS(){let t=ne.useContext(O2);return B2(t,"You must render this element inside a <HydratedRouter> element"),t}function KR(t,e){let n=ne.useContext(O2),[r,i]=ne.useState(!1),[o,l]=ne.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=e,v=ne.useRef(null);ne.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let R=L=>{L.forEach(j=>{l(j.isIntersecting)})},I=new IntersectionObserver(R,{threshold:.5});return v.current&&I.observe(v.current),()=>{I.disconnect()}}},[t]),ne.useEffect(()=>{if(r){let R=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(R)}}},[r]);let x=()=>{i(!0)},S=()=>{i(!1),l(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:Od(c,x),onBlur:Od(d,S),onMouseEnter:Od(f,x),onMouseLeave:Od(p,S),onTouchStart:Od(y,x)}]:[!1,v,{}]}function Od(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $R({page:t,...e}){let{router:n}=MS(),r=ne.useMemo(()=>Ls(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?ne.createElement(jR,{page:t,matches:r,...e}):null}function qR(t){let{manifest:e,routeModules:n}=AS(),[r,i]=ne.useState([]);return ne.useEffect(()=>{let o=!1;return NR(t,e,n).then(l=>{o||i(l)}),()=>{o=!0}},[t,e,n]),r}function jR({page:t,matches:e,...n}){let r=Cu(),{manifest:i,routeModules:o}=AS(),{basename:l}=MS(),{loaderData:c,matches:d}=UR(),f=ne.useMemo(()=>Px(t,e,d,i,r,"data"),[t,e,d,i,r]),p=ne.useMemo(()=>Px(t,e,d,i,r,"assets"),[t,e,d,i,r]),y=ne.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,R=!1;if(e.forEach(L=>{let j=i.routes[L.route.id];!j||!j.hasLoader||(!f.some(z=>z.route.id===L.route.id)&&L.route.id in c&&o[L.route.id]?.shouldRevalidate||j.hasClientLoader?R=!0:S.add(L.route.id))}),S.size===0)return[];let I=IR(t,l,"data");return R&&S.size>0&&I.searchParams.set("_routes",e.filter(L=>S.has(L.route.id)).map(L=>L.route.id).join(",")),[I.pathname+I.search]},[l,c,r,i,f,e,t,o]),v=ne.useMemo(()=>PR(p,i),[p,i]),x=qR(p);return ne.createElement(ne.Fragment,null,y.map(S=>ne.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),v.map(S=>ne.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),x.map(({key:S,link:R})=>ne.createElement("link",{key:S,...R})))}function HR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var TS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TS&&(window.__reactRouterVersion="7.7.1")}catch{}function GR(t,e){return zL({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:rL({window:e?.window}),hydrationData:WR(),routes:t,mapRouteProperties:bR,hydrationRouteProperties:vR,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function WR(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:XR(t.errors)}),t}function XR(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new gg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let l=new o(i.message);l.stack="",n[r]=l}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}var DS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LS=ne.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:c,target:d,to:f,preventScrollReset:p,viewTransition:y,...v},x){let{basename:S}=ne.useContext(Ba),R=typeof f=="string"&&DS.test(f),I,L=!1;if(typeof f=="string"&&R&&(I=f,TS))try{let C=new URL(window.location.href),P=f.startsWith("//")?new URL(C.protocol+f):new URL(f),D=Ai(P.pathname,S);P.origin===C.origin&&D!=null?f=D+P.search+P.hash:L=!0}catch{En(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=iR(f,{relative:i}),[z,G,ie]=KR(r,v),B=ZR(f,{replace:l,state:c,target:d,preventScrollReset:p,relative:i,viewTransition:y});function M(C){e&&e(C),C.defaultPrevented||B(C)}let A=ne.createElement("a",{...v,...ie,href:I||j,onClick:L||o?e:M,ref:HR(x,G),target:d,"data-discover":!R&&n==="render"?"true":void 0});return z&&!R?ne.createElement(ne.Fragment,null,A,ne.createElement($R,{page:j})):A});LS.displayName="Link";var YR=ne.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:c,children:d,...f},p){let y=Xf(l,{relative:f.relative}),v=Cu(),x=ne.useContext(Gf),{navigator:S,basename:R}=ne.useContext(Ba),I=x!=null&&iI(y)&&c===!0,L=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,j=v.pathname,z=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(j=j.toLowerCase(),z=z?z.toLowerCase():null,L=L.toLowerCase()),z&&R&&(z=Ai(z,R)||z);const G=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let ie=j===L||!i&&j.startsWith(L)&&j.charAt(G)==="/",B=z!=null&&(z===L||!i&&z.startsWith(L)&&z.charAt(L.length)==="/"),M={isActive:ie,isPending:B,isTransitioning:I},A=ie?e:void 0,C;typeof r=="function"?C=r(M):C=[r,ie?"active":null,B?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(M):o;return ne.createElement(LS,{...f,"aria-current":A,className:C,ref:p,style:P,to:l,viewTransition:c},typeof d=="function"?d(M):d)});YR.displayName="NavLink";var QR=ne.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:l=j0,action:c,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:y,...v},x)=>{let S=nI(),R=rI(c,{relative:f}),I=l.toLowerCase()==="get"?"get":"post",L=typeof c=="string"&&DS.test(c),j=z=>{if(d&&d(z),z.defaultPrevented)return;z.preventDefault();let G=z.nativeEvent.submitter,ie=G?.getAttribute("formmethod")||l;S(G||z.currentTarget,{fetcherKey:e,method:ie,navigate:n,replace:i,state:o,relative:f,preventScrollReset:p,viewTransition:y})};return ne.createElement("form",{ref:x,method:I,action:R,onSubmit:r?d:j,...v,"data-discover":!L&&t==="render"?"true":void 0})});QR.displayName="Form";function JR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RS(t){let e=ne.useContext(ku);return dt(e,JR(t)),e}function ZR(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:l}={}){let c=L2(),d=Cu(),f=Xf(t,{relative:o});return ne.useCallback(p=>{if(TR(p,e)){p.preventDefault();let y=n!==void 0?n:qs(d)===qs(f);c(t,{replace:y,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,n,r,e,t,i,o,l])}var eI=0,tI=()=>`__${String(++eI)}__`;function nI(){let{router:t}=RS("useSubmit"),{basename:e}=ne.useContext(Ba),n=pR();return ne.useCallback(async(r,i={})=>{let{action:o,method:l,encType:c,formData:d,body:f}=RR(r,e);if(i.navigate===!1){let p=i.fetcherKey||tI();await t.fetch(p,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:f,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:f,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function rI(t,{relative:e}={}){let{basename:n}=ne.useContext(Ba),r=ne.useContext(To);dt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Xf(t||".",{relative:e})},l=Cu();if(t==null){o.search=l.search;let c=new URLSearchParams(o.search),d=c.getAll("index");if(d.some(p=>p==="")){c.delete("index"),d.filter(y=>y).forEach(y=>c.append("index",y));let p=c.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Sa([n,o.pathname])),qs(o)}function iI(t,{relative:e}={}){let n=ne.useContext(T2);dt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=RS("useViewTransitionState"),i=Xf(t,{relative:e});if(!n.isTransitioning)return!1;let o=Ai(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Ai(n.nextLocation.pathname,r)||n.nextLocation.pathname;return pg(i.pathname,l)!=null||pg(i.pathname,o)!=null}var aI=oS();function oI(t){return ne.createElement(xR,{flushSync:aI.flushSync,...t})}const sI="/assets/crown-Cr9dJ75F.png",lI=()=>{};var zx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},uI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],l=t[n++],c=t[n++],d=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},BS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],l=i+1<t.length,c=l?t[i+1]:0,d=i+2<t.length,f=d?t[i+2]:0,p=o>>2,y=(o&3)<<4|c>>4;let v=(c&15)<<2|f>>6,x=f&63;d||(x=64,l||(v=64)),r.push(n[p],n[y],n[v],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||f==null||y==null)throw new cI;const v=o<<2|c>>4;if(r.push(v),f!==64){const x=c<<4&240|f>>2;if(r.push(x),y!==64){const S=f<<6&192|y;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hI=function(t){const e=IS(t);return BS.encodeByteArray(e,!0)},bg=function(t){return hI(t).replace(/\./g,"")},OS=function(t){try{return BS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=()=>dI().__FIREBASE_DEFAULTS__,mI=()=>{if(typeof process>"u"||typeof zx>"u")return;const t=zx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OS(t[1]);return e&&JSON.parse(e)},u1=()=>{try{return lI()||fI()||mI()||pI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NS=t=>u1()?.emulatorHosts?.[t],PS=t=>{const e=NS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zS=()=>u1()?.config,VS=t=>u1()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function N2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[bg(JSON.stringify(n)),bg(JSON.stringify(l)),""].join(".")}const gf={};function yI(){const t={prod:[],emulator:[]};for(const e of Object.keys(gf))gf[e]?t.emulator.push(e):t.prod.push(e);return t}function bI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Vx=!1;function P2(t,e){if(typeof window>"u"||typeof document>"u"||!nl(window.location.host)||gf[t]===e||gf[t]||Vx)return;gf[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=yI().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,x){v.setAttribute("width","24"),v.setAttribute("id",x),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Vx=!0,l()},v}function p(v,x){v.setAttribute("id",x),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=bI(r),x=n("text"),S=document.getElementById(x)||document.createElement("span"),R=n("learnmore"),I=document.getElementById(R)||document.createElement("a"),L=n("preprendIcon"),j=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const z=v.element;c(z),p(I,R);const G=f();d(j,L),z.append(j,S,I,G),document.body.appendChild(z)}o?(S.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cr())}function _I(){const t=u1()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SI(){const t=cr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kI(){return!_I()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CI(){try{return typeof indexedDB=="object"}catch{return!1}}function MI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="FirebaseError";class Oa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AI,Object.setPrototypeOf(this,Oa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yf.prototype.create)}}class Yf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?TI(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Oa(i,c,r)}}function TI(t,e){return t.replace(DI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const DI=/\{\$([^}]+)}/g;function LI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],l=e[i];if(Fx(o)&&Fx(l)){if(!pu(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Fx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function uf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function RI(t,e){const n=new II(t,e);return n.subscribe.bind(n)}class II{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Yb),i.error===void 0&&(i.error=Yb),i.complete===void 0&&(i.complete=Yb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yb(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t){return t&&t._delegate?t._delegate:t}class js{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PI(e))try{this.getOrInitializeService({instanceIdentifier:Xl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Xl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xl){return this.instances.has(e)}getOptions(e=Xl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xl){return this.component?this.component.multipleInstances?e:Xl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NI(t){return t===Xl?void 0:t}function PI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ft||(ft={}));const VI={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},FI=ft.INFO,UI={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},KI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=UI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class z2{constructor(e){this.name=e,this._logLevel=FI,this._logHandler=KI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const $I=(t,e)=>e.some(n=>t instanceof n);let Ux,Kx;function qI(){return Ux||(Ux=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jI(){return Kx||(Kx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const US=new WeakMap,p4=new WeakMap,KS=new WeakMap,Qb=new WeakMap,V2=new WeakMap;function HI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(zs(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&US.set(n,t)}).catch(()=>{}),V2.set(e,t),e}function GI(t){if(p4.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});p4.set(t,e)}let g4={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return p4.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WI(t){g4=t(g4)}function XI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jb(this),e,...n);return KS.set(r,e.sort?e.sort():[e]),zs(r)}:jI().includes(t)?function(...e){return t.apply(Jb(this),e),zs(US.get(this))}:function(...e){return zs(t.apply(Jb(this),e))}}function YI(t){return typeof t=="function"?XI(t):(t instanceof IDBTransaction&&GI(t),$I(t,qI())?new Proxy(t,g4):t)}function zs(t){if(t instanceof IDBRequest)return HI(t);if(Qb.has(t))return Qb.get(t);const e=YI(t);return e!==t&&(Qb.set(t,e),V2.set(e,t)),e}const Jb=t=>V2.get(t);function QI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(t,e),c=zs(l);return r&&l.addEventListener("upgradeneeded",d=>{r(zs(l.result),d.oldVersion,d.newVersion,zs(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const JI=["get","getKey","getAll","getAllKeys","count"],ZI=["put","add","delete","clear"],Zb=new Map;function $x(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zb.get(e))return Zb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ZI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||JI.includes(n)))return;const o=async function(l,...c){const d=this.transaction(l,i?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),i&&d.done]))[0]};return Zb.set(e,o),o}WI(t=>({...t,get:(e,n,r)=>$x(e,n)||t.get(e,n,r),has:(e,n)=>!!$x(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tB(t){return t.getComponent()?.type==="VERSION"}const y4="@firebase/app",qx="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new z2("@firebase/app"),nB="@firebase/app-compat",rB="@firebase/analytics-compat",iB="@firebase/analytics",aB="@firebase/app-check-compat",oB="@firebase/app-check",sB="@firebase/auth",lB="@firebase/auth-compat",uB="@firebase/database",cB="@firebase/data-connect",hB="@firebase/database-compat",dB="@firebase/functions",fB="@firebase/functions-compat",mB="@firebase/installations",pB="@firebase/installations-compat",gB="@firebase/messaging",yB="@firebase/messaging-compat",bB="@firebase/performance",vB="@firebase/performance-compat",_B="@firebase/remote-config",xB="@firebase/remote-config-compat",wB="@firebase/storage",EB="@firebase/storage-compat",SB="@firebase/firestore",kB="@firebase/ai",CB="@firebase/firestore-compat",MB="firebase",AB="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="[DEFAULT]",TB={[y4]:"fire-core",[nB]:"fire-core-compat",[iB]:"fire-analytics",[rB]:"fire-analytics-compat",[oB]:"fire-app-check",[aB]:"fire-app-check-compat",[sB]:"fire-auth",[lB]:"fire-auth-compat",[uB]:"fire-rtdb",[cB]:"fire-data-connect",[hB]:"fire-rtdb-compat",[dB]:"fire-fn",[fB]:"fire-fn-compat",[mB]:"fire-iid",[pB]:"fire-iid-compat",[gB]:"fire-fcm",[yB]:"fire-fcm-compat",[bB]:"fire-perf",[vB]:"fire-perf-compat",[_B]:"fire-rc",[xB]:"fire-rc-compat",[wB]:"fire-gcs",[EB]:"fire-gcs-compat",[SB]:"fire-fst",[CB]:"fire-fst-compat",[kB]:"fire-vertex","fire-js":"fire-js",[MB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=new Map,DB=new Map,v4=new Map;function jx(t,e){try{t.container.addComponent(e)}catch(n){So.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gu(t){const e=t.name;if(v4.has(e))return So.debug(`There were multiple attempts to register component ${e}.`),!1;v4.set(e,t);for(const n of vg.values())jx(n,t);for(const n of DB.values())jx(n,t);return!0}function c1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new Yf("app","Firebase",LB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=AB;function $S(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:b4,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Vs.create("bad-app-name",{appName:String(i)});if(n||(n=zS()),!n)throw Vs.create("no-options");const o=vg.get(i);if(o){if(pu(n,o.options)&&pu(r,o.config))return o;throw Vs.create("duplicate-app",{appName:i})}const l=new zI(i);for(const d of v4.values())l.addComponent(d);const c=new RB(n,r,l);return vg.set(i,c),c}function F2(t=b4){const e=vg.get(t);if(!e&&t===b4&&zS())return $S();if(!e)throw Vs.create("no-app",{appName:t});return e}function ka(t,e,n){let r=TB[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),So.warn(l.join(" "));return}gu(new js(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB="firebase-heartbeat-database",BB=1,Lf="firebase-heartbeat-store";let ev=null;function qS(){return ev||(ev=QI(IB,BB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vs.create("idb-open",{originalErrorMessage:t.message})})),ev}async function OB(t){try{const n=(await qS()).transaction(Lf),r=await n.objectStore(Lf).get(jS(t));return await n.done,r}catch(e){if(e instanceof Oa)So.warn(e.message);else{const n=Vs.create("idb-get",{originalErrorMessage:e?.message});So.warn(n.message)}}}async function Hx(t,e){try{const r=(await qS()).transaction(Lf,"readwrite");await r.objectStore(Lf).put(e,jS(t)),await r.done}catch(n){if(n instanceof Oa)So.warn(n.message);else{const r=Vs.create("idb-set",{originalErrorMessage:n?.message});So.warn(r.message)}}}function jS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB=1024,PB=30;class zB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Gx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>PB){const i=UB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){So.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Gx(),{heartbeatsToSend:n,unsentEntries:r}=VB(this._heartbeatsCache.heartbeats),i=bg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return So.warn(e),""}}}function Gx(){return new Date().toISOString().substring(0,10)}function VB(t,e=NB){const n=[];let r=t.slice();for(const i of t){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Wx(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class FB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CI()?MI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Wx(t){return bg(JSON.stringify({version:2,heartbeats:t})).length}function UB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KB(t){gu(new js("platform-logger",e=>new eB(e),"PRIVATE")),gu(new js("heartbeat",e=>new zB(e),"PRIVATE")),ka(y4,qx,t),ka(y4,qx,"esm2020"),ka("fire-js","")}KB("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="firebasestorage.googleapis.com",GS="storageBucket",$B=120*1e3,qB=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Oa{constructor(e,n,r=0){super(tv(e),`Firebase Storage: ${n} (${tv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kn||(Kn={}));function tv(t){return"storage/"+t}function WS(){const t="An unknown error occurred, please check the error payload for server response.";return new $n(Kn.UNKNOWN,t)}function jB(t){return new $n(Kn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function HB(t){return new $n(Kn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $n(Kn.UNAUTHENTICATED,t)}function WB(){return new $n(Kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function XB(t){return new $n(Kn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function YB(){return new $n(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QB(){return new $n(Kn.CANCELED,"User canceled the upload/download.")}function JB(t){return new $n(Kn.INVALID_URL,"Invalid URL '"+t+"'.")}function ZB(t){return new $n(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function eO(){return new $n(Kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+GS+"' property when initializing the app?")}function tO(){return new $n(Kn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _4(t){return new $n(Kn.INVALID_ARGUMENT,t)}function XS(){return new $n(Kn.APP_DELETED,"The Firebase app was deleted.")}function nO(t){return new $n(Kn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nd(t){throw new $n(Kn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ti.makeFromUrl(e,n)}catch{return new ti(e,"")}if(r.path==="")return r;throw ZB(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),d={bucket:1,path:3};function f(G){G.path_=decodeURIComponent(G.path)}const p="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",x=new RegExp(`^https?://${y}/${p}/b/${i}/o${v}`,"i"),S={bucket:1,path:3},R=n===HS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",L=new RegExp(`^https?://${R}/${i}/${I}`,"i"),z=[{regex:c,indices:d,postModify:o},{regex:x,indices:S,postModify:f},{regex:L,indices:{bucket:1,path:2},postModify:f}];for(let G=0;G<z.length;G++){const ie=z[G],B=ie.regex.exec(e);if(B){const M=B[ie.indices.bucket];let A=B[ie.indices.path];A||(A=""),r=new ti(M,A),ie.postModify(r);break}}if(r==null)throw JB(e);return r}}class rO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t,e,n){let r=1,i=null,o=null,l=!1,c=0;function d(){return c===2}let f=!1;function p(...I){f||(f=!0,e.apply(null,I))}function y(I){i=setTimeout(()=>{i=null,t(x,d())},I)}function v(){o&&clearTimeout(o)}function x(I,...L){if(f){v();return}if(I){v(),p.call(null,I,...L);return}if(d()||l){v(),p.call(null,I,...L);return}r<64&&(r*=2);let z;c===1?(c=2,z=0):z=(r+Math.random())*1e3,y(z)}let S=!1;function R(I){S||(S=!0,v(),!f&&(i!==null?(I||(c=2),clearTimeout(i),y(0)):I||(c=1)))}return y(0),o=setTimeout(()=>{l=!0,R(!0)},n),R}function aO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){return t!==void 0}function sO(t){return typeof t=="object"&&!Array.isArray(t)}function YS(t){return typeof t=="string"||t instanceof String}function Xx(t,e,n,r){if(r<e)throw _4(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _4(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function JS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var uu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(uu||(uu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n,r,i,o,l,c,d,f,p,y,v=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,R)=>{this.resolve_=S,this.reject_=R,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Dp(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===uu.NO_ERROR,d=o.getStatus();if(!c||lO(d,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===uu.ABORT;r(!1,new Dp(!1,null,p));return}const f=this.successCodes_.indexOf(d)!==-1;r(!0,new Dp(f,o))})},n=(r,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());oO(d)?o(d):o()}catch(d){l(d)}else if(c!==null){const d=WS();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(i.canceled){const d=this.appDelete_?XS():QB();l(d)}else{const d=YB();l(d)}};this.canceled_?n(!1,new Dp(!1,null,!0)):this.backoffId_=iO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function cO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function hO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function fO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function mO(t,e,n,r,i,o,l=!0,c=!1){const d=JS(t.urlParams),f=t.url+d,p=Object.assign({},t.headers);return dO(p,e),cO(p,n),hO(p,o),fO(p,r),new uO(f,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){let e;try{e=JSON.parse(t)}catch{return null}return sO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function gO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ek(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t,e){return e}class wr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||yO}}let Lp=null;function bO(t){return!YS(t)||t.length<2?t:ek(t)}function vO(){if(Lp)return Lp;const t=[];t.push(new wr("bucket")),t.push(new wr("generation")),t.push(new wr("metageneration")),t.push(new wr("name","fullPath",!0));function e(o,l){return bO(l)}const n=new wr("name");n.xform=e,t.push(n);function r(o,l){return l!==void 0?Number(l):l}const i=new wr("size");return i.xform=r,t.push(i),t.push(new wr("timeCreated")),t.push(new wr("updated")),t.push(new wr("md5Hash",null,!0)),t.push(new wr("cacheControl",null,!0)),t.push(new wr("contentDisposition",null,!0)),t.push(new wr("contentEncoding",null,!0)),t.push(new wr("contentLanguage",null,!0)),t.push(new wr("contentType",null,!0)),t.push(new wr("metadata","customMetadata",!0)),Lp=t,Lp}function _O(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new ti(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function xO(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const l=n[o];r[l.local]=l.xform(r,e[l.server])}return _O(r,t),r}function wO(t,e,n){const r=ZS(e);return r===null?null:xO(t,r,n)}function EO(t,e,n,r){const i=ZS(e);if(i===null||!YS(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const p=t.bucket,y=t.fullPath,v="/b/"+l(p)+"/o/"+l(y),x=QS(v,n,r),S=JS({alt:"media",token:f});return x+S})[0]}class SO{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){if(!t)throw WS()}function CO(t,e){function n(r,i){const o=wO(t,i,e);return kO(o!==null),EO(o,i,t.host,t._protocol)}return n}function MO(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=WB():i=GB():n.getStatus()===402?i=HB(t.bucket):n.getStatus()===403?i=XB(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function AO(t){const e=MO(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=jB(t.path)),o.serverResponse=i.serverResponse,o}return n}function TO(t,e,n){const r=e.fullServerUrl(),i=QS(r,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new SO(i,o,CO(t,n),l);return c.errorHandler=AO(e),c}class DO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw Nd("cannot .send() more than once");if(nl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class LO extends DO{initXhr(){this.xhr_.responseType="text"}}function RO(){return new LO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this._service=e,n instanceof ti?this._location=n:this._location=ti.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new yu(e,n)}get root(){const e=new ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ek(this._location.path)}get storage(){return this._service}get parent(){const e=pO(this._location.path);if(e===null)return null;const n=new ti(this._location.bucket,e);return new yu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw nO(e)}}function IO(t){t._throwIfRoot("getDownloadURL");const e=TO(t.storage,t._location,vO());return t.storage.makeRequestWithTokens(e,RO).then(n=>{if(n===null)throw tO();return n})}function BO(t,e){const n=gO(t._location.path,e),r=new ti(t._location.bucket,n);return new yu(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){return/^[A-Za-z]+:\/\//.test(t)}function NO(t,e){return new yu(t,e)}function tk(t,e){if(t instanceof U2){const n=t;if(n._bucket==null)throw eO();const r=new yu(n,n._bucket);return e!=null?tk(r,e):r}else return e!==void 0?BO(t,e):t}function PO(t,e){if(e&&OO(e)){if(t instanceof U2)return NO(t,e);throw _4("To use ref(service, url), the first argument must be a Storage instance.")}else return tk(t,e)}function Yx(t,e){const n=e?.[GS];return n==null?null:ti.makeFromBucketSpec(n,t)}function zO(t,e,n,r={}){t.host=`${e}:${n}`;const i=nl(e);i&&(N2(`https://${t.host}/b`),P2("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:FS(o,t.app.options.projectId))}class U2{constructor(e,n,r,i,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=HS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$B,this._maxUploadRetryTime=qB,this._requests=new Set,i!=null?this._bucket=ti.makeFromBucketSpec(i,this._host):this._bucket=Yx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ti.makeFromBucketSpec(this._url,e):this._bucket=Yx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yu(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new rO(XS());{const l=mO(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Qx="@firebase/storage",Jx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="storage";function Zx(t){return t=hr(t),IO(t)}function ew(t,e){return t=hr(t),PO(t,e)}function rk(t=F2(),e){t=hr(t);const r=c1(t,nk).getImmediate({identifier:e}),i=PS("storage");return i&&VO(r,...i),r}function VO(t,e,n,r={}){zO(t,e,n,r)}function FO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new U2(n,r,i,e,Mu)}function UO(){gu(new js(nk,FO,"PUBLIC").setMultipleInstances(!0)),ka(Qx,Jx,""),ka(Qx,Jx,"esm2020")}UO();var tw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fs,ik;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,A){function C(){}C.prototype=A.prototype,M.D=A.prototype,M.prototype=new C,M.prototype.constructor=M,M.C=function(P,D,U){for(var O=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)O[ke-2]=arguments[ke];return A.prototype[D].apply(P,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,A,C){C||(C=0);var P=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)P[D]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(D=0;16>D;++D)P[D]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=M.g[0],C=M.g[1],D=M.g[2];var U=M.g[3],O=A+(U^C&(D^U))+P[0]+3614090360&4294967295;A=C+(O<<7&4294967295|O>>>25),O=U+(D^A&(C^D))+P[1]+3905402710&4294967295,U=A+(O<<12&4294967295|O>>>20),O=D+(C^U&(A^C))+P[2]+606105819&4294967295,D=U+(O<<17&4294967295|O>>>15),O=C+(A^D&(U^A))+P[3]+3250441966&4294967295,C=D+(O<<22&4294967295|O>>>10),O=A+(U^C&(D^U))+P[4]+4118548399&4294967295,A=C+(O<<7&4294967295|O>>>25),O=U+(D^A&(C^D))+P[5]+1200080426&4294967295,U=A+(O<<12&4294967295|O>>>20),O=D+(C^U&(A^C))+P[6]+2821735955&4294967295,D=U+(O<<17&4294967295|O>>>15),O=C+(A^D&(U^A))+P[7]+4249261313&4294967295,C=D+(O<<22&4294967295|O>>>10),O=A+(U^C&(D^U))+P[8]+1770035416&4294967295,A=C+(O<<7&4294967295|O>>>25),O=U+(D^A&(C^D))+P[9]+2336552879&4294967295,U=A+(O<<12&4294967295|O>>>20),O=D+(C^U&(A^C))+P[10]+4294925233&4294967295,D=U+(O<<17&4294967295|O>>>15),O=C+(A^D&(U^A))+P[11]+2304563134&4294967295,C=D+(O<<22&4294967295|O>>>10),O=A+(U^C&(D^U))+P[12]+1804603682&4294967295,A=C+(O<<7&4294967295|O>>>25),O=U+(D^A&(C^D))+P[13]+4254626195&4294967295,U=A+(O<<12&4294967295|O>>>20),O=D+(C^U&(A^C))+P[14]+2792965006&4294967295,D=U+(O<<17&4294967295|O>>>15),O=C+(A^D&(U^A))+P[15]+1236535329&4294967295,C=D+(O<<22&4294967295|O>>>10),O=A+(D^U&(C^D))+P[1]+4129170786&4294967295,A=C+(O<<5&4294967295|O>>>27),O=U+(C^D&(A^C))+P[6]+3225465664&4294967295,U=A+(O<<9&4294967295|O>>>23),O=D+(A^C&(U^A))+P[11]+643717713&4294967295,D=U+(O<<14&4294967295|O>>>18),O=C+(U^A&(D^U))+P[0]+3921069994&4294967295,C=D+(O<<20&4294967295|O>>>12),O=A+(D^U&(C^D))+P[5]+3593408605&4294967295,A=C+(O<<5&4294967295|O>>>27),O=U+(C^D&(A^C))+P[10]+38016083&4294967295,U=A+(O<<9&4294967295|O>>>23),O=D+(A^C&(U^A))+P[15]+3634488961&4294967295,D=U+(O<<14&4294967295|O>>>18),O=C+(U^A&(D^U))+P[4]+3889429448&4294967295,C=D+(O<<20&4294967295|O>>>12),O=A+(D^U&(C^D))+P[9]+568446438&4294967295,A=C+(O<<5&4294967295|O>>>27),O=U+(C^D&(A^C))+P[14]+3275163606&4294967295,U=A+(O<<9&4294967295|O>>>23),O=D+(A^C&(U^A))+P[3]+4107603335&4294967295,D=U+(O<<14&4294967295|O>>>18),O=C+(U^A&(D^U))+P[8]+1163531501&4294967295,C=D+(O<<20&4294967295|O>>>12),O=A+(D^U&(C^D))+P[13]+2850285829&4294967295,A=C+(O<<5&4294967295|O>>>27),O=U+(C^D&(A^C))+P[2]+4243563512&4294967295,U=A+(O<<9&4294967295|O>>>23),O=D+(A^C&(U^A))+P[7]+1735328473&4294967295,D=U+(O<<14&4294967295|O>>>18),O=C+(U^A&(D^U))+P[12]+2368359562&4294967295,C=D+(O<<20&4294967295|O>>>12),O=A+(C^D^U)+P[5]+4294588738&4294967295,A=C+(O<<4&4294967295|O>>>28),O=U+(A^C^D)+P[8]+2272392833&4294967295,U=A+(O<<11&4294967295|O>>>21),O=D+(U^A^C)+P[11]+1839030562&4294967295,D=U+(O<<16&4294967295|O>>>16),O=C+(D^U^A)+P[14]+4259657740&4294967295,C=D+(O<<23&4294967295|O>>>9),O=A+(C^D^U)+P[1]+2763975236&4294967295,A=C+(O<<4&4294967295|O>>>28),O=U+(A^C^D)+P[4]+1272893353&4294967295,U=A+(O<<11&4294967295|O>>>21),O=D+(U^A^C)+P[7]+4139469664&4294967295,D=U+(O<<16&4294967295|O>>>16),O=C+(D^U^A)+P[10]+3200236656&4294967295,C=D+(O<<23&4294967295|O>>>9),O=A+(C^D^U)+P[13]+681279174&4294967295,A=C+(O<<4&4294967295|O>>>28),O=U+(A^C^D)+P[0]+3936430074&4294967295,U=A+(O<<11&4294967295|O>>>21),O=D+(U^A^C)+P[3]+3572445317&4294967295,D=U+(O<<16&4294967295|O>>>16),O=C+(D^U^A)+P[6]+76029189&4294967295,C=D+(O<<23&4294967295|O>>>9),O=A+(C^D^U)+P[9]+3654602809&4294967295,A=C+(O<<4&4294967295|O>>>28),O=U+(A^C^D)+P[12]+3873151461&4294967295,U=A+(O<<11&4294967295|O>>>21),O=D+(U^A^C)+P[15]+530742520&4294967295,D=U+(O<<16&4294967295|O>>>16),O=C+(D^U^A)+P[2]+3299628645&4294967295,C=D+(O<<23&4294967295|O>>>9),O=A+(D^(C|~U))+P[0]+4096336452&4294967295,A=C+(O<<6&4294967295|O>>>26),O=U+(C^(A|~D))+P[7]+1126891415&4294967295,U=A+(O<<10&4294967295|O>>>22),O=D+(A^(U|~C))+P[14]+2878612391&4294967295,D=U+(O<<15&4294967295|O>>>17),O=C+(U^(D|~A))+P[5]+4237533241&4294967295,C=D+(O<<21&4294967295|O>>>11),O=A+(D^(C|~U))+P[12]+1700485571&4294967295,A=C+(O<<6&4294967295|O>>>26),O=U+(C^(A|~D))+P[3]+2399980690&4294967295,U=A+(O<<10&4294967295|O>>>22),O=D+(A^(U|~C))+P[10]+4293915773&4294967295,D=U+(O<<15&4294967295|O>>>17),O=C+(U^(D|~A))+P[1]+2240044497&4294967295,C=D+(O<<21&4294967295|O>>>11),O=A+(D^(C|~U))+P[8]+1873313359&4294967295,A=C+(O<<6&4294967295|O>>>26),O=U+(C^(A|~D))+P[15]+4264355552&4294967295,U=A+(O<<10&4294967295|O>>>22),O=D+(A^(U|~C))+P[6]+2734768916&4294967295,D=U+(O<<15&4294967295|O>>>17),O=C+(U^(D|~A))+P[13]+1309151649&4294967295,C=D+(O<<21&4294967295|O>>>11),O=A+(D^(C|~U))+P[4]+4149444226&4294967295,A=C+(O<<6&4294967295|O>>>26),O=U+(C^(A|~D))+P[11]+3174756917&4294967295,U=A+(O<<10&4294967295|O>>>22),O=D+(A^(U|~C))+P[2]+718787259&4294967295,D=U+(O<<15&4294967295|O>>>17),O=C+(U^(D|~A))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+A&4294967295,M.g[1]=M.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,M.g[2]=M.g[2]+D&4294967295,M.g[3]=M.g[3]+U&4294967295}r.prototype.u=function(M,A){A===void 0&&(A=M.length);for(var C=A-this.blockSize,P=this.B,D=this.h,U=0;U<A;){if(D==0)for(;U<=C;)i(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<A;)if(P[D++]=M.charCodeAt(U++),D==this.blockSize){i(this,P),D=0;break}}else for(;U<A;)if(P[D++]=M[U++],D==this.blockSize){i(this,P),D=0;break}}this.h=D,this.o+=A},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var A=1;A<M.length-8;++A)M[A]=0;var C=8*this.o;for(A=M.length-8;A<M.length;++A)M[A]=C&255,C/=256;for(this.u(M),M=Array(16),A=C=0;4>A;++A)for(var P=0;32>P;P+=8)M[C++]=this.g[A]>>>P&255;return M};function o(M,A){var C=c;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=A(M)}function l(M,A){this.h=A;for(var C=[],P=!0,D=M.length-1;0<=D;D--){var U=M[D]|0;P&&U==A||(C[D]=U,P=!1)}this.g=C}var c={};function d(M){return-128<=M&&128>M?o(M,function(A){return new l([A|0],0>A?-1:0)}):new l([M|0],0>M?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return y;if(0>M)return I(f(-M));for(var A=[],C=1,P=0;M>=C;P++)A[P]=M/C|0,C*=4294967296;return new l(A,0)}function p(M,A){if(M.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(M.charAt(0)=="-")return I(p(M.substring(1),A));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=f(Math.pow(A,8)),P=y,D=0;D<M.length;D+=8){var U=Math.min(8,M.length-D),O=parseInt(M.substring(D,D+U),A);8>U?(U=f(Math.pow(A,U)),P=P.j(U).add(f(O))):(P=P.j(C),P=P.add(f(O)))}return P}var y=d(0),v=d(1),x=d(16777216);t=l.prototype,t.m=function(){if(R(this))return-I(this).m();for(var M=0,A=1,C=0;C<this.g.length;C++){var P=this.i(C);M+=(0<=P?P:4294967296+P)*A,A*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(S(this))return"0";if(R(this))return"-"+I(this).toString(M);for(var A=f(Math.pow(M,6)),C=this,P="";;){var D=G(C,A).g;C=L(C,D.j(A));var U=((0<C.g.length?C.g[0]:C.h)>>>0).toString(M);if(C=D,S(C))return U+P;for(;6>U.length;)U="0"+U;P=U+P}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function S(M){if(M.h!=0)return!1;for(var A=0;A<M.g.length;A++)if(M.g[A]!=0)return!1;return!0}function R(M){return M.h==-1}t.l=function(M){return M=L(this,M),R(M)?-1:S(M)?0:1};function I(M){for(var A=M.g.length,C=[],P=0;P<A;P++)C[P]=~M.g[P];return new l(C,~M.h).add(v)}t.abs=function(){return R(this)?I(this):this},t.add=function(M){for(var A=Math.max(this.g.length,M.g.length),C=[],P=0,D=0;D<=A;D++){var U=P+(this.i(D)&65535)+(M.i(D)&65535),O=(U>>>16)+(this.i(D)>>>16)+(M.i(D)>>>16);P=O>>>16,U&=65535,O&=65535,C[D]=O<<16|U}return new l(C,C[C.length-1]&-2147483648?-1:0)};function L(M,A){return M.add(I(A))}t.j=function(M){if(S(this)||S(M))return y;if(R(this))return R(M)?I(this).j(I(M)):I(I(this).j(M));if(R(M))return I(this.j(I(M)));if(0>this.l(x)&&0>M.l(x))return f(this.m()*M.m());for(var A=this.g.length+M.g.length,C=[],P=0;P<2*A;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<M.g.length;D++){var U=this.i(P)>>>16,O=this.i(P)&65535,ke=M.i(D)>>>16,Ke=M.i(D)&65535;C[2*P+2*D]+=O*Ke,j(C,2*P+2*D),C[2*P+2*D+1]+=U*Ke,j(C,2*P+2*D+1),C[2*P+2*D+1]+=O*ke,j(C,2*P+2*D+1),C[2*P+2*D+2]+=U*ke,j(C,2*P+2*D+2)}for(P=0;P<A;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=A;P<2*A;P++)C[P]=0;return new l(C,0)};function j(M,A){for(;(M[A]&65535)!=M[A];)M[A+1]+=M[A]>>>16,M[A]&=65535,A++}function z(M,A){this.g=M,this.h=A}function G(M,A){if(S(A))throw Error("division by zero");if(S(M))return new z(y,y);if(R(M))return A=G(I(M),A),new z(I(A.g),I(A.h));if(R(A))return A=G(M,I(A)),new z(I(A.g),A.h);if(30<M.g.length){if(R(M)||R(A))throw Error("slowDivide_ only works with positive integers.");for(var C=v,P=A;0>=P.l(M);)C=ie(C),P=ie(P);var D=B(C,1),U=B(P,1);for(P=B(P,2),C=B(C,2);!S(P);){var O=U.add(P);0>=O.l(M)&&(D=D.add(C),U=O),P=B(P,1),C=B(C,1)}return A=L(M,D.j(A)),new z(D,A)}for(D=y;0<=M.l(A);){for(C=Math.max(1,Math.floor(M.m()/A.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),U=f(C),O=U.j(A);R(O)||0<O.l(M);)C-=P,U=f(C),O=U.j(A);S(U)&&(U=v),D=D.add(U),M=L(M,O)}return new z(D,M)}t.A=function(M){return G(this,M).h},t.and=function(M){for(var A=Math.max(this.g.length,M.g.length),C=[],P=0;P<A;P++)C[P]=this.i(P)&M.i(P);return new l(C,this.h&M.h)},t.or=function(M){for(var A=Math.max(this.g.length,M.g.length),C=[],P=0;P<A;P++)C[P]=this.i(P)|M.i(P);return new l(C,this.h|M.h)},t.xor=function(M){for(var A=Math.max(this.g.length,M.g.length),C=[],P=0;P<A;P++)C[P]=this.i(P)^M.i(P);return new l(C,this.h^M.h)};function ie(M){for(var A=M.g.length+1,C=[],P=0;P<A;P++)C[P]=M.i(P)<<1|M.i(P-1)>>>31;return new l(C,M.h)}function B(M,A){var C=A>>5;A%=32;for(var P=M.g.length-C,D=[],U=0;U<P;U++)D[U]=0<A?M.i(U+C)>>>A|M.i(U+C+1)<<32-A:M.i(U+C);return new l(D,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ik=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,Fs=l}).apply(typeof tw<"u"?tw:typeof self<"u"?self:typeof window<"u"?window:{});var Rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ak,cf,ok,G0,x4,sk,lk,uk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,_,w){return m==Array.prototype||m==Object.prototype||(m[_]=w.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rp=="object"&&Rp];for(var _=0;_<m.length;++_){var w=m[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(m,_){if(_)e:{var w=r;m=m.split(".");for(var T=0;T<m.length-1;T++){var Y=m[T];if(!(Y in w))break e;w=w[Y]}m=m[m.length-1],T=w[m],_=_(T),_!=T&&_!=null&&e(w,m,{configurable:!0,writable:!0,value:_})}}function o(m,_){m instanceof String&&(m+="");var w=0,T=!1,Y={next:function(){if(!T&&w<m.length){var ae=w++;return{value:_(ae,m[ae]),done:!1}}return T=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}i("Array.prototype.values",function(m){return m||function(){return o(this,function(_,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var _=typeof m;return _=_!="object"?_:m?Array.isArray(m)?"array":_:"null",_=="array"||_=="object"&&typeof m.length=="number"}function f(m){var _=typeof m;return _=="object"&&m!=null||_=="function"}function p(m,_,w){return m.call.apply(m.bind,arguments)}function y(m,_,w){if(!m)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,T),m.apply(_,Y)}}return function(){return m.apply(_,arguments)}}function v(m,_,w){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,v.apply(null,arguments)}function x(m,_){var w=Array.prototype.slice.call(arguments,1);return function(){var T=w.slice();return T.push.apply(T,arguments),m.apply(this,T)}}function S(m,_){function w(){}w.prototype=_.prototype,m.aa=_.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(T,Y,ae){for(var xe=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)xe[yt-2]=arguments[yt];return _.prototype[Y].apply(T,xe)}}function R(m){const _=m.length;if(0<_){const w=Array(_);for(let T=0;T<_;T++)w[T]=m[T];return w}return[]}function I(m,_){for(let w=1;w<arguments.length;w++){const T=arguments[w];if(d(T)){const Y=m.length||0,ae=T.length||0;m.length=Y+ae;for(let xe=0;xe<ae;xe++)m[Y+xe]=T[xe]}else m.push(T)}}class L{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(m){return/^[\s\xa0]*$/.test(m)}function z(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function G(m){return G[" "](m),m}G[" "]=function(){};var ie=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function B(m,_,w){for(const T in m)_.call(w,m[T],T,m)}function M(m,_){for(const w in m)_.call(void 0,m[w],w,m)}function A(m){const _={};for(const w in m)_[w]=m[w];return _}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(m,_){let w,T;for(let Y=1;Y<arguments.length;Y++){T=arguments[Y];for(w in T)m[w]=T[w];for(let ae=0;ae<C.length;ae++)w=C[ae],Object.prototype.hasOwnProperty.call(T,w)&&(m[w]=T[w])}}function D(m){var _=1;m=m.split(":");const w=[];for(;0<_&&m.length;)w.push(m.shift()),_--;return m.length&&w.push(m.join(":")),w}function U(m){c.setTimeout(()=>{throw m},0)}function O(){var m=De;let _=null;return m.g&&(_=m.g,m.g=m.g.next,m.g||(m.h=null),_.next=null),_}class ke{constructor(){this.h=this.g=null}add(_,w){const T=Ke.get();T.set(_,w),this.h?this.h.next=T:this.g=T,this.h=T}}var Ke=new L(()=>new W,m=>m.reset());class W{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ve=!1,De=new ke,V=()=>{const m=c.Promise.resolve(void 0);ue=()=>{m.then(se)}};var se=()=>{for(var m;m=O();){try{m.h.call(m.g)}catch(w){U(w)}var _=Ke;_.j(m),100>_.h&&(_.h++,m.next=_.g,_.g=m)}ve=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(m,_){this.type=m,this.g=this.target=_,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,_=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};c.addEventListener("test",w,_),c.removeEventListener("test",w,_)}catch{}return m}();function Ue(m,_){if(ce.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,T=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=_,_=m.relatedTarget){if(ie){e:{try{G(_.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(_=null)}}else w=="mouseover"?_=m.fromElement:w=="mouseout"&&(_=m.toElement);this.relatedTarget=_,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Pe[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ue.aa.h.call(this)}}S(Ue,ce);var Pe={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var on="closure_listenable_"+(1e6*Math.random()|0),it=0;function dr(m,_,w,T,Y){this.listener=m,this.proxy=null,this.src=_,this.type=w,this.capture=!!T,this.ha=Y,this.key=++it,this.da=this.fa=!1}function Ot(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Nt(m){this.src=m,this.g={},this.h=0}Nt.prototype.add=function(m,_,w,T,Y){var ae=m.toString();m=this.g[ae],m||(m=this.g[ae]=[],this.h++);var xe=ni(m,_,T,Y);return-1<xe?(_=m[xe],w||(_.fa=!1)):(_=new dr(_,this.src,ae,!!T,Y),_.fa=w,m.push(_)),_};function Mr(m,_){var w=_.type;if(w in m.g){var T=m.g[w],Y=Array.prototype.indexOf.call(T,_,void 0),ae;(ae=0<=Y)&&Array.prototype.splice.call(T,Y,1),ae&&(Ot(_),m.g[w].length==0&&(delete m.g[w],m.h--))}}function ni(m,_,w,T){for(var Y=0;Y<m.length;++Y){var ae=m[Y];if(!ae.da&&ae.listener==_&&ae.capture==!!w&&ae.ha==T)return Y}return-1}var fr="closure_lm_"+(1e6*Math.random()|0),sl={};function Ou(m,_,w,T,Y){if(Array.isArray(_)){for(var ae=0;ae<_.length;ae++)Ou(m,_[ae],w,T,Y);return null}return w=Bo(w),m&&m[on]?m.K(_,w,f(T)?!!T.capture:!1,Y):mr(m,_,w,!1,T,Y)}function mr(m,_,w,T,Y,ae){if(!_)throw Error("Invalid event type");var xe=f(Y)?!!Y.capture:!!Y,yt=ri(m);if(yt||(m[fr]=yt=new Nt(m)),w=yt.add(_,w,T,xe,ae),w.proxy)return w;if(T=Ih(),w.proxy=T,T.src=m,T.listener=w,m.addEventListener)Ae||(Y=xe),Y===void 0&&(Y=!1),m.addEventListener(_.toString(),T,Y);else if(m.attachEvent)m.attachEvent(Na(_.toString()),T);else if(m.addListener&&m.removeListener)m.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ih(){function m(w){return _.call(m.src,m.listener,w)}const _=Ri;return m}function ll(m,_,w,T,Y){if(Array.isArray(_))for(var ae=0;ae<_.length;ae++)ll(m,_[ae],w,T,Y);else T=f(T)?!!T.capture:!!T,w=Bo(w),m&&m[on]?(m=m.i,_=String(_).toString(),_ in m.g&&(ae=m.g[_],w=ni(ae,w,T,Y),-1<w&&(Ot(ae[w]),Array.prototype.splice.call(ae,w,1),ae.length==0&&(delete m.g[_],m.h--)))):m&&(m=ri(m))&&(_=m.g[_.toString()],m=-1,_&&(m=ni(_,w,T,Y)),(w=-1<m?_[m]:null)&&Ro(w))}function Ro(m){if(typeof m!="number"&&m&&!m.da){var _=m.src;if(_&&_[on])Mr(_.i,m);else{var w=m.type,T=m.proxy;_.removeEventListener?_.removeEventListener(w,T,m.capture):_.detachEvent?_.detachEvent(Na(w),T):_.addListener&&_.removeListener&&_.removeListener(T),(w=ri(_))?(Mr(w,m),w.h==0&&(w.src=null,_[fr]=null)):Ot(m)}}}function Na(m){return m in sl?sl[m]:sl[m]="on"+m}function Ri(m,_){if(m.da)m=!0;else{_=new Ue(_,this);var w=m.listener,T=m.ha||m.src;m.fa&&Ro(m),m=w.call(T,_)}return m}function ri(m){return m=m[fr],m instanceof Nt?m:null}var Io="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bo(m){return typeof m=="function"?m:(m[Io]||(m[Io]=function(_){return m.handleEvent(_)}),m[Io])}function kt(){de.call(this),this.i=new Nt(this),this.M=this,this.F=null}S(kt,de),kt.prototype[on]=!0,kt.prototype.removeEventListener=function(m,_,w,T){ll(this,m,_,w,T)};function ot(m,_){var w,T=m.F;if(T)for(w=[];T;T=T.F)w.push(T);if(m=m.M,T=_.type||_,typeof _=="string")_=new ce(_,m);else if(_ instanceof ce)_.target=_.target||m;else{var Y=_;_=new ce(T,m),P(_,Y)}if(Y=!0,w)for(var ae=w.length-1;0<=ae;ae--){var xe=_.g=w[ae];Y=tr(xe,T,!0,_)&&Y}if(xe=_.g=m,Y=tr(xe,T,!0,_)&&Y,Y=tr(xe,T,!1,_)&&Y,w)for(ae=0;ae<w.length;ae++)xe=_.g=w[ae],Y=tr(xe,T,!1,_)&&Y}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var m=this.i,_;for(_ in m.g){for(var w=m.g[_],T=0;T<w.length;T++)Ot(w[T]);delete m.g[_],m.h--}}this.F=null},kt.prototype.K=function(m,_,w,T){return this.i.add(String(m),_,!1,w,T)},kt.prototype.L=function(m,_,w,T){return this.i.add(String(m),_,!0,w,T)};function tr(m,_,w,T){if(_=m.i.g[String(_)],!_)return!0;_=_.concat();for(var Y=!0,ae=0;ae<_.length;++ae){var xe=_[ae];if(xe&&!xe.da&&xe.capture==w){var yt=xe.listener,Sn=xe.ha||xe.src;xe.fa&&Mr(m.i,xe),Y=yt.call(Sn,T)!==!1&&Y}}return Y&&!T.defaultPrevented}function pn(m,_,w){if(typeof m=="function")w&&(m=v(m,w));else if(m&&typeof m.handleEvent=="function")m=v(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:c.setTimeout(m,_||0)}function Nu(m){m.g=pn(()=>{m.g=null,m.i&&(m.i=!1,Nu(m))},m.l);const _=m.h;m.h=null,m.m.apply(null,_)}class ii extends de{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Nu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(m){de.call(this),this.h=m,this.g={}}S(Xi,de);var Yi=[];function Qi(m){B(m.g,function(_,w){this.g.hasOwnProperty(w)&&Ro(_)},m),m.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),Qi(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zr=c.JSON.stringify,Pa=c.JSON.parse,ai=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Oo(){}Oo.prototype.h=null;function za(m){return m.h||(m.h=m.i())}function ul(){}var oi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ii(){ce.call(this,"d")}S(Ii,ce);function No(){ce.call(this,"c")}S(No,ce);var pr={},Ji=null;function Zi(){return Ji=Ji||new kt}pr.La="serverreachability";function Po(m){ce.call(this,pr.La,m)}S(Po,ce);function K(m){const _=Zi();ot(_,new Po(_))}pr.STAT_EVENT="statevent";function X(m,_){ce.call(this,pr.STAT_EVENT,m),this.stat=_}S(X,ce);function Z(m){const _=Zi();ot(_,new X(_,m))}pr.Ma="timingevent";function pe(m,_){ce.call(this,pr.Ma,m),this.size=_}S(pe,ce);function _e(m,_){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},_)}function Ce(){this.g=!0}Ce.prototype.xa=function(){this.g=!1};function Oe(m,_,w,T,Y,ae){m.info(function(){if(m.g)if(ae)for(var xe="",yt=ae.split("&"),Sn=0;Sn<yt.length;Sn++){var bt=yt[Sn].split("=");if(1<bt.length){var Nn=bt[0];bt=bt[1];var kn=Nn.split("_");xe=2<=kn.length&&kn[1]=="type"?xe+(Nn+"="+bt+"&"):xe+(Nn+"=redacted&")}}else xe=null;else xe=ae;return"XMLHTTP REQ ("+T+") [attempt "+Y+"]: "+_+`
`+w+`
`+xe})}function Le(m,_,w,T,Y,ae,xe){m.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+Y+"]: "+_+`
`+w+`
`+ae+" "+xe})}function Re(m,_,w,T){m.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ie(m,w)+(T?" "+T:"")})}function Ve(m,_){m.info(function(){return"TIMEOUT: "+_})}Ce.prototype.info=function(){};function Ie(m,_){if(!m.g)return _;if(!_)return null;try{var w=JSON.parse(_);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var T=w[m];if(!(2>T.length)){var Y=T[1];if(Array.isArray(Y)&&!(1>Y.length)){var ae=Y[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var xe=1;xe<Y.length;xe++)Y[xe]=""}}}}return zr(w)}catch{return _}}var Be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wt;function jt(){}S(jt,Oo),jt.prototype.g=function(){return new XMLHttpRequest},jt.prototype.i=function(){return{}},wt=new jt;function Ct(m,_,w,T){this.j=m,this.i=_,this.l=w,this.R=T||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new et}function et(){this.i=null,this.g="",this.h=!1}var Mt={},Ar={};function qn(m,_,w){m.L=1,m.v=dl(Ur(_)),m.m=w,m.P=!0,Bn(m,null)}function Bn(m,_){m.F=Date.now(),Vr(m),m.A=Ur(m.v);var w=m.A,T=m.R;Array.isArray(T)||(T=[String(T)]),zh(w.i,"t",T),m.C=0,w=m.j.J,m.h=new et,m.g=Sm(m.j,w?_:null,!m.m),0<m.O&&(m.M=new ii(v(m.Y,m,m.g),m.O)),_=m.U,w=m.g,T=m.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Yi[0]=Y.toString()),Y=Yi);for(var ae=0;ae<Y.length;ae++){var xe=Ou(w,Y[ae],T||_.handleEvent,!1,_.h||_);if(!xe)break;_.g[xe.key]=xe}_=m.H?A(m.H):{},m.m?(m.u||(m.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,_)):(m.u="GET",m.g.ea(m.A,m.u,null,_)),K(),Oe(m.i,m.u,m.A,m.l,m.R,m.m)}Ct.prototype.ca=function(m){m=m.target;const _=this.M;_&&hi(m)==3?_.j():this.Y(m)},Ct.prototype.Y=function(m){try{if(m==this.g)e:{const kn=hi(this.g);var _=this.g.Ba();const Ha=this.g.Z();if(!(3>kn)&&(kn!=3||this.g&&(this.h.h||this.g.oa()||gm(this.g)))){this.J||kn!=4||_==7||(_==8||0>=Ha?K(3):K(2)),Fr(this);var w=this.g.Z();this.X=w;t:if(gr(this)){var T=gm(this.g);m="";var Y=T.length,ae=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xe(this),yr(this);var xe="";break t}this.h.i=new c.TextDecoder}for(_=0;_<Y;_++)this.h.h=!0,m+=this.h.i.decode(T[_],{stream:!(ae&&_==Y-1)});T.length=0,this.h.g+=m,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=w==200,Le(this.i,this.u,this.A,this.l,this.R,kn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var yt,Sn=this.g;if((yt=Sn.g?Sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(yt)){var bt=yt;break t}}bt=null}if(w=bt)Re(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,en(this,w);else{this.o=!1,this.s=3,Z(12),Xe(this),yr(this);break e}}if(this.P){w=!0;let jn;for(;!this.J&&this.C<xe.length;)if(jn=zo(this,xe),jn==Ar){kn==4&&(this.s=4,Z(14),w=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==Mt){this.s=4,Z(15),Re(this.i,this.l,xe,"[Invalid Chunk]"),w=!1;break}else Re(this.i,this.l,jn,null),en(this,jn);if(gr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kn!=4||xe.length!=0||this.h.h||(this.s=1,Z(16),w=!1),this.o=this.o&&w,!w)Re(this.i,this.l,xe,"[Invalid Chunked Response]"),Xe(this),yr(this);else if(0<xe.length&&!this.W){this.W=!0;var Nn=this.j;Nn.g==this&&Nn.ba&&!Nn.M&&(Nn.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),_l(Nn),Nn.M=!0,Z(11))}}else Re(this.i,this.l,xe,null),en(this,xe);kn==4&&Xe(this),this.o&&!this.J&&(kn==4?xm(this.j,this):(this.o=!1,Vr(this)))}else G1(this.g),w==400&&0<xe.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),Xe(this),yr(this)}}}catch{}finally{}};function gr(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function zo(m,_){var w=m.C,T=_.indexOf(`
`,w);return T==-1?Ar:(w=Number(_.substring(w,T)),isNaN(w)?Mt:(T+=1,T+w>_.length?Ar:(_=_.slice(T,T+w),m.C=T+w,_)))}Ct.prototype.cancel=function(){this.J=!0,Xe(this)};function Vr(m){m.S=Date.now()+m.I,si(m,m.I)}function si(m,_){if(m.B!=null)throw Error("WatchDog timer not null");m.B=_e(v(m.ba,m),_)}function Fr(m){m.B&&(c.clearTimeout(m.B),m.B=null)}Ct.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Ve(this.i,this.A),this.L!=2&&(K(),Z(17)),Xe(this),this.s=2,yr(this)):si(this,this.S-m)};function yr(m){m.j.G==0||m.J||xm(m.j,m)}function Xe(m){Fr(m);var _=m.M;_&&typeof _.ma=="function"&&_.ma(),m.M=null,Qi(m.U),m.g&&(_=m.g,m.g=null,_.abort(),_.ma())}function en(m,_){try{var w=m.j;if(w.G!=0&&(w.g==m||Vo(w.h,m))){if(!m.K&&Vo(w.h,m)&&w.G==3){try{var T=w.Da.g.parse(_)}catch{T=null}if(Array.isArray(T)&&T.length==3){var Y=T;if(Y[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)ju(w),$u(w);else break e;$h(w),Z(18)}}else w.za=Y[1],0<w.za-w.T&&37500>Y[2]&&w.F&&w.v==0&&!w.C&&(w.C=_e(v(w.Za,w),6e3));if(1>=Bi(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ja(w,11)}else if((m.K||w.g==m)&&ju(w),!j(_))for(Y=w.Da.g.parse(_),_=0;_<Y.length;_++){let bt=Y[_];if(w.T=bt[0],bt=bt[1],w.G==2)if(bt[0]=="c"){w.K=bt[1],w.ia=bt[2];const Nn=bt[3];Nn!=null&&(w.la=Nn,w.j.info("VER="+w.la));const kn=bt[4];kn!=null&&(w.Aa=kn,w.j.info("SVER="+w.Aa));const Ha=bt[5];Ha!=null&&typeof Ha=="number"&&0<Ha&&(T=1.5*Ha,w.L=T,w.j.info("backChannelRequestTimeoutMs_="+T)),T=w;const jn=m.g;if(jn){const oa=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oa){var ae=T.h;ae.g||oa.indexOf("spdy")==-1&&oa.indexOf("quic")==-1&&oa.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Fo(ae,ae.h),ae.h=null))}if(T.D){const jh=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;jh&&(T.ya=jh,Ut(T.I,T.D,jh))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),T=w;var xe=m;if(T.qa=Em(T,T.J?T.ia:null,T.W),xe.K){vr(T.h,xe);var yt=xe,Sn=T.L;Sn&&(yt.I=Sn),yt.B&&(Fr(yt),Vr(yt)),T.g=xe}else vm(T);0<w.i.length&&qu(w)}else bt[0]!="stop"&&bt[0]!="close"||ja(w,7);else w.G==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?ja(w,7):Uh(w):bt[0]!="noop"&&w.l&&w.l.ta(bt),w.v=0)}}K(4)}catch{}}var Va=class{constructor(m,_){this.g=m,this.map=_}};function br(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wt(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Bi(m){return m.h?1:m.g?m.g.size:0}function Vo(m,_){return m.h?m.h==_:m.g?m.g.has(_):!1}function Fo(m,_){m.g?m.g.add(_):m.h=_}function vr(m,_){m.h&&m.h==_?m.h=null:m.g&&m.g.has(_)&&m.g.delete(_)}br.prototype.cancel=function(){if(this.i=Bh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Bh(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let _=m.i;for(const w of m.g.values())_=_.concat(w.D);return _}return R(m.i)}function $1(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var _=[],w=m.length,T=0;T<w;T++)_.push(m[T]);return _}_=[],w=0;for(T in m)_[w++]=m[T];return _}function Pu(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var _=[];m=m.length;for(var w=0;w<m;w++)_.push(w);return _}_=[],w=0;for(const T in m)_[w++]=T;return _}}}function Oh(m,_){if(m.forEach&&typeof m.forEach=="function")m.forEach(_,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,_,void 0);else for(var w=Pu(m),T=$1(m),Y=T.length,ae=0;ae<Y;ae++)_.call(void 0,T[ae],w&&w[ae],m)}var cl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q1(m,_){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var T=m[w].indexOf("="),Y=null;if(0<=T){var ae=m[w].substring(0,T);Y=m[w].substring(T+1)}else ae=m[w];_(ae,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function gn(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof gn){this.h=m.h,hl(this,m.j),this.o=m.o,this.g=m.g,Uo(this,m.s),this.l=m.l;var _=m.i,w=new Ua;w.i=_.i,_.g&&(w.g=new Map(_.g),w.h=_.h),Fa(this,w),this.m=m.m}else m&&(_=String(m).match(cl))?(this.h=!1,hl(this,_[1]||"",!0),this.o=li(_[2]||""),this.g=li(_[3]||"",!0),Uo(this,_[4]),this.l=li(_[5]||"",!0),Fa(this,_[6]||"",!0),this.m=li(_[7]||"")):(this.h=!1,this.i=new Ua(null,this.h))}gn.prototype.toString=function(){var m=[],_=this.j;_&&m.push(fl(_,Nh,!0),":");var w=this.g;return(w||_=="file")&&(m.push("//"),(_=this.o)&&m.push(fl(_,Nh,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(fl(w,w.charAt(0)=="/"?j1:Ph,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",fl(w,zu)),m.join("")};function Ur(m){return new gn(m)}function hl(m,_,w){m.j=w?li(_,!0):_,m.j&&(m.j=m.j.replace(/:$/,""))}function Uo(m,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);m.s=_}else m.s=null}function Fa(m,_,w){_ instanceof Ua?(m.i=_,mm(m.i,m.h)):(w||(_=fl(_,H1)),m.i=new Ua(_,m.h))}function Ut(m,_,w){m.i.set(_,w)}function dl(m){return Ut(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function li(m,_){return m?_?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function fl(m,_,w){return typeof m=="string"?(m=encodeURI(m).replace(_,fm),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function fm(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Nh=/[#\/\?@]/g,Ph=/[#\?:]/g,j1=/[#\?]/g,H1=/[#\?@]/g,zu=/#/g;function Ua(m,_){this.h=this.g=null,this.i=m||null,this.j=!!_}function ui(m){m.g||(m.g=new Map,m.h=0,m.i&&q1(m.i,function(_,w){m.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}t=Ua.prototype,t.add=function(m,_){ui(this),this.i=null,m=ea(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(_),this.h+=1,this};function Ka(m,_){ui(m),_=ea(m,_),m.g.has(_)&&(m.i=null,m.h-=m.g.get(_).length,m.g.delete(_))}function $a(m,_){return ui(m),_=ea(m,_),m.g.has(_)}t.forEach=function(m,_){ui(this),this.g.forEach(function(w,T){w.forEach(function(Y){m.call(_,Y,T,this)},this)},this)},t.na=function(){ui(this);const m=Array.from(this.g.values()),_=Array.from(this.g.keys()),w=[];for(let T=0;T<_.length;T++){const Y=m[T];for(let ae=0;ae<Y.length;ae++)w.push(_[T])}return w},t.V=function(m){ui(this);let _=[];if(typeof m=="string")$a(this,m)&&(_=_.concat(this.g.get(ea(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)_=_.concat(m[w])}return _},t.set=function(m,_){return ui(this),this.i=null,m=ea(this,m),$a(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[_]),this.h+=1,this},t.get=function(m,_){return m?(m=this.V(m),0<m.length?String(m[0]):_):_};function zh(m,_,w){Ka(m,_),0<w.length&&(m.i=null,m.g.set(ea(m,_),R(w)),m.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],_=Array.from(this.g.keys());for(var w=0;w<_.length;w++){var T=_[w];const ae=encodeURIComponent(String(T)),xe=this.V(T);for(T=0;T<xe.length;T++){var Y=ae;xe[T]!==""&&(Y+="="+encodeURIComponent(String(xe[T]))),m.push(Y)}}return this.i=m.join("&")};function ea(m,_){return _=String(_),m.j&&(_=_.toLowerCase()),_}function mm(m,_){_&&!m.j&&(ui(m),m.i=null,m.g.forEach(function(w,T){var Y=T.toLowerCase();T!=Y&&(Ka(this,T),zh(this,Y,w))},m)),m.j=_}function ml(m,_){const w=new Ce;if(c.Image){const T=new Image;T.onload=x(ci,w,"TestLoadImage: loaded",!0,_,T),T.onerror=x(ci,w,"TestLoadImage: error",!1,_,T),T.onabort=x(ci,w,"TestLoadImage: abort",!1,_,T),T.ontimeout=x(ci,w,"TestLoadImage: timeout",!1,_,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=m}else _(!1)}function Oi(m,_){const w=new Ce,T=new AbortController,Y=setTimeout(()=>{T.abort(),ci(w,"TestPingServer: timeout",!1,_)},1e4);fetch(m,{signal:T.signal}).then(ae=>{clearTimeout(Y),ae.ok?ci(w,"TestPingServer: ok",!0,_):ci(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Y),ci(w,"TestPingServer: error",!1,_)})}function ci(m,_,w,T,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),T(w)}catch{}}function pl(){this.g=new ai}function ta(m,_,w){const T=w||"";try{Oh(m,function(Y,ae){let xe=Y;f(Y)&&(xe=zr(Y)),_.push(T+ae+"="+encodeURIComponent(xe))})}catch(Y){throw _.push(T+"type="+encodeURIComponent("_badmap")),Y}}function Ko(m){this.l=m.Ub||null,this.j=m.eb||!1}S(Ko,Oo),Ko.prototype.g=function(){return new qa(this.l,this.j)},Ko.prototype.i=function(m){return function(){return m}}({});function qa(m,_){kt.call(this),this.D=m,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(qa,kt),t=qa.prototype,t.open=function(m,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=_,this.readyState=1,ra(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(_.body=m),(this.D||c).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vh(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vh(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var _=m.value?m.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!m.done}))&&(this.response=this.responseText+=_)}m.done?na(this):ra(this),this.readyState==3&&Vh(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,na(this))},t.Qa=function(m){this.g&&(this.response=m,na(this))},t.ga=function(){this.g&&na(this)};function na(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ra(m)}t.setRequestHeader=function(m,_){this.u.append(m,_)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=_.next();return m.join(`\r
`)};function ra(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Fh(m){let _="";return B(m,function(w,T){_+=T,_+=":",_+=w,_+=`\r
`}),_}function On(m,_,w){e:{for(T in w){var T=!1;break e}T=!0}T||(w=Fh(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):Ut(m,_,w))}function Rt(m){kt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Rt,kt);var Vu=/^https?$/i,gl=["POST","PUT"];t=Rt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,_,w,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);_=_?_.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wt.g(),this.v=this.o?za(this.o):za(wt),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(m),!0),this.B=!1}catch(ae){pm(this,ae);return}if(m=w||"",w=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var Y in T)w.set(Y,T[Y]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const ae of T.keys())w.set(ae,T.get(ae));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(w.keys()).find(ae=>ae.toLowerCase()=="content-type"),Y=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(gl,_,void 0))||T||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,xe]of w)this.g.setRequestHeader(ae,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yl(this),this.u=!0,this.g.send(m),this.u=!1}catch(ae){pm(this,ae)}};function pm(m,_){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=_,m.m=5,Fu(m),ia(m)}function Fu(m){m.A||(m.A=!0,ot(m,"complete"),ot(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,ot(this,"complete"),ot(this,"abort"),ia(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ia(this,!0)),Rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Uu(this):this.bb())},t.bb=function(){Uu(this)};function Uu(m){if(m.h&&typeof l<"u"&&(!m.v[1]||hi(m)!=4||m.Z()!=2)){if(m.u&&hi(m)==4)pn(m.Ea,0,m);else if(ot(m,"readystatechange"),hi(m)==4){m.h=!1;try{const xe=m.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var T;if(T=xe===0){var Y=String(m.D).match(cl)[1]||null;!Y&&c.self&&c.self.location&&(Y=c.self.location.protocol.slice(0,-1)),T=!Vu.test(Y?Y.toLowerCase():"")}w=T}if(w)ot(m,"complete"),ot(m,"success");else{m.m=6;try{var ae=2<hi(m)?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.Z()+"]",Fu(m)}}finally{ia(m)}}}}function ia(m,_){if(m.g){yl(m);const w=m.g,T=m.v[0]?()=>{}:null;m.g=null,m.v=null,_||ot(m,"ready");try{w.onreadystatechange=T}catch{}}}function yl(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function hi(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var _=this.g.responseText;return m&&_.indexOf(m)==0&&(_=_.substring(m.length)),Pa(_)}};function gm(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function G1(m){const _={};m=(m.g&&2<=hi(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<m.length;T++){if(j(m[T]))continue;var w=D(m[T]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ae=_[Y]||[];_[Y]=ae,ae.push(w)}M(_,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bl(m,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||_}function Ku(m){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bl("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bl("baseRetryDelayMs",5e3,m),this.cb=bl("retryDelaySeedMs",1e4,m),this.Wa=bl("forwardChannelMaxRetries",2,m),this.wa=bl("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new br(m&&m.concurrentRequestLimit),this.Da=new pl,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ku.prototype,t.la=8,t.G=1,t.connect=function(m,_,w,T){Z(0),this.W=m,this.H=_||{},w&&T!==void 0&&(this.H.OSID=w,this.H.OAID=T),this.F=this.X,this.I=Em(this,null,this.W),qu(this)};function Uh(m){if(ym(m),m.G==3){var _=m.U++,w=Ur(m.I);if(Ut(w,"SID",m.K),Ut(w,"RID",_),Ut(w,"TYPE","terminate"),vl(m,w),_=new Ct(m,m.j,_),_.L=2,_.v=dl(Ur(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(_.v.toString(),"")}catch{}!w&&c.Image&&(new Image().src=_.v,w=!0),w||(_.g=Sm(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Vr(_)}wm(m)}function $u(m){m.g&&(_l(m),m.g.cancel(),m.g=null)}function ym(m){$u(m),m.u&&(c.clearTimeout(m.u),m.u=null),ju(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function qu(m){if(!Wt(m.h)&&!m.s){m.s=!0;var _=m.Ga;ue||V(),ve||(ue(),ve=!0),De.add(_,m),m.B=0}}function W1(m,_){return Bi(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=_.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=_e(v(m.Ga,m,_),qh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Y=new Ct(this,this.j,m);let ae=this.o;if(this.S&&(ae?(ae=A(ae),P(ae,this.S)):ae=this.S),this.m!==null||this.O||(Y.H=ae,ae=null),this.P)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var T=this.i[w];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(_+=T,4096<_){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=bm(this,Y,_),w=Ur(this.I),Ut(w,"RID",m),Ut(w,"CVER",22),this.D&&Ut(w,"X-HTTP-Session-Id",this.D),vl(this,w),ae&&(this.O?_="headers="+encodeURIComponent(String(Fh(ae)))+"&"+_:this.m&&On(w,this.m,ae)),Fo(this.h,Y),this.Ua&&Ut(w,"TYPE","init"),this.P?(Ut(w,"$req",_),Ut(w,"SID","null"),Y.T=!0,qn(Y,w,null)):qn(Y,w,_),this.G=2}}else this.G==3&&(m?Kh(this,m):this.i.length==0||Wt(this.h)||Kh(this))};function Kh(m,_){var w;_?w=_.l:w=m.U++;const T=Ur(m.I);Ut(T,"SID",m.K),Ut(T,"RID",w),Ut(T,"AID",m.T),vl(m,T),m.m&&m.o&&On(T,m.m,m.o),w=new Ct(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),_&&(m.i=_.D.concat(m.i)),_=bm(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Fo(m.h,w),qn(w,T,_)}function vl(m,_){m.H&&B(m.H,function(w,T){Ut(_,T,w)}),m.l&&Oh({},function(w,T){Ut(_,T,w)})}function bm(m,_,w){w=Math.min(m.i.length,w);var T=m.l?v(m.l.Na,m.l,m):null;e:{var Y=m.i;let ae=-1;for(;;){const xe=["count="+w];ae==-1?0<w?(ae=Y[0].g,xe.push("ofs="+ae)):ae=0:xe.push("ofs="+ae);let yt=!0;for(let Sn=0;Sn<w;Sn++){let bt=Y[Sn].g;const Nn=Y[Sn].map;if(bt-=ae,0>bt)ae=Math.max(0,Y[Sn].g-100),yt=!1;else try{ta(Nn,xe,"req"+bt+"_")}catch{T&&T(Nn)}}if(yt){T=xe.join("&");break e}}}return m=m.i.splice(0,w),_.D=m,T}function vm(m){if(!m.g&&!m.u){m.Y=1;var _=m.Fa;ue||V(),ve||(ue(),ve=!0),De.add(_,m),m.v=0}}function $h(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=_e(v(m.Fa,m),qh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,_m(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=_e(v(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),$u(this),_m(this))};function _l(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function _m(m){m.g=new Ct(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var _=Ur(m.qa);Ut(_,"RID","rpc"),Ut(_,"SID",m.K),Ut(_,"AID",m.T),Ut(_,"CI",m.F?"0":"1"),!m.F&&m.ja&&Ut(_,"TO",m.ja),Ut(_,"TYPE","xmlhttp"),vl(m,_),m.m&&m.o&&On(_,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=dl(Ur(_)),w.m=null,w.P=!0,Bn(w,m)}t.Za=function(){this.C!=null&&(this.C=null,$u(this),$h(this),Z(19))};function ju(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function xm(m,_){var w=null;if(m.g==_){ju(m),_l(m),m.g=null;var T=2}else if(Vo(m.h,_))w=_.D,vr(m.h,_),T=1;else return;if(m.G!=0){if(_.o)if(T==1){w=_.m?_.m.length:0,_=Date.now()-_.F;var Y=m.B;T=Zi(),ot(T,new pe(T,w)),qu(m)}else vm(m);else if(Y=_.s,Y==3||Y==0&&0<_.X||!(T==1&&W1(m,_)||T==2&&$h(m)))switch(w&&0<w.length&&(_=m.h,_.i=_.i.concat(w)),Y){case 1:ja(m,5);break;case 4:ja(m,10);break;case 3:ja(m,6);break;default:ja(m,2)}}}function qh(m,_){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*_}function ja(m,_){if(m.j.info("Error code "+_),_==2){var w=v(m.fb,m),T=m.Xa;const Y=!T;T=new gn(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||hl(T,"https"),dl(T),Y?ml(T.toString(),w):Oi(T.toString(),w)}else Z(2);m.G=0,m.l&&m.l.sa(_),wm(m),ym(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function wm(m){if(m.G=0,m.ka=[],m.l){const _=Bh(m.h);(_.length!=0||m.i.length!=0)&&(I(m.ka,_),I(m.ka,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.ra()}}function Em(m,_,w){var T=w instanceof gn?Ur(w):new gn(w);if(T.g!="")_&&(T.g=_+"."+T.g),Uo(T,T.s);else{var Y=c.location;T=Y.protocol,_=_?_+"."+Y.hostname:Y.hostname,Y=+Y.port;var ae=new gn(null);T&&hl(ae,T),_&&(ae.g=_),Y&&Uo(ae,Y),w&&(ae.l=w),T=ae}return w=m.D,_=m.ya,w&&_&&Ut(T,w,_),Ut(T,"VER",m.la),vl(m,T),T}function Sm(m,_,w){if(_&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=m.Ca&&!m.pa?new Rt(new Ko({eb:w})):new Rt(m.pa),_.Ha(m.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function km(){}t=km.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hu(){}Hu.prototype.g=function(m,_){return new _r(m,_)};function _r(m,_){kt.call(this),this.g=new Ku(_),this.l=m,this.h=_&&_.messageUrlParams||null,m=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(m?m["X-WebChannel-Content-Type"]=_.messageContentType:m={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(m?m["X-WebChannel-Client-Profile"]=_.va:m={"X-WebChannel-Client-Profile":_.va}),this.g.S=m,(m=_&&_.Sb)&&!j(m)&&(this.g.m=m),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!j(_)&&(this.g.D=_,m=this.h,m!==null&&_ in m&&(m=this.h,_ in m&&delete m[_])),this.j=new aa(this)}S(_r,kt),_r.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){Uh(this.g)},_r.prototype.o=function(m){var _=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=zr(m),m=w);_.i.push(new Va(_.Ya++,m)),_.G==3&&qu(_)},_r.prototype.N=function(){this.g.l=null,delete this.j,Uh(this.g),delete this.g,_r.aa.N.call(this)};function Cm(m){Ii.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var _=m.__sm__;if(_){e:{for(const w in _){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,_=_!==null&&m in _?_[m]:void 0),this.data=_}else this.data=m}S(Cm,Ii);function Mm(){No.call(this),this.status=1}S(Mm,No);function aa(m){this.g=m}S(aa,km),aa.prototype.ua=function(){ot(this.g,"a")},aa.prototype.ta=function(m){ot(this.g,new Cm(m))},aa.prototype.sa=function(m){ot(this.g,new Mm)},aa.prototype.ra=function(){ot(this.g,"b")},Hu.prototype.createWebChannel=Hu.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,uk=function(){return new Hu},lk=function(){return Zi()},sk=pr,x4={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,G0=Be,nt.COMPLETE="complete",ok=nt,ul.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",kt.prototype.listen=kt.prototype.K,cf=ul,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,ak=Rt}).apply(typeof Rp<"u"?Rp:typeof self<"u"?self:typeof window<"u"?window:{});const nw="@firebase/firestore",rw="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lr.UNAUTHENTICATED=new lr(null),lr.GOOGLE_CREDENTIALS=new lr("google-credentials-uid"),lr.FIRST_PARTY=new lr("first-party-uid"),lr.MOCK_USER=new lr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new z2("@firebase/firestore");function Vc(){return bu.logLevel}function Me(t,...e){if(bu.logLevel<=ft.DEBUG){const n=e.map(K2);bu.debug(`Firestore (${Eh}): ${t}`,...n)}}function ko(t,...e){if(bu.logLevel<=ft.ERROR){const n=e.map(K2);bu.error(`Firestore (${Eh}): ${t}`,...n)}}function dh(t,...e){if(bu.logLevel<=ft.WARN){const n=e.map(K2);bu.warn(`Firestore (${Eh}): ${t}`,...n)}}function K2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ck(t,r,n)}function ck(t,e,n){let r=`FIRESTORE (${Eh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ko(r),new Error(r)}function It(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||ck(e,i,r)}function tt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Oa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lr.UNAUTHENTICATED))}shutdown(){}}class $O{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qO{constructor(e){this.t=e,this.currentUser=lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){It(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new xo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xo,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xo)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new hk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new lr(e)}}class jO{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HO{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){It(this.o===void 0,3512);const r=o=>{o.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new iw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(It(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=WO(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function mt(t,e){return t<e?-1:t>e?1:0}function w4(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return nv(i)===nv(o)?mt(i,o):nv(i)?1:-1}return mt(t.length,e.length)}const XO=55296,YO=57343;function nv(t){const e=t.charCodeAt(0);return e>=XO&&e<=YO}function fh(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="__name__";class va{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return va.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof va?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=va.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return mt(e.length,n.length)}static compareSegments(e,n){const r=va.isNumericId(e),i=va.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?va.extractNumericId(e).compare(va.extractNumericId(n)):w4(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fs.fromString(e.substring(4,e.length-2))}}class Jt extends va{construct(e,n,r){return new Jt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Jt(n)}static emptyPath(){return new Jt([])}}const QO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends va{construct(e,n,r){return new Qn(e,n,r)}static isValidIdentifier(e){return QO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aw}static keyField(){return new Qn([aw])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Ne(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ne(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ne(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new Ne(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(n)}static emptyPath(){return new Qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Jt.fromString(e))}static fromName(e){return new Fe(Jt.fromString(e).popFirst(5))}static empty(){return new Fe(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Jt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Jt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t,e,n){if(!n)throw new Ne(ye.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JO(t,e,n,r){if(e===!0&&r===!0)throw new Ne(ye.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ow(t){if(!Fe.isDocumentKey(t))throw new Ne(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sw(t){if(Fe.isDocumentKey(t))throw new Ne(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function q2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ge(12329,{type:typeof t})}function vu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ne(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=q2(t);throw new Ne(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Jf(t,e){if(!fk(t))throw new Ne(ye.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Ne(ye.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=-62135596800,uw=1e6;class Zt{static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*uw);return new Zt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ne(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ne(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<lw)throw new Ne(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uw}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jf(e,Zt._jsonSchema))return new Zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zt._jsonSchemaVersion="firestore/timestamp/1.0",Zt._jsonSchema={type:wn("string",Zt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new Zt(0,0))}static max(){return new Je(new Zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=-1;function ZO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Je.fromTimestamp(r===1e9?new Zt(n+1,0):new Zt(n,r));return new Hs(i,Fe.empty(),e)}function eN(t){return new Hs(t.readTime,t.key,Rf)}class Hs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hs(Je.min(),Fe.empty(),Rf)}static max(){return new Hs(Je.max(),Fe.empty(),Rf)}}function tN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Fe.comparator(t.documentKey,e.documentKey),n!==0?n:mt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(t){if(t.code!==ye.FAILED_PRECONDITION||t.message!==nN)throw t;Me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ge?n:ge.resolve(n)}catch(n){return ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.reject(n)}static resolve(e){return new ge((n,r)=>{n(e)})}static reject(e){return new ge((n,r)=>{r(e)})}static waitFor(e){return new ge((n,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&n()},d=>r(d))}),l=!0,o===i&&n()})}static or(e){let n=ge.resolve(!1);for(const r of e)n=n.next(i=>i?ge.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new ge((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(p=>{l[f]=p,++c,c===o&&r(l)},p=>i(p))}})}static doWhile(e,n){return new ge((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function iN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}h1.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=-1;function d1(t){return t==null}function _g(t){return t===0&&1/t==-1/0}function aN(t){return typeof t=="number"&&Number.isInteger(t)&&!_g(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="";function oN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cw(e)),e=sN(t.get(n),e);return cw(e)}function sN(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case mk:n+="";break;default:n+=o}}return n}function cw(t){return t+mk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Au(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.comparator=e,this.root=n||Yn.EMPTY}insert(e,n){return new an(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new an(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ip(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ip(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ip(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ip(this.root,e,this.comparator,!0)}}class Ip{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Yn.RED,this.left=i??Yn.EMPTY,this.right=o??Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Yn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Yn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.comparator=e,this.data=new an(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dw(this.data.getIterator())}getIteratorFrom(e){return new dw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ln(this.comparator);return n.data=e,n}}class dw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new ji([])}unionWith(e){let n=new Ln(Qn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ji(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fh(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new gk("Invalid base64 string: "+o):o}}(e);return new er(n)}static fromUint8Array(e){const n=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new er(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}er.EMPTY_BYTE_STRING=new er("");const lN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gs(t){if(It(!!t,39018),typeof t=="string"){let e=0;const n=lN.exec(t);if(It(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fn(t.seconds),nanos:fn(t.nanos)}}function fn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ws(t){return typeof t=="string"?er.fromBase64String(t):er.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="server_timestamp",bk="__type__",vk="__previous_value__",_k="__local_write_time__";function H2(t){return(t?.mapValue?.fields||{})[bk]?.stringValue===yk}function f1(t){const e=t.mapValue.fields[vk];return H2(e)?f1(e):e}function If(t){const e=Gs(t.mapValue.fields[_k].timestampValue);return new Zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r,i,o,l,c,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const xg="(default)";class Bf{constructor(e,n){this.projectId=e,this.database=n||xg}static empty(){return new Bf("","")}get isDefaultDatabase(){return this.database===xg}isEqual(e){return e instanceof Bf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="__type__",cN="__max__",Bp={mapValue:{}},wk="__vector__",wg="value";function Xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?H2(t)?4:dN(t)?9007199254740991:hN(t)?10:11:Ge(28295,{value:t})}function La(t,e){if(t===e)return!0;const n=Xs(t);if(n!==Xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return If(t).isEqual(If(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Gs(i.timestampValue),c=Gs(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ws(i.bytesValue).isEqual(Ws(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return fn(i.geoPointValue.latitude)===fn(o.geoPointValue.latitude)&&fn(i.geoPointValue.longitude)===fn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return fn(i.integerValue)===fn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=fn(i.doubleValue),c=fn(o.doubleValue);return l===c?_g(l)===_g(c):isNaN(l)&&isNaN(c)}return!1}(t,e);case 9:return fh(t.arrayValue.values||[],e.arrayValue.values||[],La);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(hw(l)!==hw(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!La(l[d],c[d])))return!1;return!0}(t,e);default:return Ge(52216,{left:t})}}function Of(t,e){return(t.values||[]).find(n=>La(n,e))!==void 0}function mh(t,e){if(t===e)return 0;const n=Xs(t),r=Xs(e);if(n!==r)return mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return mt(t.booleanValue,e.booleanValue);case 2:return function(o,l){const c=fn(o.integerValue||o.doubleValue),d=fn(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return fw(t.timestampValue,e.timestampValue);case 4:return fw(If(t),If(e));case 5:return w4(t.stringValue,e.stringValue);case 6:return function(o,l){const c=Ws(o),d=Ws(l);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),d=l.split("/");for(let f=0;f<c.length&&f<d.length;f++){const p=mt(c[f],d[f]);if(p!==0)return p}return mt(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const c=mt(fn(o.latitude),fn(l.latitude));return c!==0?c:mt(fn(o.longitude),fn(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mw(t.arrayValue,e.arrayValue);case 10:return function(o,l){const c=o.fields||{},d=l.fields||{},f=c[wg]?.arrayValue,p=d[wg]?.arrayValue,y=mt(f?.values?.length||0,p?.values?.length||0);return y!==0?y:mw(f,p)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Bp.mapValue&&l===Bp.mapValue)return 0;if(o===Bp.mapValue)return 1;if(l===Bp.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let y=0;y<d.length&&y<p.length;++y){const v=w4(d[y],p[y]);if(v!==0)return v;const x=mh(c[d[y]],f[p[y]]);if(x!==0)return x}return mt(d.length,p.length)}(t.mapValue,e.mapValue);default:throw Ge(23264,{he:n})}}function fw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return mt(t,e);const n=Gs(t),r=Gs(e),i=mt(n.seconds,r.seconds);return i!==0?i:mt(n.nanos,r.nanos)}function mw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=mh(n[i],r[i]);if(o)return o}return mt(n.length,r.length)}function ph(t){return E4(t)}function E4(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ws(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=E4(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${E4(n.fields[l])}`;return i+"}"}(t.mapValue):Ge(61005,{value:t})}function W0(t){switch(Xs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=f1(t);return e?16+W0(e):16;case 5:return 2*t.stringValue.length;case 6:return Ws(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+W0(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Au(r.fields,(o,l)=>{i+=o.length+W0(l)}),i}(t.mapValue);default:throw Ge(13486,{value:t})}}function S4(t){return!!t&&"integerValue"in t}function G2(t){return!!t&&"arrayValue"in t}function pw(t){return!!t&&"nullValue"in t}function gw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function X0(t){return!!t&&"mapValue"in t}function hN(t){return(t?.mapValue?.fields||{})[xk]?.stringValue===wk}function yf(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Au(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yf(t.arrayValue.values[n]);return e}return{...t}}function dN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.value=e}static empty(){return new ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!X0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yf(n)}setAll(e){let n=Qn.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,r,i),r={},i=[],n=c.popLast()}l?r[c.lastSegment()]=yf(l):i.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());X0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return La(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];X0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Au(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ki(yf(this.value))}}function Ek(t){const e=[];return Au(t.fields,(n,r)=>{const i=new Qn([n]);if(X0(r)){const o=Ek(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new ji(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,r,i,o,l,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new ur(e,0,Je.min(),Je.min(),Je.min(),ki.empty(),0)}static newFoundDocument(e,n,r,i){return new ur(e,1,n,Je.min(),r,i,0)}static newNoDocument(e,n){return new ur(e,2,n,Je.min(),Je.min(),ki.empty(),0)}static newUnknownDocument(e,n){return new ur(e,3,n,Je.min(),Je.min(),ki.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){this.position=e,this.inclusive=n}}function yw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],l=t.position[i];if(o.field.isKeyField()?r=Fe.comparator(Fe.fromName(l.referenceValue),n.key):r=mh(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function bw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!La(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n="asc"){this.field=e,this.dir=n}}function fN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{}class Tn extends Sk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pN(e,n,r):n==="array-contains"?new bN(e,r):n==="in"?new vN(e,r):n==="not-in"?new _N(e,r):n==="array-contains-any"?new xN(e,r):new Tn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new gN(e,r):new yN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(mh(n,this.value)):n!==null&&Xs(this.value)===Xs(n)&&this.matchesComparison(mh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ra extends Sk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ra(e,n)}matches(e){return kk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kk(t){return t.op==="and"}function Ck(t){return mN(t)&&kk(t)}function mN(t){for(const e of t.filters)if(e instanceof Ra)return!1;return!0}function k4(t){if(t instanceof Tn)return t.field.canonicalString()+t.op.toString()+ph(t.value);if(Ck(t))return t.filters.map(e=>k4(e)).join(",");{const e=t.filters.map(n=>k4(n)).join(",");return`${t.op}(${e})`}}function Mk(t,e){return t instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.field.isEqual(i.field)&&La(r.value,i.value)}(t,e):t instanceof Ra?function(r,i){return i instanceof Ra&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&Mk(l,i.filters[c]),!0):!1}(t,e):void Ge(19439)}function Ak(t){return t instanceof Tn?function(n){return`${n.field.canonicalString()} ${n.op} ${ph(n.value)}`}(t):t instanceof Ra?function(n){return n.op.toString()+" {"+n.getFilters().map(Ak).join(" ,")+"}"}(t):"Filter"}class pN extends Tn{constructor(e,n,r){super(e,n,r),this.key=Fe.fromName(r.referenceValue)}matches(e){const n=Fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class gN extends Tn{constructor(e,n){super(e,"in",n),this.keys=Tk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yN extends Tn{constructor(e,n){super(e,"not-in",n),this.keys=Tk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Tk(t,e){return(e.arrayValue?.values||[]).map(n=>Fe.fromName(n.referenceValue))}class bN extends Tn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return G2(n)&&Of(n.arrayValue,this.value)}}class vN extends Tn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Of(this.value.arrayValue,n)}}class _N extends Tn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Of(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Of(this.value.arrayValue,n)}}class xN extends Tn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!G2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Of(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function vw(t,e=null,n=[],r=[],i=null,o=null,l=null){return new wN(t,e,n,r,i,o,l)}function W2(t){const e=tt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>k4(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),d1(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ph(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ph(r)).join(",")),e.Te=n}return e.Te}function X2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bw(t.startAt,e.startAt)&&bw(t.endAt,e.endAt)}function C4(t){return Fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n=null,r=[],i=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EN(t,e,n,r,i,o,l,c){return new m1(t,e,n,r,i,o,l,c)}function Y2(t){return new m1(t)}function _w(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function SN(t){return t.collectionGroup!==null}function bf(t){const e=tt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ln(Qn.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Sg(o,r))}),n.has(Qn.keyField().canonicalString())||e.Ie.push(new Sg(Qn.keyField(),r))}return e.Ie}function Ca(t){const e=tt(t);return e.Ee||(e.Ee=kN(e,bf(t))),e.Ee}function kN(t,e){if(t.limitType==="F")return vw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Sg(i.field,o)});const n=t.endAt?new Eg(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Eg(t.startAt.position,t.startAt.inclusive):null;return vw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function M4(t,e,n){return new m1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function p1(t,e){return X2(Ca(t),Ca(e))&&t.limitType===e.limitType}function Dk(t){return`${W2(Ca(t))}|lt:${t.limitType}`}function Fc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ak(i)).join(", ")}]`),d1(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ph(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ph(i)).join(",")),`Target(${r})`}(Ca(t))}; limitType=${t.limitType})`}function g1(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Fe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of bf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(l,c,d){const f=yw(l,c,d);return l.inclusive?f<=0:f<0}(r.startAt,bf(r),i)||r.endAt&&!function(l,c,d){const f=yw(l,c,d);return l.inclusive?f>=0:f>0}(r.endAt,bf(r),i))}(t,e)}function CN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Lk(t){return(e,n)=>{let r=!1;for(const i of bf(t)){const o=MN(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function MN(t,e,n){const r=t.field.isKeyField()?Fe.comparator(e.key,n.key):function(o,l,c){const d=l.data.field(o),f=c.data.field(o);return d!==null&&f!==null?mh(d,f):Ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Au(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return pk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new an(Fe.comparator);function Co(){return AN}const Rk=new an(Fe.comparator);function hf(...t){let e=Rk;for(const n of t)e=e.insert(n.key,n);return e}function Ik(t){let e=Rk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function iu(){return vf()}function Bk(){return vf()}function vf(){return new Tu(t=>t.toString(),(t,e)=>t.isEqual(e))}const TN=new an(Fe.comparator),DN=new Ln(Fe.comparator);function pt(...t){let e=DN;for(const n of t)e=e.add(n);return e}const LN=new Ln(mt);function RN(){return LN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_g(e)?"-0":e}}function Ok(t){return{integerValue:""+t}}function IN(t,e){return aN(e)?Ok(e):Q2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this._=void 0}}function BN(t,e,n){return t instanceof kg?function(i,o){const l={fields:{[bk]:{stringValue:yk},[_k]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&H2(o)&&(o=f1(o)),o&&(l.fields[vk]=o),{mapValue:l}}(n,e):t instanceof Nf?Pk(t,e):t instanceof Pf?zk(t,e):function(i,o){const l=Nk(i,o),c=xw(l)+xw(i.Ae);return S4(l)&&S4(i.Ae)?Ok(c):Q2(i.serializer,c)}(t,e)}function ON(t,e,n){return t instanceof Nf?Pk(t,e):t instanceof Pf?zk(t,e):n}function Nk(t,e){return t instanceof Cg?function(r){return S4(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class kg extends y1{}class Nf extends y1{constructor(e){super(),this.elements=e}}function Pk(t,e){const n=Vk(e);for(const r of t.elements)n.some(i=>La(i,r))||n.push(r);return{arrayValue:{values:n}}}class Pf extends y1{constructor(e){super(),this.elements=e}}function zk(t,e){let n=Vk(e);for(const r of t.elements)n=n.filter(i=>!La(i,r));return{arrayValue:{values:n}}}class Cg extends y1{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function xw(t){return fn(t.integerValue||t.doubleValue)}function Vk(t){return G2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function NN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Nf&&i instanceof Nf||r instanceof Pf&&i instanceof Pf?fh(r.elements,i.elements,La):r instanceof Cg&&i instanceof Cg?La(r.Ae,i.Ae):r instanceof kg&&i instanceof kg}(t.transform,e.transform)}class PN{constructor(e,n){this.version=e,this.transformResults=n}}class wo{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wo}static exists(e){return new wo(void 0,e)}static updateTime(e){return new wo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Y0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class b1{}function Fk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kk(t.key,wo.none()):new Zf(t.key,t.data,wo.none());{const n=t.data,r=ki.empty();let i=new Ln(Qn.comparator);for(let o of e.fields)if(!i.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Du(t.key,r,new ji(i.toArray()),wo.none())}}function zN(t,e,n){t instanceof Zf?function(i,o,l){const c=i.value.clone(),d=Ew(i.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Du?function(i,o,l){if(!Y0(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=Ew(i.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(Uk(i)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function _f(t,e,n,r){return t instanceof Zf?function(o,l,c,d){if(!Y0(o.precondition,l))return c;const f=o.value.clone(),p=Sw(o.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Du?function(o,l,c,d){if(!Y0(o.precondition,l))return c;const f=Sw(o.fieldTransforms,d,l),p=l.data;return p.setAll(Uk(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,l,c){return Y0(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(t,e,n)}function VN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Nk(r.transform,i||null);o!=null&&(n===null&&(n=ki.empty()),n.set(r.field,o))}return n||null}function ww(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fh(r,i,(o,l)=>NN(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zf extends b1{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Du extends b1{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Uk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ew(t,e,n){const r=new Map;It(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,ON(l,c,n[i]))}return r}function Sw(t,e,n){const r=new Map;for(const i of t){const o=i.transform,l=n.data.field(i.field);r.set(i.field,BN(o,l,e))}return r}class Kk extends b1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FN extends b1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&zN(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_f(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_f(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Bk();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(i.key)?null:c;const d=Fk(l,c);d!==null&&r.set(i.key,d),l.isValidDocument()||l.convertToNoDocument(Je.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pt())}isEqual(e){return this.batchId===e.batchId&&fh(this.mutations,e.mutations,(n,r)=>ww(n,r))&&fh(this.baseMutations,e.baseMutations,(n,r)=>ww(n,r))}}class J2{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){It(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return TN}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new J2(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,_t;function qN(t){switch(t){case ye.OK:return Ge(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return Ge(15467,{code:t})}}function $k(t){if(t===void 0)return ko("GRPC error has no .code"),ye.UNKNOWN;switch(t){case _n.OK:return ye.OK;case _n.CANCELLED:return ye.CANCELLED;case _n.UNKNOWN:return ye.UNKNOWN;case _n.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case _n.INTERNAL:return ye.INTERNAL;case _n.UNAVAILABLE:return ye.UNAVAILABLE;case _n.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case _n.NOT_FOUND:return ye.NOT_FOUND;case _n.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case _n.ABORTED:return ye.ABORTED;case _n.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case _n.DATA_LOSS:return ye.DATA_LOSS;default:return Ge(39323,{code:t})}}(_t=_n||(_n={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new Fs([4294967295,4294967295],0);function kw(t){const e=jN().encode(t),n=new ik;return n.update(e),new Uint8Array(n.digest())}function Cw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Fs([n,r],0),new Fs([i,o],0)]}class Z2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new df(`Invalid padding: ${n}`);if(r<0)throw new df(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new df(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new df(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fs.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Fs.fromNumber(r)));return i.compare(HN)===1&&(i=new Fs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=kw(e),[r,i]=Cw(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Z2(o,i,n);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.ge===0)return;const n=kw(e),[r,i]=Cw(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class df extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,em.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new v1(Je.min(),i,new an(mt),Co(),pt())}}class em{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new em(r,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class qk{constructor(e,n){this.targetId=e,this.Ce=n}}class jk{constructor(e,n,r=er.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Mw{constructor(){this.ve=0,this.Fe=Aw(),this.Me=er.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),n=pt(),r=pt();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ge(38017,{changeType:o})}}),new em(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Aw()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Co(),this.Je=Op(),this.He=Op(),this.Ye=new an(mt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(C4(o))if(r===0){const l=new Fe(o.path);this.et(n,l,ur.newNoDocument(l,Je.min()))}else It(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const c=this.ut(e),d=c?this.ct(c,e,l):1;if(d!==0){this.it(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let l,c;try{l=Ws(r).toUint8Array()}catch(d){if(d instanceof gk)return dh("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Z2(l,i,o)}catch(d){return dh(d instanceof df?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const c=this.ot(l);if(c){if(o.current&&C4(c.target)){const d=new Fe(c.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,ur.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}});let r=pt();this.He.forEach((o,l)=>{let c=!0;l.forEachWhile(d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const i=new v1(e,n,this.Ye,this.je,r);return this.je=Co(),this.Je=Op(),this.He=Op(),this.Ye=new an(mt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Mw,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ln(mt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ln(mt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mw),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Op(){return new an(Fe.comparator)}function Aw(){return new an(Fe.comparator)}const WN={asc:"ASCENDING",desc:"DESCENDING"},XN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YN={and:"AND",or:"OR"};class QN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function A4(t,e){return t.useProto3Json||d1(e)?e:{value:e}}function Mg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JN(t,e){return Mg(t,e.toTimestamp())}function Ma(t){return It(!!t,49232),Je.fromTimestamp(function(n){const r=Gs(n);return new Zt(r.seconds,r.nanos)}(t))}function e3(t,e){return T4(t,e).canonicalString()}function T4(t,e){const n=function(i){return new Jt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Gk(t){const e=Jt.fromString(t);return It(Jk(e),10190,{key:e.toString()}),e}function D4(t,e){return e3(t.databaseId,e.path)}function rv(t,e){const n=Gk(e);if(n.get(1)!==t.databaseId.projectId)throw new Ne(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ne(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Fe(Xk(n))}function Wk(t,e){return e3(t.databaseId,e)}function ZN(t){const e=Gk(t);return e.length===4?Jt.emptyPath():Xk(e)}function L4(t){return new Jt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Xk(t){return It(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Tw(t,e,n){return{name:D4(t,e),fields:n.value.mapValue.fields}}function eP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ge(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,p){return f.useProto3Json?(It(p===void 0||typeof p=="string",58123),er.fromBase64String(p||"")):(It(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),er.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(f){const p=f.code===void 0?ye.UNKNOWN:$k(f.code);return new Ne(p,f.message||"")}(l);n=new jk(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=rv(t,r.document.name),o=Ma(r.document.updateTime),l=r.document.createTime?Ma(r.document.createTime):Je.min(),c=new ki({mapValue:{fields:r.document.fields}}),d=ur.newFoundDocument(i,o,l,c),f=r.targetIds||[],p=r.removedTargetIds||[];n=new Q0(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=rv(t,r.document),o=r.readTime?Ma(r.readTime):Je.min(),l=ur.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Q0([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=rv(t,r.document),o=r.removedTargetIds||[];n=new Q0([],o,i,null)}else{if(!("filter"in e))return Ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new $N(i,o),c=r.targetId;n=new qk(c,l)}}return n}function tP(t,e){let n;if(e instanceof Zf)n={update:Tw(t,e.key,e.value)};else if(e instanceof Kk)n={delete:D4(t,e.key)};else if(e instanceof Du)n={update:Tw(t,e.key,e.data),updateMask:cP(e.fieldMask)};else{if(!(e instanceof FN))return Ge(16599,{Vt:e.type});n={verify:D4(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof kg)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Nf)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pf)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Cg)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ge(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:JN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ge(27497)}(t,e.precondition)),n}function nP(t,e){return t&&t.length>0?(It(e!==void 0,14353),t.map(n=>function(i,o){let l=i.updateTime?Ma(i.updateTime):Ma(o);return l.isEqual(Je.min())&&(l=Ma(o)),new PN(l,i.transformResults||[])}(n,e))):[]}function rP(t,e){return{documents:[Wk(t,e.path)]}}function iP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Wk(t,i);const o=function(f){if(f.length!==0)return Qk(Ra.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(p=>function(v){return{field:Uc(v.field),direction:sP(v.dir)}}(p))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=A4(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:i}}function aP(t){let e=ZN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){It(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(y){const v=Yk(y);return v instanceof Ra&&Ck(v)?v.getFilters():[v]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(v=>function(S){return new Sg(Kc(S.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(n.orderBy));let c=null;n.limit&&(c=function(y){let v;return v=typeof y=="object"?y.value:y,d1(v)?null:v}(n.limit));let d=null;n.startAt&&(d=function(y){const v=!!y.before,x=y.values||[];return new Eg(x,v)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const v=!y.before,x=y.values||[];return new Eg(x,v)}(n.endAt)),EN(e,i,l,o,c,"F",d,f)}function oP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Yk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kc(n.unaryFilter.field);return Tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Kc(n.unaryFilter.field);return Tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Kc(n.unaryFilter.field);return Tn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Kc(n.unaryFilter.field);return Tn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return Tn.create(Kc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ra.create(n.compositeFilter.filters.map(r=>Yk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}}(n.compositeFilter.op))}(t):Ge(30097,{filter:t})}function sP(t){return WN[t]}function lP(t){return XN[t]}function uP(t){return YN[t]}function Uc(t){return{fieldPath:t.canonicalString()}}function Kc(t){return Qn.fromServerFormat(t.fieldPath)}function Qk(t){return t instanceof Tn?function(n){if(n.op==="=="){if(gw(n.value))return{unaryFilter:{field:Uc(n.field),op:"IS_NAN"}};if(pw(n.value))return{unaryFilter:{field:Uc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gw(n.value))return{unaryFilter:{field:Uc(n.field),op:"IS_NOT_NAN"}};if(pw(n.value))return{unaryFilter:{field:Uc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uc(n.field),op:lP(n.op),value:n.value}}}(t):t instanceof Ra?function(n){const r=n.getFilters().map(i=>Qk(i));return r.length===1?r[0]:{compositeFilter:{op:uP(n.op),filters:r}}}(t):Ge(54877,{filter:t})}function cP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Jk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n,r,i,o=Je.min(),l=Je.min(),c=er.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.yt=e}}function dP(t){const e=aP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?M4(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.Cn=new mP}addToCollectionParentIndex(e,n){return this.Cn.add(n),ge.resolve()}getCollectionParents(e,n){return ge.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ge.resolve()}deleteFieldIndex(e,n){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,n){return ge.resolve()}getDocumentsMatchingTarget(e,n){return ge.resolve(null)}getIndexType(e,n){return ge.resolve(0)}getFieldIndexes(e,n){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,n){return ge.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,n){return ge.resolve(Hs.min())}updateCollectionGroup(e,n,r){return ge.resolve()}updateIndexEntries(e,n){return ge.resolve()}}class mP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ln(Jt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(Jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zk=41943040;class Br{static withCacheSize(e){return new Br(e,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(Zk,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gh(0)}static cr(){return new gh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="LruGarbageCollector",pP=1048576;function Rw([t,e],[n,r]){const i=mt(t,n);return i===0?mt(e,r):i}class gP{constructor(e){this.Ir=e,this.buffer=new Ln(Rw),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Rw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Me(Lw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){kh(n)?Me(Lw,"Ignoring IndexedDB error during garbage collection: ",n):await Sh(n)}await this.Vr(3e5)})}}class bP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ge.resolve(h1.ce);const r=new gP(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(Dw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dw):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,l,c,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,l=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,n))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),Vc()<=ft.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}function vP(t,e){return new bP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.changes=new Tu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ge.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_f(r.mutation,i,ji.empty(),Zt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pt()){const i=iu();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let l=hf();return o.forEach((c,d)=>{l=l.insert(c,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=iu();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pt()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{n.set(l,c)})})}computeViews(e,n,r,i){let o=Co();const l=vf(),c=function(){return vf()}();return n.forEach((d,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof Du)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),_f(p.mutation,f,p.mutation.getFieldMask(),Zt.now())):l.set(f.key,ji.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,p)=>l.set(f,p)),n.forEach((f,p)=>c.set(f,new xP(p,l.get(f)??null))),c))}recalculateAndSaveOverlays(e,n){const r=vf();let i=new an((l,c)=>l-c),o=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const c of l)c.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let p=r.get(d)||ji.empty();p=c.applyToLocalView(f,p),r.set(d,p);const y=(i.get(c.batchId)||pt()).add(d);i=i.insert(c.batchId,y)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,p=d.value,y=Bk();p.forEach(v=>{if(!o.has(v)){const x=Fk(n.get(v),r.get(v));x!==null&&y.set(v,x),o=o.add(v)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ge.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(l){return Fe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):SN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ge.resolve(iu());let c=Rf,d=o;return l.next(f=>ge.forEach(f,(p,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(p)?ge.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{d=d.insert(p,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,pt())).next(p=>({batchId:c,changes:Ik(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Fe(n)).next(r=>{let i=hf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let l=hf();return this.indexManager.getCollectionParents(e,o).next(c=>ge.forEach(c,d=>{const f=function(y,v){return new m1(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(p=>{p.forEach((y,v)=>{l=l.insert(y,v)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(l=>{o.forEach((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,ur.newInvalidDocument(p)))});let c=hf();return l.forEach((d,f)=>{const p=o.get(d);p!==void 0&&_f(p.mutation,f,ji.empty(),Zt.now()),g1(n,f)&&(c=c.insert(d,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ge.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ma(i.createTime)}}(n)),ge.resolve()}getNamedQuery(e,n){return ge.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:dP(i.bundledQuery),readTime:Ma(i.readTime)}}(n)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.overlays=new an(Fe.comparator),this.qr=new Map}getOverlay(e,n){return ge.resolve(this.overlays.get(n))}getOverlays(e,n){const r=iu();return ge.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),ge.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),ge.resolve()}getOverlaysForCollection(e,n,r){const i=iu(),o=n.length+1,l=new Fe(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new an((f,p)=>f-p);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=o.get(f.largestBatchId);p===null&&(p=iu(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=iu(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,p)=>c.set(f,p)),!(c.size()>=i)););return ge.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new KN(n,r));let o=this.qr.get(n);o===void 0&&(o=pt(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.sessionToken=er.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(){this.Qr=new Ln(Fn.$r),this.Ur=new Ln(Fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Fn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Fn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Fe(new Jt([])),r=new Fn(n,e),i=new Fn(n,e+1),o=[];return this.Ur.forEachInRange([r,i],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Fe(new Jt([])),r=new Fn(n,e),i=new Fn(n,e+1);let o=pt();return this.Ur.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Fn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Fe.comparator(e.key,n.key)||mt(e.Yr,n.Yr)}static Kr(e,n){return mt(e.Yr,n.Yr)||Fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ln(Fn.$r)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new UN(o,n,r,i);this.mutationQueue.push(l);for(const c of i)this.Zr=this.Zr.add(new Fn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ge.resolve(l)}lookupMutationBatch(e,n){return ge.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return ge.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?j2:this.tr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fn(n,0),i=new Fn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],l=>{const c=this.Xr(l.Yr);o.push(c)}),ge.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ln(mt);return n.forEach(i=>{const o=new Fn(i,0),l=new Fn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],c=>{r=r.add(c.Yr)})}),ge.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Fe.isDocumentKey(o)||(o=o.child(""));const l=new Fn(new Fe(o),0);let c=new Ln(mt);return this.Zr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(d.Yr)),!0)},l),ge.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){It(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ge.forEach(n.mutations,i=>{const o=new Fn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Fn(n,0),i=this.Zr.firstAfterOrEqual(r);return ge.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.ri=e,this.docs=function(){return new an(Fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ge.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(n))}getEntries(e,n){let r=Co();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ur.newInvalidDocument(i))}),ge.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Co();const l=n.path,c=new Fe(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||tN(eN(p),r)<=0||(i.has(p.key)||g1(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ge(9500)}ii(e,n){return ge.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AP(this)}getSize(e){return ge.resolve(this.size)}}class AP extends _P{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ge.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.persistence=e,this.si=new Tu(n=>W2(n),X2),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.oi=0,this._i=new t3,this.targetCount=0,this.ai=gh.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ge.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new gh(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ge.resolve()}updateTargetData(e,n){return this.Pr(n),ge.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach((l,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),ge.waitFor(o).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ge.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ge.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ge.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ge.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ge.resolve(r)}containsKey(e,n){return ge.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.ui={},this.overlays={},this.ci=new h1(0),this.li=!1,this.li=!0,this.hi=new kP,this.referenceDelegate=e(this),this.Pi=new TP(this),this.indexManager=new fP,this.remoteDocumentCache=function(i){return new MP(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new hP(n),this.Ii=new EP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new CP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Me("MemoryPersistence","Starting transaction:",e);const i=new DP(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return ge.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class DP extends rN{constructor(e){super(),this.currentSequenceNumber=e}}class n3{constructor(e){this.persistence=e,this.Ri=new t3,this.Vi=null}static mi(e){return new n3(e)}get fi(){if(this.Vi)return this.Vi;throw Ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ge.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ge.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.fi,r=>{const i=Fe.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Je.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ge.or([()=>ge.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ag{constructor(e,n){this.persistence=e,this.pi=new Tu(r=>oN(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=vP(this,n)}static mi(e,n){return new Ag(e,n)}Ei(){}di(e){return ge.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return ge.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?ge.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,l=>this.br(e,l,n).next(c=>{c||(r++,o.removeEntry(l,Je.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ge.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ge.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ge.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=W0(e.data.value)),n}br(e,n,r){return ge.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return ge.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=pt(),i=pt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new r3(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return kI()?8:iN(cr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new LP;return this.Ss(e,n,l).next(c=>{if(o.result=c,this.Vs)return this.bs(e,n,l,c.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Vc()<=ft.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",Fc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ge.resolve()):(Vc()<=ft.DEBUG&&Me("QueryEngine","Query:",Fc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Vc()<=ft.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",Fc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ca(n))):ge.resolve())}ys(e,n){if(_w(n))return ge.resolve(null);let r=Ca(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=M4(n,null,"F"),r=Ca(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=pt(...o);return this.ps.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.Ds(n,c);return this.Cs(n,f,l,d.readTime)?this.ys(e,M4(n,null,"F")):this.vs(e,f,n,d)}))})))}ws(e,n,r,i){return _w(n)||i.isEqual(Je.min())?ge.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(n,o);return this.Cs(n,l,r,i)?ge.resolve(null):(Vc()<=ft.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fc(n)),this.vs(e,l,n,ZO(i,Rf)).next(c=>c))})}Ds(e,n){let r=new Ln(Lk(e));return n.forEach((i,o)=>{g1(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Vc()<=ft.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Fc(n)),this.ps.getDocumentsMatchingQuery(e,n,Hs.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3="LocalStore",IP=3e8;class BP{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new an(mt),this.xs=new Tu(o=>W2(o),X2),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function OP(t,e,n,r){return new BP(t,e,n,r)}async function tC(t,e){const n=tt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let d=pt();for(const f of i){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of o){c.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return n.localDocuments.getDocuments(r,d).next(f=>({Ls:f,removedBatchIds:l,addedBatchIds:c}))})})}function NP(t,e){const n=tt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,d,f,p){const y=f.batch,v=y.keys();let x=ge.resolve();return v.forEach(S=>{x=x.next(()=>p.getEntry(d,S)).next(R=>{const I=f.docVersions.get(S);It(I!==null,48541),R.version.compareTo(I)<0&&(y.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),p.addEntry(R)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=pt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function nC(t){const e=tt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function PP(t,e){const n=tt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach((p,y)=>{const v=i.get(y);if(!v)return;c.push(n.Pi.removeMatchingKeys(o,p.removedDocuments,y).next(()=>n.Pi.addMatchingKeys(o,p.addedDocuments,y)));let x=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?x=x.withResumeToken(er.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),i=i.insert(y,x),function(R,I,L){return R.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=IP?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(v,x,p)&&c.push(n.Pi.updateTargetData(o,x))});let d=Co(),f=pt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(zP(o,l,e.documentUpdates).next(p=>{d=p.ks,f=p.qs})),!r.isEqual(Je.min())){const p=n.Pi.getLastRemoteSnapshotVersion(o).next(y=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(p)}return ge.waitFor(c).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.Ms=i,o))}function zP(t,e,n){let r=pt(),i=pt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Co();return n.forEach((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Je.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):Me(i3,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{ks:l,qs:i}})}function VP(t,e){const n=tt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=j2),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FP(t,e){const n=tt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,ge.resolve(i)):n.Pi.allocateTargetId(r).next(l=>(i=new Os(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function R4(t,e,n){const r=tt(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!kh(l))throw l;Me(i3,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Iw(t,e,n){const r=tt(t);let i=Je.min(),o=pt();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,f,p){const y=tt(d),v=y.xs.get(p);return v!==void 0?ge.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,p)}(r,l,Ca(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,c.targetId).next(d=>{o=d})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,n?i:Je.min(),n?o:pt())).next(c=>(UP(r,CN(e),c),{documents:c,Qs:o})))}function UP(t,e,n){let r=t.Os.get(e)||Je.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class Bw{constructor(){this.activeTargetIds=RN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KP{constructor(){this.Mo=new Bw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="ConnectivityMonitor";class Nw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Me(Ow,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Me(Ow,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Np=null;function I4(){return Np===null?Np=function(){return 268435456+Math.round(2147483648*Math.random())}():Np++,"0x"+Np.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="RestConnection",qP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===xg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const l=I4(),c=this.zo(e,n.toUriEncodedString());Me(iv,`Sending RPC '${e}' ${l}:`,c,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,i,o);const{host:f}=new URL(c),p=nl(f);return this.Jo(e,c,d,r,p).then(y=>(Me(iv,`Received RPC '${e}' ${l}: `,y),y),y=>{throw dh(iv,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y})}Ho(e,n,r,i,o,l){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const r=qP[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="WebChannelConnection";class GP extends jP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const l=I4();return new Promise((c,d)=>{const f=new ak;f.setWithCredentials(!0),f.listenOnce(ok.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case G0.NO_ERROR:const y=f.getResponseJson();Me(ir,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case G0.TIMEOUT:Me(ir,`RPC '${e}' ${l} timed out`),d(new Ne(ye.DEADLINE_EXCEEDED,"Request time out"));break;case G0.HTTP_ERROR:const v=f.getStatus();if(Me(ir,`RPC '${e}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const S=x?.error;if(S&&S.status&&S.message){const R=function(L){const j=L.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(j)>=0?j:ye.UNKNOWN}(S.status);d(new Ne(R,S.message))}else d(new Ne(ye.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ne(ye.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Me(ir,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(i);Me(ir,`RPC '${e}' ${l} sending request:`,i),f.send(n,"POST",p,r,15)})}T_(e,n,r){const i=I4(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=uk(),c=lk(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const p=o.join("");Me(ir,`Creating RPC '${e}' stream ${i}: ${p}`,d);const y=l.createWebChannel(p,d);this.I_(y);let v=!1,x=!1;const S=new HP({Yo:I=>{x?Me(ir,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(v||(Me(ir,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),Me(ir,`RPC '${e}' stream ${i} sending:`,I),y.send(I))},Zo:()=>y.close()}),R=(I,L,j)=>{I.listen(L,z=>{try{j(z)}catch(G){setTimeout(()=>{throw G},0)}})};return R(y,cf.EventType.OPEN,()=>{x||(Me(ir,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),R(y,cf.EventType.CLOSE,()=>{x||(x=!0,Me(ir,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(y))}),R(y,cf.EventType.ERROR,I=>{x||(x=!0,dh(ir,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),S.a_(new Ne(ye.UNAVAILABLE,"The operation could not be completed")))}),R(y,cf.EventType.MESSAGE,I=>{if(!x){const L=I.data[0];It(!!L,16349);const j=L,z=j?.error||j[0]?.error;if(z){Me(ir,`RPC '${e}' stream ${i} received error:`,z);const G=z.status;let ie=function(A){const C=_n[A];if(C!==void 0)return $k(C)}(G),B=z.message;ie===void 0&&(ie=ye.INTERNAL,B="Unknown error status: "+G+" with message "+z.message),x=!0,S.a_(new Ne(ie,B)),y.close()}else Me(ir,`RPC '${e}' stream ${i} received:`,L),S.u_(L)}}),R(c,sk.STAT_EVENT,I=>{I.stat===x4.PROXY?Me(ir,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===x4.NOPROXY&&Me(ir,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function av(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t){return new QN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="PersistentStream";class iC{constructor(e,n,r,i,o,l,c,d){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(ko(n.toString()),ko("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Ne(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Me(Pw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Me(Pw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WP extends iC{constructor(e,n,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=eP(this.serializer,e),r=function(o){if(!("targetChange"in o))return Je.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Je.min():l.readTime?Ma(l.readTime):Je.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=L4(this.serializer),n.addTarget=function(o,l){let c;const d=l.target;if(c=C4(d)?{documents:rP(o,d)}:{query:iP(o,d).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Hk(o,l.resumeToken);const f=A4(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(Je.min())>0){c.readTime=Mg(o,l.snapshotVersion.toTimestamp());const f=A4(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=oP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=L4(this.serializer),n.removeTarget=e,this.q_(n)}}class XP extends iC{constructor(e,n,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=nP(e.writeResults,e.commitTime),r=Ma(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=L4(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>tP(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{}class QP extends YP{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ne(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,T4(n,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(ye.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Ho(e,T4(n,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ne(ye.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class JP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ko(n),this.aa=!1):Me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u="RemoteStore";class ZP{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{Lu(this)&&(Me(_u,"Restarting streams for network reachability change."),await async function(d){const f=tt(d);f.Ea.add(4),await tm(f),f.Ra.set("Unknown"),f.Ea.delete(4),await x1(f)}(this))})}),this.Ra=new JP(r,i)}}async function x1(t){if(Lu(t))for(const e of t.da)await e(!0)}async function tm(t){for(const e of t.da)await e(!1)}function aC(t,e){const n=tt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),l3(n)?s3(n):Ch(n).O_()&&o3(n,e))}function a3(t,e){const n=tt(t),r=Ch(n);n.Ia.delete(e),r.O_()&&oC(n,e),n.Ia.size===0&&(r.O_()?r.L_():Lu(n)&&n.Ra.set("Unknown"))}function o3(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ch(t).Y_(e)}function oC(t,e){t.Va.Ue(e),Ch(t).Z_(e)}function s3(t){t.Va=new GN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ch(t).start(),t.Ra.ua()}function l3(t){return Lu(t)&&!Ch(t).x_()&&t.Ia.size>0}function Lu(t){return tt(t).Ea.size===0}function sC(t){t.Va=void 0}async function ez(t){t.Ra.set("Online")}async function tz(t){t.Ia.forEach((e,n)=>{o3(t,e)})}async function nz(t,e){sC(t),l3(t)?(t.Ra.ha(e),s3(t)):t.Ra.set("Unknown")}async function rz(t,e,n){if(t.Ra.set("Online"),e instanceof jk&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ia.delete(c),i.Va.removeTarget(c))}(t,e)}catch(r){Me(_u,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tg(t,r)}else if(e instanceof Q0?t.Va.Ze(e):e instanceof qk?t.Va.st(e):t.Va.tt(e),!n.isEqual(Je.min()))try{const r=await nC(t.localStore);n.compareTo(r)>=0&&await function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.Ia.get(f);p&&o.Ia.set(f,p.withResumeToken(d.resumeToken,l))}}),c.targetMismatches.forEach((d,f)=>{const p=o.Ia.get(d);if(!p)return;o.Ia.set(d,p.withResumeToken(er.EMPTY_BYTE_STRING,p.snapshotVersion)),oC(o,d);const y=new Os(p.target,d,f,p.sequenceNumber);o3(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Me(_u,"Failed to raise snapshot:",r),await Tg(t,r)}}async function Tg(t,e,n){if(!kh(e))throw e;t.Ea.add(1),await tm(t),t.Ra.set("Offline"),n||(n=()=>nC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Me(_u,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await x1(t)})}function lC(t,e){return e().catch(n=>Tg(t,n,e))}async function w1(t){const e=tt(t),n=Ys(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j2;for(;iz(e);)try{const i=await VP(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,az(e,i)}catch(i){await Tg(e,i)}uC(e)&&cC(e)}function iz(t){return Lu(t)&&t.Ta.length<10}function az(t,e){t.Ta.push(e);const n=Ys(t);n.O_()&&n.X_&&n.ea(e.mutations)}function uC(t){return Lu(t)&&!Ys(t).x_()&&t.Ta.length>0}function cC(t){Ys(t).start()}async function oz(t){Ys(t).ra()}async function sz(t){const e=Ys(t);for(const n of t.Ta)e.ea(n.mutations)}async function lz(t,e,n){const r=t.Ta.shift(),i=J2.from(r,e,n);await lC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await w1(t)}async function uz(t,e){e&&Ys(t).X_&&await async function(r,i){if(function(l){return qN(l)&&l!==ye.ABORTED}(i.code)){const o=r.Ta.shift();Ys(r).B_(),await lC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await w1(r)}}(t,e),uC(t)&&cC(t)}async function zw(t,e){const n=tt(t);n.asyncQueue.verifyOperationInProgress(),Me(_u,"RemoteStore received new credentials");const r=Lu(n);n.Ea.add(3),await tm(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await x1(n)}async function cz(t,e){const n=tt(t);e?(n.Ea.delete(2),await x1(n)):e||(n.Ea.add(2),await tm(n),n.Ra.set("Unknown"))}function Ch(t){return t.ma||(t.ma=function(n,r,i){const o=tt(n);return o.sa(),new WP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:ez.bind(null,t),t_:tz.bind(null,t),r_:nz.bind(null,t),H_:rz.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),l3(t)?s3(t):t.Ra.set("Unknown")):(await t.ma.stop(),sC(t))})),t.ma}function Ys(t){return t.fa||(t.fa=function(n,r,i){const o=tt(n);return o.sa(),new XP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:oz.bind(null,t),r_:uz.bind(null,t),ta:sz.bind(null,t),na:lz.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await w1(t)):(await t.fa.stop(),t.Ta.length>0&&(Me(_u,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new xo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const l=Date.now()+r,c=new u3(e,n,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function c3(t,e){if(ko("AsyncQueue",`${e}: ${t}`),kh(t))return new Ne(ye.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{static emptySet(e){return new eh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Fe.comparator(n.key,r.key):(n,r)=>Fe.comparator(n.key,r.key),this.keyedMap=hf(),this.sortedSet=new an(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new eh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.ga=new an(Fe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class yh{constructor(e,n,r,i,o,l,c,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const l=[];return n.forEach(c=>{l.push({type:0,doc:c})}),new yh(e,n,eh.emptySet(n),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&p1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class dz{constructor(){this.queries=Fw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=tt(n),o=i.queries;i.queries=Fw(),o.forEach((l,c)=>{for(const d of c.Sa)d.onError(r)})})(this,new Ne(ye.ABORTED,"Firestore shutting down"))}}function Fw(){return new Tu(t=>Dk(t),p1)}async function hC(t,e){const n=tt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new hz,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const c=c3(l,`Initialization of query '${Fc(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&h3(n)}async function dC(t,e){const n=tt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fz(t,e){const n=tt(t);let r=!1;for(const i of e){const o=i.query,l=n.queries.get(o);if(l){for(const c of l.Sa)c.Fa(i)&&(r=!0);l.wa=i}}r&&h3(n)}function mz(t,e,n){const r=tt(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function h3(t){t.Ca.forEach(e=>{e.next()})}var B4,Uw;(Uw=B4||(B4={})).Ma="default",Uw.Cache="cache";class fC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new yh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==B4.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.key=e}}class pC{constructor(e){this.key=e}}class pz{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pt(),this.mutatedKeys=pt(),this.eu=Lk(e),this.tu=new eh(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Vw,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,y)=>{const v=i.get(p),x=g1(this.query,y)?y:null,S=!!v&&this.mutatedKeys.has(v.key),R=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let I=!1;v&&x?v.data.isEqual(x.data)?S!==R&&(r.track({type:3,doc:x}),I=!0):this.su(v,x)||(r.track({type:2,doc:x}),I=!0,(d&&this.eu(x,d)>0||f&&this.eu(x,f)<0)&&(c=!0)):!v&&x?(r.track({type:0,doc:x}),I=!0):v&&!x&&(r.track({type:1,doc:v}),I=!0,(d||f)&&(c=!0)),I&&(x?(l=l.add(x),o=R?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{tu:l,iu:r,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((p,y)=>function(x,S){const R=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Rt:I})}};return R(x)-R(S)}(p.type,y.type)||this.eu(p.doc,y.doc)),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],d=this.Xa.size===0&&this.current&&!i?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new yh(this.query,e.tu,o,l,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new pC(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new mC(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=pt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const d3="SyncEngine";class gz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yz{constructor(e){this.key=e,this.hu=!1}}class bz{constructor(e,n,r,i,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Tu(c=>Dk(c),p1),this.Iu=new Map,this.Eu=new Set,this.du=new an(Fe.comparator),this.Au=new Map,this.Ru=new t3,this.Vu={},this.mu=new Map,this.fu=gh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vz(t,e,n=!0){const r=xC(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await gC(r,e,n,!0),i}async function _z(t,e){const n=xC(t);await gC(n,e,!0,!1)}async function gC(t,e,n,r){const i=await FP(t.localStore,Ca(e)),o=i.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await xz(t,e,o,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&aC(t.remoteStore,i),c}async function xz(t,e,n,r,i){t.pu=(y,v,x)=>async function(R,I,L,j){let z=I.view.ru(L);z.Cs&&(z=await Iw(R.localStore,I.query,!1).then(({documents:M})=>I.view.ru(M,z)));const G=j&&j.targetChanges.get(I.targetId),ie=j&&j.targetMismatches.get(I.targetId)!=null,B=I.view.applyChanges(z,R.isPrimaryClient,G,ie);return $w(R,I.targetId,B.au),B.snapshot}(t,y,v,x);const o=await Iw(t.localStore,e,!0),l=new pz(e,o.Qs),c=l.ru(o.documents),d=em.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=l.applyChanges(c,t.isPrimaryClient,d);$w(t,n,f.au);const p=new gz(e,n,l);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function wz(t,e,n){const r=tt(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(l=>!p1(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await R4(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&a3(r.remoteStore,i.targetId),O4(r,i.targetId)}).catch(Sh)):(O4(r,i.targetId),await R4(r.localStore,i.targetId,!0))}async function Ez(t,e){const n=tt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),a3(n.remoteStore,r.targetId))}async function Sz(t,e,n){const r=Lz(t);try{const i=await function(l,c){const d=tt(l),f=Zt.now(),p=c.reduce((x,S)=>x.add(S.key),pt());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let S=Co(),R=pt();return d.Ns.getEntries(x,p).next(I=>{S=I,S.forEach((L,j)=>{j.isValidDocument()||(R=R.add(L))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,S)).next(I=>{y=I;const L=[];for(const j of c){const z=VN(j,y.get(j.key).overlayedDocument);z!=null&&L.push(new Du(j.key,z,Ek(z.value.mapValue),wo.exists(!0)))}return d.mutationQueue.addMutationBatch(x,f,L,c)}).next(I=>{v=I;const L=I.applyToLocalDocumentSet(y,R);return d.documentOverlayCache.saveOverlays(x,I.batchId,L)})}).then(()=>({batchId:v.batchId,changes:Ik(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new an(mt)),f=f.insert(c,d),l.Vu[l.currentUser.toKey()]=f}(r,i.batchId,n),await nm(r,i.changes),await w1(r.remoteStore)}catch(i){const o=c3(i,"Failed to persist write");n.reject(o)}}async function yC(t,e){const n=tt(t);try{const r=await PP(n.localStore,e);e.targetChanges.forEach((i,o)=>{const l=n.Au.get(o);l&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?It(l.hu,14607):i.removedDocuments.size>0&&(It(l.hu,42227),l.hu=!1))}),await nm(n,r,e)}catch(r){await Sh(r)}}function Kw(t,e,n){const r=tt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,l)=>{const c=l.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const d=tt(l);d.onlineState=c;let f=!1;d.queries.forEach((p,y)=>{for(const v of y.Sa)v.va(c)&&(f=!0)}),f&&h3(d)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kz(t,e,n){const r=tt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new an(Fe.comparator);l=l.insert(o,ur.newNoDocument(o,Je.min()));const c=pt().add(o),d=new v1(Je.min(),new Map,new an(mt),l,c);await yC(r,d),r.du=r.du.remove(o),r.Au.delete(e),f3(r)}else await R4(r.localStore,e,!1).then(()=>O4(r,e,n)).catch(Sh)}async function Cz(t,e){const n=tt(t),r=e.batch.batchId;try{const i=await NP(n.localStore,e);vC(n,r,null),bC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nm(n,i)}catch(i){await Sh(i)}}async function Mz(t,e,n){const r=tt(t);try{const i=await function(l,c){const d=tt(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return d.mutationQueue.lookupMutationBatch(f,c).next(y=>(It(y!==null,37113),p=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>d.localDocuments.getDocuments(f,p))})}(r.localStore,e);vC(r,e,n),bC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nm(r,i)}catch(i){await Sh(i)}}function bC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function vC(t,e,n){const r=tt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function O4(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||_C(t,r)})}function _C(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(a3(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),f3(t))}function $w(t,e,n){for(const r of n)r instanceof mC?(t.Ru.addReference(r.key,e),Az(t,r)):r instanceof pC?(Me(d3,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||_C(t,r.key)):Ge(19791,{wu:r})}function Az(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Me(d3,"New document in limbo: "+n),t.Eu.add(r),f3(t))}function f3(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Fe(Jt.fromString(e)),r=t.fu.next();t.Au.set(r,new yz(n)),t.du=t.du.insert(n,r),aC(t.remoteStore,new Os(Ca(Y2(n.path)),r,"TargetPurposeLimboResolution",h1.ce))}}async function nm(t,e,n){const r=tt(t),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((c,d)=>{l.push(r.pu(d,e,n).then(f=>{if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:n?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(f){i.push(f);const p=r3.As(d.targetId,f);o.push(p)}}))}),await Promise.all(l),r.Pu.H_(i),await async function(d,f){const p=tt(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ge.forEach(f,v=>ge.forEach(v.Es,x=>p.persistence.referenceDelegate.addReference(y,v.targetId,x)).next(()=>ge.forEach(v.ds,x=>p.persistence.referenceDelegate.removeReference(y,v.targetId,x)))))}catch(y){if(!kh(y))throw y;Me(i3,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const x=p.Ms.get(v),S=x.snapshotVersion,R=x.withLastLimboFreeSnapshotVersion(S);p.Ms=p.Ms.insert(v,R)}}}(r.localStore,o))}async function Tz(t,e){const n=tt(t);if(!n.currentUser.isEqual(e)){Me(d3,"User change. New user:",e.toKey());const r=await tC(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(c=>{c.forEach(d=>{d.reject(new Ne(ye.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nm(n,r.Ls)}}function Dz(t,e){const n=tt(t),r=n.Au.get(e);if(r&&r.hu)return pt().add(r.key);{let i=pt();const o=n.Iu.get(e);if(!o)return i;for(const l of o){const c=n.Tu.get(l);i=i.unionWith(c.view.nu)}return i}}function xC(t){const e=tt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kz.bind(null,e),e.Pu.H_=fz.bind(null,e.eventManager),e.Pu.yu=mz.bind(null,e.eventManager),e}function Lz(t){const e=tt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mz.bind(null,e),e}class Dg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_1(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return OP(this.persistence,new RP,e.initialUser,this.serializer)}Cu(e){return new eC(n3.mi,this.serializer)}Du(e){return new KP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dg.provider={build:()=>new Dg};class Rz extends Dg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){It(this.persistence.referenceDelegate instanceof Ag,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Br.withCacheSize(this.cacheSizeBytes):Br.DEFAULT;return new eC(r=>Ag.mi(r,n),this.serializer)}}class N4{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tz.bind(null,this.syncEngine),await cz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dz}()}createDatastore(e){const n=_1(e.databaseInfo.databaseId),r=function(o){return new GP(o)}(e.databaseInfo);return function(o,l,c,d){return new QP(o,l,c,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,l,c){return new ZP(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Kw(this.syncEngine,n,0),function(){return Nw.v()?new Nw:new $P}())}createSyncEngine(e,n){return function(i,o,l,c,d,f,p){const y=new bz(i,o,l,c,d,f);return p&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const r=tt(n);Me(_u,"RemoteStore shutting down."),r.Ea.add(5),await tm(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}N4.provider={build:()=>new N4};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ko("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="FirestoreClient";class Iz{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=lr.UNAUTHENTICATED,this.clientId=$2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{Me(Qs,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(Me(Qs,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=c3(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ov(t,e){t.asyncQueue.verifyOperationInProgress(),Me(Qs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await tC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Bz(t);Me(Qs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zw(e.remoteStore,i)),t._onlineComponents=e}async function Bz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Me(Qs,"Using user provided OfflineComponentProvider");try{await ov(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ye.FAILED_PRECONDITION||i.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;dh("Error using user provided cache. Falling back to memory cache: "+n),await ov(t,new Dg)}}else Me(Qs,"Using default OfflineComponentProvider"),await ov(t,new Rz(void 0));return t._offlineComponents}async function EC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Me(Qs,"Using user provided OnlineComponentProvider"),await qw(t,t._uninitializedComponentsProvider._online)):(Me(Qs,"Using default OnlineComponentProvider"),await qw(t,new N4))),t._onlineComponents}function Oz(t){return EC(t).then(e=>e.syncEngine)}async function SC(t){const e=await EC(t),n=e.eventManager;return n.onListen=vz.bind(null,e.syncEngine),n.onUnlisten=wz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_z.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ez.bind(null,e.syncEngine),n}function Nz(t,e,n={}){const r=new xo;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,c,d,f){const p=new wC({next:v=>{p.Nu(),l.enqueueAndForget(()=>dC(o,y));const x=v.docs.has(c);!x&&v.fromCache?f.reject(new Ne(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&v.fromCache&&d&&d.source==="server"?f.reject(new Ne(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new fC(Y2(c.path),p,{includeMetadataChanges:!0,qa:!0});return hC(o,y)}(await SC(t),t.asyncQueue,e,n,r)),r.promise}function Pz(t,e,n={}){const r=new xo;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,c,d,f){const p=new wC({next:v=>{p.Nu(),l.enqueueAndForget(()=>dC(o,y)),v.fromCache&&d.source==="server"?f.reject(new Ne(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new fC(c,p,{includeMetadataChanges:!0,qa:!0});return hC(o,y)}(await SC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="firestore.googleapis.com",Hw=!0;class Gw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CC,this.ssl=Hw}else this.host=e.host,this.ssl=e.ssl??Hw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Zk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pP)throw new Ne(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ne(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ne(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ne(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E1{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new KO;switch(r.type){case"firstParty":return new HO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jw.get(n);r&&(Me("ComponentProvider","Removing Datastore"),jw.delete(n),r.terminate())}(this),Promise.resolve()}}function zz(t,e,n,r={}){t=vu(t,E1);const i=nl(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(N2(`https://${c}`),P2("Firestore",!0)),o.host!==CC&&o.host!==c&&dh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:c,ssl:i,emulatorOptions:r};if(!pu(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=lr.MOCK_USER;else{f=FS(r.mockUserToken,t._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ne(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new lr(y)}t._authCredentials=new $O(new hk(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new S1(this.firestore,e,this._query)}}class Dn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}toJSON(){return{type:Dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Jf(n,Dn._jsonSchema))return new Dn(e,r||null,new Fe(Jt.fromString(n.referencePath)))}}Dn._jsonSchemaVersion="firestore/documentReference/1.0",Dn._jsonSchema={type:wn("string",Dn._jsonSchemaVersion),referencePath:wn("string")};class Us extends S1{constructor(e,n,r){super(e,n,Y2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new Fe(e))}withConverter(e){return new Us(this.firestore,e,this._path)}}function Vz(t,e,...n){if(t=hr(t),dk("collection","path",e),t instanceof E1){const r=Jt.fromString(e,...n);return sw(r),new Us(t,null,r)}{if(!(t instanceof Dn||t instanceof Us))throw new Ne(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Jt.fromString(e,...n));return sw(r),new Us(t.firestore,null,r)}}function Ww(t,e,...n){if(t=hr(t),arguments.length===1&&(e=$2.newId()),dk("doc","path",e),t instanceof E1){const r=Jt.fromString(e,...n);return ow(r),new Dn(t,null,new Fe(r))}{if(!(t instanceof Dn||t instanceof Us))throw new Ne(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Jt.fromString(e,...n));return ow(r),new Dn(t.firestore,t instanceof Us?t.converter:null,new Fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="AsyncQueue";class Yw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rC(this,"async_queue_retry"),this._c=()=>{const r=av();r&&Me(Xw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=av();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=av();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!kh(e))throw e;Me(Xw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ko("INTERNAL UNHANDLED ERROR: ",Qw(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=u3.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Ge(47125,{Pc:Qw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Qw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class k1 extends E1{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Yw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yw(e),this._firestoreClient=void 0,await e}}}function Fz(t,e){const n=typeof t=="object"?t:F2(),r=typeof t=="string"?t:xg,i=c1(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=PS("firestore");o&&zz(i,...o)}return i}function m3(t){if(t._terminated)throw new Ne(ye.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Uz(t),t._firestoreClient}function Uz(t){const e=t._freezeSettings(),n=function(i,o,l,c){return new uN(i,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,kC(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Iz(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ci(er.fromBase64String(e))}catch(n){throw new Ne(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ci(er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jf(e,Ci._jsonSchema))return Ci.fromBase64String(e.bytes)}}Ci._jsonSchemaVersion="firestore/bytes/1.0",Ci._jsonSchema={type:wn("string",Ci._jsonSchemaVersion),bytes:wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ne(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ne(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ne(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Aa._jsonSchemaVersion}}static fromJSON(e){if(Jf(e,Aa._jsonSchema))return new Aa(e.latitude,e.longitude)}}Aa._jsonSchemaVersion="firestore/geoPoint/1.0",Aa._jsonSchema={type:wn("string",Aa._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ta._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jf(e,Ta._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ta(e.vectorValues);throw new Ne(ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ta._jsonSchemaVersion="firestore/vectorValue/1.0",Ta._jsonSchema={type:wn("string",Ta._jsonSchemaVersion),vectorValues:wn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=/^__.*__$/;class $z{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Du(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zf(e,this.data,n,this.fieldTransforms)}}function AC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{Ac:t})}}class g3{constructor(e,n,r,i,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new g3({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Lg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(AC(this.Ac)&&Kz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_1(e)}Cc(e,n,r,i=!1){return new g3({Ac:e,methodName:n,Dc:r,path:Qn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jz(t){const e=t._freezeSettings(),n=_1(t._databaseId);return new qz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hz(t,e,n,r,i,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);RC("Data must be an object, but it was:",l,r);const c=DC(r,l);let d,f;if(o.merge)d=new ji(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const y of o.mergeFields){const v=Gz(e,y,n);if(!l.contains(v))throw new Ne(ye.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Xz(p,v)||p.push(v)}d=new ji(p),f=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=l.fieldTransforms;return new $z(new ki(c),d,f)}function TC(t,e){if(LC(t=hr(t)))return RC("Unsupported field value:",e,t),DC(t,e);if(t instanceof MC)return function(r,i){if(!AC(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let d=TC(c,i.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=hr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Zt.fromDate(r);return{timestampValue:Mg(i.serializer,o)}}if(r instanceof Zt){const o=new Zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mg(i.serializer,o)}}if(r instanceof Aa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ci)return{bytesValue:Hk(i.serializer,r._byteString)};if(r instanceof Dn){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:e3(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ta)return function(l,c){return{mapValue:{fields:{[xk]:{stringValue:wk},[wg]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw c.Sc("VectorValues must only contain numeric values.");return Q2(c.serializer,f)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${q2(r)}`)}(t,e)}function DC(t,e){const n={};return pk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Au(t,(r,i)=>{const o=TC(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function LC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Zt||t instanceof Aa||t instanceof Ci||t instanceof Dn||t instanceof MC||t instanceof Ta)}function RC(t,e,n){if(!LC(n)||!fk(n)){const r=q2(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Gz(t,e,n){if((e=hr(e))instanceof p3)return e._internalPath;if(typeof e=="string")return IC(t,e);throw Lg("Field path arguments must be of type string or ",t,!1,void 0,n)}const Wz=new RegExp("[~\\*/\\[\\]]");function IC(t,e,n){if(e.search(Wz)>=0)throw Lg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new p3(...e.split("."))._internalPath}catch{throw Lg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lg(t,e,n,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${i}`),d+=")"),new Ne(ye.INVALID_ARGUMENT,c+t+d)}function Xz(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Yz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(OC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Yz extends BC{data(){return super.data()}}function OC(t,e){return typeof e=="string"?IC(t,e):e instanceof p3?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ne(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jz{convertValue(e,n="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Au(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){const n=e.fields?.[wg].arrayValue?.values?.map(r=>fn(r.doubleValue));return new Ta(n)}convertGeoPoint(e){return new Aa(fn(e.latitude),fn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=f1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(If(e));default:return null}}convertTimestamp(e){const n=Gs(e);return new Zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Jt.fromString(e);It(Jk(r),9688,{name:e});const i=new Bf(r.get(1),r.get(3)),o=new Fe(r.popFirst(5));return i.isEqual(n)||ko(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class ff{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cu extends BC{constructor(e,n,r,i,o,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new J0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(OC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=cu._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}cu._jsonSchemaVersion="firestore/documentSnapshot/1.0",cu._jsonSchema={type:wn("string",cu._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class J0 extends cu{data(e={}){return super.data(e)}}class th{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ff(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new J0(this._firestore,this._userDataWriter,r.key,r,new ff(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ne(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const d=new J0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ff(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const d=new J0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ff(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:eV(c.type),doc:d,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=th._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$2.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t){t=vu(t,Dn);const e=vu(t.firestore,k1);return Nz(m3(e),t._key).then(n=>aV(e,t,n))}th._jsonSchemaVersion="firestore/querySnapshot/1.0",th._jsonSchema={type:wn("string",th._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class NC extends Jz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ci(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,n)}}function nV(t){t=vu(t,S1);const e=vu(t.firestore,k1),n=m3(e),r=new NC(e);return Qz(t._query),Pz(n,t._query).then(i=>new th(e,r,t,i))}function rV(t,e,n){t=vu(t,Dn);const r=vu(t.firestore,k1),i=Zz(t.converter,e);return iV(r,[Hz(jz(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,wo.none())])}function iV(t,e){return function(r,i){const o=new xo;return r.asyncQueue.enqueueAndForget(async()=>Sz(await Oz(r),i,o)),o.promise}(m3(t),e)}function aV(t,e,n){const r=n.docs.get(e._key),i=new NC(t);return new cu(t,i,e._key,r,new ff(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Eh=i})(Mu),gu(new js("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new k1(new qO(r.getProvider("auth-internal")),new GO(l,r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ne(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bf(f.options.projectId,p)}(l,i),l);return o={useFetchStreams:n,...o},c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),ka(nw,rw,e),ka(nw,rw,"esm2020")})();var oV="firebase",sV="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ka(oV,sV,"app");function PC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lV=PC,zC=new Yf("auth","Firebase",PC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=new z2("@firebase/auth");function uV(t,...e){Rg.logLevel<=ft.WARN&&Rg.warn(`Auth (${Mu}): ${t}`,...e)}function Z0(t,...e){Rg.logLevel<=ft.ERROR&&Rg.error(`Auth (${Mu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,...e){throw b3(t,...e)}function Gi(t,...e){return b3(t,...e)}function y3(t,e,n){const r={...lV(),[e]:n};return new Yf("auth","Firebase",r).create(e,{appName:t.name})}function Eo(t){return y3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ti(t,"argument-error"),y3(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b3(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zC.create(t,...e)}function He(t,e,...n){if(!t)throw b3(e,...n)}function vo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Z0(e),new Error(e)}function Mo(t,e){t||vo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(){return typeof self<"u"&&self.location?.href||""}function hV(){return Jw()==="http:"||Jw()==="https:"}function Jw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hV()||wI()||"connection"in navigator)?navigator.onLine:!0}function fV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mo(n>e,"Short delay should be less than long delay!"),this.isMobile=vI()||EI()}get(){return dV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t,e){Mo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gV=new rm(3e4,6e4);function rl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function il(t,e,n,r,i={}){return FC(t,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Qf({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:d,...o};return xI()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&nl(t.emulatorConfig.host)&&(f.credentials="include"),VC.fetch()(await UC(t,t.config.apiHost,n,c),f)})}async function FC(t,e,n){t._canInitEmulator=!1;const r={...mV,...e};try{const i=new bV(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Pp(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pp(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Pp(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Pp(t,"user-disabled",l);const p=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw y3(t,p,f);Ti(t,p)}}catch(i){if(i instanceof Oa)throw i;Ti(t,"network-request-failed",{message:String(i)})}}async function im(t,e,n,r,i={}){const o=await il(t,e,n,r,i);return"mfaPendingCredential"in o&&Ti(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function UC(t,e,n,r){const i=`${e}${n}?${r}`,o=t,l=o.config.emulator?v3(t.config,i):`${t.config.apiScheme}://${i}`;return pV.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function yV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gi(this.auth,"network-request-failed")),gV.get())})}}function Pp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gi(t,e,r);return i.customData._tokenResponse=n,i}function Zw(t){return t!==void 0&&t.enterprise!==void 0}class vV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return yV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _V(t,e){return il(t,"GET","/v2/recaptchaConfig",rl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(t,e){return il(t,"POST","/v1/accounts:delete",e)}async function Ig(t,e){return il(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wV(t,e=!1){const n=hr(t),r=await n.getIdToken(e),i=_3(r);He(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:xf(sv(i.auth_time)),issuedAtTime:xf(sv(i.iat)),expirationTime:xf(sv(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function sv(t){return Number(t)*1e3}function _3(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Z0("JWT malformed, contained fewer than 3 sections"),null;try{const i=OS(n);return i?JSON.parse(i):(Z0("Failed to decode base64 JWT payload"),null)}catch(i){return Z0("Caught error parsing JWT payload as JSON",i?.toString()),null}}function e8(t){const e=_3(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Oa&&EV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function EV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xf(this.lastLoginAt),this.creationTime=xf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bg(t){const e=t.auth,n=await t.getIdToken(),r=await zf(t,Ig(e,{idToken:n}));He(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=i.providerUserInfo?.length?KC(i.providerUserInfo):[],l=CV(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!l?.length,f=c?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new z4(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function kV(t){const e=hr(t);await Bg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(t,e){const n=await FC(t,{},async()=>{const r=Qf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,l=await UC(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:r};return t.emulatorConfig&&nl(t.emulatorConfig.host)&&(d.credentials="include"),VC.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AV(t,e){return il(t,"POST","/v2/accounts:revokeToken",rl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e8(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");const n=e8(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await MV(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,l=new nh;return r&&(He(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(He(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nh,this.toJSON())}_performRefresh(){return vo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hi{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new SV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new z4(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await zf(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wV(this,e)}reload(){return kV(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nr(this.auth.app))return Promise.reject(Eo(this.auth));const e=await this.getIdToken();return await zf(this,xV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,c=n.tenantId??void 0,d=n._redirectEventId??void 0,f=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:x,providerData:S,stsTokenManager:R}=n;He(y&&R,e,"internal-error");const I=nh.fromJSON(this.name,R);He(typeof y=="string",e,"internal-error"),cs(r,e.name),cs(i,e.name),He(typeof v=="boolean",e,"internal-error"),He(typeof x=="boolean",e,"internal-error"),cs(o,e.name),cs(l,e.name),cs(c,e.name),cs(d,e.name),cs(f,e.name),cs(p,e.name);const L=new Hi({uid:y,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:x,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:I,createdAt:f,lastLoginAt:p});return S&&Array.isArray(S)&&(L.providerData=S.map(j=>({...j}))),d&&(L._redirectEventId=d),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new nh;i.updateFromServerResponse(n);const o=new Hi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bg(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];He(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?KC(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,c=new nh;c.updateFromIdToken(r);const d=new Hi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new z4(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=new Map;function _o(t){Mo(t instanceof Function,"Expected a class definition");let e=t8.get(t);return e?(Mo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,t8.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$C.type="NONE";const n8=$C;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t,e,n){return`firebase:${t}:${e}:${n}`}class rh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=eg(this.userKey,i.apiKey,o),this.fullPersistenceKey=eg("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ig(this.auth,{idToken:e}).catch(()=>{});return n?Hi._fromGetAccountInfoResponse(this.auth,n,e):null}return Hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new rh(_o(n8),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||_o(n8);const l=eg(r,e.config.apiKey,e.name);let c=null;for(const f of n)try{const p=await f._get(l);if(p){let y;if(typeof p=="string"){const v=await Ig(e,{idToken:p}).catch(()=>{});if(!v)break;y=await Hi._fromGetAccountInfoResponse(e,v,p)}else y=Hi._fromJSON(e,p);f!==o&&(c=y),o=f;break}}catch{}const d=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new rh(o,e,r):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new rh(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XC(e))return"Blackberry";if(YC(e))return"Webos";if(jC(e))return"Safari";if((e.includes("chrome/")||HC(e))&&!e.includes("edge/"))return"Chrome";if(WC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function qC(t=cr()){return/firefox\//i.test(t)}function jC(t=cr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HC(t=cr()){return/crios\//i.test(t)}function GC(t=cr()){return/iemobile/i.test(t)}function WC(t=cr()){return/android/i.test(t)}function XC(t=cr()){return/blackberry/i.test(t)}function YC(t=cr()){return/webos/i.test(t)}function x3(t=cr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TV(t=cr()){return x3(t)&&!!window.navigator?.standalone}function DV(){return SI()&&document.documentMode===10}function QC(t=cr()){return x3(t)||WC(t)||YC(t)||XC(t)||/windows phone/i.test(t)||GC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t,e=[]){let n;switch(t){case"Browser":n=r8(cr());break;case"Worker":n=`${r8(cr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e={}){return il(t,"GET","/v2/passwordPolicy",rl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=6;class BV{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??IV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i8(this),this.idTokenSubscription=new i8(this),this.beforeStateQueue=new LV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_o(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await rh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ig(this,{idToken:e}),r=await Hi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Nr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nr(this.app))return Promise.reject(Eo(this));const n=e?hr(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nr(this.app)?Promise.reject(Eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nr(this.app)?Promise.reject(Eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_o(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RV(this),n=new BV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await AV(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_o(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await rh.create(this,[_o(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,i);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uV(`Error while retrieving App Check token: ${e.error}`),e?.token}}function al(t){return hr(t)}class i8{constructor(e){this.auth=e,this.observer=null,this.addObserver=RI(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NV(t){C1=t}function ZC(t){return C1.loadJS(t)}function PV(){return C1.recaptchaEnterpriseScript}function zV(){return C1.gapiScript}function VV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class FV{constructor(){this.enterprise=new UV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class UV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const KV="recaptcha-enterprise",eM="NO_RECAPTCHA";class $V{constructor(e){this.type=KV,this.auth=al(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{_V(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new vV(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{c(d)})})}function i(o,l,c){const d=window.grecaptcha;Zw(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(eM)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FV().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!n&&Zw(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=PV();d.length!==0&&(d+=c),ZC(d).then(()=>{i(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function a8(t,e,n,r=!1,i=!1){const o=new $V(t);let l;if(i)l=eM;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function V4(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await a8(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await a8(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t,e){const n=c1(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(pu(o,e??{}))return i;Ti(i,"already-initialized")}return n.initialize({options:e})}function jV(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(_o);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function HV(t,e,n){const r=al(t);He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=tM(e),{host:l,port:c}=GV(e),d=c===null?"":`:${c}`,f={url:`${o}//${l}${d}/`},p=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){He(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),He(pu(f,r.config.emulator)&&pu(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,nl(l)?(N2(`${o}//${l}${d}`),P2("Auth",!0)):WV()}function tM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function GV(t){const e=tM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:o8(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:o8(l)}}}function o8(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vo("not implemented")}_getIdTokenResponse(e){return vo("not implemented")}_linkToIdToken(e,n){return vo("not implemented")}_getReauthenticationResolver(e){return vo("not implemented")}}async function XV(t,e){return il(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(t,e){return im(t,"POST","/v1/accounts:signInWithPassword",rl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QV(t,e){return im(t,"POST","/v1/accounts:signInWithEmailLink",rl(t,e))}async function JV(t,e){return im(t,"POST","/v1/accounts:signInWithEmailLink",rl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends w3{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Vf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V4(e,n,"signInWithPassword",YV);case"emailLink":return QV(e,{email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V4(e,r,"signUpPassword",XV);case"emailLink":return JV(e,{idToken:n,email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(t,e){return im(t,"POST","/v1/accounts:signInWithIdp",rl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV="http://localhost";class xu extends w3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const l=new xu(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return ih(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ih(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ih(e,n)}buildRequest(){const e={requestUri:ZV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tF(t){const e=lf(uf(t)).link,n=e?lf(uf(e)).deep_link_id:null,r=lf(uf(t)).deep_link_id;return(r?lf(uf(r)).link:null)||r||n||e||t}class E3{constructor(e){const n=lf(uf(e)),r=n.apiKey??null,i=n.oobCode??null,o=eF(n.mode??null);He(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=tF(e);try{return new E3(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this.providerId=Mh.PROVIDER_ID}static credential(e,n){return Vf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=E3.parseLink(n);return He(r,"argument-error"),Vf._fromEmailAndCode(e,r.code,r.tenantId)}}Mh.PROVIDER_ID="password";Mh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am extends S3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends am{constructor(){super("facebook.com")}static credential(e){return xu._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends am{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xu._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yo.credential(n,r)}catch{return null}}}yo.GOOGLE_SIGN_IN_METHOD="google.com";yo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends am{constructor(){super("github.com")}static credential(e){return xu._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends am{constructor(){super("twitter.com")}static credential(e,n){return xu._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bs.credential(n,r)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(t,e){return im(t,"POST","/v1/accounts:signUp",rl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Hi._fromIdTokenResponse(e,r,i),l=s8(r);return new wu({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=s8(r);return new wu({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function s8(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends Oa{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Og.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Og(e,n,r,i)}}function nM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Og._fromErrorAndOperation(t,o,e,r):o})}async function rF(t,e,n=!1){const r=await zf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(t,e,n=!1){const{auth:r}=t;if(Nr(r.app))return Promise.reject(Eo(r));const i="reauthenticate";try{const o=await zf(t,nM(r,i,e,t),n);He(o.idToken,r,"internal-error");const l=_3(o.idToken);He(l,r,"internal-error");const{sub:c}=l;return He(t.uid===c,r,"user-mismatch"),wu._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ti(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e,n=!1){if(Nr(t.app))return Promise.reject(Eo(t));const r="signIn",i=await nM(t,r,e),o=await wu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function aF(t,e){return rM(al(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(t){const e=al(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oF(t,e,n){if(Nr(t.app))return Promise.reject(Eo(t));const r=al(t),l=await V4(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nF).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&iM(t),d}),c=await wu._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function sF(t,e,n){return Nr(t.app)?Promise.reject(Eo(t)):aF(hr(t),Mh.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iM(t),r})}function lF(t,e,n,r){return hr(t).onIdTokenChanged(e,n,r)}function uF(t,e,n){return hr(t).beforeAuthStateChanged(e,n)}function cF(t,e,n,r){return hr(t).onAuthStateChanged(e,n,r)}const Ng="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ng,"1"),this.storage.removeItem(Ng),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=1e3,dF=10;class oM extends aM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);DV()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,dF):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oM.type="LOCAL";const fF=oM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM extends aM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sM.type="SESSION";const lM=sM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new M1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,l=this.handlersMap[i];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async f=>f(n.origin,o)),d=await mF(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}M1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const f=k3("",20);i.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(){return window}function gF(t){Da().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(){return typeof Da().WorkerGlobalScope<"u"&&typeof Da().importScripts=="function"}async function yF(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bF(){return navigator?.serviceWorker?.controller||null}function vF(){return uM()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="firebaseLocalStorageDb",_F=1,Pg="firebaseLocalStorage",hM="fbase_key";class om{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function A1(t,e){return t.transaction([Pg],e?"readwrite":"readonly").objectStore(Pg)}function xF(){const t=indexedDB.deleteDatabase(cM);return new om(t).toPromise()}function F4(){const t=indexedDB.open(cM,_F);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Pg,{keyPath:hM})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Pg)?e(r):(r.close(),await xF(),e(await F4()))})})}async function l8(t,e,n){const r=A1(t,!0).put({[hM]:e,value:n});return new om(r).toPromise()}async function wF(t,e){const n=A1(t,!1).get(e),r=await new om(n).toPromise();return r===void 0?null:r.value}function u8(t,e){const n=A1(t,!0).delete(e);return new om(n).toPromise()}const EF=800,SF=3;class dM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await F4(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>SF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=M1._getInstance(vF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yF(),!this.activeServiceWorker)return;this.sender=new pF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await F4();return await l8(e,Ng,"1"),await u8(e,Ng),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>l8(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>wF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>u8(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=A1(i,!1).getAll();return new om(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dM.type="LOCAL";const kF=dM;new rm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t,e){return e?_o(e):(He(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3 extends w3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ih(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ih(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ih(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function CF(t){return rM(t.auth,new C3(t),t.bypassAuthState)}function MF(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),iF(n,new C3(t),t.bypassAuthState)}async function AF(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),rF(n,new C3(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CF;case"linkViaPopup":case"linkViaRedirect":return AF;case"reauthViaPopup":case"reauthViaRedirect":return MF;default:Ti(this.auth,"internal-error")}}resolve(e){Mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=new rm(2e3,1e4);async function DF(t,e,n){if(Nr(t.app))return Promise.reject(Gi(t,"operation-not-supported-in-this-environment"));const r=al(t);cV(t,e,S3);const i=fM(r,n);return new au(r,"signInViaPopup",e,i).executeNotNull()}class au extends mM{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,au.currentPopupAction&&au.currentPopupAction.cancel(),au.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){Mo(this.filter.length===1,"Popup operations only handle one event");const e=k3();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Gi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,au.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TF.get())};e()}}au.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF="pendingRedirect",tg=new Map;class RF extends mM{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=tg.get(this.auth._key());if(!e){try{const r=await IF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tg.set(this.auth._key(),e)}return this.bypassAuthState||tg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IF(t,e){const n=NF(e),r=OF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function BF(t,e){tg.set(t._key(),e)}function OF(t){return _o(t._redirectPersistence)}function NF(t){return eg(LF,t.config.apiKey,t.name)}async function PF(t,e,n=!1){if(Nr(t.app))return Promise.reject(Eo(t));const r=al(t),i=fM(r,e),l=await new RF(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=600*1e3;class VF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!pM(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Gi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zF&&this.cachedEventUids.clear(),this.cachedEventUids.has(c8(e))}saveEventToCache(e){this.cachedEventUids.add(c8(e)),this.lastProcessedEventTime=Date.now()}}function c8(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pM({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function FF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(t,e={}){return il(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$F=/^https?/;async function qF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UF(t);for(const n of e)try{if(jF(n))return}catch{}Ti(t,"unauthorized-domain")}function jF(t){const e=P4(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!$F.test(n))return!1;if(KF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=new rm(3e4,6e4);function h8(){const t=Da().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GF(t){return new Promise((e,n)=>{function r(){h8(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h8(),n(Gi(t,"network-request-failed"))},timeout:HF.get()})}if(Da().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Da().gapi?.load)r();else{const i=VV("iframefcb");return Da()[i]=()=>{gapi.load?r():n(Gi(t,"network-request-failed"))},ZC(`${zV()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw ng=null,e})}let ng=null;function WF(t){return ng=ng||GF(t),ng}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=new rm(5e3,15e3),YF="__/auth/iframe",QF="emulator/auth/iframe",JF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eU(t){const e=t.config;He(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?v3(e,QF):`https://${t.config.authDomain}/${YF}`,r={apiKey:e.apiKey,appName:t.name,v:Mu},i=ZF.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Qf(r).slice(1)}`}async function tU(t){const e=await WF(t),n=Da().gapi;return He(n,t,"internal-error"),e.open({where:document.body,url:eU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JF,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Gi(t,"network-request-failed"),c=Da().setTimeout(()=>{o(l)},XF.get());function d(){Da().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rU=500,iU=600,aU="_blank",oU="http://localhost";class d8{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sU(t,e,n,r=rU,i=iU){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d={...nU,width:r.toString(),height:i.toString(),top:o,left:l},f=cr().toLowerCase();n&&(c=HC(f)?aU:n),qC(f)&&(e=e||oU,d.scrollbars="yes");const p=Object.entries(d).reduce((v,[x,S])=>`${v}${x}=${S},`,"");if(TV(f)&&c!=="_self")return lU(e||"",c),new d8(null);const y=window.open(e||"",c,p);He(y,t,"popup-blocked");try{y.focus()}catch{}return new d8(y)}function lU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU="__/auth/handler",cU="emulator/auth/handler",hU=encodeURIComponent("fac");async function f8(t,e,n,r,i,o){He(t.config.authDomain,t,"auth-domain-config-required"),He(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mu,eventId:i};if(e instanceof S3){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",LI(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))l[p]=y}if(e instanceof am){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),f=d?`#${hU}=${encodeURIComponent(d)}`:"";return`${dU(t)}?${Qf(c).slice(1)}${f}`}function dU({config:t}){return t.emulator?v3(t,cU):`https://${t.authDomain}/${uU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="webStorageSupport";class fU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lM,this._completeRedirectFn=PF,this._overrideRedirectResult=BF}async _openPopup(e,n,r,i){Mo(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await f8(e,n,r,P4(),i);return sU(e,o,k3())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await f8(e,n,r,P4(),i);return gF(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Mo(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await tU(e),r=new VF(e);return n.register("authEvent",i=>(He(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lv,{type:lv},i=>{const o=i?.[0]?.[lv];o!==void 0&&n(!!o),Ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QC()||jC()||x3()}}const mU=fU;var m8="@firebase/auth",p8="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yU(t){gu(new js("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;He(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JC(t)},f=new OV(r,i,o,d);return jV(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gu(new js("auth-internal",e=>{const n=al(e.getProvider("auth").getImmediate());return(r=>new pU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ka(m8,p8,gU(t)),ka(m8,p8,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=300,vU=VS("authIdTokenMaxAge")||bU;let g8=null;const _U=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>vU)return;const i=n?.token;g8!==i&&(g8=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function xU(t=F2()){const e=c1(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qV(t,{popupRedirectResolver:mU,persistence:[kF,fF,lM]}),r=VS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=_U(o.toString());uF(n,l,()=>l(n.currentUser)),lF(n,c=>l(c))}}const i=NS("auth");return i&&HV(n,`http://${i}`),n}function wU(){return document.getElementsByTagName("head")?.[0]??document}NV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Gi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",wU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yU("Browser");const EU={apiKey:"AIzaSyBuJhHXA4rtD1w3cHXtvOPgnDhcWsRfrtU",authDomain:"certchamps-a7527.firebaseapp.com",databaseURL:"https://certchamps-a7527-default-rtdb.firebaseio.com",projectId:"certchamps-a7527",storageBucket:"certchamps-a7527.firebasestorage.app",messagingSenderId:"433584407503",appId:"1:433584407503:web:dabeb6a07906ae0d6ac8ba",measurementId:"G-7SKFDGYV8J"},M3=$S(EU),zp=xU(M3),uv=Fz(M3);rk(M3);function SU(){const{setUser:t}=ne.useContext(o1),e=rk(),n=L2(),r=async(f,p,y)=>{const v=await Zx(ew(e,"crown.png"));t({uid:f,username:p,email:y,picture:v,friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,questionStreak:0,savedQuestions:[],decks:[]}),await rV(Ww(uv,"user-data",f),{uid:f,username:p,email:y,picture:"crown.png",friends:[],pendingFriends:[],notifications:[],rank:0,xp:0,questionStreak:0,savedQuestions:[]}),n("/questions")},i=async(f,p,y)=>{try{const v=await tV(Ww(uv,"user-data",f)),x=Vz(uv,"user-data",f,"decks"),R=(await nV(x)).docs.map(I=>({id:I.id,...I.data()}));if(v.exists()){const I=await Zx(ew(e,v.data().picture));t({uid:v.id,username:v.data().username,email:v.data().email,picture:I,friends:v.data().friends,pendingFriends:v.data().pendingFriends,notifications:v.data().notifications,rank:v.data().rank,xp:v.data().xp,questionStreak:v.data().questionStreak,savedQuestions:v.data().savedQuestions,decks:R})}else r(f,p,y)}catch(v){console.log(v)}n("/practice")},o=async()=>{const f=new yo;try{const y=(await DF(zp,f)).user;y&&y.email&&i(y.uid,y.displayName??"newUser",y.email)}catch(p){console.log(p)}},l=async(f,p,y)=>{try{const x=(await oF(zp,p,y)).user;x&&r(x.uid,f,p)}catch(v){console.log(v)}},c=async(f,p)=>{try{const v=(await sF(zp,f,p)).user;v&&i(v.uid,"",f)}catch(y){console.log(y)}};ne.useEffect(()=>{const f=cF(zp,p=>{d(p)});return()=>f()},[]);const d=async f=>{f&&f.email&&f.uid&&(await i(f.uid,"",f.email),n("/practice"),console.log(`User Exists ✅: ${f.uid}`))};return{loginWithGoogle:o,signUpWithEmail:l,signInWithEmail:c,userSetup:i}}function kU(){const{signInWithEmail:t,signUpWithEmail:e,loginWithGoogle:n}=SU(),[r,i]=ne.useState(),[o,l]=ne.useState(),[c,d]=ne.useState();return Ee.jsx("div",{className:" h-full flex justify-center items-center ",children:Ee.jsxs("div",{className:" h-11/12 w-72 shadow-xl rounded-out border-light-grey border",children:[Ee.jsx("img",{src:sI,className:"w-34 m-auto"}),Ee.jsx("h1",{className:"txt-heading-colour text-center",children:"Log In"}),Ee.jsx("input",{type:"text",placeholder:"email",className:"txtbox mx-auto my-2 w-9/12",onChange:f=>{i(f.target.value),console.log(f.target.value)}}),Ee.jsx("input",{type:"password",placeholder:"password",className:"txtbox mx-auto my-2 w-9/12",onChange:f=>{l(f.target.value)}}),Ee.jsx("input",{type:"text",placeholder:"username",className:"txtbox mx-auto my-2 w-9/12",onChange:f=>{d(f.target.value)}}),Ee.jsx("p",{className:"blue-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{t(r??"",o??"")},children:"Login"}),Ee.jsx("p",{className:"blue-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{e(c??"",r??"",o??"")},children:"Sign Up"}),Ee.jsx("p",{className:"red-btn mx-auto my-2 w-9/12 text-center",onClick:()=>{n()},children:"Google"})]})})}var gM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y8=lu.createContext&&lu.createContext(gM),CU=["attr","size","title"];function MU(t,e){if(t==null)return{};var n=AU(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function AU(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zg(){return zg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zg.apply(this,arguments)}function b8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b8(Object(n),!0).forEach(function(r){TU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TU(t,e,n){return e=DU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DU(t){var e=LU(t,"string");return typeof e=="symbol"?e:e+""}function LU(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yM(t){return t&&t.map((e,n)=>lu.createElement(e.tag,Vg({key:n},e.attr),yM(e.child)))}function Ah(t){return e=>lu.createElement(RU,zg({attr:Vg({},t.attr)},e),yM(t.child))}function RU(t){var e=n=>{var{attr:r,size:i,title:o}=t,l=MU(t,CU),c=i||n.size||"1em",d;return n.className&&(d=n.className),t.className&&(d=(d?d+" ":"")+t.className),lu.createElement("svg",zg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:d,style:Vg(Vg({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&lu.createElement("title",null,o),t.children)};return y8!==void 0?lu.createElement(y8.Consumer,null,n=>e(n)):e(gM)}function IU(t){return Ah({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function BU(t){return Ah({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"6",x2:"10",y1:"11",y2:"11"},child:[]},{tag:"line",attr:{x1:"8",x2:"8",y1:"9",y2:"13"},child:[]},{tag:"line",attr:{x1:"15",x2:"15.01",y1:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",x2:"18.01",y1:"10",y2:"10"},child:[]},{tag:"path",attr:{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"},child:[]}]})(t)}function OU(t){return Ah({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"},child:[]},{tag:"path",attr:{d:"m15 5 4 4"},child:[]}]})(t)}function NU(t){return Ah({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"path",attr:{d:"m21 21-4.3-4.3"},child:[]}]})(t)}function PU(t){return Ah({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function zU(t){return Ah({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}var VU=Object.defineProperty,FU=Object.defineProperties,UU=Object.getOwnPropertyDescriptors,Fg=Object.getOwnPropertySymbols,bM=Object.prototype.hasOwnProperty,vM=Object.prototype.propertyIsEnumerable,v8=(t,e,n)=>e in t?VU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N=(t,e)=>{for(var n in e||(e={}))bM.call(e,n)&&v8(t,n,e[n]);if(Fg)for(var n of Fg(e))vM.call(e,n)&&v8(t,n,e[n]);return t},q=(t,e)=>FU(t,UU(e)),_8=t=>typeof t=="symbol"?t:t+"",Ug=(t,e)=>{var n={};for(var r in t)bM.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Fg)for(var r of Fg(t))e.indexOf(r)<0&&vM.call(t,r)&&(n[r]=t[r]);return n};function Rn(t){return Array.isArray(t)}var KU={en:{"keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.menu":"Menu","tooltip.undo":"Undo","menu.borders":"Borders","menu.insert matrix":"Insert Matrix","menu.array.add row above":"Add Row Before","menu.array.add row below":"Add Row After","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","menu.insert":"Insert","menu.insert.abs":"Absolute Value","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"n<sup>th</sup> Root","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarithm base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calculus","menu.insert.derivative":"Derivative","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"n<sup>th</sup> derivative","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integral","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Sum","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Product","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Complex Numbers","menu.insert.modulus":"Modulus","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Real Part","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Imaginary Part","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Conjugate","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Blackboard","tooltip.bold":"Bold","tooltip.italic":"Italic","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligraphic","tooltip.typewriter":"Typewriter","tooltip.roman-upright":"Roman Upright","tooltip.row-by-col":"%@ × %@","menu.font-style":"Font Style","menu.accent":"Accent","menu.decoration":"Decoration","menu.color":"Color","menu.background-color":"Background","menu.evaluate":"Evaluate","menu.simplify":"Simplify","menu.solve":"Solve","menu.solve-for":"Solve for %@","menu.cut":"Cut","menu.copy":"Copy","menu.copy-as-latex":"Copy as LaTeX","menu.copy-as-typst":"Copy as Typst","menu.copy-as-ascii-math":"Copy as ASCII Math","menu.copy-as-mathml":"Copy as MathML","menu.paste":"Paste","menu.select-all":"Select All","color.red":"Red","color.orange":"Orange","color.yellow":"Yellow","color.lime":"Lime","color.green":"Green","color.teal":"Teal","color.cyan":"Cyan","color.blue":"Blue","color.indigo":"Indigo","color.purple":"Purple","color.magenta":"Magenta","color.black":"Black","color.dark-grey":"Dark Grey","color.grey":"Grey","color.light-grey":"Light Grey","color.white":"White"},ar:{"keyboard.tooltip.symbols":"حرف او رمز","keyboard.tooltip.greek":"حروف يونانية","keyboard.tooltip.numeric":"الرقمية","keyboard.tooltip.alphabetic":"رموز الاحرف الرومانية","tooltip.copy to clipboard":"نسخ إلى الحافظة","tooltip.cut to clipboard":"قص إلى الحافظة","tooltip.paste from clipboard":"لصق من الحافظة","tooltip.redo":"الإعادة","tooltip.toggle virtual keyboard":"تبديل لوحة المفاتيح الإفتراضية","tooltip.undo":"إلغاء","menu.insert matrix":"أدخل المصفوفة","menu.borders":"محددات المصفوفة","menu.array.add row above":"أضف صفًا بعد ذلك","menu.array.add row below":"أضف الصف قبل","menu.array.add column after":"أضف العمود بعد ذلك","menu.array.add column before":"أضف العمود قبل","menu.array.delete row":"احذف صف","menu.array.delete rows":"حذف الصفوف المحددة","menu.array.delete column":"حذف العمود","menu.array.delete columns":"حذف الأعمدة المحددة","menu.mode":"وضع","menu.mode-math":"رياضيات","menu.mode-text":"نص","menu.mode-latex":"لاتكس","tooltip.blackboard":"سبورة","tooltip.bold":"عريض","tooltip.italic":"مائل","tooltip.fraktur":"فراكتور","tooltip.script":"سكريبت","tooltip.caligraphic":"كاليجرافيك","tooltip.typewriter":"آلة كاتبة","tooltip.roman-upright":"روماني مستقيم","tooltip.row-by-col":"%@ × %@","menu.font-style":"نمط الخط","menu.accent":"تشكيل","menu.decoration":"زخرفة","menu.color":"لون","menu.background-color":"الخلفية","menu.evaluate":"تقييم","menu.simplify":"تبسيط","menu.solve":"حل","menu.solve-for":"حل لـ %@","menu.cut":"قص","menu.copy":"نسخ","menu.copy-as-latex":"نسخ كـ LaTeX","menu.copy-as-ascii-math":"نسخ كـ ASCII Math","menu.copy-as-mathml":"نسخ كـ MathML","menu.paste":"لصق","menu.select-all":"تحديد الكل","color.red":"أحمر","color.orange":"برتقالي","color.yellow":"أصفر","color.lime":"ليموني","color.green":"أخضر","color.teal":"سماوي","color.cyan":"سماوي فاتح","color.blue":"أزرق","color.indigo":"نيلي","color.purple":"بنفسجي","color.magenta":"أرجواني","color.black":"أسود","color.dark-grey":"رمادي غامق","color.grey":"رمادي","color.light-grey":"رمادي فاتح","color.white":"أبيض"},de:{"keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.alphabetic":"Römische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einfügen","menu.borders":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzufügen nach","menu.array.add row below":"Zeile hinzufügen vor","menu.array.add column after":"Spalte hinzufügen nach","menu.array.add column before":"Spalte hinzufügen vor","menu.array.delete row":"Zeile löschen","menu.array.delete rows":"Ausgewählte Zeilen löschen","menu.array.delete column":"Spalte löschen","menu.array.delete columns":"Ausgewählte Spalten löschen","menu.mode":"Modus","menu.mode-math":"Mathematik","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tafel","tooltip.bold":"Fett","tooltip.italic":"Kursiv","tooltip.fraktur":"Fraktur","tooltip.script":"Skript","tooltip.caligraphic":"Kalligraphie","tooltip.typewriter":"Schreibmaschine","tooltip.roman-upright":"Römisch aufrecht","tooltip.row-by-col":"%@ × %@","menu.font-style":"Schriftstil","menu.accent":"Akzent","menu.decoration":"Dekoration","menu.color":"Farbe","menu.background-color":"Hintergrund","menu.evaluate":"Auswerten","menu.simplify":"Vereinfachen","menu.solve":"Lösen","menu.solve-for":"Lösen für %@","menu.cut":"Ausschneiden","menu.copy":"Kopieren","menu.copy-as-latex":"Als LaTeX kopieren","menu.copy-as-ascii-math":"Als ASCII Math kopieren","menu.copy-as-mathml":"Als MathML kopieren","menu.paste":"Einfügen","menu.select-all":"Alles auswählen","color.red":"Rot","color.orange":"Orange","color.yellow":"Gelb","color.lime":"Limette","color.green":"Grün","color.teal":"Blaugrün","color.cyan":"Cyan","color.blue":"Blau","color.indigo":"Indigo","color.purple":"Lila","color.magenta":"Magenta","color.black":"Schwarz","color.dark-grey":"Dunkelgrau","color.grey":"Grau","color.light-grey":"Hellgrau","color.white":"Weiß"},el:{"keyboard.tooltip.symbols":"σύμβολα","keyboard.tooltip.greek":"ελληνικά γράμματα","keyboard.tooltip.numeric":"Αριθμητικός","keyboard.tooltip.alphabetic":"Ρωμαϊκά γράμματα","tooltip.copy to clipboard":"Αντιγραφή στο πρόχειρο","tooltip.redo":"Ξανακάνω","tooltip.toggle virtual keyboard":"Εναλλαγή εικονικού πληκτρολογίου","tooltip.undo":"Ξεκάνω","menu.insert matrix":"Εισαγωγή μήτρα","menu.borders":"Οριοθέτες μήτρα","menu.array.add row above":"Προσθήκη σειράς μετά","menu.array.add row below":"Προσθήκη σειράς πριν","menu.array.add column after":"Προσθήκη στήλης μετά","menu.array.add column before":"Προσθήκη στήλης πριν","menu.array.delete row":"Διαγραφή σειράς","menu.array.delete rows":"Διαγραφή επιλεγμένων σειρών","menu.array.delete column":"Διαγραφή στήλης","menu.array.delete columns":"Διαγραφή επιλεγμένων στηλών","menu.mode":"Λειτουργία","menu.mode-math":"Μαθηματικά","menu.mode-text":"Κείμενο","menu.mode-latex":"LaTeX","tooltip.blackboard":"Πίνακας","tooltip.bold":"Έντονη","tooltip.italic":"Πλάγια","tooltip.fraktur":"Φράκτουρ","tooltip.script":"Σενάριο","tooltip.caligraphic":"Καλλιγραφική","tooltip.typewriter":"Μηχανή γραφής","tooltip.roman-upright":"Ρωμαϊκό Κατακόρυφο","tooltip.row-by-col":"%@ × %@","menu.font-style":"Στυλ γραμματοσειράς","menu.accent":"Τόνος","menu.decoration":"Διακόσμηση","menu.color":"Χρώμα","menu.background-color":"Χρώμα φόντου","menu.evaluate":"Αξιολόγηση","menu.simplify":"Απλοποίηση","menu.solve":"Λύση","menu.solve-for":"Λύση για %@","menu.cut":"Αποκοπή","menu.copy":"Αντιγραφή","menu.copy-as-latex":"Αντιγραφή ως LaTeX","menu.copy-as-ascii-math":"Αντιγραφή ως ASCII Math","menu.copy-as-mathml":"Αντιγραφή ως MathML","menu.paste":"Επικόλληση","menu.select-all":"Επιλογή όλων","color.red":"Κόκκινο","color.orange":"Πορτοκαλί","color.yellow":"Κίτρινο","color.lime":"Λαχανί","color.green":"Πράσινο","color.teal":"Κυανό","color.cyan":"Γαλάζιο","color.blue":"Μπλε","color.indigo":"Ινδικό","color.purple":"Μωβ","color.magenta":"Ματζέντα","color.black":"Μαύρο","color.dark-grey":"Σκούρο Γκρι","color.grey":"Γκρι","color.light-grey":"Ανοιχτό Γκρι","color.white":"Λευκό"},es:{"keyboard.tooltip.symbols":"Símbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.numeric":"Numérico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"Añadir Matriz","menu.borders":"Delimitadores de Matriz","menu.array.add row above":"Añadir Línea Antes","menu.array.add row below":"Añadir Línea Despues","menu.array.add column after":"Añadir Columna Despues","menu.array.add column before":"Añadir Columna Antes","menu.array.delete row":"Borrar Línea","menu.array.delete rows":"Borrar Líneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","menu.mode":"Modo","menu.mode-math":"Matemáticas","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Pizarra","tooltip.bold":"Negrita","tooltip.italic":"Cursiva","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligráfico","tooltip.typewriter":"Máquina de escribir","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@ × %@","menu.font-style":"Estilo de fuente","menu.accent":"Acento","menu.decoration":"Decoración","menu.color":"Color","menu.background-color":"Fondo","menu.evaluate":"Evaluar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Cortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Pegar","menu.select-all":"Seleccionar todo","color.red":"Rojo","color.orange":"Naranja","color.yellow":"Amarillo","color.lime":"Lima","color.green":"Verde","color.teal":"Verde azulado","color.cyan":"Cian","color.blue":"Azul","color.indigo":"Índigo","color.purple":"Morado","color.magenta":"Magenta","color.black":"Negro","color.dark-grey":"Gris oscuro","color.grey":"Gris","color.light-grey":"Gris claro","color.white":"Blanco"},fr:{"keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.numeric":"Numérique","keyboard.tooltip.alphabetic":"Lettres romaines","tooltip.menu":"Menu","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"Rétablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Insérer une Matrice","menu.borders":"Bords","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Après","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Après","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes Sélectionées","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes Sélectionées","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tableau noir","tooltip.bold":"Gras","tooltip.italic":"Italique","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligraphique","tooltip.typewriter":"Machine à écrire","tooltip.roman-upright":"Romain droit","tooltip.row-by-col":"%@ × %@","menu.font-style":"Style de police","menu.accent":"Accent","menu.decoration":"Décoration","menu.color":"Couleur","menu.background-color":"Arrière-plan","menu.evaluate":"Évaluer","menu.simplify":"Simplifier","menu.solve":"Résoudre","menu.solve-for":"Résoudre pour %@","menu.cut":"Couper","menu.copy":"Copier","menu.copy-as-latex":"Copier en LaTeX","menu.copy-as-ascii-math":"Copier en ASCII Math","menu.copy-as-mathml":"Copier en MathML","menu.paste":"Coller","menu.select-all":"Sélectionner tout","color.red":"Rouge","color.orange":"Orange","color.yellow":"Jaune","color.lime":"Citron vert","color.green":"Vert","color.teal":"Turquoise","color.cyan":"Cyan","color.blue":"Bleu","color.indigo":"Indigo","color.purple":"Violet","color.magenta":"Magenta","color.black":"Noir","color.dark-grey":"Gris foncé","color.grey":"Gris","color.light-grey":"Gris clair","color.white":"Blanc"},he:{"keyboard.tooltip.symbols":"סמלים","keyboard.tooltip.greek":"אותיות יווניות","keyboard.tooltip.numeric":"מספרי","keyboard.tooltip.alphabetic":"מכתבים רומיים","tooltip.copy to clipboard":"העתק ללוח","tooltip.redo":"לַעֲשׂוֹת שׁוּב","tooltip.toggle virtual keyboard":"החלף את המקלדת הווירטואלית","tooltip.undo":"לבטל","menu.insert matrix":"הכנס מטריקס","menu.borders":"מפרידי מטריקס","menu.array.add row above":"הוסף שורה אחרי","menu.array.add row below":"הוסף שורה לפני","menu.array.add column after":"הוסף עמודה אחרי","menu.array.add column before":"הוסף עמודה לפני","menu.array.delete row":"מחק שורה","menu.array.delete rows":"מחק שורות שנבחרו","menu.array.delete column":"מחק עמודה","menu.array.delete columns":"מחק עמודות שנבחרו","menu.mode":"מצב","menu.mode-math":"מתמטיקה","menu.mode-text":"טקסט","menu.mode-latex":"LaTeX","tooltip.blackboard":"לוח שחור","tooltip.bold":"מודגש","tooltip.italic":"נטוי","tooltip.fraktur":"פרקטור","tooltip.script":"כתב","tooltip.caligraphic":"קליגרפי","tooltip.typewriter":"מכונת כתיבה","tooltip.roman-upright":"רומי ישר","tooltip.row-by-col":"%@ × %@","menu.font-style":"סגנון גופן","menu.accent":"צליל","menu.decoration":"קישוט","menu.color":"צבע","menu.background-color":"רקע","menu.evaluate":"חשב","menu.simplify":"פשט","menu.solve":"פתור","menu.solve-for":"פתור עבור %@","menu.cut":"גזור","menu.copy":"העתק","menu.copy-as-latex":"העתק כ־LaTeX","menu.copy-as-ascii-math":"העתק כ־ASCII Math","menu.copy-as-mathml":"העתק כ־MathML","menu.paste":"הדבק","menu.select-all":"בחר הכל","color.red":"אדום","color.orange":"כתום","color.yellow":"צהוב","color.lime":"ירוק ליים","color.green":"ירוק","color.teal":"טיל","color.cyan":"ציאן","color.blue":"כחול","color.indigo":"אינדיגו","color.purple":"סגול","color.magenta":"מגנטה","color.black":"שחור","color.dark-grey":"אפור כהה","color.grey":"אפור","color.light-grey":"אפור בהיר","color.white":"לבן"},it:{"keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere Greche","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.alphabetic":"Lettere Romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.cut to clipboard":"Taglia negli appunti","tooltip.paste from clipboard":"Incolla dagli appunti","tooltip.redo":"Ripeti","tooltip.toggle virtual keyboard":"Attiva/Disattiva Tastiera Virtuale","tooltip.menu":"Menu","tooltip.undo":"Annulla","menu.borders":"Bordi","menu.insert matrix":"Inserisci Matrice","menu.array.add row above":"Aggiungi Riga Prima","menu.array.add row below":"Aggiungi Riga Dopo","menu.array.add column after":"Aggiungi Colonna Dopo","menu.array.add column before":"Aggiungi Colonna Prima","menu.array.delete row":"Elimina Riga","menu.array.delete rows":"Elimina Righe Selezionate","menu.array.delete column":"Elimina Colonna","menu.array.delete columns":"Elimina Colonne Selezionate","menu.mode":"Modalità","menu.mode-math":"Matematica","menu.mode-text":"Testo","menu.mode-latex":"LaTeX","menu.insert":"Inserisci","menu.insert.abs":"Valore Assoluto","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Radice n-esima","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logaritmo in base a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Calcolo","menu.insert.derivative":"Derivata","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Derivata n-esima","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Integrale","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Somma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Prodotto","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Numeri Complessi","menu.insert.modulus":"Modulo","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argomento","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Parte Reale","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Parte Immaginaria","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Coniugato","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Lavagna","tooltip.bold":"Grassetto","tooltip.italic":"Corsivo","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligrafico","tooltip.typewriter":"Macchina da Scrivere","tooltip.roman-upright":"Romano Dritto","tooltip.row-by-col":"%@ × %@","menu.font-style":"Stile del Carattere","menu.accent":"Accento","menu.decoration":"Decorazione","menu.color":"Colore","menu.background-color":"Sfondo","menu.evaluate":"Valuta","menu.simplify":"Semplifica","menu.solve":"Risolvi","menu.solve-for":"Risolvi per %@","menu.cut":"Taglia","menu.copy":"Copia","menu.copy-as-latex":"Copia come LaTeX","menu.copy-as-ascii-math":"Copia come ASCII Math","menu.copy-as-mathml":"Copia come MathML","menu.paste":"Incolla","menu.select-all":"Seleziona Tutto","color.red":"Rosso","color.orange":"Arancione","color.yellow":"Giallo","color.lime":"Lime","color.green":"Verde","color.teal":"Verde Acqua","color.cyan":"Ciano","color.blue":"Blu","color.indigo":"Indaco","color.purple":"Viola","color.magenta":"Magenta","color.black":"Nero","color.dark-grey":"Grigio Scuro","color.grey":"Grigio","color.light-grey":"Grigio Chiaro","color.white":"Bianco"},ja:{"keyboard.tooltip.symbols":"シンボル","keyboard.tooltip.greek":"ギリシャ文字","keyboard.tooltip.numeric":"数値","keyboard.tooltip.alphabetic":"ローマ字","tooltip.menu":"メニュー","tooltip.copy to clipboard":"クリップボードにコピー","tooltip.redo":"やり直し","tooltip.toggle virtual keyboard":"仮想キーボードの切り替え","tooltip.undo":"元に戻す","menu.insert matrix":"マトリックスを挿入","menu.borders":"行列区切り文字","menu.array.add row above":"後に行を追加","menu.array.add row below":"前に行を追加","menu.array.add column after":"後に列を追加","menu.array.add column before":"前に列を追加","menu.array.delete row":"行を削除","menu.array.delete rows":"選択した行を削除する","menu.array.delete column":"列を削除","menu.array.delete columns":"選択した列を削除する","menu.mode":"モード","menu.mode-math":"数式","menu.mode-text":"テキスト","menu.mode-latex":"LaTeX","tooltip.blackboard":"黒板","tooltip.bold":"太字","tooltip.italic":"イタリック","tooltip.fraktur":"フラクトゥール","tooltip.script":"スクリプト","tooltip.caligraphic":"カリグラフィック","tooltip.typewriter":"タイプライター","tooltip.roman-upright":"ローマ直立","tooltip.row-by-col":"%@ × %@","menu.font-style":"フォントスタイル","menu.accent":"アクセント","menu.decoration":"装飾","menu.color":"色","menu.background-color":"背景","menu.evaluate":"評価","menu.simplify":"簡略化","menu.solve":"解く","menu.solve-for":"%@ を解く","menu.cut":"切り取り","menu.copy":"コピー","menu.copy-as-latex":"LaTeXとしてコピー","menu.copy-as-ascii-math":"ASCII Mathとしてコピー","menu.copy-as-mathml":"MathMLとしてコピー","menu.paste":"貼り付け","menu.select-all":"すべて選択","color.red":"赤","color.orange":"オレンジ","color.yellow":"黄色","color.lime":"ライム","color.green":"緑","color.teal":"ティール","color.cyan":"シアン","color.blue":"青","color.indigo":"インディゴ","color.purple":"紫","color.magenta":"マゼンタ","color.black":"黒","color.dark-grey":"濃いグレー","color.grey":"グレー","color.light-grey":"薄いグレー","color.white":"白"},ko:{"keyboard.tooltip.symbols":"기호","keyboard.tooltip.greek":"그리스 문자","keyboard.tooltip.numeric":"숫자","keyboard.tooltip.alphabetic":"로마 문자","tooltip.copy to clipboard":"클립 보드에 복사","tooltip.redo":"다시 하다","tooltip.toggle virtual keyboard":"가상 키보드 전환","tooltip.undo":"실행 취소","menu.insert matrix":"매트릭스 삽입","menu.borders":"행렬 구분 기호","menu.array.add row above":"뒤에 행 추가","menu.array.add row below":"앞에 행 추가","menu.array.add column after":"뒤에 열 추가","menu.array.add column before":"앞에 열 추가","menu.array.delete row":"행 삭제","menu.array.delete rows":"선택한 행 삭제","menu.array.delete column":"열 삭제","menu.array.delete columns":"선택한 열 삭제","menu.mode":"モード","menu.mode-math":"数式","menu.mode-text":"テキスト","menu.mode-latex":"LaTeX","tooltip.blackboard":"칠판","tooltip.bold":"굵게","tooltip.italic":"이탤릭","tooltip.fraktur":"프랙투어","tooltip.script":"스크립트","tooltip.caligraphic":"캘리그래픽","tooltip.typewriter":"타자기","tooltip.roman-upright":"로마 직립","tooltip.row-by-col":"%@ × %@","menu.font-style":"글꼴 스타일","menu.accent":"악센트","menu.decoration":"장식","menu.color":"색상","menu.background-color":"배경","menu.evaluate":"평가","menu.simplify":"간소화","menu.solve":"해결","menu.solve-for":"%@에 대해 해결","menu.cut":"잘라내기","menu.copy":"복사","menu.copy-as-latex":"LaTeX로 복사","menu.copy-as-ascii-math":"ASCII Math로 복사","menu.copy-as-mathml":"MathML로 복사","menu.paste":"붙여넣기","menu.select-all":"모두 선택","color.red":"빨강","color.orange":"주황","color.yellow":"노랑","color.lime":"라임","color.green":"초록","color.teal":"청록","color.cyan":"청색","color.blue":"파랑","color.indigo":"남색","color.purple":"보라","color.magenta":"자홍","color.black":"검정","color.dark-grey":"진한 회색","color.grey":"회색","color.light-grey":"연한 회색","color.white":"흰색"},pl:{"keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.alphabetic":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.cut to clipboard":"Wytnij ze Schowka","tooltip.paste from clipboard":"Wklej ze Schowka","tooltip.redo":"Przywróć","tooltip.toggle virtual keyboard":"Przełącz klawiaturę wirtualną","tooltip.menu":"Menu","tooltip.undo":"Cofnij","menu.borders":"Ograniczniki macierzy","menu.insert matrix":"Wstaw macierz","menu.array.add row above":"Dodaj wiersz przed","menu.array.add row below":"Dodaj wiersz po","menu.array.add column after":"Dodaj kolumnę po","menu.array.add column before":"Dodaj kolumnę przed","menu.array.delete row":"Usuń wiersz","menu.array.delete rows":"Usuń wybrane wiersze","menu.array.delete column":"Usuń kolumnę","menu.array.delete columns":"Usuń wybrane kolumny","menu.mode":"Tryb","menu.mode-math":"Formuła","menu.mode-text":"Tekst","menu.mode-latex":"LaTeX","menu.insert":"Wstaw","menu.insert.abs":"Wartość bezwzględna","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Pierwiastek n-tego stopnia","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Logarytm o podstawie a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Rachunek różniczkowy i całkowy","menu.insert.derivative":"Pochodna","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Pochodna n-tego rzędu","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Całka","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Suma","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Iloczyn","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Liczby zespolone","menu.insert.modulus":"Moduł","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Argument","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Część rzeczywista","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Część urojona","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Sprzężenie","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Tablica","tooltip.bold":"Pogrubienie","tooltip.italic":"Kursywa","tooltip.fraktur":"Fraktura","tooltip.script":"Skrypt","tooltip.caligraphic":"Kaligraficzny","tooltip.typewriter":"Maszynowy","tooltip.roman-upright":"Rzymski prosto","tooltip.row-by-col":"%@ × %@","menu.font-style":"Styl czcionki","menu.accent":"Akcent","menu.decoration":"Dekoracja","menu.color":"Kolor","menu.background-color":"Tło","menu.evaluate":"Oblicz","menu.simplify":"Uprość","menu.solve":"Rozwiąż","menu.solve-for":"Rozwiąż dla %@","menu.cut":"Wytnij","menu.copy":"Kopiuj","menu.copy-as-latex":"Kopiuj jako LaTeX","menu.copy-as-ascii-math":"Kopiuj jako ASCII Math","menu.copy-as-mathml":"Kopiuj jako MathML","menu.paste":"Wklej","menu.select-all":"Zaznacz wszystko","color.red":"Czerwony","color.orange":"Pomarańczowy","color.yellow":"Żółty","color.lime":"Limetkowy","color.green":"Zielony","color.teal":"Turkusowy","color.cyan":"Cyjan","color.blue":"Niebieski","color.indigo":"Indygo","color.purple":"Fioletowy","color.magenta":"Magenta","color.black":"Czarny","color.dark-grey":"Ciemnoszary","color.grey":"Szary","color.light-grey":"Jasnoszary","color.white":"Biały"},pt:{"keyboard.tooltip.symbols":"Símbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.numeric":"Numérico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar para área de transferência","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.borders":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","menu.mode":"Modo","menu.mode-math":"Fórmula","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Quadro Negro","tooltip.bold":"Negrito","tooltip.italic":"Itálico","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligráfico","tooltip.typewriter":"Máquina de Escrever","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@ × %@","menu.font-style":"Estilo da Fonte","menu.accent":"Acento","menu.decoration":"Decoração","menu.color":"Cor","menu.background-color":"Cor de Fundo","menu.evaluate":"Avaliar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Recortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Colar","menu.select-all":"Selecionar Tudo","color.red":"Vermelho","color.orange":"Laranja","color.yellow":"Amarelo","color.lime":"Verde Lima","color.green":"Verde","color.teal":"Verde-azulado","color.cyan":"Ciano","color.blue":"Azul","color.indigo":"Índigo","color.purple":"Roxo","color.magenta":"Magenta","color.black":"Preto","color.dark-grey":"Cinza Escuro","color.grey":"Cinza","color.light-grey":"Cinza Claro","color.white":"Branco"},uk:{"keyboard.tooltip.symbols":"Символи","keyboard.tooltip.greek":"Грецькі літери","keyboard.tooltip.numeric":"Числовий","keyboard.tooltip.alphabetic":"Римські літери","tooltip.copy to clipboard":"Копіювати в буфер обміну","tooltip.cut to clipboard":"Вирізати в буфер обміну","tooltip.paste from clipboard":"Вставити з буфера обміну","tooltip.redo":"Повторити","tooltip.toggle virtual keyboard":"Переключити віртуальну клавіатуру","tooltip.menu":"Меню","tooltip.undo":"Скасувати","menu.borders":"Межі","menu.insert matrix":"Вставити матрицю","menu.array.add row above":"Додати рядок перед","menu.array.add row below":"Додати рядок після","menu.array.add column after":"Додати стовпець після","menu.array.add column before":"Додати стовпець перед","menu.array.delete row":"Видалити рядок","menu.array.delete rows":"Видалити вибрані рядки","menu.array.delete column":"Видалити стовпець","menu.array.delete columns":"Видалити вибрані стовпці","menu.mode":"Режим","menu.mode-math":"Математика","menu.mode-text":"Текст","menu.mode-latex":"LaTeX","menu.insert":"Вставити","menu.insert.abs":"Абсолютне значення","menu.insert.abs-template":"\\left|x\\right|","menu.insert.nth-root":"Корінь n-го степеня","menu.insert.nth-root-template":"\\sqrt[n]{x}","menu.insert.log-base":"Логарифм за основою a","menu.insert.log-base-template":"\\log_a(x)","menu.insert.heading-calculus":"Обчислення","menu.insert.derivative":"Похідна","menu.insert.derivative-template":"\\dfrac{\\mathrm{d}}{\\mathrm{d}x}f(x)\\bigm|_{x=a}","menu.insert.nth-derivative":"Похідна n-го порядку","menu.insert.nth-derivative-template":"\\dfrac{\\mathrm{d}^n}{\\mathrm{d}x^n}f(x)\\bigm|_{x=a}","menu.insert.integral":"Інтеграл","menu.insert.integral-template":"$\\int_a^b f(x)\\,\\mathrm{d}x$","menu.insert.sum":"Сума","menu.insert.sum-template":"$\\sum_{i=1}^n x_i$","menu.insert.product":"Добуток","menu.insert.product-template":"\\prod_{i=1}^n x_i","menu.insert.heading-complex-numbers":"Комплексні числа","menu.insert.modulus":"Модуль","menu.insert.modulus-template":"\\lvert z \\rvert","menu.insert.argument":"Аргумент","menu.insert.argument-template":"\\arg(z)","menu.insert.real-part":"Дійсна частина","menu.insert.real-part-template":"\\Re(z)","menu.insert.imaginary-part":"Уявна частина","menu.insert.imaginary-part-template":"\\Im(z)","menu.insert.conjugate":"Спряжене число","menu.insert.conjugate-template":"\\overline{z}","tooltip.blackboard":"Дошка","tooltip.bold":"Жирний","tooltip.italic":"Курсив","tooltip.fraktur":"Фрактурний","tooltip.script":"Рукописний","tooltip.caligraphic":"Каліграфічний","tooltip.typewriter":"Друкарський","tooltip.roman-upright":"Прямий римський","tooltip.row-by-col":"%@ × %@","menu.font-style":"Стиль шрифту","menu.accent":"Акцент","menu.decoration":"Оформлення","menu.color":"Колір","menu.background-color":"Фон","menu.evaluate":"Обчислити","menu.simplify":"Спростити","menu.solve":"Розв’язати","menu.solve-for":"Розв’язати для %@","menu.cut":"Вирізати","menu.copy":"Копіювати","menu.copy-as-latex":"Копіювати як LaTeX","menu.copy-as-ascii-math":"Копіювати як ASCII Math","menu.copy-as-mathml":"Копіювати як MathML","menu.paste":"Вставити","menu.select-all":"Вибрати все","color.red":"Червоний","color.orange":"Помаранчевий","color.yellow":"Жовтий","color.lime":"Лаймовий","color.green":"Зелений","color.teal":"Бірюзовий","color.cyan":"Синьо-зелений","color.blue":"Синій","color.indigo":"Індиго","color.purple":"Фіолетовий","color.magenta":"Пурпурний","color.black":"Чорний","color.dark-grey":"Темно-сірий","color.grey":"Сірий","color.light-grey":"Світло-сірий","color.white":"Білий"},"zh-cn":{"keyboard.tooltip.symbols":"符号","keyboard.tooltip.greek":"希腊字母","keyboard.tooltip.numeric":"数字","keyboard.tooltip.alphabetic":"罗马字母","tooltip.copy to clipboard":"复制到剪贴板","tooltip.redo":"重做","tooltip.toggle virtual keyboard":"切换虚拟键盘","tooltip.undo":"撤消","menu.insert matrix":"插入矩阵","menu.borders":"矩阵分隔符","menu.array.add row above":"在后面添加行","menu.array.add row below":"在前面添加行","menu.array.add column after":"在后面添加列r","menu.array.add column before":"在前面添加列","menu.array.delete row":"删除行","menu.array.delete rows":"删除选定行","menu.array.delete column":"删除列","menu.array.delete columns":"删除选定的列","menu.mode":"模式","menu.mode-math":"数学","menu.mode-text":"文本","menu.mode-latex":"LaTeX","tooltip.blackboard":"黑板","tooltip.bold":"粗体","tooltip.italic":"斜体","tooltip.fraktur":"Fraktur","tooltip.script":"脚本","tooltip.caligraphic":"草书","tooltip.typewriter":"打字机","tooltip.roman-upright":"罗马直立","tooltip.row-by-col":"%@ × %@","menu.font-style":"字体样式","menu.accent":"重音","menu.decoration":"装饰","menu.color":"颜色","menu.background-color":"背景","menu.evaluate":"计算","menu.simplify":"简化","menu.solve":"求解","menu.solve-for":"求解 %@","menu.cut":"剪切","menu.copy":"复制","menu.copy-as-latex":"复制为 LaTeX","menu.copy-as-ascii-math":"复制为 ASCII Math","menu.copy-as-mathml":"复制为 MathML","menu.paste":"粘贴","menu.select-all":"全选","color.red":"红色","color.orange":"橙色","color.yellow":"黄色","color.lime":"绿黄色","color.green":"绿色","color.teal":"青色","color.cyan":"蓝绿色","color.blue":"蓝色","color.indigo":"靛蓝色","color.purple":"紫色","color.magenta":"洋红色","color.black":"黑色","color.dark-grey":"深灰色","color.grey":"灰色","color.light-grey":"浅灰色","color.white":"白色"},"zh-tw":{"keyboard.tooltip.symbols":"符號","keyboard.tooltip.greek":"希臘字母","keyboard.tooltip.numeric":"數字","keyboard.tooltip.alphabetic":"羅馬字母","tooltip.copy to clipboard":"複製到剪貼板","tooltip.redo":"重做","tooltip.toggle virtual keyboard":"切換虛擬鍵盤","tooltip.undo":"撤消","menu.insert matrix":"插入矩陣","menu.borders":"矩陣分隔符","menu.array.add row above":"在後面添加行","menu.array.add row below":"在前面添加行","menu.array.add column after":"在後面添加列","menu.array.add column before":"在前面添加列","menu.array.delete row":"刪除行","menu.array.delete rows":"刪除選定行","menu.array.delete column":"刪除列","menu.array.delete columns":"刪除選定的列","menu.mode":"模式","menu.mode-math":"數學","menu.mode-text":"文本","menu.mode-latex":"LaTeX","tooltip.blackboard":"黑板","tooltip.bold":"粗體","tooltip.italic":"斜體","tooltip.fraktur":"Fraktur","tooltip.script":"腳本","tooltip.caligraphic":"草書","tooltip.typewriter":"打字機","tooltip.roman-upright":"羅馬直立","tooltip.row-by-col":"%@ × %@","menu.font-style":"字體樣式","menu.accent":"重音","menu.decoration":"裝飾","menu.color":"顏色","menu.background-color":"背景","menu.evaluate":"計算","menu.simplify":"簡化","menu.solve":"求解","menu.solve-for":"求解 %@","menu.cut":"剪下","menu.copy":"複製","menu.copy-as-latex":"複製為 LaTeX","menu.copy-as-ascii-math":"複製為 ASCII Math","menu.copy-as-mathml":"複製為 MathML","menu.paste":"貼上","menu.select-all":"全選","color.red":"紅色","color.orange":"橙色","color.yellow":"黃色","color.lime":"綠黃色","color.green":"綠色","color.teal":"青色","color.cyan":"藍綠色","color.blue":"藍色","color.indigo":"靛藍色","color.purple":"紫色","color.magenta":"洋紅色","color.black":"黑色","color.dark-grey":"深灰色","color.grey":"灰色","color.light-grey":"淺灰色","color.white":"白色"}};function Di(){return"window"in globalThis&&"document"in globalThis}function _M(){return"matchMedia"in window?window.matchMedia("(pointer: coarse)").matches:"ontouchstart"in window||navigator.maxTouchPoints>0}function $U(){try{return window.self!==window.top}catch{return!0}}function xM(){return typeof navigator.vibrate=="function"}function Th(){var t,e;if(!Di())return"other";let n=(e=(t=navigator.userAgentData)==null?void 0:t.platform)!=null?e:navigator.platform;return/^mac/i.test(n)?navigator.maxTouchPoints===5?"ios":"macos":/^win/i.test(n)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function qU(){if(!Di())return!0;if(/firefox/i.test(navigator.userAgent)){let t=navigator.userAgent.match(/firefox\/(\d+)/i);return t?parseInt(t[1])>=78:!1}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let t=navigator.userAgent.match(/edg\/(\d+)/i);return t?parseInt(t[1])>=79:!1}return!0}function x8(){return HTMLElement.prototype.hasOwnProperty("popover")}var Qe={strings:KU,_locale:"",_dirty:!1,_subscribers:[],_numberFormatter:void 0,get locale(){return Qe._locale||(Qe._locale=Di()?navigator.language.slice(0,5):"en-US"),Qe._locale},set locale(t){Qe._locale=t,Qe._numberFormatter=void 0,Qe.dirty=!0},get numberFormatter(){if(!Qe._numberFormatter)try{Qe._numberFormatter=new Intl.NumberFormat(Qe.locale)}catch{try{Qe._numberFormatter=new Intl.NumberFormat(Qe.locale.slice(0,2))}catch{Qe._numberFormatter=new Intl.NumberFormat("en-US")}}return Qe._numberFormatter},merge(t,e){if(typeof t=="string"&&e)Qe.strings[t]=N(N({},Qe.strings[t]),e),Qe.dirty=!0;else for(let n of Object.keys(t))Qe.merge(n,t[n])},get dirty(){return Qe._dirty},set dirty(t){Qe._dirty||Qe._dirty===t||(Qe._dirty=!0,setTimeout(()=>{Qe._dirty=!1,this._subscribers.forEach(e=>e?.())},0))},subscribe(t){return Qe._subscribers.push(t),Qe._subscribers.length-1},unsubscribe(t){t<0||t>=Qe._subscribers.length||(Qe._subscribers[t]=void 0)},update(t){let e=t.querySelectorAll("[data-l10n-tooltip]");for(let n of e){let r=n.getAttribute("data-l10n-tooltip");if(r){let i=qe(r);i&&n.setAttribute("data-tooltip",i)}}e=t.querySelectorAll("[data-l10n-arial-label]");for(let n of e){let r=n.getAttribute("data-l10n-arial-label");if(r){let i=qe(r);i&&n.setAttribute("aria-label",i)}}}};function qe(t,...e){if(t===void 0)return;let n="",r=Qe.locale;Qe.strings[r]&&(n=Qe.strings[r][t]);let i=r.slice(0,2);if(!n&&Qe.strings[i]&&(n=Qe.strings[i][t]),n||(n=Qe.strings.en[t]),!n)return;let o=/(%@|%([0-9]+)\$@)/g,l=o.exec(n),c=0;for(;l;){if(e[c++]){let d=l[2]?parseInt(l[2],10)-1:c-1,f=e[d];typeof f=="number"&&(f=Qe.numberFormatter.format(f)),n=n.replace(l[1],f)}l=o.exec(n)}return n=n.replace(/%%/g,"%"),n}var jU={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},HU={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},hu={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",cyan:"#b8e5c9",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},du={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",cyan:"#13a7ec",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},wM={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},GU={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function T1(t){var e,n,r,i,o,l;let c=t.split("!"),d,f,p,y=255,v=255,x=255,S=-1,R=c.length>0&&c[0].startsWith("-");R&&(c[0]=c[0].slice(1));for(let I=0;I<c.length;I++){d=y,f=v,p=x;let L=(e=c[I].trim().match(/^([A-Za-z\d-]+)/))==null?void 0:e[1],j=L?.toLowerCase(),z=L&&(l=(o=(i=(r=(n=du[j])!=null?n:du[wM[L]])!=null?r:HU[L])!=null?i:GU[L])!=null?o:jU[L])!=null?l:c[I].trim(),G=z.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(G!=null&&G[1]&&G[2]&&G[3])y=Math.max(0,Math.min(255,Number.parseInt(G[1],16))),v=Math.max(0,Math.min(255,Number.parseInt(G[2],16))),x=Math.max(0,Math.min(255,Number.parseInt(G[3],16)));else if(G=z.match(/^#([\da-f]{3})$/i),G!=null&&G[1]){let ie=Number.parseInt(G[1][0],16),B=Number.parseInt(G[1][1],16),M=Number.parseInt(G[1][2],16);y=Math.max(0,Math.min(255,ie*16+ie)),v=Math.max(0,Math.min(255,B*16+B)),x=Math.max(0,Math.min(255,M*16+M))}else if(G=z.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),G!=null&&G[1]&&G[2]&&G[3])y=Math.max(0,Math.min(255,Number.parseInt(G[1]))),v=Math.max(0,Math.min(255,Number.parseInt(G[2]))),x=Math.max(0,Math.min(255,Number.parseInt(G[3])));else return;S>=0&&(y=(1-S)*y+S*d,v=(1-S)*v+S*f,x=(1-S)*x+S*p,S=-1),I+1<c.length&&(S=Math.max(0,Math.min(100,Number.parseInt(c[++I])))/100)}return S>=0&&(y=S*y+(1-S)*d,v=S*v+(1-S)*f,x=S*x+(1-S)*p),R&&(y=255-y,v=255-v,x=255-x),"#"+("00"+Math.round(y).toString(16)).slice(-2)+("00"+Math.round(v).toString(16)).slice(-2)+("00"+Math.round(x).toString(16)).slice(-2)}function A3(t){var e,n;return t=t.trim(),(n=(e=hu[t.toLowerCase()])!=null?e:hu[wM[t]])!=null?n:T1(t)}function WU(t){if(!t||t[0]!=="#")return;t=t.slice(1);let e;return t.length<=4?(e={r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)},t.length===4&&(e.a=parseInt(t[3]+t[3],16)/255)):(e={r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)},t.length===8&&(e.a=parseInt(t[6]+t[7],16)/255)),e&&e.a===void 0&&(e.a=1),e}function cv(t,e,n){return n<0&&(n+=6),n>=6&&(n-=6),n<1?(e-t)*n+t:n<3?e:n<4?(e-t)*(4-n)+t:t}function XU(t){let[e,n,r]=[t.h,t.s,t.l];e=(e+360)%360/60,r=Math.max(0,Math.min(r,1)),n=Math.max(0,Math.min(n,1));let i=r<=.5?r*(n+1):r+n-r*n,o=r*2-i;return{r:Math.round(255*cv(o,i,e+2)),g:Math.round(255*cv(o,i,e)),b:Math.round(255*cv(o,i,e-2))}}function hv(t){return t<0?0:t>255?255:Math.round(t)}function YU(t){let{r:e,g:n,b:r}=t,i=((1<<24)+(hv(e)<<16)+(hv(n)<<8)+hv(r)).toString(16).slice(1);return i[0]===i[1]&&i[2]===i[3]&&i[4]===i[5]&&i[6]===i[7]&&(i=i[0]+i[2]+i[4]),"#"+i}function QU(t){let{r:e,g:n,b:r}=t;e=e/255,n=n/255,r=r/255;let i=Math.min(e,n,r),o=Math.max(e,n,r),l=o-i,c,d;o===i?c=0:e===o?c=(n-r)/l:n===o?c=2+(r-e)/l:r===o&&(c=4+(e-n)/l),c=Math.min(c*60,360),c<0&&(c+=360);let f=(i+o)/2;return o===i?d=0:f<=.5?d=l/(o+i):d=l/(2-o-i),{h:c,s:d,l:f}}function JU(t){let e=WU(t);if(!e)return t;let{h:n,s:r,l:i}=QU(e);return r+=.1,i-=.1,YU(XU({h:n,s:r,l:i}))}var EM={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10178:"\\perp",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},U4={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},SM=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120822,len:10,offset:48,variant:"monospace"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"}];function K4(t,e,n){if(!/[A-Za-z\d]/.test(t)||(n==="up"&&(n=void 0),!e&&!n))return;let r=t.codePointAt(0);if(r===void 0)return t;for(let i of SM)if((!e||i.variant===e)&&(!n||i.style===n)&&r>=i.offset&&r<i.offset+i.len){let o=i.start+r-i.offset;return String.fromCodePoint(U4[o]||o)}}function ZU(t){var e;if((t<119808||t>120831)&&(t<8448||t>8527))return{char:String.fromCodePoint(t)};for(let n in U4)if(U4[n]===t){t=(e=n.codePointAt(0))!=null?e:0;break}for(let n of SM)if(t>=n.start&&t<n.start+n.len)return{char:String.fromCodePoint(t-n.start+n.offset),variant:n.variant,style:n.style};return{char:String.fromCodePoint(t)}}function eK(t){var e;if("{}<>[]$&*#^_%:'˜".includes(t)||t.length>1)return;let n=(e=t.codePointAt(0))!=null?e:0,r=EM[n];if(r)return r;let{char:i,variant:o,style:l}=ZU(n);if(!(!o&&!l)){switch(r=i,o){case"double-struck":r=`\\mathbb{${r}}`;break;case"fraktur":r=`\\mathfrak{${r}}`;break;case"script":r=`\\mathscr{${r}}`;break;case"sans-serif":r=`\\mathsf{${r}}`;break;case"monospace":r=`\\mathtt{${r}}`;break;case"calligraphic":r=`\\mathcal{${r}}`;break}switch(l){case"bold":r=`\\mathbf{${r}}`;break;case"italic":r=`\\mathit{${r}}`;break;case"bolditalic":r=`\\mathbfit{${r}}`;break}return r}}function we(t){return t?Array.isArray(t)?t:typeof t=="object"&&"group"in t?t.group:[]:[]}var Ff={},Kg=N({},EM),ah={},T3={},tK={darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",C:"\\mathbb{C}",H:"\\mathbb{H}",N:"\\mathbb{N}",Q:"\\mathbb{Q}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",doublecap:"\\Cap",doublecup:"\\Cup",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",hArr:"\\Leftrightarrow",harr:"\\leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",Larr:"\\Leftarrow",lArr:"\\Leftarrow",lrarr:"\\leftrightarrow",Lrarr:"\\Leftrightarrow",lrArr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",part:"\\partial",plusmn:"\\pm",rarr:"\\rightarrow",Rarr:"\\Rightarrow",rArr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",restriction:"\\upharpoonright",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",varcoppa:"\\coppa",weierp:"\\wp",Zeta:"\\mathrm{Z}"},nK={varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1,captureSelection:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},rK={bra:{def:"\\mathinner{\\langle{#1}|}",args:1,captureSelection:!1},ket:{def:"\\mathinner{|{#1}\\rangle}",args:1,captureSelection:!1},braket:{def:"\\mathinner{\\langle{#1}\\rangle}",args:1,captureSelection:!1},set:{def:"\\mathinner{\\lbrace #1 \\rbrace}",args:1,captureSelection:!1},Bra:{def:"\\left\\langle #1\\right|",args:1,captureSelection:!1},Ket:{def:"\\left|#1\\right\\rangle",args:1,captureSelection:!1},Braket:{def:"\\left\\langle{#1}\\right\\rangle",args:1,captureSelection:!1},Set:{def:"\\left\\lbrace #1 \\right\\rbrace",args:1,captureSelection:!1}},iK={strut:{primitive:!0,def:"\\phantom{\\rule[0.3\\baselineskip]{0}{0.7\\baselineskip}}",args:0,captureSelection:!0},iff:{primitive:!0,captureSelection:!0,def:"\\;\\Longleftrightarrow\\;"},nicefrac:"^{#1}\\!\\!/\\!_{#2}",phase:{def:"\\enclose{phasorangle}{#1}",args:1,captureSelection:!1},rd:"\\mathrm{d}",rD:"\\mathrm{D}",odif:"\\mathrm{d}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}",mathstrut:{def:"\\vphantom{(}",primitive:!0},angl:"\\enclose{actuarial}{#1}",angln:"\\enclose{actuarial}{n}",anglr:"\\enclose{actuarial}{r}",anglk:"\\enclose{actuarial}{k}",mathtools:{primitive:!0,package:{ordinarycolon:":",vcentcolon:"\\mathrel{\\mathop\\ordinarycolon}",dblcolon:'{\\mathop{\\char"2237}}',coloneqq:'{\\mathop{\\char"2254}}',Coloneqq:'{\\mathop{\\char"2A74}}',coloneq:'{\\mathop{\\char"2254}}',Coloneq:'{\\mathop{\\char"2A74}}',eqqcolon:'{\\mathop{\\char"2255}}',Eqqcolon:'{\\mathop{\\char"3D\\char"2237}}',eqcolon:'{\\mathop{\\char"2255}}',Eqcolon:'{\\mathop{\\char"3D\\char"2237}}',colonapprox:'{\\mathop{\\char"003A\\char"2248}}',Colonapprox:'{\\mathop{\\char"2237\\char"2248}}',colonsim:'{\\mathop{\\char"3A\\char"223C}}',Colonsim:'{\\mathop{\\char"2237\\char"223C}}',colondash:"\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",Colondash:"\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}"}},ratio:"\\vcentcolon",coloncolon:"\\dblcolon",colonequals:"\\coloneq",coloncolonequals:"\\Coloneq",equalscolon:"\\eqcolon",equalscoloncolon:"\\Eqcolon",colonminus:"\\colondash",coloncolonminus:"\\Colondash",minuscolon:"\\dashcolon",minuscoloncolon:"\\Dashcolon",coloncolonapprox:"\\Colonapprox",coloncolonsim:"\\Colonsim",simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",simcoloncolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcoloncolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",notni:"\\mathrel{\\char`∌}",limsup:"\\operatorname*{lim\\,sup}",liminf:"\\operatorname*{lim\\,inf}",injlim:"\\operatorname*{inj\\,lim}",projlim:"\\operatorname*{proj\\,lim}",varlimsup:"\\operatorname*{\\overline{lim}}",varliminf:"\\operatorname*{\\underline{lim}}",varinjlim:"\\operatorname*{\\underrightarrow{lim}}",varprojlim:"\\operatorname*{\\underleftarrow{lim}}",argmin:"\\operatorname*{arg\\,min}",argmax:"\\operatorname*{arg\\,max}",plim:"\\mathop{\\operatorname{plim}}\\limits",tripledash:{def:"\\vphantom{-}\\raise{4mu}{\\mkern1.5mu\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2mu}}",expand:!0},"braket.sty":{package:rK},"amsmath.sty":{package:nK,primitive:!0},"texvc.sty":{package:tK,primitive:!1}},jc={" ":32,"\\!":33,"\\#":35,"\\$":36,"\\%":37,"\\&":38,"\\_":95,"-":45,"\\textunderscore":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\textbraceleft":123,"\\textbraceright":125,"\\lbrace":123,"\\rbrace":125,"\\lbrack":91,"\\rbrack":93,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"–":8211,"—":8212,"‘":8216,"’":8217,"“":8220,"”":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},aK=/[\w!@*()-=+{}\[\]\\';:?/.,~<>`|$%#&^" ]/,$4,Uf;qU()?($4=new RegExp("\\p{Letter}","u"),Uf=new RegExp("[0-9\\p{Letter}]","u")):($4=/[a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒößÖẞìíòúÌÍÒÚáñÁÑ]/,Uf=/[\da-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒößÖẞìíòúÌÍÒÚáñÁÑ]/);function q4(t,e,n="mord",r){e!==void 0&&(Ff[t]={definitionType:"symbol",type:n,variant:r,codepoint:e},Kg[e]||(Kg[e]=t))}function In(t,e,n){if(typeof t=="string"){for(let r=0;r<t.length;r++){let i=t.charAt(r);q4(i,i.codePointAt(0))}return}for(let[r,i,o,l]of t)q4(r,i,o??e,l??n)}function kM(t,e){for(let n=t;n<=e;n++)q4(String.fromCodePoint(n),n)}function oK(t){var e;return(e=T3[t])!=null?e:null}function sK(t,e){var n,r;if(e.length===0||e==="\\"||!e.startsWith("\\"))return[];let i=[];for(let l in ah)l.startsWith(e)&&!ah[l].infix&&i.push({match:l,frequency:(n=ah[l].frequency)!=null?n:0});for(let l in Ff)l.startsWith(e)&&i.push({match:l,frequency:(r=Ff[l].frequency)!=null?r:0});let o=e.substring(1);for(let l of Object.keys(t.options.macros))l.startsWith(o)&&i.push({match:"\\"+l,frequency:0});return i.sort((l,c)=>{var d,f;return l.frequency===c.frequency?l.match.length===c.match.length?l.match<c.match?-1:1:l.match.length-c.match.length:((d=c.frequency)!=null?d:0)-((f=l.frequency)!=null?f:0)}),i.map(l=>l.match)}function w8(t){let e="auto",n=t.match(/:([^=]+)/);return n&&(e=n[1].trim()),e}function $g(t){if(!t)return[];let e=[],n=t.split("]");if(n[0].startsWith("[")){e.push({isOptional:!0,type:w8(n[0].slice(1))});for(let r=1;r<=n.length;r++)e.push(...$g(n[r]))}else if(n=t.split("}"),n[0].startsWith("{")){e.push({isOptional:!1,type:w8(n[0].slice(1))});for(let r=1;r<=n.length;r++)e.push(...$g(n[r]))}return e}function CM(t){if(!t)return"";let e="",n=!0;for(let r of t)typeof r.value=="string"?e+=r.value:n=!1;return n?e:""}function Do(t,e,n){typeof t=="string"&&(t=[t]);let r={tabular:!0,rootOnly:!1,params:$g(e),createAtom:n};for(let i of t)T3[i]=r}function D3(t,e,n){var r;typeof t=="string"&&(t=[t]);let i={tabular:(r=n?.tabular)!=null?r:!1,rootOnly:!0,params:[],createAtom:e};for(let o of t)T3[o]=i}function oe(t,e,n){var r,i;n||(n={});let o={definitionType:"function",params:$g(e),ifMode:n.ifMode,isFunction:(r=n.isFunction)!=null?r:!1,applyMode:n.applyMode,infix:(i=n.infix)!=null?i:!1,parse:n.parse,createAtom:n.createAtom,applyStyle:n.applyStyle,serialize:n.serialize,render:n.render};if(typeof t=="string")ah["\\"+t]=o;else for(let l of t)ah["\\"+l]=o}var Vp;function L3(t){return Vp||(Vp=j4(iK)),t?j4(N(N({},Vp),t)):Vp}function E8(t,e){var n,r,i,o;if(typeof t=="string"){let l=0,c=t;return/(^|[^\\])#1/.test(c)&&(l=1),/(^|[^\\])#2/.test(c)&&(l=2),/(^|[^\\])#3/.test(c)&&(l=3),/(^|[^\\])#4/.test(c)&&(l=4),/(^|[^\\])#5/.test(c)&&(l=5),/(^|[^\\])#6/.test(c)&&(l=6),/(^|[^\\])#7/.test(c)&&(l=7),/(^|[^\\])#8/.test(c)&&(l=8),/(^|[^\\])#9/.test(c)&&(l=9),{expand:(n=e?.expand)!=null?n:!0,captureSelection:(r=e?.captureSelection)!=null?r:!0,args:l,def:c}}return N({expand:(i=e?.expand)!=null?i:!0,captureSelection:(o=e?.captureSelection)!=null?o:!0,args:0},t)}function j4(t){if(!t)return{};let e={};for(let n of Object.keys(t)){let r=t[n];if(r==null)delete e[n];else if(typeof r=="object"&&"package"in r)for(let i of Object.keys(r.package))e[i]=E8(r.package[i],{expand:!r.primitive,captureSelection:r.captureSelection});else e[n]=E8(r)}return e}function Jn(t,e="math"){if(!t||t.length===0)return null;let n=null;if(t.startsWith("\\")){if(n=ah[t],n)return!n.ifMode||n.ifMode===e?n:null;e==="math"?n=Ff[t]:jc[t]&&(n={definitionType:"symbol",type:"mord",codepoint:jc[t]})}else if(e==="math"){if(n=Ff[t],!n&&t.length===1){let r=AM("math",t.codePointAt(0));return r.startsWith("\\")?q(N({},Jn(r,"math")),{command:r}):null}}else jc[t]?n={definitionType:"symbol",type:"mord",codepoint:jc[t]}:e==="text"&&(n={definitionType:"symbol",type:"mord",codepoint:t.codePointAt(0)});return n??null}function MM(t,e){if(!t.startsWith("\\"))return null;let n=t.slice(1);return e[n]}function AM(t,e){return e===void 0?"":t==="math"&&Kg[e]?Kg[e]:t==="text"&&Object.keys(jc).find(r=>jc[r]===e)||String.fromCodePoint(e)}var vi=[0,.68889,0,0,.72222],Nl=[0,.68889,0,0,.66667],dv=[0,.68889,0,0,.77778],Fp=[0,.68889,0,0,.61111],S8=[.16667,.68889,0,0,.77778],Pd=[0,.68889,0,0,.55556],xt=[0,0,0,0,.25],k8=[0,.825,0,0,2.33334],C8=[0,.9,0,0,2.33334],Up=[0,.68889,0,0,.54028],fv=[-.03598,.46402,0,0,.5],ar=[-.13313,.36687,0,0,1],Kp=[.01354,.52239,0,0,1],M8=[.01354,.52239,0,0,1.11111],A8=[0,.54986,0,0,1],$p=[0,.69224,0,0,.5],mv=[0,.43056,0,0,1],hs=[.08198,.58198,0,0,.77778],qp=[.19444,.69224,0,0,.41667],jp=[.1808,.675,0,0,1],T8=[.19444,.69224,0,0,.83334],D8=[.13667,.63667,0,0,1],L8=[-.064,.437,0,0,1.334],ds=[.08167,.58167,0,0,.77778],zd=[0,.69224,0,0,.72222],pv=[0,.69224,0,0,.66667],Hp=[-.13313,.36687,0,0,.77778],R8=[.06062,.54986,0,0,.77778],Gp=[0,.69224,0,0,.77778],xc=[.25583,.75583,0,0,.77778],da=[.25142,.75726,0,0,.77778],wc=[.20576,.70576,0,0,.77778],Vi=[.30274,.79383,0,0,.77778],Vd=[.22958,.72958,0,0,.77778],I8=[.1808,.675,0,0,.77778],fa=[.13667,.63667,0,0,.77778],Rr=[.13597,.63597,0,0,.77778],fs=[.03517,.54986,0,0,.77778],Ec=[0,.675,0,0,.77778],B8=[.19444,.69224,0,0,.61111],O8=[0,.54986,0,0,.76042],N8=[0,.54986,0,0,.66667],ms=[.0391,.5391,0,0,.77778],P8=[.03517,.54986,0,0,1.33334],z8=[.38569,.88569,0,0,.77778],Wp=[.23222,.74111,0,0,.77778],V8=[.19444,.69224,0,0,.77778],F8=[0,.37788,0,0,.5],Xp=[0,.54986,0,0,.72222],U8=[0,.69224,0,0,.83334],K8=[.11111,.69224,0,0,.66667],Sc=[.26167,.75726,0,0,.77778],$8=[.48256,.98256,0,0,.77778],q8=[.28481,.79383,0,0,.77778],j8=[.08167,.58167,0,0,.22222],H8=[.08167,.58167,0,0,.38889],G8=[0,.43056,.04028,0,.66667],W8=[.41951,.91951,0,0,.77778],X8=[.24982,.74947,0,0,.38865],Y8=[.08319,.58283,0,0,.75623],Q8=[0,.10803,0,0,.27764],gv=[0,.47534,0,0,.50181],Fd=[.18906,.47534,0,0,.50181],J8=[0,.69141,0,0,.50181],Z8=[.24982,.74947,0,0,.27764],yv=[0,.69141,0,0,.21471],Yp=[.25,.75,0,0,.44722],_i=[0,.64444,0,0,.575],kc=[.08556,.58556,0,0,.89444],Qp=[0,.69444,0,0,.89444],Jp=[0,.68611,0,0,.9],bv=[0,.68611,0,0,.86944],ps=[.25,.75,0,0,.575],Zp=[.25,.75,0,0,.31944],Pl=[0,.69444,0,0,.63889],Cc=[0,.69444,0,0,.31944],e7=[0,.44444,0,0,.63889],t7=[0,.44444,0,0,.51111],gs=[0,.69444,0,0,.575],Fi=[.13333,.63333,0,0,.89444],n7=[0,.44444,0,0,.31944],r7=[0,.69444,0,0,.86944],i7=[0,.68611,0,0,.69166],e0=[0,.68611,0,0,.83055],vv=[0,.68611,0,0,.89444],_v=[0,.69444,0,0,.60278],a7=[.19444,.69444,0,0,.51111],o7=[0,.69444,0,0,.83055],ma=[-.10889,.39111,0,0,1.14999],s7=[.19444,.69444,0,0,.575],Ud=[.19444,.69444,0,0,1.14999],l7=[.19444,.69444,0,0,.70277],u7=[.05556,.75,0,0,.575],xv=[0,.68611,0,0,.95833],c7=[.08556,.58556,0,0,.76666],wv=[-.02639,.47361,0,0,.575],h7=[0,.44444,0,0,.89444],zl=[0,.55556,0,0,.76666],d7=[-.10889,.39111,0,0,.89444],Ev=[.00222,.50222,0,0,.89444],ys=[.19667,.69667,0,0,.89444],f7=[.08556,.58556,0,0,1.14999],Sv=[0,.69444,0,0,.70277],t0=[-.02778,.47222,0,0,.575],n0=[.25,.75,0,0,.51111],m7=[-.13889,.36111,0,0,1.14999],p7=[.19444,.69444,0,0,1.02222],r0=[.12963,.69444,0,0,.89444],g7=[.19444,.69444,0,0,.44722],bs=[0,.64444,.13167,0,.59111],y7=[.19444,.64444,.13167,0,.59111],kv=[0,.68611,.17208,0,.8961],b7=[.19444,.44444,.105,0,.53222],v7=[0,.44444,.085,0,.82666],_7=[0,.69444,.06709,0,.59111],i0=[0,.69444,.12945,0,.35555],x7=[0,.69444,0,0,.94888],Cv=[0,.69444,.11472,0,.59111],w7=[0,.68611,.10778,0,.88555],E7=[0,.69444,.07939,0,.62055],a0=[0,.69444,.12417,0,.30667],vs=[0,.64444,.13556,0,.51111],S7=[.19444,.64444,.13556,0,.51111],o0=[0,.68333,.16389,0,.74333],k7=[.19444,.43056,.08847,0,.46],C7=[0,.43056,.07514,0,.71555],M7=[0,.69444,.06646,0,.51111],A7=[0,.69444,0,0,.83129],T7=[0,.69444,.1225,0,.51111],D7=[0,.68333,.09403,0,.76666],L7=[0,.68333,.11111,0,.76666],R7=[0,.69444,.06961,0,.51444],oo=[0,.69444,0,0,.27778],Mc=[.25,.75,0,0,.38889],xi=[0,.64444,0,0,.5],Vl=[0,.69444,0,0,.77778],Fl=[0,.68333,0,0,.75],Kd=[0,.68333,0,0,.77778],I7=[0,.68333,0,0,.68056],$d=[0,.68333,0,0,.72222],so=[.25,.75,0,0,.5],s0=[.25,.75,0,0,.27778],vn=[0,.69444,0,0,.5],Ac=[0,.69444,0,0,.55556],Mv=[0,.43056,0,0,.44445],qd=[0,.43056,0,0,.5],B7=[.19444,.43056,0,0,.55556],O7=[0,.43056,0,0,.55556],wi=[.08333,.58333,0,0,.77778],N7=[0,.43056,0,0,.27778],P7=[0,.66786,0,0,.27778],z7=[0,.69444,0,0,.75],V7=[0,.66786,0,0,.5],F7=[0,.68333,0,0,.625],Av=[.19444,.69444,0,0,.44445],jd=[0,.69444,0,0,.72222],U7=[.19444,.69444,0,0,.5],Hd=[.19444,.69444,0,0,1],K7=[.011,.511,0,0,1.126],Tv=[.19444,.69444,0,0,.61111],Dv=[.05556,.75,0,0,.5],$7=[0,.68333,0,0,.83334],q7=[.0391,.5391,0,0,.66667],Lv=[-.05555,.44445,0,0,.5],j7=[0,.43056,0,0,.77778],Ul=[0,.55556,0,0,.66667],l0=[-.03625,.46375,0,0,.77778],H7=[-.01688,.48312,0,0,.77778],G7=[.0391,.5391,0,0,1],_s=[0,.69444,0,0,.61111],u0=[-.03472,.46528,0,0,.5],c0=[.25,.75,0,0,.44445],W7=[-.14236,.35764,0,0,1],h0=[.244,.744,0,0,.412],X7=[.19444,.69444,0,0,.88889],d0=[.12963,.69444,0,0,.77778],Y7=[.19444,.69444,0,0,.38889],Q7=[.011,.511,0,0,1.638],J7=[.19444,.69444,0,0,0],f0=[0,.44444,0,0,.575],Gd=[.19444,.44444,0,0,.575],Z7=[0,.68611,0,0,.75555],e9=[0,.69444,0,0,.66759],t9=[0,.68611,0,0,.80555],n9=[0,.68611,.08229,0,.98229],r9=[0,.68611,0,0,.76666],i9=[0,.44444,0,0,.58472],a9=[.19444,.44444,0,0,.6118],Wd=[.19444,.43056,0,0,.5],o9=[0,.68333,.02778,.08334,.76278],s9=[0,.68333,.08125,.05556,.83125],l9=[0,.43056,0,.05556,.48472],u9=[.19444,.43056,0,.08334,.51702],c9=[.25,.75,0,0,.42778],Xn=[0,.69444,0,0,.55],lo=[0,.69444,0,0,.73334],xs=[0,.69444,0,0,.79445],h9=[0,.69444,0,0,.51945],Rv=[0,.69444,0,0,.70278],d9=[0,.69444,0,0,.76389],f9=[.25,.75,0,0,.34306],Iv=[0,.69444,0,0,.56111],m9=[0,.69444,0,0,.25556],p9=[.19444,.45833,0,0,.56111],g9=[0,.45833,0,0,.56111],m0=[0,.69444,0,0,.30556],y9=[0,.69444,0,0,.58056],b9=[0,.69444,0,0,.67223],Bv=[0,.69444,0,0,.85556],Ov=[0,.69444,0,0,.55834],pa=[0,.65556,.11156,0,.5],Nv=[0,.69444,.08094,0,.70834],Pv=[.17014,0,0,0,.44445],v9=[0,.69444,.0799,0,.5],_9=[0,.69444,0,0,.73752],x9=[0,.69444,.09205,0,.5],w9=[0,.69444,.09031,0,.77778],zv=[0,.69444,.07816,0,.27778],E9=[0,.69444,.00316,0,.5],S9=[.19444,.69444,0,0,.83334],k9=[.05556,.75,0,0,.83334],C9=[0,.75,0,0,.5],M9=[.125,.08333,0,0,.27778],A9=[0,.08333,0,0,.27778],ga=[0,.65556,0,0,.5],Vv=[0,.69444,0,0,.47222],uo=[0,.69444,0,0,.66667],T9=[0,.69444,0,0,.59722],Fv=[0,.69444,0,0,.54167],Uv=[0,.69444,0,0,.70834],D9=[.25,.75,0,0,.28889],Kv=[0,.69444,0,0,.51667],L9=[0,.44444,0,0,.44445],R9=[.19444,.44444,0,0,.51667],I9=[0,.44444,0,0,.38333],B9=[0,.44444,0,0,.51667],O9=[0,.69444,0,0,.83334],N9=[.35001,.85,0,0,.45834],P9=[.35001,.85,0,0,.57778],z9=[.35001,.85,0,0,.41667],V9=[.35001,.85,0,0,.58334],p0=[0,.72222,0,0,.55556],F9=[1e-5,.6,0,0,.66667],U9=[1e-5,.6,0,0,.77778],K9=[.25001,.75,0,0,.94445],$9=[.306,.805,.19445,0,.47222],q9=[.30612,.805,.19445,0,.47222],Tc=[.25001,.75,0,0,.83334],Dc=[.35001,.85,0,0,.47222],$v=[.25001,.75,0,0,1.11111],j9=[.65002,1.15,0,0,.59722],H9=[.65002,1.15,0,0,.81111],G9=[.65002,1.15,0,0,.47222],W9=[.65002,1.15,0,0,.66667],g0=[0,.75,0,0,1],X9=[.55001,1.05,0,0,1.27778],Y9=[.862,1.36,.44445,0,.55556],Q9=[.86225,1.36,.44445,0,.55556],Lc=[.55001,1.05,0,0,1.11111],y0=[.65002,1.15,0,0,.52778],J9=[.65002,1.15,0,0,.61111],qv=[.55001,1.05,0,0,1.51112],Z9=[.95003,1.45,0,0,.73611],eE=[.95003,1.45,0,0,1.04445],tE=[.95003,1.45,0,0,.52778],b0=[.95003,1.45,0,0,.75],v0=[0,.75,0,0,1.44445],_0=[.95003,1.45,0,0,.58334],nE=[1.25003,1.75,0,0,.79167],rE=[1.25003,1.75,0,0,1.27778],iE=[1.25003,1.75,0,0,.58334],x0=[1.25003,1.75,0,0,.80556],w0=[0,.825,0,0,1.8889],E0=[1.25003,1.75,0,0,.63889],S0=[.64502,1.155,0,0,.875],aE=[1e-5,.6,0,0,.875],jv=[-99e-5,.601,0,0,.66667],k0=[.64502,1.155,0,0,.66667],oE=[1e-5,.9,0,0,.88889],sE=[.65002,1.15,0,0,.88889],lE=[.90001,0,0,0,.88889],uE=[-.00499,.605,0,0,1.05556],C0=[0,.12,0,0,.45],Se=[0,.61111,0,0,.525],Ui=[.08333,.69444,0,0,.525],cE=[-.08056,.53055,0,0,.525],hE=[-.05556,.55556,0,0,.525],Er=[0,.43056,0,0,.525],Xd=[.22222,.43056,0,0,.525],dE=[0,0,0,0,.525],lK={"AMS-Regular":{32:xt,65:vi,66:Nl,67:vi,68:vi,69:Nl,70:Fp,71:dv,72:dv,73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:dv,76:Nl,77:[0,.68889,0,0,.94445],78:vi,79:S8,80:Fp,81:S8,82:vi,83:Pd,84:Nl,85:vi,86:vi,87:[0,.68889,0,0,1],88:vi,89:vi,90:Nl,107:Pd,160:xt,165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:Pd,295:Up,710:k8,732:C8,770:k8,771:C8,989:ds,1008:G8,8245:[0,.54986,0,0,.275],8463:Up,8487:vi,8498:Pd,8502:Nl,8503:[0,.68889,0,0,.44445],8504:Nl,8513:[0,.68889,0,0,.63889],8592:fv,8594:fv,8602:ar,8603:ar,8606:Kp,8608:Kp,8610:M8,8611:M8,8619:A8,8620:A8,8621:[-.13313,.37788,0,0,1.38889],8622:ar,8624:$p,8625:$p,8630:mv,8631:mv,8634:hs,8635:hs,8638:qp,8639:qp,8642:qp,8643:qp,8644:jp,8646:jp,8647:jp,8648:T8,8649:jp,8650:T8,8651:Kp,8652:Kp,8653:ar,8654:ar,8655:ar,8666:D8,8667:D8,8669:[-.13313,.37788,0,0,1],8672:L8,8674:L8,8705:[0,.825,0,0,.5],8708:Pd,8709:ds,8717:[0,.43056,0,0,.42917],8722:fv,8724:[.08198,.69224,0,0,.77778],8726:ds,8733:Gp,8736:zd,8737:zd,8738:[.03517,.52239,0,0,.72222],8739:j8,8740:[.25142,.74111,0,0,.27778],8741:H8,8742:[.25142,.74111,0,0,.5],8756:pv,8757:pv,8764:Hp,8765:[-.13313,.37788,0,0,.77778],8769:Hp,8770:l0,8774:Vi,8776:H7,8778:ds,8782:R8,8783:R8,8785:hs,8786:hs,8787:hs,8790:Gp,8791:Vd,8796:[.08198,.91667,0,0,.77778],8806:xc,8807:xc,8808:da,8809:da,8812:[.25583,.75583,0,0,.5],8814:wc,8815:wc,8816:Vi,8817:Vi,8818:Vd,8819:Vd,8822:I8,8823:I8,8828:fa,8829:fa,8830:Vd,8831:Vd,8832:wc,8833:wc,8840:Vi,8841:Vi,8842:Rr,8843:Rr,8847:fs,8848:fs,8858:hs,8859:hs,8861:hs,8862:Ec,8863:Ec,8864:Ec,8865:Ec,8872:[0,.69224,0,0,.61111],8873:zd,8874:[0,.69224,0,0,.88889],8876:Fp,8877:Fp,8878:vi,8879:vi,8882:fs,8883:fs,8884:fa,8885:fa,8888:[0,.54986,0,0,1.11111],8890:B7,8891:B8,8892:B8,8901:[0,.54986,0,0,.27778],8903:ds,8905:ds,8906:ds,8907:Gp,8908:Gp,8909:[-.03598,.46402,0,0,.77778],8910:O8,8911:O8,8912:fs,8913:fs,8914:N8,8915:N8,8916:pv,8918:ms,8919:ms,8920:P8,8921:P8,8922:z8,8923:z8,8926:fa,8927:fa,8928:Vi,8929:Vi,8934:Wp,8935:Wp,8936:Wp,8937:Wp,8938:wc,8939:wc,8940:Vi,8941:Vi,8994:V8,8995:V8,9416:[.15559,.69224,0,0,.90222],9484:$p,9488:$p,9492:F8,9496:F8,9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:Ec,9633:Ec,9650:Xp,9651:Xp,9654:fs,9660:Xp,9661:Xp,9664:fs,9674:K8,9733:[.19444,.69224,0,0,.94445],10003:U8,10016:U8,10731:K8,10846:[.19444,.75583,0,0,.61111],10877:fa,10878:fa,10885:xc,10886:xc,10887:Rr,10888:Rr,10889:Sc,10890:Sc,10891:$8,10892:$8,10901:fa,10902:fa,10933:da,10934:da,10935:Sc,10936:Sc,10937:Sc,10938:Sc,10949:xc,10950:xc,10955:q8,10956:q8,57350:j8,57351:H8,57352:ds,57353:G8,57356:da,57357:da,57358:W8,57359:Vi,57360:Vi,57361:W8,57366:da,57367:da,57368:da,57369:da,57370:Rr,57371:Rr},"Caligraphic-Regular":{32:xt,65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:xt},"Fraktur-Regular":{32:xt,33:[0,.69141,0,0,.29574],34:yv,38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:X8,41:X8,42:[0,.62119,0,0,.27764],43:Y8,44:Q8,45:Y8,46:Q8,47:[.24982,.74947,0,0,.50181],48:gv,49:gv,50:gv,51:Fd,52:Fd,53:Fd,54:J8,55:Fd,56:J8,57:Fd,58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:Z8,93:Z8,94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:xt,8216:yv,8217:yv,58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:xt,33:[0,.69444,0,0,.35],34:_v,35:[.19444,.69444,0,0,.95833],36:u7,37:[.05556,.75,0,0,.95833],38:Qp,39:Cc,40:Yp,41:Yp,42:[0,.75,0,0,.575],43:Fi,44:[.19444,.15556,0,0,.31944],45:I9,46:[0,.15556,0,0,.31944],47:ps,48:_i,49:_i,50:_i,51:_i,52:_i,53:_i,54:_i,55:_i,56:_i,57:_i,58:n7,59:[.19444,.44444,0,0,.31944],60:kc,61:d7,62:kc,63:[0,.69444,0,0,.54305],64:Qp,65:bv,66:[0,.68611,0,0,.81805],67:e0,68:[0,.68611,0,0,.88194],69:Z7,70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:Jp,73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:i7,77:[0,.68611,0,0,1.09166],78:Jp,79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:bv,89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:Zp,92:ps,93:Zp,94:gs,95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:Pl,99:t7,100:Pl,101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:Pl,105:Cc,106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:Cc,109:[0,.44444,0,0,.95833],110:e7,111:f0,112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:e7,118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:t7,123:ps,124:Zp,125:ps,126:[.35,.34444,0,0,.575],160:xt,163:[0,.69444,0,0,.86853],168:gs,172:[0,.44444,0,0,.76666],176:r7,177:Fi,184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:Fi,216:[.04861,.73472,0,0,.89444],223:T9,230:[0,.44444,0,0,.83055],247:Fi,248:[.09722,.54167,0,0,.575],305:n7,338:[0,.68611,0,0,1.16944],339:h7,567:[.19444,.44444,0,0,.35139],710:gs,711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:gs,715:gs,728:gs,729:Cc,730:r7,732:gs,733:gs,915:i7,916:xv,920:vv,923:t9,926:r9,928:Jp,931:e0,933:vv,934:e0,936:vv,937:e0,8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:Cc,8217:Cc,8220:_v,8221:_v,8224:a7,8225:a7,8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:e9,8465:o7,8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:o7,8501:Sv,8592:ma,8593:s7,8594:ma,8595:s7,8596:ma,8597:ps,8598:Ud,8599:Ud,8600:Ud,8601:Ud,8636:ma,8637:ma,8640:ma,8641:ma,8656:ma,8657:l7,8658:ma,8659:l7,8660:ma,8661:[.25,.75,0,0,.70277],8704:Pl,8706:[0,.69444,.06389,0,.62847],8707:Pl,8709:u7,8711:xv,8712:c7,8715:c7,8722:Fi,8723:Fi,8725:ps,8726:ps,8727:t0,8728:wv,8729:wv,8730:[.18,.82,0,0,.95833],8733:h7,8734:[0,.44444,0,0,1.14999],8736:zd,8739:Zp,8741:ps,8743:zl,8744:zl,8745:zl,8746:zl,8747:[.19444,.69444,.12778,0,.56875],8764:d7,8768:[.19444,.69444,0,0,.31944],8771:Ev,8776:[.02444,.52444,0,0,.89444],8781:Ev,8801:Ev,8804:ys,8805:ys,8810:f7,8811:f7,8826:kc,8827:kc,8834:kc,8835:kc,8838:ys,8839:ys,8846:zl,8849:ys,8850:ys,8851:zl,8852:zl,8853:Fi,8854:Fi,8855:Fi,8856:Fi,8857:Fi,8866:Sv,8867:Sv,8868:Qp,8869:Qp,8900:wv,8901:[-.02639,.47361,0,0,.31944],8902:t0,8968:n0,8969:n0,8970:n0,8971:n0,8994:m7,8995:m7,9651:p7,9657:t0,9661:p7,9667:t0,9711:Ud,9824:r0,9825:r0,9826:r0,9827:r0,9837:[0,.75,0,0,.44722],9838:g7,9839:g7,10216:Yp,10217:Yp,10815:Jp,10927:ys,10928:ys,57376:J7},"Main-BoldItalic":{32:xt,33:[0,.69444,.11417,0,.38611],34:E7,35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:i0,40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:bs,49:bs,50:bs,51:bs,52:y7,53:bs,54:bs,55:y7,56:bs,57:bs,58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:Cv,64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:kv,73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:kv,79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:_7,95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:b7,104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:b7,114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:xt,168:[0,.69444,.11473,0,.59111],176:x7,184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:v7,248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:v7,567:[.19444,.44444,.04611,0,.385],710:_7,711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:i0,730:x7,732:Cv,733:Cv,915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:kv,931:[0,.68611,.11431,0,.82666],933:w7,934:[0,.68611,.05632,0,.82666],936:w7,937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:i0,8217:i0,8220:[0,.69444,.16772,0,.62055],8221:E7},"Main-Italic":{32:xt,33:a0,34:R7,35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:a0,40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:vs,49:vs,50:vs,51:vs,52:S7,53:vs,54:vs,55:S7,56:vs,57:vs,58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:T7,64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:o0,73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:o0,79:D7,80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:o0,86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:M7,95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:k7,104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:k7,114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:xt,168:[0,.66786,.10474,0,.51111],176:A7,184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:C7,248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:C7,710:M7,711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:A7,732:[0,.66786,.11585,0,.51111],733:T7,915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:D7,923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:o0,931:[0,.68333,.12028,0,.71555],933:L7,934:[0,.68333,.05986,0,.71555],936:L7,937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:a0,8217:a0,8220:[0,.69444,.1685,0,.51444],8221:R7,8463:Up},"Main-Regular":{32:xt,33:oo,34:vn,35:S9,36:Dv,37:k9,38:Vl,39:oo,40:Mc,41:Mc,42:C9,43:wi,44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:so,48:xi,49:xi,50:xi,51:xi,52:xi,53:xi,54:xi,55:xi,56:xi,57:xi,58:N7,59:[.19444,.43056,0,0,.27778],60:ms,61:Hp,62:ms,63:Vv,64:Vl,65:Fl,66:[0,.68333,0,0,.70834],67:$d,68:[0,.68333,0,0,.76389],69:I7,70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:Fl,73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:Kd,76:F7,77:[0,.68333,0,0,.91667],78:Fl,79:Kd,80:I7,81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:$d,85:Fl,86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:Fl,89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:s0,92:so,93:s0,94:vn,95:[.31,.12056,.02778,0,.5],97:qd,98:Ac,99:Mv,100:Ac,101:Mv,102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:Ac,105:P7,106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:oo,109:[0,.43056,0,0,.83334],110:O7,111:qd,112:B7,113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:O7,118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:Mv,123:so,124:s0,125:so,126:[.35,.31786,0,0,.5],160:xt,163:[0,.69444,0,0,.76909],167:Av,168:V7,172:[0,.43056,0,0,.66667],176:z7,177:wi,182:Tv,184:Pv,198:[0,.68333,0,0,.90278],215:wi,216:[.04861,.73194,0,0,.77778],223:vn,230:[0,.43056,0,0,.72222],247:wi,248:[.09722,.52778,0,0,.5],305:N7,338:[0,.68333,0,0,1.01389],339:j7,567:[.19444,.43056,0,0,.30556],710:vn,711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:vn,715:vn,728:vn,729:P7,730:z7,732:V7,733:vn,915:F7,916:$7,920:Kd,923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:Fl,931:$d,933:Kd,934:$d,936:Kd,937:$d,8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:oo,8217:oo,8220:vn,8221:vn,8224:Av,8225:Av,8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:Up,8465:jd,8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:jd,8501:_s,8592:ar,8593:U7,8594:ar,8595:U7,8596:ar,8597:so,8598:Hd,8599:Hd,8600:Hd,8601:Hd,8614:[.011,.511,0,0,1],8617:K7,8618:K7,8636:ar,8637:ar,8640:ar,8641:ar,8652:[.011,.671,0,0,1],8656:ar,8657:Tv,8658:ar,8659:Tv,8660:ar,8661:[.25,.75,0,0,.61111],8704:Ac,8706:[0,.69444,.05556,.08334,.5309],8707:Ac,8709:Dv,8711:$7,8712:q7,8715:q7,8722:wi,8723:wi,8725:so,8726:so,8727:u0,8728:Lv,8729:Lv,8730:[.2,.8,0,0,.83334],8733:j7,8734:mv,8736:zd,8739:s0,8741:so,8743:Ul,8744:Ul,8745:Ul,8746:Ul,8747:[.19444,.69444,.11111,0,.41667],8764:Hp,8768:[.19444,.69444,0,0,.27778],8771:l0,8773:[-.022,.589,0,0,1],8776:H7,8781:l0,8784:[-.133,.67,0,0,.778],8801:l0,8804:Rr,8805:Rr,8810:G7,8811:G7,8826:ms,8827:ms,8834:ms,8835:ms,8838:Rr,8839:Rr,8846:Ul,8849:Rr,8850:Rr,8851:Ul,8852:Ul,8853:wi,8854:wi,8855:wi,8856:wi,8857:wi,8866:_s,8867:_s,8868:Vl,8869:Vl,8872:[.249,.75,0,0,.867],8900:Lv,8901:[-.05555,.44445,0,0,.27778],8902:u0,8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:c0,8969:c0,8970:c0,8971:c0,8994:W7,8995:W7,9136:h0,9137:h0,9651:X7,9657:u0,9661:X7,9667:u0,9711:Hd,9824:d0,9825:d0,9826:d0,9827:d0,9837:[0,.75,0,0,.38889],9838:Y7,9839:Y7,10216:Mc,10217:Mc,10222:h0,10223:h0,10229:[.011,.511,0,0,1.609],10230:Q7,10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:Q7,10815:Fl,10927:Rr,10928:Rr,57376:J7},"Math-BoldItalic":{32:xt,48:f0,49:f0,50:f0,51:Gd,52:Gd,53:Gd,54:_i,55:Gd,56:_i,57:Gd,65:bv,66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:n9,73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:Z7,77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:e9,105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:i9,112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:xt,915:[0,.68611,.15972,0,.65694],916:xv,920:[0,.68611,.03194,0,.86722],923:t9,926:[0,.68611,.07458,0,.84125],928:n9,931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:r9,936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:i9,960:[0,.44444,.03704,0,.68241],961:a9,962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:a9,1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:xt,48:qd,49:qd,50:qd,51:Wd,52:Wd,53:Wd,54:xi,55:Wd,56:xi,57:Wd,65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:s9,73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:o9,80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:l9,112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:xt,915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:o9,923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:s9,931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:l9,960:[0,.43056,.03588,0,.57003],961:u9,962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:u9,1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:xt,33:[0,.69444,0,0,.36667],34:Ov,35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:m0,40:c9,41:c9,42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:Xn,49:Xn,50:Xn,51:Xn,52:Xn,53:Xn,54:Xn,55:Xn,56:Xn,57:Xn,58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:h9,64:lo,65:lo,66:lo,67:Rv,68:xs,69:[0,.69444,0,0,.64167],70:_s,71:lo,72:xs,73:[0,.69444,0,0,.33056],74:h9,75:d9,76:y9,77:[0,.69444,0,0,.97778],78:xs,79:xs,80:Rv,81:[.10556,.69444,0,0,.79445],82:Rv,83:_s,84:lo,85:d9,86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:lo,89:[0,.69444,.0275,0,.73334],90:b9,91:f9,93:f9,94:Xn,95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:Iv,99:[0,.45833,0,0,.48889],100:Iv,101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:Iv,105:m9,106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:m9,109:[0,.45833,0,0,.86667],110:g9,111:[0,.45833,0,0,.55],112:p9,113:p9,114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:g9,118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:xt,168:Xn,176:lo,180:Xn,184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:Xn,711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:Xn,729:m0,730:lo,732:Xn,733:Xn,915:y9,916:[0,.69444,0,0,.91667],920:Bv,923:b9,926:lo,928:xs,931:xs,933:Bv,934:xs,936:Bv,937:xs,8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:m0,8217:m0,8220:Ov,8221:Ov},"SansSerif-Italic":{32:xt,33:[0,.69444,.05733,0,.31945],34:E9,35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:zv,40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:M9,45:[0,.44444,.01946,0,.33333],46:A9,47:[.25,.75,.13164,0,.5],48:pa,49:pa,50:pa,51:pa,52:pa,53:pa,54:pa,55:pa,56:pa,57:pa,58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:uo,66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:Nv,73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:Fv,77:[0,.69444,.08094,0,.875],78:Nv,79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:v9,95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:xt,168:[0,.67937,.06385,0,.5],176:_9,184:Pv,305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:v9,711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:x9,715:vn,728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:_9,732:[0,.67659,.08826,0,.5],733:x9,915:[0,.69444,.13372,0,.54167],916:O9,920:[0,.69444,.07555,0,.77778],923:_s,926:[0,.69444,.12816,0,.66667],928:Nv,931:[0,.69444,.11983,0,.72222],933:w9,934:[0,.69444,.04603,0,.72222],936:w9,937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:zv,8217:zv,8220:[0,.69444,.14205,0,.5],8221:E9},"SansSerif-Regular":{32:xt,33:[0,.69444,0,0,.31945],34:vn,35:S9,36:Dv,37:k9,38:[0,.69444,0,0,.75834],39:oo,40:Mc,41:Mc,42:C9,43:wi,44:M9,45:[0,.44444,0,0,.33333],46:A9,47:so,48:ga,49:ga,50:ga,51:ga,52:ga,53:ga,54:ga,55:ga,56:ga,57:ga,58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:Vv,64:uo,65:uo,66:uo,67:Pl,68:[0,.69444,0,0,.72223],69:T9,70:[0,.69444,0,0,.56945],71:uo,72:Uv,73:oo,74:Vv,75:[0,.69444,0,0,.69445],76:Fv,77:[0,.69444,0,0,.875],78:Uv,79:[0,.69444,0,0,.73611],80:Pl,81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:Ac,84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:uo,89:[0,.69444,.025,0,.66667],90:_s,91:D9,93:D9,94:vn,95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:Kv,99:L9,100:Kv,101:L9,102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:Kv,105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:B9,111:[0,.44444,0,0,.5],112:R9,113:R9,114:[0,.44444,.01389,0,.34167],115:I9,116:[0,.57143,0,0,.36111],117:B9,118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:xt,168:[0,.67937,0,0,.5],176:uo,184:Pv,305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:vn,711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:vn,715:vn,728:vn,729:[0,.67937,0,0,.27778],730:uo,732:[0,.67659,0,0,.5],733:vn,915:Fv,916:O9,920:Vl,923:_s,926:uo,928:Uv,931:jd,933:Vl,934:jd,936:Vl,937:jd,8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:oo,8217:oo,8220:vn,8221:vn},"Script-Regular":{32:xt,65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:xt},"Size1-Regular":{32:xt,40:N9,41:N9,47:P9,91:z9,92:P9,93:z9,123:V9,125:V9,160:xt,710:p0,732:p0,770:p0,771:p0,8214:[-99e-5,.601,0,0,.77778],8593:F9,8595:F9,8657:U9,8659:U9,8719:K9,8720:K9,8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:q9,8748:$9,8749:$9,8750:q9,8896:Tc,8897:Tc,8898:Tc,8899:Tc,8968:Dc,8969:Dc,8970:Dc,8971:Dc,9168:jv,10216:Dc,10217:Dc,10752:$v,10753:$v,10754:$v,10756:Tc,10758:Tc},"Size2-Regular":{32:xt,40:j9,41:j9,47:H9,91:G9,92:H9,93:G9,123:W9,125:W9,160:xt,710:g0,732:g0,770:g0,771:g0,8719:X9,8720:X9,8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:Q9,8748:Y9,8749:Y9,8750:Q9,8896:Lc,8897:Lc,8898:Lc,8899:Lc,8968:y0,8969:y0,8970:y0,8971:y0,10216:J9,10217:J9,10752:qv,10753:qv,10754:qv,10756:Lc,10758:Lc},"Size3-Regular":{32:xt,40:Z9,41:Z9,47:eE,91:tE,92:eE,93:tE,123:b0,125:b0,160:xt,710:v0,732:v0,770:v0,771:v0,8730:[.95003,1.45,0,0,1],8968:_0,8969:_0,8970:_0,8971:_0,10216:b0,10217:b0},"Size4-Regular":{32:xt,40:nE,41:nE,47:rE,91:iE,92:rE,93:iE,123:x0,125:x0,160:xt,710:w0,732:w0,770:w0,771:w0,8730:[1.25003,1.75,0,0,1],8968:E0,8969:E0,8970:E0,8971:E0,9115:S0,9116:aE,9117:S0,9118:S0,9119:aE,9120:S0,9121:k0,9122:jv,9123:k0,9124:k0,9125:jv,9126:k0,9127:oE,9128:sE,9129:lE,9130:[0,.3,0,0,.88889],9131:oE,9132:sE,9133:lE,9143:[.88502,.915,0,0,1.05556],10216:x0,10217:x0,57344:uE,57345:uE,57680:C0,57681:C0,57682:C0,57683:C0},"Typewriter-Regular":{32:dE,33:Se,34:Se,35:Se,36:Ui,37:Ui,38:Se,39:Se,40:Ui,41:Ui,42:[0,.52083,0,0,.525],43:cE,44:[.13889,.125,0,0,.525],45:cE,46:[0,.125,0,0,.525],47:Ui,48:Se,49:Se,50:Se,51:Se,52:Se,53:Se,54:Se,55:Se,56:Se,57:Se,58:Er,59:[.13889,.43056,0,0,.525],60:hE,61:[-.19549,.41562,0,0,.525],62:hE,63:Se,64:Se,65:Se,66:Se,67:Se,68:Se,69:Se,70:Se,71:Se,72:Se,73:Se,74:Se,75:Se,76:Se,77:Se,78:Se,79:Se,80:Se,81:[.13889,.61111,0,0,.525],82:Se,83:Se,84:Se,85:Se,86:Se,87:Se,88:Se,89:Se,90:Se,91:Ui,92:Ui,93:Ui,94:Se,95:[.09514,0,0,0,.525],96:Se,97:Er,98:Se,99:Er,100:Se,101:Er,102:Se,103:Xd,104:Se,105:Se,106:[.22222,.61111,0,0,.525],107:Se,108:Se,109:Er,110:Er,111:Er,112:Xd,113:Xd,114:Er,115:Er,116:[0,.55358,0,0,.525],117:Er,118:Er,119:Er,120:Er,121:Xd,122:Er,123:Ui,124:Ui,125:Ui,126:Se,127:Se,160:dE,176:Se,184:[.19445,0,0,0,.525],305:Er,567:Xd,711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:Se,715:Se,728:Se,730:Se,770:Se,771:Se,776:Se,915:Se,916:Se,920:Se,923:Se,926:Se,928:Se,931:Se,933:Se,934:Se,936:Se,937:Se,8216:Se,8217:Se,8242:Se,9251:[.11111,.21944,0,0,.525]}},uK=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,bh=10,Wi=.25,cK=1.2,Ks=.431,fE={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[Ks,Ks,Ks],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.5,.732,.925],num2:[.394,.384,.5],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[Wi,Wi,Wi],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},H4=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],R3=5,mE={" ":" ","​":" ",Å:"A",Ç:"C",Ð:"D",Þ:"o",å:"a",ç:"c",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function Hc(t,e){t===void 0&&(t=77);let n=lK[e][t];if(n)return{defaultMetrics:!1,depth:n[0],height:n[1],italic:n[2],skew:n[3],width:n[4]};if(t===11034)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0,width:.8};let r=String.fromCodePoint(t);if(r in mE)t=mE[r].codePointAt(0);else if(uK.test(r))return t=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0,width:1};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0,width:.8}}var G4={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],longrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],longleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],longleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],longrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],longleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],longleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],longRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716],longLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},W4={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},pE={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:`m 529 160
  c -179 0 -524 -115 -524 -115
  c -5 -1 -9 -5 -9 -10
  c 0 -1 1 -2 1 -3
  l 4 -22
  c 1 -5 5 -9 11 -9
  h 2
  s 338 93 512 92
  c 174 0 513 -92 513 -92
  h 2
  c 5 0 9 4 11 9
  l 5 22
  c 1 6 -2 12 -8 13
  c 0 0 -342 115 -520 115
  z
  `,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,widetilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,widetilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,widetilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,widetilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`};function hK(t){if(W4[t]){let[f,p,y]=W4[t],v=`<span class="ML__stretchy" style="height:${y}em"><svg width="100%" height="${y}em" viewBox="0 0 ${f} ${p}" preserveAspectRatio="none" ><path fill="currentcolor" d="${pE[t]}"></path></svg></span>`;return`<span style="display:inline-block;height:${Math.floor(100*y/2)/100}em;min-width:0">${v}</span>`}let[e,n,r,i]=G4[t],o,l,c=r/1e3;e.length===3?(o=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],l=["xMinYMin","xMidYMin","xMaxYMin"]):e.length===2?(o=["slice-1-of-2","slice-2-of-2"],l=["xMinYMin","xMaxYMin"]):(o=["slice-1-of-1"],l=[i]);let d=e.map((f,p)=>`<span class="${o[p]}" style=height:${c}em><svg width=400em height=${c}em viewBox="0 0 400000 ${r}" preserveAspectRatio="${l[p]} slice"><path fill="currentcolor" d="${pE[f]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${c}em;min-width:${n}em;">${d}</span>`}function dK(t){return G4[t]?G4[t][2]/1e3:W4[t][2]}function fK(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r===13&&t.charCodeAt(n+1)===10&&(r=10,n++),(r===13||r===12)&&(r=10),r===0&&(r=65533),r>=55296&&r<=56319){let i=t.charCodeAt(n+1);if(i>=56320&&i<=57343){let o=r-55296,l=i-56320;r=2**16+o*2**10+l,n++}}e.push(r)}return e}var rg=8205,mK=[[rg,1],[65038,2],[127995,5],[129456,4],[917536,96]],M0,gE=[127462,127487];function yE(t){var e;if(M0===void 0){M0={};for(let n of mK)for(let r=n[0];r<=n[0]+n[1]-1;r++)M0[r]=!0}return(e=M0[t])!=null?e:!1}function pK(t){return t>=gE[0]&&t<=gE[1]}function TM(t){if(/^[\u0020-\u00FF]*$/.test(t))return t;let e=[],n=fK(t),r=0;for(;r<n.length;){let i=n[r++],o=n[r];if(o===rg){let l=r-1;for(r+=2;n[r]===rg;)r+=2;e.push(String.fromCodePoint(...n.slice(l,r-l+1)))}else if(yE(o)){let l=r-1;for(;yE(n[r]);)r+=n[r]===rg?2:1;e.push(String.fromCodePoint(...n.slice(l,2*r-l-1)))}else pK(i)?(r+=1,e.push(String.fromCodePoint(...n.slice(r-2,2)))):e.push(String.fromCodePoint(i))}return e}var gK=class{constructor(t){this.obeyspaces=!1,this.pos=0,this.s=TM(t)}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(t){let e=typeof this.s=="string"?t.exec(this.s.slice(this.pos)):t.exec(this.s.slice(this.pos).join(""));return e!=null&&e[0]?(this.pos+=e[0].length,e[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let t=this.get();if(t==="\\"){if(!this.end()){let e=this.match(/^[a-zA-Z\*]+/);return e?this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/):e=this.get(),"\\"+e}}else{if(t==="{")return"<{>";if(t==="}")return"<}>";if(t==="^"){if(this.peek()==="^"){this.get();let e=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(e)return String.fromCodePoint(Number.parseInt(e.slice(e.lastIndexOf("^")+1),16))}return t}else if(t==="#"){if(!this.end()){let e=!1;if(/[\d?@]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){let n=this.s[this.pos+1];e=/[^\dA-Za-z]/.test(n)}return e?"#"+this.get():"#"}}else if(t==="$")return this.peek()==="$"?(this.get(),"<$$>"):"<$>"}return t}};function yK(t,e){var n,r,i,o;let l=[],c=t.next();if(c&&c!=="\\relax"){if(c==="\\noexpand")c=t.next(),c&&l.push(c);else if(c==="\\obeyspaces")t.obeyspaces=!0;else if(c==="\\bgroup")l.push("<{>");else if(c==="\\egroup")l.push("<}>");else if(c==="\\string"){if(c=t.next(),c)if(c.startsWith("\\"))for(let d of c)l.push(d==="\\"?"\\backslash":d);else c==="<{>"?l.push("\\{"):c==="<space>"?l.push("~"):c==="<}>"&&l.push("\\}")}else if(c==="\\csname"){for(;t.peek()==="<space>";)t.next();let d="",f=!1,p=[];do{if(p.length===0)if(/^#[\d?@]$/.test(t.peek())){let y=t.get().slice(1);p=Kf((r=(n=e?.(y))!=null?n:e?.("?"))!=null?r:"\\placeholder{}",e),c=p[0]}else c=t.next(),p=c?[c]:[];f=p.length===0,!f&&c==="\\endcsname"&&(f=!0,p.shift()),f||(f=c==="<$>"||c==="<$$>"||c==="<{>"||c==="<}>"||typeof c=="string"&&c.length>1&&c.startsWith("\\")),f||(d+=p.shift())}while(!f);d&&l.push("\\"+d),l.push(...p)}else if(c!=="\\endcsname")if(c.length>1&&c.startsWith("#")){let d=c.slice(1);l.push(...Kf((o=(i=e?.(d))!=null?i:e?.("?"))!=null?o:"\\placeholder{}",e))}else l.push(c)}return l}function Kf(t,e=null){if(!t)return[];let n=[],r="";for(let l of t.toString().split(/\r?\n/)){r&&n.push(r),r=" ";let c=l.match(/((?:\\%)|[^%])*/);c!==null&&n.push(c[0])}let i=new gK(n.join("")),o=[];do o.push(...yK(i,e));while(!i.end());return o}function Ze(t){let e="",n=[];for(let r of t)r&&(e&&/^[a-zA-Z\*]/.test(r)&&n.push(e),n.push(r),/^\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(r)&&n.push(" "),e=/\\[a-zA-Z]+\*?$/.test(r)?" ":"");return n.join("")}function Bt(t,...e){return t.startsWith("\\"),e.length===0?t:Ze([t,...e.map(n=>`{${n}}`)])}function Kl(t){return Ze(t.map(e=>{var n;return(n={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])!=null?n:e}))}var DM=class mf{constructor(e){mf._registry[e]=this}static createAtom(e,n,r){return mf._registry[e].createAtom(n,Jn(n,e),r)}static serialize(e,n){var r;if(!e||e.length===0)return"";if((r=n.skipStyles)!=null&&r){let i=[];for(let o of LM(e)){let l=mf._registry[o[0].mode];i.push(...l.serialize(o,n))}return Ze(i)}return Ze(vK(e,n))}static getFont(e,n,r){return mf._registry[e].getFont(n,r)}};DM._registry={};var ei=DM;function LM(t){let e=[],n=[],r="NONE";for(let i of t)i.type!=="first"&&(i.mode!==r?(n.length>0&&e.push(n),n=[i],r=i.mode):n.push(i));return n.length>0&&e.push(n),e}function X4(t){if(!t||t.mode!=="math")return"";let{style:e}=t;return!e||!e.variantStyle?"":e.variantStyle==="bold"||e.variantStyle==="bolditalic"?"bold":""}function Y4(t){if(!t)return"";let{style:e}=t;if(!e)return"";let n=e.variant;return n===void 0?"normal":(!["calligraphic","fraktur","double-struck","script","monospace","sans-serif"].includes(n)&&e.variantStyle&&e.variantStyle!=="up"&&(n+="-"+e.variantStyle),n)}function Lo(t,e){let n=[],r=[],i;for(let o of t){if(o.type==="first")continue;let l;e==="variant"?l=Y4(o):e==="bold"?l=X4(o):l=o.style[e],l===i?r.push(o):(r.length>0&&n.push(r),r=[o],i=l)}return r.length>0&&n.push(r),n}function bE(t,e){var n;let{parent:r}=t[0],i=r?.style.color,o=[];for(let l of LM(t)){let c=e.defaultMode;for(let d of Lo(l,"color")){let f=d[0].style,p=ei._registry[d[0].mode].serialize(d,q(N({},e),{defaultMode:c==="text"?"text":"math"}));!e.skipStyles&&f.color&&f.color!=="none"&&(!r||i!==f.color)?o.push(Bt("\\textcolor",(n=f.verbatimColor)!=null?n:f.color,Ze(p))):o.push(Ze(p))}}return o}function bK(t,e){let{parent:n}=t[0],r=n?.style.backgroundColor;return Lo(t,"backgroundColor").map(i=>{var o;if(i.length>0||i[0].type!=="box"){let l=i[0].style;if(l.backgroundColor&&l.backgroundColor!=="none"&&(!n||r!==l.backgroundColor))return Bt("\\colorbox",(o=l.verbatimBackgroundColor)!=null?o:l.backgroundColor,Ze(bE(i,q(N({},e),{defaultMode:"text"}))))}return Ze(bE(i,e))})}function vK(t,e){if(t.length===0)return[];let{parent:n}=t[0],r=n?.style.fontSize,i=[];for(let o of Lo(t,"fontSize")){let l=o[0].style.fontSize,c=bK(o,e);c&&(l&&l!=="auto"&&(!n||r!==l)?i.push(["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][l],...c):i.push(...c))}return i}function Q4(t){return t?{mord:"ord",mbin:"bin",mop:"op",mrel:"rel",mopen:"open",mclose:"close",mpunct:"punct",minner:"inner",spacing:"ignore",latex:"latex",composition:"inner",error:"inner",placeholder:"ord",supsub:"ignore"}[t]:void 0}function sm(t){if(t.length===0)return"ord";let e=Q4(t[0].type),n=Q4(t[t.length-1].type);return e&&e===n?e:"ord"}function Yd(t,e){if(typeof t=="string")return t;if(typeof t=="number"){let n=Math.ceil(100*t)/100;return n===0?"0":n.toString()+(e??"")}return""}var be=class RM{constructor(e,n){var r,i,o,l,c;if(typeof e=="number"?this.value=String.fromCodePoint(e):typeof e=="string"?this.value=e:Rn(e)?this.children=e.filter(f=>f!==null):e&&e instanceof RM&&(this.children=[e]),this.children)for(let f of this.children)f.parent=this;this.type=(r=n?.type)!=null?r:"ignore",this.isSelected=n?.isSelected===!0,n!=null&&n.caret&&(this.caret=n.caret),this.classes=(i=n?.classes)!=null?i:"",this.isTight=(o=n?.isTight)!=null?o:!1,n!=null&&n.attributes&&(this.attributes=n.attributes);let d=n?.fontFamily;n!=null&&n.style&&this.value&&(d=(c=ei.getFont((l=n.mode)!=null?l:"math",this,q(N({variant:"normal"},n.style),{letterShapeStyle:n.letterShapeStyle})))!=null?c:void 0),d||(d="Main-Regular"),this._height=0,this._depth=0,this._width=0,this.hasExplicitWidth=!1,this.skew=0,this.italic=0,this.maxFontSize=0,this.scale=1,n?.maxFontSize!==void 0&&(this.maxFontSize=n.maxFontSize),_K(this,d)}set atomID(e){e===void 0||e.length===0||(this.id=e)}selected(e){if(this.isSelected!==e&&(this.isSelected=e,this.children))for(let n of this.children)n.selected(e)}setStyle(e,n,r){if(n===void 0)return;let i=Yd(n,r);i.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[e]=i)}setTop(e){Number.isFinite(e)&&Math.abs(e)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=Yd(e,"em"),this.height-=e,this.depth+=e)}get left(){var e;return(e=this.cssProperties)!=null&&e["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=Yd(e,"em")))}set right(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=Yd(e,"em")))}set bottom(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-bottom"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-bottom"]=Yd(e,"em")))}get width(){return this._width*this.scale}set width(e){this._width=e,this.hasExplicitWidth=!0}set softWidth(e){}get height(){return this._height*this.scale}set height(e){this._height=e}get depth(){return this._depth*this.scale}set depth(e){this._depth=e}wrap(e){let n=e.parent;if(!n)return this;e.isPhantom&&this.setStyle("opacity",0);let r=e.color;r&&r!==n.color&&this.setStyle("color",r);let i=e.backgroundColor;this.isSelected&&(i=JU(i)),i&&i!==n.backgroundColor&&(this.setStyle("background-color",i),this.setStyle("display","inline-block"));let o=e.scalingFactor;return this.scale=o,this.skew*=o,this.italic*=o,this}toMarkup(){var e,n,r,i;let o=(e=this.value)!=null?e:"";if(this.children)for(let x of this.children)o+=x.toMarkup();let l="";if(this.svgBody)l=hK(this.svgBody);else if(this.svgOverlay){l='<span style="',l+="display: inline-block;",l+=`height:${Math.floor(100*(this.height+this.depth))/100}em;`,l+=`vertical-align:${Math.floor(100*this.depth)/100}em;`,l+='">',l+=o,l+="</span>",l+='<svg style="position:absolute;overflow:visible;',l+=`height:${Math.floor(100*(this.height+this.depth))/100}em;`;let x=(n=this.cssProperties)==null?void 0:n.padding;x?(l+=`top:${x};`,l+=`left:${x};`,l+=`width:calc(100% - 2 * ${x} );`):l+="top:0;left:0;width:100%;",l+="z-index:2;",l+='"',this.svgStyle&&(l+=this.svgStyle),l+=` viewBox="0 0 ${Math.floor(100*this.width)/100} ${Math.floor(100*(this.height+this.depth))/100}"`,l+=`>${this.svgOverlay}</svg>`}let c=[],d=this.classes.split(" ");d.push((r={latex:"ML__raw-latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])!=null?r:""),this.caret==="latex"&&d.push("ML__latex-caret"),this.isSelected&&d.push("ML__selected");let f=d.length===1?d[0]:d.filter((x,S,R)=>x.length>0&&R.indexOf(x)===S).join(" ");if(f.length>0&&c.push(`class=${Rc(`"${f}"`)}`),this.id&&c.push(` data-atom-id=${Rc(this.id)}`),this.cssId&&c.push(` id=${Rc(`"${this.cssId.replace(/ /g,"-")}"`)}`),this.attributes&&c.concat(Object.keys(this.attributes).map(x=>`${Hv(x)}=${Rc(this.attributes[x])}`)),this.htmlData){let x=this.htmlData.split(",");for(let S of x){let R=S.match(/([^=]+)=(.+$)/);if(R){let I=Hv(R[1]);if(I)if(I==="href"){let L=new URL(R[2]);if(L.protocol!=="http:"&&L.protocol!=="https:")throw new Error(`Invalid URL: ${R[2]}`);c.push(`href="${R[2].replace(/"/g,"&quot;")}"`)}else c.push(`data-${I}=${Rc(R[2])}`)}else{let I=Hv(S);I&&c.push(`data-${I} `)}}}let p=(i=this.cssProperties)!=null?i:{};this.hasExplicitWidth&&p.width===void 0&&(p.width=`${Math.ceil(this._width*100)/100}em`);let y=Object.keys(p).map(x=>`${x}:${p[x]}`);if(this.scale!==void 0&&this.scale!==1&&(o.length>0||l.length>0)&&y.push(`font-size: ${Math.ceil(this.scale*1e4)/100}%`),this.htmlStyle)for(let x of this.htmlStyle.split(";")){let S=x.match(/([^:]+):(.+$)/);if(S){let R=S[1].trim().replace(/ /g,"-");R&&y.push(`${R}:${S[2]}`)}}y.length>0&&c.push(`style=${Rc(y.join(";"))}`);let v="";return c.length>0||l.length>0?v=`<span ${c.join(" ")}>${o}${l}</span>`:v=o,this.caret==="text"?v+='<span class="ML__text-caret"></span>':this.caret==="math"&&(v+='<span class="ML__caret"></span>'),v}tryCoalesceWith(e){if(this.svgBody||!this.value||e.svgBody||!e.value)return!1;let n=this.children&&this.children.length>0,r=e.children&&e.children.length>0;if(n||r)return!1;if(e.cssProperties||this.cssProperties){for(let d of["border","border-left","border-right","border-right-width","left","margin","margin-left","margin-right","padding","position","width"])if(e.cssProperties&&d in e.cssProperties||this.cssProperties&&d in this.cssProperties)return!1}let i=this.cssProperties?Object.keys(this.cssProperties).length:0,o=e.cssProperties?Object.keys(e.cssProperties).length:0;if(i!==o)return!1;if(i>0){for(let d of Object.keys(this.cssProperties))if(this.cssProperties[d]!==e.cssProperties[d])return!1}let l=this.classes.trim().replace(/\s+/g," ").split(" "),c=e.classes.trim().replace(/\s+/g," ").split(" ");if(l.length!==c.length)return!1;l.sort(),c.sort();for(let[d,f]of l.entries())if(f==="ML__vertical-separator"||f!==c[d])return!1;return this.value+=e.value,this.height=Math.max(this.height,e.height),this.depth=Math.max(this.depth,e.depth),this._width=this._width+e._width,this.maxFontSize=Math.max(this.maxFontSize,e.maxFontSize),this.italic=e.italic,!0}};function J4(t){if(!t||t.length===0)return[];t[0].children=J4(t[0].children);let e=[t[0]];for(let n=1;n<t.length;n++)e[e.length-1].tryCoalesceWith(t[n])||(t[n].children=J4(t[n].children),e.push(t[n]));return e}function D1(t){return t.children&&(t.children=J4(t.children)),t}function L1(t,e){if(!t)return new be(null,e);let n=new be(null,{classes:"ML__strut",type:"ignore"});n.setStyle("height",Math.max(0,t.height),"em");let r=[n];if(t.depth!==0){let i=new be(null,{classes:"ML__strut--bottom",type:"ignore"});i.setStyle("height",t.height+t.depth,"em"),i.setStyle("vertical-align",-t.depth,"em"),r.push(i)}return r.push(t),new be(r,q(N({},e),{type:"lift"}))}function ig(t){let e=dK(t)/2,n=new be(null,{maxFontSize:0});return n.height=e+.166,n.depth=e-.166,n.svgBody=t,n}function _K(t,e){var n;if(t.type==="latex"){t.height=.9,t.depth=.2,t._width=1;return}if(t.value){t.height=-1/0,t.depth=-1/0,t._width=0,t.skew=-1/0,t.italic=-1/0;for(let r=0;r<t.value.length;r++){let i=Hc(t.value.codePointAt(r),e);t.height=Math.max(t.height,i.height),t.depth=Math.max(t.depth,i.depth),t._width+=i.width,t.skew=i.skew,t.italic=i.italic}return}if(t.children&&t.children.length>0){let r=-1/0,i=-1/0,o=0;for(let l of t.children)l.height>r&&(r=l.height),l.depth>i&&(i=l.depth),o=Math.max(o,(n=l.maxFontSize)!=null?n:0);t.height=r,t.depth=i,t._width=t.children.reduce((l,c)=>l+c.width,0),t.maxFontSize=o}}function Hv(t){if(t=t.trim().replace(/ /g,"-"),t.length===0)throw new Error("Invalid empty attribute name");if(/[\x20\x09\x0a\x0c\x0d"'>/=\x00-\x1f]/.test(t))throw new Error(`Invalid attribute name "${t}"`);return t}function Rc(t){if(t=t.trim(),t.startsWith('"')&&t.endsWith('"')){if(/"/.test(t.slice(1,-1)))throw new Error(`Invalid attribute value: ${t}`);return t}if(t.startsWith("'")&&t.endsWith("'")){if(/'/.test(t.slice(1,-1)))throw new Error(`Invalid attribute value: ${t}`);return t}if(t.length===0)throw new Error("Invalid empty attribute value");return`"${t.replace(/"/g,"&quot;")}"`}function xK(t){if("individualShift"in t){let e=t.individualShift,n=e[0];if(n==null)return[null,0];let r=[n],i=-n.shift-n.box.depth,o=i;for(let l=1;l<e.length;l++){let c=e[l],d=-c.shift-o-c.box.depth,f=d-(n.box.height+n.box.depth);o=o+d,r.push(f),r.push(c),n=c}return[r,i]}if("top"in t){let e=t.top;for(let n of t.children)e-=typeof n=="number"?n:n.box.height+n.box.depth;return[t.children,e]}else{if("bottom"in t)return[t.children,-t.bottom];if("firstBaseline"in t){let e=t.firstBaseline[0];if(typeof e=="number")throw new Error("First child must be an element.");return[t.firstBaseline,-e.box.depth]}else if("shift"in t){let e=t.children[0];if(typeof e=="number")throw new Error("First child must be an element.");return[t.children,-e.box.depth-t.shift]}}return[null,0]}function wK(t){var e;let[n,r]=xK(t);if(!n)return[[],0,0];let i=new be(null,{classes:"ML__pstrut"}),o=0;for(let S of n)if(typeof S!="number"){let R=S.box;o=Math.max(o,R.maxFontSize,R.height)}o+=2,i.height=o,i.setStyle("height",o,"em");let l=[],c=r,d=r,f=r,p=0;for(let S of n){if(typeof S=="number")f+=S;else{let R=S.box,I=(e=S.classes)!=null?e:[],L=new be([i,R],{classes:I.join(" "),style:S.style});R.setStyle("height",R.height+R.depth,"em"),R.setStyle("display","inline-block"),L.setStyle("top",-o-f-R.depth,"em"),S.marginLeft&&L.setStyle("margin-left",S.marginLeft,"em"),S.marginRight&&L.setStyle("margin-right",S.marginRight,"em"),l.push(L),f+=R.height+R.depth,p=Math.max(p,L.width)}c=Math.min(c,f),d=Math.max(d,f)}l.forEach(S=>{S.softWidth=p});let y=new be(l,{classes:"ML__vlist"});if(y.softWidth=p,y.height=d,y.setStyle("height",d,"em"),c>=0)return[[new be(y,{classes:"ML__vlist-r"})],d,-c];let v=new be(new be(null),{classes:"ML__vlist"});v.height=-c,v.setStyle("height",-c,"em");let x=new be(8203,{classes:"ML__vlist-s",maxFontSize:0});return x.softWidth=0,x.height=0,x.depth=0,[[new be([y,x],{classes:"ML__vlist-r"}),new be(v,{classes:"ML__vlist-r"})],d,-c]}var mn=class extends be{constructor(t,e){var n;let[r,i,o]=wK(t);super(r.length===1?r[0]:r,{type:e?.type,classes:((n=e?.classes)!=null?n:"")+" ML__vlist-t"+(r.length===2?" ML__vlist-t2":"")}),this.height=i,this.depth=o,this.softWidth=r.reduce((l,c)=>Math.max(l,c.width),0)}};function EK(t,e){var n,r,i,o,l;let c=t.metrics,d=new be(e.base),f=(n=e.baseShift)!=null?n:0,p=(r=e.slant)!=null?r:0,y=0,v=0;e.above&&(y=(i=e.aboveShift)!=null?i:Math.max(c.bigOpSpacing1,c.bigOpSpacing3-e.above.depth)),e.below&&(v=(o=e.belowShift)!=null?o:Math.max(c.bigOpSpacing2,c.bigOpSpacing4-e.below.height));let x=null;if(e.below&&e.above){let S=c.bigOpSpacing5+e.below.height+e.below.depth+v+d.depth+f;x=new mn({bottom:S,children:[c.bigOpSpacing5,{box:e.below,marginLeft:-p,classes:["ML__center"]},v,{box:d,classes:["ML__center"]},y,{box:e.above,marginLeft:p,classes:["ML__center"]},c.bigOpSpacing5]}).wrap(t)}else if(e.below&&!e.above)x=new mn({top:d.height-f,children:[c.bigOpSpacing5,{box:e.below,marginLeft:-p,classes:["ML__center"]},v,{box:d,classes:["ML__center"]}]}).wrap(t);else if(!e.below&&e.above){let S=d.depth+f;x=new mn({bottom:S,children:[{box:d,classes:["ML__center"]},y,{box:e.above,marginLeft:p,classes:["ML__center"]},c.bigOpSpacing5]}).wrap(t)}else{let S=d.depth+f;x=new mn({bottom:S,children:[{box:d},c.bigOpSpacing5]}).wrap(t)}return new be(x,{type:(l=e.type)!=null?l:"op"})}var I3=7,qg=6,R1=5,eu=4,oh=3,Qr=2,ou=1,or=0,ws=class{constructor(t,e,n){this.id=t,this.sizeDelta=e,this.cramped=n;let r={"-4":2,"-3":1,0:0}[e];this.metrics=Object.keys(fE).reduce((i,o)=>q(N({},i),{[o]:fE[o][r]}),{})}getFontSize(t){return Math.max(1,t+this.sizeDelta)}get sup(){return _a[[or,ou,or,ou,Qr,oh,Qr,oh][this.id]]}get sub(){return _a[[or,or,or,or,Qr,Qr,Qr,Qr][this.id]]}get fracNum(){return _a[[or,ou,or,ou,Qr,oh,eu,R1][this.id]]}get fracDen(){return _a[[or,or,or,or,Qr,Qr,eu,eu][this.id]]}get cramp(){return _a[[or,or,Qr,Qr,eu,eu,qg,qg][this.id]]}get isTight(){return this.sizeDelta<0}},Qd={7:new ws(I3,0,!1),6:new ws(qg,0,!0),5:new ws(R1,0,!1),4:new ws(eu,0,!0),3:new ws(oh,-3,!1),2:new ws(Qr,-3,!0),1:new ws(ou,-4,!1),0:new ws(or,-4,!0)},_a=q(N({},Qd),{displaystyle:Qd[I3],textstyle:Qd[R1],scriptstyle:Qd[oh],scriptscriptstyle:Qd[ou]});function IM(t,e){var n;if(!t)return 0;let r={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:bh,bp:803/800,dd:1238/1157,pc:12,in:72.27,mu:10/18}[(n=t.unit)!=null?n:"pt"];if(Number.isFinite(e)){let i=10**e;return Math.round(t.dimension/bh*r*i)/i}return t.dimension*r}function BM(t,e){if(t===null)return 0;let n=IM(t)/bh;if(Number.isFinite(e)){let r=10**e;return Math.round(n*r)/r}return n}function Gv(t){var e;return`${t.dimension}${(e=t.unit)!=null?e:"pt"}`}function SK(t){let e=Gv(t.glue);return t.grow&&t.grow.dimension!==0&&(e+=` plus ${Gv(t.grow)}`),t.shrink&&t.shrink.dimension!==0&&(e+=` minus ${Gv(t.shrink)}`),e}function Un(t){var e,n;if(t==null)return null;let r="";if("dimension"in t&&(r=`${t.dimension}${(e=t.unit)!=null?e:"pt"}`),"glue"in t&&(r=SK(t)),"number"in t)if(!("base"in t)||t.base==="decimal")r=Number(t.number).toString();else if(t.base==="alpha")r=`\`${String.fromCodePoint(t.number)}`;else{let i=Math.round(t.number)>>>0;t.base==="hexadecimal"?(r=Number(i).toString(16).toUpperCase(),i<=255?r=r.padStart(2,"0"):i<=65535?r=r.padStart(4,"0"):i<=16777215?r=r.padStart(6,"0"):r=r.padStart(8,"0"),r=`"${r}`):t.base==="octal"&&(r=Number(i).toString(8),i<=63?r=r.padStart(2,"0"):i<=30583?r=r.padStart(4,"0"):r=r.padStart(8,"0"),r=`'${r}`)}return"register"in t&&("factor"in t&&(t.factor===-1?r="-":t.factor!==1&&(r=Number(t.factor).toString())),"global"in t&&t.global&&(r+="\\global"),r+=`\\${t.register}`),"string"in t&&(r=t.string),(n=t.relax)!=null&&n&&(r+="\\relax"),r}function ba(t,e){return t==null?null:"number"in t?q(N({},t),{number:t.number*e}):"register"in t?"factor"in t&&t.factor?q(N({},t),{factor:t.factor*e}):q(N({},t),{factor:e}):"dimension"in t?q(N({},t),{dimension:t.dimension*e}):"glue"in t?t.shrink&&t.grow?{glue:ba(t.glue,e),shrink:ba(t.shrink,e),grow:ba(t.grow,e)}:t.shrink?{glue:ba(t.glue,e),shrink:ba(t.shrink,e)}:t.grow?{glue:ba(t.glue,e),grow:ba(t.grow,e)}:{glue:ba(t.glue,e)}:null}var kK={"p@":{dimension:1},"z@":{dimension:0},maxdimen:{dimension:16383.99999},hfuzz:{dimension:.1},vfuzz:{dimension:.1},overfullrule:{dimension:5},hsize:{dimension:6.5,unit:"in"},vsize:{dimension:8.9,unit:"in"},parindent:{dimension:20},maxdepth:{dimension:4},splitmaxdepth:{register:"maxdimen"},boxmaxdepth:{register:"maxdimen"},delimitershortfall:{dimension:5},nulldelimiterspace:{dimension:1.2,unit:"pt"},scriptspace:{dimension:.5},topskip:{dimension:10},splittopskip:{dimension:10},normalbaselineskip:{dimension:12},normallineskip:{dimension:1},normallineskiplimit:{dimension:0},jot:{dimension:3},doublerulesep:{dimension:2},arrayrulewidth:{dimension:.4},arraycolsep:{dimension:5},fboxsep:{dimension:3},fboxrule:{dimension:.4},"z@skip":{glue:{dimension:0},shrink:{dimension:0},grow:{dimension:0}},hideskip:{glue:{dimension:-1e3},grow:{dimension:1,unit:"fill"}},"@flushglue":{glue:{dimension:0},grow:{dimension:1,unit:"fill"}},parskip:{glue:{dimension:0},grow:{dimension:1}},abovedisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},abovedisplayshortskip:{glue:{dimension:0},grow:{dimension:3}},belowdisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},belowdisplayshortskip:{glue:{dimension:7},grow:{dimension:3},shrink:{dimension:4}},parfillskip:{glue:{dimension:0},grow:{dimension:1,unit:"fil"}},thinmuskip:{glue:{dimension:3,unit:"mu"}},medmuskip:{glue:{dimension:4,unit:"mu"},grow:{dimension:2,unit:"mu"},shrink:{dimension:4,unit:"mu"}},thickmuskip:{glue:{dimension:5,unit:"mu"},grow:{dimension:5,unit:"mu"}},smallskipamount:{glue:{dimension:3},grow:{dimension:1},shrink:{dimension:1}},medskipamount:{glue:{dimension:6},grow:{dimension:2},shrink:{dimension:3}},bigskipamount:{glue:{dimension:12},grow:{dimension:2},shrink:{dimension:4}},pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:1,month:new Date().getMonth()+1,day:new Date().getDate(),year:new Date().getFullYear()};function OM(){return N({},kK)}function NM(){return{registers:OM(),smartFence:!1,renderPlaceholder:void 0,placeholderSymbol:"▢",letterShapeStyle:Qe.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,colorMap:T1,backgroundColorMap:A3,getMacro:t=>MM(t,L3())}}var lt=class PM{constructor(e,n){var r,i,o,l,c,d,f,p,y,v,x,S,R,I,L;let j;e!=null&&e.parent?(this.parent=e.parent,j=e.parent,this.registers={}):(j=N(N({},NM()),(r=e?.from)!=null?r:{}),this.registers=j.registers),j.atomIdsSettings&&(this.atomIdsSettings=N({},j.atomIdsSettings)),this.renderPlaceholder=j.renderPlaceholder,this.isPhantom=(l=(o=e?.isPhantom)!=null?o:(i=this.parent)==null?void 0:i.isPhantom)!=null?l:!1,this.letterShapeStyle=j.letterShapeStyle,this.minFontScale=j.minFontScale,this.maxMatrixCols=j.maxMatrixCols,n!=null&&n.color&&n.color!=="none"?this.color=n.color:this.color=(d=(c=this.parent)==null?void 0:c.color)!=null?d:"",n!=null&&n.backgroundColor&&n.backgroundColor!=="none"?this.backgroundColor=n.backgroundColor:this.backgroundColor=(p=(f=this.parent)==null?void 0:f.backgroundColor)!=null?p:"",n!=null&&n.fontSize&&n.fontSize!=="auto"&&n.fontSize!==((y=this.parent)==null?void 0:y.size)?this.size=n.fontSize:this.size=(x=(v=this.parent)==null?void 0:v.size)!=null?x:R3;let z=(R=(S=this.parent)==null?void 0:S.mathstyle)!=null?R:_a.displaystyle;if(typeof e?.mathstyle=="string"){if(j instanceof PM)switch(e.mathstyle){case"cramp":z=z.cramp;break;case"superscript":z=z.sup;break;case"subscript":z=z.sub;break;case"numerator":z=z.fracNum;break;case"denominator":z=z.fracDen;break}switch(e.mathstyle){case"textstyle":z=_a.textstyle;break;case"displaystyle":z=_a.displaystyle;break;case"scriptstyle":z=_a.scriptstyle;break;case"scriptscriptstyle":z=_a.scriptscriptstyle;break}}this.mathstyle=z,this.smartFence=j.smartFence,this.placeholderSymbol=j.placeholderSymbol,this.colorMap=(I=j.colorMap)!=null?I:G=>G,this.backgroundColorMap=(L=j.backgroundColorMap)!=null?L:G=>G,this.getMacro=j.getMacro,this.parent!==void 0||this.registers}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if(typeof this.atomIdsSettings.seed!="number")return`${Date.now().toString(36).slice(-2)}${Math.floor(Math.random()*1e5).toString(36)}`;let e=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,e}scale(e){return e*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return this.mathstyle.id===I3||this.mathstyle.id===qg}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get metrics(){return this.mathstyle.metrics}get effectiveFontSize(){return Math.max(H4[Math.max(1,this.size+this.mathstyle.sizeDelta)],this.minFontScale)}getRegister(e){var n;if((n=this.registers)!=null&&n[e])return this.registers[e];if(this.parent)return this.parent.getRegister(e)}getRegisterAsNumber(e){let n=this.getRegister(e);if(typeof n=="number")return n;if(typeof n=="string")return Number(n)}getRegisterAsGlue(e){var n;if((n=this.registers)!=null&&n[e]){let r=this.registers[e];return typeof r=="object"&&"glue"in r?r:typeof r=="object"&&"dimension"in r?{glue:{dimension:r.dimension}}:typeof r=="number"?{glue:{dimension:r}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(e)}getRegisterAsEm(e,n){return BM(this.getRegisterAsDimension(e),n)}getRegisterAsDimension(e){var n;if((n=this.registers)!=null&&n[e]){let r=this.registers[e];return typeof r=="object"&&"glue"in r?r.glue:typeof r=="object"&&"dimension"in r?r:typeof r=="number"?{dimension:r}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(e)}setRegister(e,n){if(n===void 0){delete this.registers[e];return}this.registers[e]=n}evaluate(e){if(!e||!("register"in e))return e;let n=this;if("global"in e&&e.global)for(;n.parent;)n=n.parent;let r=1;"factor"in e&&e.factor!==1&&e.factor!==void 0&&(r=e.factor);let i=n.getRegister(e.register);if(i===void 0)return;if(typeof i=="string")return{string:Number(i).toString()+i};if(typeof i=="number")return{number:r*i};let o=n.evaluate(i);if(o!==void 0)return"string"in o?{string:Number(i).toString()+o.string}:"number"in o?{number:r*o.number}:"dimension"in o?q(N({},o),{dimension:r*o.dimension}):"glue"in o?q(N({},o),{glue:q(N({},o.glue),{dimension:r*o.glue.dimension}),shrink:o.shrink?q(N({},o.shrink),{dimension:r*o.shrink.dimension}):void 0,grow:o.grow?q(N({},o.grow),{dimension:r*o.grow.dimension}):void 0}):e}toDimension(e){let n=this.evaluate(e);if(n===void 0)return null;if("dimension"in n)return n;if("glue"in n)return n.glue;if("number"in n)return{dimension:n.number};if("string"in n){let r=parseFloat(n.string),i=n.string.match(/(mm|cm|ex|px|em|bp|dd|pc|in|mu)$/);return i?{dimension:r,unit:i[0]}:{dimension:r}}return null}toEm(e,n){if(e===null)return 0;let r=this.toDimension(e);return r===null?0:IM(r,n)/bh}toNumber(e){if(e===null)return null;let n=this.evaluate(e);return n===void 0?null:"number"in n?n.number:"dimension"in n?n.dimension:"glue"in n?n.glue.dimension:"string"in n?Number(n.string):null}toColor(e){var n,r;if(e===null)return null;let i=this.evaluate(e);return i===void 0?null:"string"in i?(r=(n=this.colorMap)==null?void 0:n.call(this,i.string))!=null?r:i.string:null}toBackgroundColor(e){var n,r;if(e===null)return null;let i=this.evaluate(e);return i===void 0?null:"string"in i?(r=(n=this.backgroundColorMap)==null?void 0:n.call(this,i.string))!=null?r:i.string:null}},vh=["body","above","below","superscript","subscript"];function Yl(t){return typeof t=="string"&&vh.includes(t)}function Ao(t){return t!==void 0&&Array.isArray(t)&&t.length===2}var re=class co{constructor(e){this.isRoot=!1;var n,r,i,o,l,c,d;this.type=e.type,typeof e.value=="string"&&(this.value=e.value),this.command=(r=(n=e.command)!=null?n:this.value)!=null?r:"",this.mode=(i=e.mode)!=null?i:"math",e.isFunction&&(this.isFunction=!0),(e.isRoot||this.type==="root")&&(this.isRoot=!0),e.limits&&(this.subsupPlacement=e.limits),this.style=N({},(o=e.style)!=null?o:{}),this.displayContainsHighlight=(l=e.displayContainsHighlight)!=null?l:!1,this.captureSelection=(c=e.captureSelection)!=null?c:!1,this.skipBoundary=(d=e.skipBoundary)!=null?d:!1,e.verbatimLatex!==void 0&&e.verbatimLatex!==null&&(this.verbatimLatex=e.verbatimLatex),e.args&&(this.args=e.args),e.body&&(this.body=e.body),this._changeCounter=0}static createBox(e,n,r){var i;if(!n)return null;let o=CK(n),l=[];for(let d of o){let f=d[0].style,p=MK(e,d,{style:{color:f.color,backgroundColor:f.backgroundColor,fontSize:f.fontSize}});p&&l.push(p)}if(l.length===0)return null;let c=((i=r?.classes)!=null?i:"").trim();return l.length===1&&!c&&!(r!=null&&r.type)?l[0].wrap(e):new be(l,{classes:c,type:r?.type}).wrap(e)}static serialize(e,n){return ei.serialize(e,n)}static commonAncestor(e,n){if(e===n||e.parent===n.parent)return e.parent;let r=new WeakSet,{parent:i}=e;for(;i;)r.add(i),i=i.parent;for(i=n.parent;i;){if(r.has(i))return i;i=i.parent}}static fromJson(e){return typeof e=="string"?new co({type:"mord",value:e,mode:"math"}):new co(e)}toJson(){if(this._json)return this._json;let e={};if(this.type&&(e.type=this.type),this.mode!=="math"&&(e.mode=this.mode),this.command&&this.command!==this.value&&(e.command=this.command),this.value!==void 0&&(e.value=this.value),this.style&&Object.keys(this.style).length>0&&(e.style=N({},this.style)),this.verbatimLatex!==void 0&&(e.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(e.explicitSubsupPlacement=!0),this.isFunction&&(e.isFunction=!0),this.displayContainsHighlight&&(e.displayContainsHighlight=!0),this.skipBoundary&&(e.skipBoundary=!0),this.captureSelection&&(e.captureSelection=!0),this.args&&(e.args=AK(this.args)),this._branches)for(let n of Object.keys(this._branches))this._branches[n]&&(e[n]=this._branches[n].filter(r=>r.type!=="first").map(r=>r.toJson()));return e.type==="mord"&&Object.keys(e).length===2&&"value"in e?e.value:(this._json=e,e)}get changeCounter(){return this.parent?this.parent.changeCounter:this._changeCounter}set isDirty(e){e&&(this._json=void 0,this.parent||this._changeCounter++,"verbatimLatex"in this&&(this.verbatimLatex=void 0),this._children=void 0,this.parent&&(this.parent.isDirty=!0))}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let n=Jn(this.command,this.mode);return n!=null&&n.serialize?n.serialize(this,e):this.body&&this.command?Ze([Bt(this.command,this.bodyToLatex(e)),this.supsubToLatex(e)]):this.body?Ze([this.bodyToLatex(e),this.supsubToLatex(e)]):!this.value||this.value==="​"?"":this.command}bodyToLatex(e){var n;let r=(n=e.defaultMode)!=null?n:this.mode==="math"?"math":"text";return ei.serialize(this.body,q(N({},e),{defaultMode:r}))}aboveToLatex(e){return ei.serialize(this.above,e)}belowToLatex(e){return ei.serialize(this.below,e)}supsubToLatex(e){let n="";if(e=q(N({},e),{defaultMode:"math"}),this.branch("subscript")!==void 0){let r=ei.serialize(this.subscript,e);r.length===0?n+="_{}":r.length===1?/^[0-9]$/.test(r)?n+=`_${r}`:n+=`_{${r}}`:n+=`_{${r}}`}if(this.branch("superscript")!==void 0){let r=ei.serialize(this.superscript,e);r.length===0?n+="^{}":r.length===1?r==="′"?n+="^\\prime ":r==="″"?n+="^\\doubleprime ":/^[0-9]$/.test(r)?n+=`^${r}`:n+=`^{${r}}`:n+=`^{${r}}`}return n}get treeDepth(){let e=1,n=this.parent;for(;n;)n=n.parent,e+=1;return e}get inCaptureSelection(){let e=this;for(;e;){if(e.captureSelection)return!0;e=e.parent}return!1}get parentPrompt(){let e=this.parent;for(;e;){if(e.type==="prompt"&&!e.captureSelection)return e;e=e.parent}return null}branch(e){if(Yl(e)&&this._branches)return this._branches[e]}get branches(){if(!this._branches)return[];let e=[];for(let n of vh)this._branches[n]&&e.push(n);return e}createBranch(e){return Yl(e),Yl(e)?(this._branches?this._branches[e]||(this._branches[e]=[this.makeFirstAtom(e)]):this._branches={[e]:[this.makeFirstAtom(e)]},this.isDirty=!0,this._branches[e]):[]}get row(){return Ao(this.parentBranch)?this.parentBranch[0]:-1}get col(){return Ao(this.parentBranch)?this.parentBranch[1]:-1}get body(){var e;return(e=this._branches)==null?void 0:e.body}set body(e){this.setChildren(e,"body")}get superscript(){var e;return(e=this._branches)==null?void 0:e.superscript}set superscript(e){this.setChildren(e,"superscript")}get subscript(){var e;return(e=this._branches)==null?void 0:e.subscript}set subscript(e){this.setChildren(e,"subscript")}get above(){var e;return(e=this._branches)==null?void 0:e.above}set above(e){this.setChildren(e,"above")}get below(){var e;return(e=this._branches)==null?void 0:e.below}set below(e){this.setChildren(e,"below")}applyStyle(e,n){this.isDirty=!0,n!=null&&n.unstyledOnly?(e.color&&!this.style.color&&(this.style.color=e.color),e.backgroundColor&&!this.style.backgroundColor&&(this.style.backgroundColor=e.backgroundColor),e.fontFamily&&!this.style.fontFamily&&(this.style.fontFamily=e.fontFamily),e.fontShape&&!this.style.fontShape&&(this.style.fontShape=e.fontShape),e.fontSeries&&!this.style.fontSeries&&(this.style.fontSeries=e.fontSeries),e.fontSize&&!this.style.fontSize&&(this.style.fontSize=e.fontSize),e.variant&&!this.style.variant&&(this.style.variant=e.variant),e.variantStyle&&!this.style.variantStyle&&(this.style.variantStyle=e.variantStyle)):this.style=N(N({},this.style),e),this.style.fontFamily==="none"&&delete this.style.fontFamily,this.style.fontShape==="auto"&&delete this.style.fontShape,this.style.fontSeries==="auto"&&delete this.style.fontSeries,this.style.color==="none"&&(delete this.style.color,delete this.style.verbatimColor),this.style.backgroundColor==="none"&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),this.style.fontSize==="auto"&&delete this.style.fontSize;for(let r of this.children)r.applyStyle(e,n)}getInitialBaseElement(){var e,n,r;return this.hasEmptyBranch("body")?this:((e=this.body)==null||e[0].type,(r=(n=this.body[1])==null?void 0:n.getInitialBaseElement())!=null?r:this)}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){return this.type==="leftright"||this.type==="genfrac"||this.type==="subsup"||this.type==="delim"||this.type==="array"||this.type==="surd"?!1:this.getFinalBaseElement().type==="mord"}hasEmptyBranch(e){let n=this.branch(e);return n?(n.length>0,n[0].type,n.length===1):!0}setChildren(e,n){var r;if(!e||(Yl(n),!Yl(n)))return;let i=((r=e[0])==null?void 0:r.type)==="first"?[...e]:[this.makeFirstAtom(n),...e];this._branches?this._branches[n]=i:this._branches={[n]:i};for(let o of e)o.parent=this,o.parentBranch=n;this.isDirty=!0}makeFirstAtom(e){let n=new co({type:"first",mode:this.mode});return n.parent=this,n.parentBranch=e,n}addChild(e,n){e.type,this.createBranch(n).push(e),this.isDirty=!0,e.parent=this,e.parentBranch=n}addChildBefore(e,n){n.parentBranch;let r=this.createBranch(n.parentBranch);r.splice(r.indexOf(n),0,e),this.isDirty=!0,e.parent=this,e.parentBranch=n.parentBranch}addChildAfter(e,n){n.parentBranch;let r=this.createBranch(n.parentBranch);r.splice(r.indexOf(n)+1,0,e),this.isDirty=!0,e.parent=this,e.parentBranch=n.parentBranch}addChildren(e,n){let r=this.createBranch(n);for(let i of e)i.parent=this,i.parentBranch=n,r.push(i);this.isDirty=!0}addChildrenAfter(e,n){e.length===0||e[0].type,n.parentBranch;let r=this.createBranch(n.parentBranch);r.splice(r.indexOf(n)+1,0,...e),this.isDirty=!0;for(let i of e)i.parent=this,i.parentBranch=n.parentBranch;return e[e.length-1]}removeBranch(e){let n=this.branch(e);if(Yl(e)&&(this._branches[e]=void 0),!n)return[];for(let o of n)o.parent=void 0,o.parentBranch=void 0;n[0].type;let[r,...i]=n;return this.isDirty=!0,i}removeChild(e){if(e.parent,e.type==="first")return;let n=this.branch(e.parentBranch),r=n.indexOf(e);n.splice(r,1),this.isDirty=!0,e.parent=void 0,e.parentBranch=void 0}get siblings(){return this.parent?this.parent.branch(this.parentBranch):[]}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:e}=this;return e[e.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return this.siblings.length===1}get leftSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)-1]}get rightSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.hasChildren,this.children[0]}get lastChild(){this.hasChildren;let{children:e}=this;return e[e.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let e=[];for(let n of vh)if(this._branches[n])for(let r of this._branches[n])e.push(...r.children),e.push(r);return this._children=e,e}render(e){if(this.type==="first"&&!e.atomIdsSettings)return null;let n=Jn(this.command,this.mode);if(n!=null&&n.render)return n.render(this,e);let r=new lt({parent:e},this.style),i=this.createBox(r,{classes:this.parent?"":"ML__base"});return i?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(i=this.attachSupsub(r,{base:i})),i.wrap(r)):null}attachSupsub(e,n){var r;let i=n.base,o=this.superscript,l=this.subscript;if(!o&&!l)return i;let c=null,d=null,f=(r=n.isCharacterBox)!=null?r:this.isCharacterBox(),p=0;if(o){let R=new lt({parent:e,mathstyle:"superscript"});c=co.createBox(R,o),f||(p=i.height-e.metrics.supDrop*R.scalingFactor)}let y=0;if(l){let R=new lt({parent:e,mathstyle:"subscript"});d=co.createBox(R,l),f||(y=i.depth+e.metrics.subDrop*R.scalingFactor)}let v;e.isDisplayStyle?v=e.metrics.sup1:e.isCramped?v=e.metrics.sup3:v=e.metrics.sup2;let x=.5/bh/e.scalingFactor,S=null;if(d&&c){p=Math.max(p,v,c.depth+.25*e.metrics.xHeight),y=Math.max(y,e.metrics.sub2);let R=e.metrics.defaultRuleThickness;if(p-c.depth-(d.height-y)<4*R){y=4*R-(p-c.depth)+d.height;let L=.8*e.metrics.xHeight-(p-c.depth);L>0&&(p+=L,y-=L)}let I=this.type==="extensible-symbol"&&i.italic?-i.italic:0;S=new mn({individualShift:[{box:d,shift:y,marginLeft:I},{box:c,shift:-p}]}).wrap(e)}else d&&!c?(y=Math.max(y,e.metrics.sub1,d.height-.8*Ks),S=new mn({shift:y,children:[{box:d,marginRight:x,marginLeft:this.isCharacterBox()?-i.italic:0}]})):!d&&c&&(p=Math.max(p,v,c.depth+.25*Ks),S=new mn({shift:-p,children:[{box:c,marginRight:x}]}));return new be([i,new be(S,{caret:this.caret,isSelected:this.isSelected,classes:"ML__msubsup"})],{type:n.type})}attachLimits(e,n){let r=this.superscript?co.createBox(new lt({parent:e,mathstyle:"superscript"},this.style),this.superscript):null,i=this.subscript?co.createBox(new lt({parent:e,mathstyle:"subscript"},this.style),this.subscript):null;return!r&&!i?n.base.wrap(e):EK(e,q(N({},n),{above:r,below:i}))}bind(e,n){if(!n||e.isPhantom||this.value==="​")return n;let r=this.parent;for(;r&&!r.captureSelection;)r=r.parent;return r!=null&&r.captureSelection||(this.id||(this.id=e.makeID()),n.atomID=this.id),n}createBox(e,n){var r,i,o,l;let c=(r=this.value)!=null?r:this.body,d=(i=n?.boxType)!=null?i:Q4(this.type),f=(o=n?.classes)!=null?o:"";this.mode==="text"&&(f+=" ML__text");let p=typeof c=="string"||c===void 0?new be(c??null,{type:d,isSelected:this.isSelected,mode:this.mode,maxFontSize:e.scalingFactor,style:q(N({variant:"normal"},this.style),{fontSize:Math.max(1,e.size+e.mathstyle.sizeDelta)}),letterShapeStyle:e.letterShapeStyle,classes:f}):(l=co.createBox(e,c,{type:d,classes:f}))!=null?l:new be(null);return e.isTight&&(p.isTight=!0),(this.mode!=="math"||this.style.variant==="main")&&(p.italic=0),p.right=p.italic,this.bind(e,p),this.caret&&!this.superscript&&!this.subscript&&(p.caret=this.caret),p}isDigit(){var e;return this.type==="mord"&&this.value?/^[\d,\.]$/.test(this.value):this.type==="group"&&((e=this.body)==null?void 0:e.length)===2?this.body[0].type==="first"&&this.body[1].value===",":!1}asDigit(){var e;return this.type==="mord"&&this.value&&/^[\d,\.]$/.test(this.value)?this.value:this.type==="group"&&((e=this.body)==null?void 0:e.length)===2&&this.body[0].type==="first"&&this.body[1].value===","?".":""}};function CK(t){let e,n=[],r=[];for(let i of t)if(i.type==="first"&&r.push(i),!e&&!i.style)r.push(i);else{let o=i.style;e&&o.color===e.color&&o.backgroundColor===e.backgroundColor&&o.fontSize===e.fontSize?r.push(i):(r.length>0&&n.push(r),r=[i],e=o)}return r.length>0&&n.push(r),n}function MK(t,e,n){var r,i,o,l,c;if(!e||e.length===0)return null;let d=new lt({parent:t},n.style),f=!((r=d.atomIdsSettings)!=null&&r.groupNumbers),p=[];if(e.length===1){let v=e[0],x=v.render(d);x&&(f&&v.isSelected&&x.selected(!0),p=[x])}else{let v="",x=!0;for(let S of e){(i=d.atomIdsSettings)!=null&&i.groupNumbers&&v&&(x&&S.isDigit()||!x&&Wv(S))&&(d.atomIdsSettings.overrideID=v);let R=S.render(d);d.atomIdsSettings&&(d.atomIdsSettings.overrideID=void 0),R&&((o=d.atomIdsSettings)!=null&&o.groupNumbers&&((S.isDigit()||Wv(S))&&(!v||x!==S.isDigit())&&(x=S.isDigit(),v=(l=S.id)!=null?l:""),v&&(!(S.isDigit()||Wv(S))||!S.hasEmptyBranch("superscript")||!S.hasEmptyBranch("subscript"))&&(v="")),f&&S.isSelected&&R.selected(!0),p.push(R))}}if(p.length===0)return null;let y=new be(p,q(N({isTight:d.isTight},n),{type:(c=n.type)!=null?c:"lift"}));return y.isSelected=p.every(v=>v.isSelected),y.wrap(d)}function Wv(t){return t.mode==="text"}function AK(t){return t.map(e=>e===null?"<null>":Array.isArray(e)&&e[0]instanceof re?{atoms:e.map(n=>n.toJson())}:typeof e=="object"&&"group"in e?{group:e.group.map(n=>n.toJson())}:e)}var Dh=class zM extends re{constructor(e,n,r){super({type:"text",command:e,mode:"text",displayContainsHighlight:!0}),this.value=n,this.verbatimLatex=n,this.applyStyle(r)}static fromJson(e){return new zM(e.command,e.value,e.style)}render(e){let n=this.createBox(e);return this.caret&&(n.caret=this.caret),n}_serialize(e){var n;return(n=this.verbatimLatex)!=null?n:AM("text",this.value.codePointAt(0))}};function TK(t,e){if(t.direction===e.direction){let n=t.ranges.length;if(e.ranges.length===n){let r=0;for(;r<n&&DK(t.ranges[r],e.ranges[r])==="equal";)r++;return r===n?"equal":"different"}}return"different"}function DK(t,e){return t[0]===e[0]&&t[1]===e[1]?"equal":"different"}function Zn(t){let e=1/0,n=-1/0;for(let r of t.ranges)e=Math.min(e,r[0],r[1]),n=Math.max(n,r[0],r[1]);return[e,n]}function Ds(t){return typeof t=="number"&&!Number.isNaN(t)}function jg(t){return Array.isArray(t)&&t.length===2}function ag(t){return t!=null&&typeof t=="object"&&"ranges"in t&&Array.isArray(t.ranges)}function LK(t,e){let n=t.at(e),r;if(n){r=n.mode;let i=n.parent;for(;!r&&i;)i&&(r=i.mode),i=i.parent}return r}function RK(t,e){if(!e)return"";if(typeof e=="string")return e;if(!t||e.after===void 0)return e.value;let n=!1,r=!1,i=!1,o=!1,l=!1,c=!1,d=!1,f=!1,p=!1,y=!1,v=!1,x=!1,S=!1,R=!1,I=!1,L=t[0],j=0;for(;L!=null&&L.type&&/^(subsup|placeholder)$/.test(L.type);)j+=1,L=t[j];return n=!L||L.type==="first",L&&(R=L.mode==="text",r=!R&&L.type==="mord"&&$4.test(L.value),i=!R&&L.type==="mord"&&/\d+$/.test(L.value),o=!R&&L.isFunction,l=L.type==="genfrac",c=L.type==="surd",d=L.type==="mbin",f=L.type==="mrel",p=L.type==="mop"||L.type==="operator"||L.type==="extensible-symbol",y=L.type==="mpunct"||L.type==="minner",v=L.type==="array",x=L.type==="mopen",S=L.type==="mclose"||L.type==="leftright",I=L.type==="space"),e.after.includes("nothing")&&n||e.after.includes("letter")&&r||e.after.includes("digit")&&i||e.after.includes("function")&&o||e.after.includes("frac")&&l||e.after.includes("surd")&&c||e.after.includes("binop")&&d||e.after.includes("relop")&&f||e.after.includes("operator")&&p||e.after.includes("punct")&&y||e.after.includes("array")&&v||e.after.includes("openfence")&&x||e.after.includes("closefence")&&S||e.after.includes("text")&&R||e.after.includes("space")&&I?e.value:""}function B3(t,e,n){return n?RK(t,n[e]):""}var VM={"&":"\\&","%":"\\%",$:"\\$","''":"^{\\doubleprime}","'''":"^{\\prime\\prime\\prime}","''''":"^{\\prime\\prime\\prime\\prime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","∞":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"∑":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","∆":"\\differentialD","∂":"\\differentialD",sin:"\\sin",cos:"\\cos",tan:"\\tan",arccos:"\\arccos",arcsin:"\\arcsin",arctan:"\\arctan",arctg:"\\operatorname{arctg}",arcsec:"\\operatorname{arcsec}",arccsc:"\\operatorname{arccsc}",arsinh:"\\operatorname{arsinh}",arccosh:"\\operatorname{arccosh}",arcosh:"\\operatorname{arcosh}",artanh:"\\operatorname{artanh}",arctanh:"\\operatorname{arctanh}",arcsech:"\\operatorname{arcsech}",arccsch:"\\operatorname{arccsch}",ch:"\\operatorname{ch}",cosec:"\\operatorname{cosec}",cosh:"\\cosh",cot:"\\cot",cotg:"\\operatorname{cotg}",coth:"\\coth",csc:"\\csc",ctg:"\\operatorname{ctg}",cth:"\\operatorname{cth}",sec:"\\sec",sech:"\\operatorname{sech}",sinh:"\\sinh",sh:"\\operatorname{sh}",tanh:"\\tanh",tg:"\\operatorname{tg}",th:"\\operatorname{th}",arg:"\\arg",lg:"\\lg",lb:"\\operatorname{lb}",log:"\\log_{#?}",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?\\to#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},sint:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\sin t"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\mathbb{Z}",QQ:"\\mathbb{Q}",RR:"\\mathbb{R}",CC:"\\mathbb{C}",xx:"\\times","+-":"\\pm","≠":"\\ne","!=":"\\ne","≥":"\\ge",">=":"\\ge","≤":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","≈":"\\approx","?=":"\\questeq","÷":"\\div","¬":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},µ:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",Ω:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\bmod{#?}","(mod":"\\pmod{#?}",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\gcd",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},ft:{after:"nothing+digit+operator",value:"\\operatorname{ft}"},inch:{after:"nothing+digit+operator",value:"\\operatorname{inch}"},mi:{after:"nothing+digit+operator",value:"\\operatorname{mi}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","-->...":"\\longrightarrow\\cdots","->":"\\to","|->":"\\mapsto","-->":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\iff","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","*":"\\cdot","**":"\\star","***":"\\ast","//":"\\slash","\\\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceil","~|":"\\rceil",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail",times:"\\times",of:"\\circ",infinity:"\\infty",defint:"\\int_{#?}^{#?}",approaches:"\\to",ceil:"\\left\\lceil#?\\right\\rceil",floor:"\\left\\lfloor#?\\right\\rfloor",union:"\\cup",asterisk:"\\ast",frac:"\\frac{#?}{#?}",cbrt:"\\sqrt[3]{#?}",nthroot:"\\sqrt[#?]{#?}"};function Z4(t,e){var n;let r=(n=e?.format)!=null?n:"auto";return r==="auto"&&([r,t]=IK(t)),r==="ascii-math"?(t=t.replace(/\u2061/gu,""),t=t.replace(/\u3016/gu,"{"),t=t.replace(/\u3017/gu,"}"),t=t.replace(/([^\\])sinx/g,"$1\\sin x"),t=t.replace(/([^\\])cosx/g,"$1\\cos x "),t=t.replace(/\u2013/g,"-"),["ascii-math",Ir(t,{inlineShortcuts:e?.inlineShortcuts})]):["latex",t]}function Ir(t,e){var n;if(t=t.trim(),!t)return"";let r=(n=e.inlineShortcuts)!=null?n:VM;if(t.startsWith("^")||t.startsWith("_")){let{match:c,rest:d}=$l(t.slice(1),{inlineShortcuts:r,noWrap:!0});return`${t[0]}{${c}}${Ir(d,e)}`}let i=t.match(/^(sqrt|\u221A)(.*)/);if(i){let{match:c,rest:d}=$l(i[2],{inlineShortcuts:r,noWrap:!0});return`\\sqrt{${c??"\\placeholder{}"}}${Ir(d,e)}`}if(i=t.match(/^(\\cbrt|\u221B)(.*)/),i){let{match:c,rest:d}=$l(i[2],{inlineShortcuts:r,noWrap:!0});return`\\sqrt[3]{${c??"\\placeholder{}"}}${Ir(d,e)}`}if(i=t.match(/^abs(.*)/),i){let{match:c,rest:d}=$l(i[1],{inlineShortcuts:r,noWrap:!0});return`\\left|${c??"\\placeholder{}"}\\right|${Ir(d,e)}`}if(i=t.match(/^["”“](.*?)["”“](.*)/),i)return`\\text{${i[1]}}${Ir(i[2],e)}`;if(i=t.match(/^([^a-zA-Z0-9\(\{\[\_\^\\\s"]+)(.*)/),i)return`${_E(i[1],r)}${Ir(i[2],e)}`;if(/^([fgh])[^a-zA-Z]/.test(t)){let{rest:c,match:d}=$l(t.slice(1),{inlineShortcuts:r,noWrap:!0}),f="";return t[1]==="("?f=`${t[0]}\\left(${d}\\right)`:f=t[0]+d,f+Ir(c,e)}if(i=t.match(/^([a-zA-Z]+)(.*)/),i)return _E(i[1],r)+Ir(i[2],e);let{match:o,rest:l}=$l(t,{inlineShortcuts:r,noWrap:!0});if(o&&l[0]==="/"){let c=$l(l.slice(1),{inlineShortcuts:r,noWrap:!0});if(c.match)return`\\frac{${o}}{${c.match}}${Ir(c.rest,e)}`}else return t.startsWith("(")?"\\left("+o+"\\right)"+Ir(l,e):o+Ir(l,e);return i=t.match(/^(\s+)(.*)$/),i?" "+Ir(i[2],e):t}var vE={"[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace"};function $l(t,e){var n,r;let i="";t=t.trim();let o=t,l=t.charAt(0),c={"(":")","{":"}","[":"]"}[l];if(c){let d=1,f=1;for(;f<t.length&&d>0;)t[f]===l&&d++,t[f]===c&&d--,f++;if(d===0){let p=Ir(t.substring(1,f-1),e);e.noWrap&&l==="("?i=p:i=`\\left${(n=vE[l])!=null?n:l}${p}\\right${(r=vE[c])!=null?r:c}`,o=t.slice(Math.max(0,f))}else i=t.substring(1,f),o=""}else{let d=t.match(/^([a-zA-Z]+)/);if(d){let f=B3(null,t,e.inlineShortcuts);if(f)return f=f.replace("_{#?}",""),f=f.replace("^{#?}",""),{match:f,rest:t.slice(f.length)}}if(d=t.match(/^([a-zA-Z])/),d)return{match:d[1],rest:t.slice(1)};if(d=t.match(/^(-)?\d+(\.\d*)?/),d)return{match:d[0],rest:t.slice(d[0].length)};/^\\(left|right)/.test(t)||(d=t.match(/^(\\[a-zA-Z]+)/),d&&(o=t.slice(d[1].length),i=d[1]))}return{match:i,rest:o}}function _E(t,e){let n=B3(null,t,e);return n?(n=n.replace("_{#?}",""),n=n.replace("^{#?}",""),n+=" "):n=t,n}var FM=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function O3(t){let e=t.trim();for(let n of FM)if(e.startsWith(n[0])&&e.endsWith(n[1]))return[!0,e.substring(n[0].length,e.length-n[1].length)];return[!1,t]}function IK(t){if(t=t.trim(),t.length<=1)return["latex",t];let e;return[e,t]=O3(t),e?["latex",t]:t.startsWith("`")&&t.endsWith("`")?(t=t.substring(1,t.length-1),["ascii-math",t]):t.includes("\\")?["latex",t]:/\$.+\$/.test(t)?["latex",`\\text{${t}}`]:[void 0,t]}var BK="$$",OK="$$",NK=(t,e,n)=>(FM.some(r=>e.startsWith(r[0])&&e.endsWith(r[1]))||(e=`${BK} ${e} ${OK}`),e),UM=class og{constructor(e){og._modes[e]=this}static onPaste(e,n,r){var i;if(!n.contentEditable&&n.userSelect==="none")return n.model.announce("plonk"),!1;if(typeof r=="string"){let l=new DataTransfer;l.setData("text/plain",r),r=l}let o=new ClipboardEvent("paste",{clipboardData:r,cancelable:!0});return(i=n.host)!=null&&i.dispatchEvent(o)?og._modes[e].onPaste(n,r):!1}static copyToClipboard(e,n){if(!e.contentEditable&&e.userSelect==="none"){e.model.announce("plonk");return}let r=e.model,i=r.selectionIsCollapsed?[0,r.lastOffset]:Zn(r.selection),o=r.getValue(i,n);navigator.clipboard.writeText(o).then(()=>{},()=>e.model.announce("plonk"))}static onCopy(e,n){var r;if(!n.clipboardData)return;if(!e.contentEditable&&e.userSelect==="none"){e.model.announce("plonk");return}let i=e.model,o=i.selectionIsCollapsed?[0,i.lastOffset]:Zn(i.selection),l=i.getAtoms(o);if(l.every(c=>c.mode==="text"||!c.mode))n.clipboardData.setData("text/plain",l.filter(c=>c instanceof Dh).map(c=>c.value).join(""));else if(l.every(c=>c.mode==="latex"))n.clipboardData.setData("text/plain",i.getAtoms(o,{includeChildren:!0}).map(c=>{var d;return(d=c.value)!=null?d:""}).join(""));else{let c;l.length===1&&l[0].verbatimLatex!==void 0?c=l[0].verbatimLatex:c=i.getValue(o,"latex-expanded"),n.clipboardData.setData("application/x-latex",c);try{n.clipboardData.setData("text/plain",e.options.onExport(e,c,o))}catch{}if(l.length===1){let d=l[0];(d.type==="root"||d.type==="group")&&(l=d.body.filter(f=>f.type!=="first"))}try{n.clipboardData.setData("application/json+mathlive",JSON.stringify(l.map(d=>d.toJson())))}catch{}if((r=window[Symbol.for("io.cortexjs.compute-engine")])!=null&&r.ComputeEngine){let d=globalThis.MathfieldElement.computeEngine;if(d)try{let f=d.jsonSerializationOptions;d.jsonSerializationOptions={metadata:["latex"]};let p=d.parse(i.getValue(o,"latex-unstyled"));d.jsonSerializationOptions=f;let y=JSON.stringify(p.json);y&&n.clipboardData.setData("application/json",y)}catch{}}}n.preventDefault()}static insert(e,n,r={}){var i;let o=r.mode==="auto"?e.mode:(i=r.mode)!=null?i:e.mode;return og._modes[o].insert(e,n,r)}onPaste(e,n){return!1}insert(e,n,r){return!1}};UM._modes={};var Lt=UM,PK=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",command:"moveToNextGroup"},{key:"shift+[Tab]",command:"moveToPreviousGroup"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:["complete","accept-all"]},{key:"[Enter]",ifMode:"latex",command:["complete","accept-all"]},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"cmd+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"ctrl+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"cmd+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"ctrl+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"cmd+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+shift+v",ifMode:"math",command:["insert","\\sqrt[#0]{#1}"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleContextMenu"},{key:"alt+shift+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"shift+alt+[KeyT]",ifMode:"math",command:["switchMode","text"]},{key:"shift+alt+[KeyT]",ifMode:"text",command:["switchMode","math"]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+shift+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"alt+[Tab]",ifMode:"math",command:"addColumnAfter"},{key:"shift+alt+[Tab]",ifMode:"math",command:"addColumnBefore"},{key:"alt+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Enter]",ifMode:"math",command:"addRowBefore"},{key:"alt+[Return]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Return]",ifMode:"math",command:"addRowBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]},{key:"[Backquote]",ifLayout:["windows.german","linux.german"],ifMode:"math",command:["insert","^"]},{key:"[IntlBackslash]",ifLayout:["apple.german"],ifMode:"math",command:["insert","^"]}],zK={"\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\infty":"alt+[Digit5]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function po(t){var e;return((e=t.element)==null?void 0:e.mathfield)===t}function VK(t){var e,n;return(n=(e=t.querySelector(".ML__caret"))!=null?e:t.querySelector(".ML__text-caret"))!=null?n:t.querySelector(".ML__latex-caret")}function sg(t){let e=VK(t);if(!e)return null;let n=e.getBoundingClientRect();return{x:n.right,y:n.bottom,height:n.height}}function FK(t){var e;if(!t.parent)return"root";let n=(e=t.parent.id)!=null?e:"";return n+=typeof t.parentBranch=="string"?"-"+t.parentBranch:`-${t.parentBranch[0]}/${t.parentBranch[0]}`,n}function KM(t,e,n){if(!e)return null;let r=t.field.getBoundingClientRect(),i=e.right-e.left,o=e.bottom-e.top,l=Math.ceil(e.left-r.left+t.field.scrollLeft*n),c=Math.ceil(e.top-r.top);return{left:l,right:l+i,top:c,bottom:c+o}}function $M(t){let e=t.getBoundingClientRect(),n=parseInt(getComputedStyle(t).marginRight),r={top:e.top-1,bottom:e.bottom,left:e.left,right:e.right-1+n};if(t.children.length===0||t.tagName.toUpperCase()==="SVG")return r;for(let i of t.children)if(i.nodeType===1&&"atomId"in i.dataset&&!i.classList.contains("ML__pstrut")){let o=$M(i);r.left=Math.min(r.left,o.left),r.right=Math.max(r.right,o.right),r.top=Math.min(r.top,o.top),r.bottom=Math.max(r.bottom,o.bottom)}return r}function Lh(t,e){var n,r;if(!e.id)return null;let i=(r=(n=t.atomBoundsCache)==null?void 0:n.get(e.id))!=null?r:null;if(i!==null)return i;let o=t.field.querySelector(`[data-atom-id="${e.id}"]`);return i=o?$M(o):null,t.atomBoundsCache&&(i?t.atomBoundsCache.set(e.id,i):t.atomBoundsCache.delete(e.id)),i??null}function UK(t,e){let[n,r]=e,i=null;for(let o=n;o<=r;o++){let l=Lh(t,t.model.at(o));l&&(i?(i.top=Math.min(i.top,l.top),i.bottom=Math.max(i.bottom,l.bottom),i.left=Math.min(i.left,l.left),i.right=Math.max(i.right,l.right)):i=l)}return i??{top:0,bottom:0,left:0,right:0}}function KK(t,e,n){let r=new Map,i=t.field,o=i.offsetWidth,l=Math.floor(i.getBoundingClientRect().width)/o;l=isNaN(l)?1:l;for(let c of t.model.getAtoms(e,{includeChildren:!0})){if(n!=null&&n.excludeAtomsWithBackground&&c.style.backgroundColor)continue;let d=KM(t,Lh(t,c),l);if(d){let f=FK(c);if(r.has(f)){let p=r.get(f);r.set(f,{left:Math.min(p.left,d.left),right:Math.max(p.right,d.right),top:Math.min(p.top,d.top),bottom:Math.max(p.bottom,d.bottom)})}else r.set(f,d)}}return[...r.values()]}function qM(t,e){return t.model.selection.ranges.reduce((n,r)=>n.concat(...KK(t,r,e)),[])}function N3(t,e){return t==="*"||e==="none"?!0:e==="same-origin"?!window.origin||t===window.origin:typeof e=="function"?e(t):!1}function jM(t){let e=0,n=0,r=t.offsetWidth,i=t.offsetHeight;for(;t instanceof HTMLElement;)e+=t.offsetTop,n+=t.offsetLeft,t=t.offsetParent;return new DOMRect(n,e,r,i)}function HM(t,e){if(!t)return;let n=t.model.at(e);if(!n)return;let r={},i=Lh(t,n);i&&(r.bounds=new DOMRect(i.left,i.top,i.right-i.left,i.bottom-i.top)),r.depth=n.treeDepth-2,r.style=n.style;let o=n;for(;o;){if(o.command==="\\htmlData"&&o.args&&typeof o.args[0]=="string"){let l=o.args[0].split(",");for(let c of l){let d=c.match(/([^=]+)=(.+$)/);if(d){let f=d[1].trim().replace(/ /g,"-");f&&(r.data||(r.data={}),r.data[f]=d[2])}else{let f=c.trim().replace(/ /g,"-");f&&(r.data||(r.data={}),r.data[f]=void 0)}}}(o.command==="\\htmlId"||o.command==="\\cssId")&&!r.id&&o.args&&typeof o.args[0]=="string"&&(r.id=o.args[0]),o=o.parent}return(n.mode==="math"||n.mode==="text")&&(r.latex=re.serialize([n],{defaultMode:"math"})),r}function $K(t,e){let n=t.model.at(e);for(;n;){if(n.command==="\\href"){let r=n.args[0];if(typeof r=="string")return r}n=n.parent}return""}var qK=`@keyframes ML__caret-blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}
.ML__container {
  display: inline-flex;
  flex-flow: row;
  justify-content: space-between;
  align-items: flex-end;
  min-height: 39px;
  /* Need some room for the virtual keyboard toggle */
  width: 100%;
  padding: 4px;
  box-sizing: border-box;
  /* This attribute is necessary to work around a Firefox issue where 
  where clicking multiple times on the border leads to a focused mathfield that cannot be edited until focus is lost and regained (also fixes the multiple cursor issue on firefox that can occur with the same sequence of events).
  */
  pointer-events: auto;
  /* Prevent the browser from trying to interpret touch gestures in the field */
  /* "Disabling double-tap to zoom removes the need for browsers to
        delay the generation of click events when the user taps the screen." */
  touch-action: none;
  --_caret-color: var(--caret-color, hsl(var(--_hue), 40%, 49%));
  --_selection-color: var(--selection-color, #000);
  --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 70%, 85%));
  --_text-highlight-background-color: var(--highlight-text, hsla(var(--_hue), 40%, 50%, 0.1));
  --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 40%, 95%));
  --_smart-fence-color: var(--smart-fence-color, currentColor);
  --_smart-fence-opacity: var(--smart-fence-opacity, 0.5);
  --_contains-highlight-color: var(--contains-highlight-color, var(--_caret-color));
  --_latex-color: var(--latex-color, hsl(var(--_hue), 80%, 40%));
  --_correct-color: var(--correct-color, #10a000);
  --_incorrect-color: var(--incorrect-color, #a01b00);
  --_composition-background-color: var(--composition-background-color, #fff1c2);
  --_composition-text-color: var(--composition-text-color, black);
  --_composition-underline-color: var(--composition-underline-color, transparent);
  --_tooltip-border: var(--tooltip-border, 1px solid transparent);
  --_tooltip-border-radius: var(--tooltip-border-radius, 8px);
  --_tooltip-background-color: var(--tooltip-background-color, #616161);
  --_tooltip-color: var(--tooltip-color, #fff);
  --_tooltip-box-shadow: var(--tooltip-box-shadow, 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2));
}
@media (prefers-color-scheme: dark) {
  .ML__container {
    --_contains-highlight-color: var(--contains-highlight-color, hsl(var(--_hue), 85%, 75%));
    --_caret-color: var(--caret-color, hsl(var(--_hue), 65%, 55%));
    --_selection-color: var(--selection-color, #fff);
    --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 65%, 55%));
    --_text-highlight-background-color: var(--text-highlight-background-color, hsla(var(--_hue), 40%, 50%, 0.6));
    --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 5%, 34%));
    --_latex-color: var(--primary, hsl(var(--_hue), 40%, 50%));
    --_composition-background-color: #69571c;
    --_composition-text-color: white;
    --_placeholder-color: hsl(var(--_hue), 60%, 69%);
    --_smart-fence-color: var(--smart-fence-color, #fff);
    --_smart-fence-opacity: var(--smart-fence-opacity, 0.7);
  }
}
@media (forced-colors: active) {
  .ML__container {
    --_caret-color: white;
    --_selection-color: white;
    --_smart-fence-color: white;
    --_latex-color: white;
    --_correct-color: white;
    --_incorrect-color: white;
    --_composition-text-color: white;
  }
}
@media (hover: none) and (pointer: coarse) {
  :host(:not(:focus)) .ML__container {
    pointer-events: none;
  }
}
/* This is the actual field content (formula) */
.ML__content {
  display: flex;
  align-items: center;
  align-self: center;
  position: relative;
  overflow: hidden;
  padding: 2px 3px 2px 1px;
  width: 100%;
  /* Encourage the browser to use the GPU to render the field.
     Weirdly, this is required for prompts to be rendered correctly. 
   */
  isolation: isolate;
  text-shadow: var(--text-shadow);
}
.ML__content .ML__latex {
  text-shadow: var(--text-shadow);
}
.ML__content .ML__sqrt-line {
  box-shadow: var(--text-shadow);
}
.ML__content .ML__frac-line {
  box-shadow: var(--text-shadow);
}
.ML__virtual-keyboard-toggle,
.ML__menu-toggle {
  box-sizing: border-box;
  display: flex;
  align-self: center;
  align-items: center;
  flex-shrink: 0;
  flex-direction: column;
  justify-content: center;
  width: 34px;
  height: 34px;
  padding: 0;
  margin-right: 4px;
  cursor: pointer;
  /* Avoid some weird blinking with :hover */
  border-radius: 8px;
  border: 1px solid transparent;
  transition: background 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  color: hsl(var(--_hue), 40%, 50%);
  fill: currentColor;
  background: transparent;
}
.ML__virtual-keyboard-toggle:hover,
.ML__menu-toggle:hover {
  background: hsla(0, 0%, 70%, 0.3);
  color: #333;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle > span,
.ML__menu-toggle > span {
  display: flex;
  align-self: center;
  align-items: center;
}
@media (pointer: coarse) {
  .ML__virtual-keyboard-toggle,
  .ML__menu-toggle {
    min-width: 60px;
    min-height: 60px;
  }
}
/* The invisible element used to capture keyboard events. We're just trying
 really hard to make sure it doesn't show. */
.ML__keyboard-sink {
  display: inline-block;
  resize: none;
  outline: none;
  border: none;
  /* Need these for Microsoft Edge */
  position: fixed;
  clip: rect(0 0 0 0);
  /* Need this to prevent iOS Safari from auto-zooming */
  font-size: 1em;
  font-family: KaTeX_Main;
  line-height: 0.5;
  /* On Chromium, if this is 0, no keyboard events are received */
  /* Preferred over clip */
  clip-path: inset(50%);
}
[part='placeholder'] {
  color: var(--neutral-400);
}
.ML__composition {
  background: var(--_composition-background-color);
  color: var(--_composition-text-color);
  text-decoration: underline var(--_composition-underline-color);
}
.ML__caret {
  display: inline-block;
}
.ML__caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__text-caret::after {
  content: '';
  visibility: hidden;
  width: 0;
  display: inline-block;
  height: 0.76em;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_caret-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.045em;
  bottom: -0.05em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__latex-caret::after {
  content: '';
  visibility: hidden;
  --_caret-width: clamp(2px, 0.08em, 10px);
  border: none;
  border-radius: calc(var(--_caret-width) / 2);
  border-right: var(--_caret-width) solid var(--_latex-color);
  margin-right: calc(-1 * var(--_caret-width));
  position: relative;
  left: -0.019em;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__focused .ML__latex-caret::after,
.ML__focused .ML__text-caret::after,
.ML__focused .ML__caret::after {
  visibility: visible;
}
.ML__focused .ML__text {
  background: var(--_text-highlight-background-color);
}
/* When using smartFence, the anticipated closing fence is displayed
with this style */
.ML__smart-fence__close {
  opacity: var(--_smart-fence-opacity);
  color: var(--_smart-fence-color);
}
.ML__focused .ML__selected,
.ML__focused .ML__selected .ML__contains-caret,
.ML__focused .ML__selected .ML__smart-fence__close,
.ML__focused .ML__selected .ML__placeholder {
  color: var(--_selection-color);
  opacity: 1;
}
.ML__selection {
  box-sizing: border-box;
  background: transparent;
}
:host(:focus) .ML__selection {
  background: var(--_selection-background-color) !important;
}
.ML__contains-caret.ML__close,
.ML__contains-caret.ML__open,
.ML__contains-caret > .ML__close,
.ML__contains-caret > .ML__open,
.ML__contains-caret .ML__sqrt-sign,
.ML__contains-caret .ML__sqrt-line {
  color: var(--_contains-highlight-color);
}
.ML__contains-highlight {
  box-sizing: border-box;
  background: transparent;
}
.ML__focused .ML__contains-highlight {
  background: var(--_contains-highlight-background-color);
}
.ML__raw-latex {
  font-family: 'Berkeley Mono', 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  font-weight: 400;
  font-size: 0.8em;
  letter-spacing: -0.05em;
  color: var(--_latex-color);
}
.ML__suggestion {
  color: var(--neutral-500);
}
.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle.is-pressed,
.ML__virtual-keyboard-toggle.is-active:hover,
.ML__virtual-keyboard-toggle.is-active {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
/* Add an attribute 'data-tooltip' to automatically show a
   tooltip over a element on hover.
*/
[data-tooltip] {
  position: relative;
}
[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  display: block;
  z-index: 2;
  pointer-events: none;
  right: auto;
  top: calc(-100% - 4px);
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  border-radius: 4px;
  background: #616161;
  color: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  text-align: center;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-style: normal;
  font-weight: 400;
  font-size: 13px;
  /* Phone */
  opacity: 0;
  transform: scale(0.5);
}
@media only screen and (max-width: 767px) {
  [data-tooltip]::after {
    padding: 8px 16px;
    font-size: 16px;
  }
}
menu [data-tooltip]::after {
  left: 100%;
  top: 0%;
}
menu .ML__base {
  cursor: default;
}
/** Don't display if we're tracking, i.e. have the pointer down */
.tracking [data-tooltip]:hover::after {
  /* Use visibility, not display. Display will remove the after from the DOM, and the override below will not work */
  visibility: hidden;
}
/** But do display if tracking and inside a menu */
.tracking menu li[data-tooltip]:hover::after,
[data-tooltip]:hover::after {
  visibility: visible;
  opacity: 1;
  transform: scale(1);
  transition-property: opacity, scale;
  transition-duration: 0.15s;
  transition-delay: 1s;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__prompt {
  border-radius: 2px;
}
.ML__editablePromptBox {
  outline: 1px solid #acacac;
  border-radius: 2px;
  z-index: -1;
}
.ML__focused .ML__focusedPromptBox {
  outline: highlight auto 1px;
}
.ML__lockedPromptBox {
  background-color: rgba(142, 142, 141, 0.4);
  z-index: -1;
}
.ML__correctPromptBox {
  outline: 1px solid var(--_correct-color);
  box-shadow: 0 0 5px var(--_correct-color);
}
.ML__incorrectPromptBox {
  outline: 1px solid var(--_incorrect-color);
  box-shadow: 0 0 5px var(--_incorrect-color);
}
.variant-submenu {
  display: flex;
  flex-direction: column;
  padding: 8px;
}
.variant-submenu [part='menu-item'].ML__xl {
  font-size: 2rem;
  text-align: center;
  margin: 0;
}
.ML__center-menu .label {
  text-align: center;
}
.insert-matrix-submenu {
  /* Grid doesn't work on Safari */
  --_menu-item-size: 25px;
  width: calc(5 * var(--_menu-item-size));
  display: flex;
  flex-wrap: wrap;
  padding: 8px;
  align-content: center;
  justify-content: center;
}
.insert-matrix-submenu [part='menu-item'] {
  width: var(--_menu-item-size);
  height: var(--_menu-item-size);
  font-size: 21px;
  border: none;
  border-radius: 0;
  line-height: 21px;
  text-align: center;
  padding: 0;
  margin: 0;
}
.border-submenu [part='menu-item'] {
  font-size: 2rem;
  line-height: 1.2;
  text-align: center;
}
.swatches-submenu {
  --_swatch-size: 2rem;
  --_columns: 4;
  display: flex;
  flex-flow: wrap;
  padding: 8px;
  max-width: calc(var(--_columns) * (var(--_swatch-size) + 18px) + 16px);
  box-sizing: border-box;
}
.menu-swatch {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: fit-content;
  height: fit-content;
  margin: 2px;
  padding: 0;
  background: var(--neutral-200);
}
.menu-swatch > .label {
  padding: 0;
  margin: 0;
  line-height: 0;
}
.menu-swatch > .label > span {
  display: inline-block;
  margin: 6px;
  min-width: var(--_swatch-size);
  min-height: var(--_swatch-size);
  border-radius: 50%;
}
.menu-swatch.active {
  background: var(--neutral-100);
  scale: 1.4;
}
.menu-swatch.active > .label > span {
  border-radius: 2px;
}
.menu-swatch .ui-checkmark,
.menu-swatch .ui-mixedmark {
  position: absolute;
  margin: 0;
  padding: 0;
  color: white;
}
.menu-swatch.dark-contrast .ui-checkmark,
.menu-swatch.dark-contrast .ui-mixedmark {
  color: #000;
}
.ML__insert-template {
  font-size: 1em;
}
.ML__insert-label {
  opacity: 0.5;
  margin-left: 2ex;
}
`,jK=`.ML__container {
  min-height: auto !important;
  --_hue: var(--hue, 212);
  --_placeholder-color: var(--placeholder-color, hsl(var(--_hue), 40%, 49%));
  --_placeholder-opacity: var(--placeholder-opacity, 0.4);
  --_text-font-family: var(--text-font-family, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif);
}
.ML__sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}
.ML__is-inline {
  display: inline-block;
}
.ML__base {
  visibility: inherit;
  display: inline-block;
  position: relative;
  cursor: text;
  padding: 0;
  margin: 0;
  box-sizing: content-box;
  border: 0;
  outline: 0;
  vertical-align: baseline;
  font-weight: inherit;
  font-family: inherit;
  font-style: inherit;
  text-decoration: none;
  width: min-content;
}
.ML__strut,
.ML__strut--bottom {
  display: inline-block;
  min-height: 0.5em;
}
.ML__small-delim {
  font-family: KaTeX_Main;
}
/* Text mode */
.ML__text {
  font-family: var(--_text-font-family);
  white-space: pre;
}
/* Use cmr for 'math upright' */
.ML__cmr {
  font-family: KaTeX_Main;
  font-style: normal;
}
.ML__mathit {
  font-family: KaTeX_Math;
  /* The KaTeX_Math font is italic by default, so the font-style below is only 
     useful when a fallback font is used
  */
  font-style: italic;
}
.ML__mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
/* Lowercase greek symbols should stick to math font when \\mathbf is applied 
   to match TeX idiosyncratic behavior */
.lcGreek.ML__mathbf {
  font-family: KaTeX_Math;
}
.ML__mathbfit {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.ML__ams {
  font-family: KaTeX_AMS;
}
/* Blackboard */
.ML__bb {
  font-family: KaTeX_AMS;
}
.ML__cal {
  font-family: KaTeX_Caligraphic;
}
.ML__frak {
  font-family: KaTeX_Fraktur;
}
.ML__tt {
  font-family: KaTeX_Typewriter;
}
.ML__script {
  font-family: KaTeX_Script;
}
.ML__sans {
  font-family: KaTeX_SansSerif;
}
.ML__series_ul {
  font-weight: 100;
}
.ML__series_el {
  font-weight: 100;
}
.ML__series_l {
  font-weight: 200;
}
.ML__series_sl {
  font-weight: 300;
}
.ML__series_sb {
  font-weight: 500;
}
.ML__bold {
  font-weight: 700;
}
.ML__series_eb {
  font-weight: 800;
}
.ML__series_ub {
  font-weight: 900;
}
.ML__series_uc {
  font-stretch: ultra-condensed;
}
.ML__series_ec {
  font-stretch: extra-condensed;
}
.ML__series_c {
  font-stretch: condensed;
}
.ML__series_sc {
  font-stretch: semi-condensed;
}
.ML__series_sx {
  font-stretch: semi-expanded;
}
.ML__series_x {
  font-stretch: expanded;
}
.ML__series_ex {
  font-stretch: extra-expanded;
}
.ML__series_ux {
  font-stretch: ultra-expanded;
}
.ML__it {
  font-style: italic;
}
.ML__shape_ol {
  -webkit-text-stroke: 1px black;
  text-stroke: 1px black;
  color: transparent;
}
.ML__shape_sc {
  font-variant: small-caps;
}
.ML__shape_sl {
  font-style: oblique;
}
/* First level emphasis */
.ML__emph {
  color: #bc2612;
}
/* Second level emphasis */
.ML__emph .ML__emph {
  color: #0c7f99;
}
.ML__highlight {
  color: #007cb2;
  background: #edd1b0;
}
.ML__center {
  text-align: center;
}
.ML__left {
  text-align: left;
}
.ML__right {
  text-align: right;
}
.ML__label_padding {
  padding: 0 0.5em;
}
.ML__frac-line {
  width: 100%;
  min-height: 1px;
}
.ML__frac-line:after {
  content: '';
  display: block;
  margin-top: max(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  /* There's a bug since Chrome 62 where 
      sub-pixel border lines don't draw at some zoom 
      levels (110%, 90%). 
      Setting the min-height used to work around it, but that workaround
      broke in Chrome 84 or so.
      Setting the background (and the min-height) seems to work for now.
      */
  background: currentColor;
  box-sizing: content-box;
  /* Vuetify sets the box-sizing to inherit 
            causes the fraction line to not draw at all sizes (see #26) */
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
  forced-color-adjust: preserve-parent-color;
}
@media (forced-colors: active) {
  .ML__frac-line {
    min-height: 0px;
  }
}
.ML__sqrt {
  display: inline-block;
}
.ML__sqrt-sign {
  display: inline-block;
  position: relative;
}
.ML__sqrt-line {
  display: inline-block;
  height: max(1px, 0.04em);
  width: 100%;
}
.ML__sqrt-line:before {
  content: '';
  display: block;
  margin-top: min(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  background: currentColor;
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
  forced-color-adjust: preserve-parent-color;
}
@media (forced-colors: active) {
  .ML__sqrt-line:after {
    background: white !important;
  }
}
.ML__sqrt-line:after {
  border-bottom-width: 1px;
  content: ' ';
  display: block;
  margin-top: -0.1em;
}
.ML__sqrt-index {
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.ML__delim-size1 {
  font-family: KaTeX_Size1;
}
.ML__delim-size2 {
  font-family: KaTeX_Size2;
}
.ML__delim-size3 {
  font-family: KaTeX_Size3;
}
.ML__delim-size4 {
  font-family: KaTeX_Size4;
}
.ML__delim-mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.ML__delim-mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.ML__accent-body {
  font-family: KaTeX_Main;
}
.ML__accent-combining-char {
  position: relative;
  left: 0.24em;
}
/** The markup for a LaTeX formula, either in an editable mathfield or 
    in a static display.
*/
.ML__latex {
  display: inline-block;
  direction: ltr;
  text-align: left;
  text-indent: 0;
  text-rendering: auto;
  font-family: inherit;
  font-style: normal;
  font-size-adjust: none;
  font-stretch: normal;
  font-variant-caps: normal;
  letter-spacing: normal;
  line-height: 1.2;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  text-shadow: none;
  -webkit-user-select: none;
  user-select: none;
  width: min-content;
  forced-color-adjust: preserve-parent-color;
}
.ML__latex .style-wrap {
  position: relative;
}
.ML__latex .ML__mfrac {
  display: inline-block;
}
.ML__latex .ML__left-right {
  display: inline-block;
}
.ML__latex .ML__vlist-t {
  display: inline-table;
  table-layout: fixed;
  border-collapse: collapse;
}
.ML__latex .ML__vlist-r {
  display: table-row;
}
.ML__latex .ML__vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.ML__latex .ML__vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.ML__latex .ML__vlist > span > span {
  display: inline-block;
}
.ML__latex .ML__vlist > span > .ML__pstrut {
  overflow: hidden;
  width: 0;
}
.ML__latex .ML__vlist-t2 {
  margin-right: -2px;
}
.ML__latex .ML__vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.ML__latex .ML__msubsup {
  text-align: left;
}
.ML__latex .ML__negativethinspace {
  display: inline-block;
  margin-left: -0.16667em;
  height: 0.71em;
}
.ML__latex .ML__thinspace {
  display: inline-block;
  width: 0.16667em;
  height: 0.71em;
}
.ML__latex .ML__mediumspace {
  display: inline-block;
  width: 0.22222em;
  height: 0.71em;
}
.ML__latex .ML__thickspace {
  display: inline-block;
  width: 0.27778em;
  height: 0.71em;
}
.ML__latex .ML__enspace {
  display: inline-block;
  width: 0.5em;
  height: 0.71em;
}
.ML__latex .ML__quad {
  display: inline-block;
  width: 1em;
  height: 0.71em;
}
.ML__latex .ML__qquad {
  display: inline-block;
  width: 2em;
  height: 0.71em;
}
.ML__latex .ML__llap,
.ML__latex .ML__rlap {
  width: 0;
  position: relative;
  display: inline-block;
}
.ML__latex .ML__llap > .ML__inner,
.ML__latex .ML__rlap > .ML__inner {
  position: absolute;
}
.ML__latex .ML__llap > .ML__fix,
.ML__latex .ML__rlap > .ML__fix {
  display: inline-block;
}
.ML__latex .ML__llap > .ML__inner {
  right: 0;
}
.ML__latex .ML__rlap > .ML__inner {
  left: 0;
}
.ML__latex .ML__rule {
  display: inline-block;
  border: solid 0;
  position: relative;
  box-sizing: border-box;
}
.ML__latex .overline .overline-line,
.ML__latex .underline .underline-line {
  width: 100%;
}
.ML__latex .overline .overline-line:before,
.ML__latex .underline .underline-line:before {
  content: '';
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  display: block;
}
.ML__latex .overline .overline-line:after,
.ML__latex .underline .underline-line:after {
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  content: '';
  display: block;
  margin-top: -1px;
}
.ML__latex .ML__stretchy {
  display: block;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__latex .ML__stretchy:before,
.ML__latex .ML__stretchy:after {
  content: '';
}
.ML__latex .ML__stretchy svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.ML__latex .slice-1-of-2 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__latex .slice-2-of-2 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__latex .slice-1-of-3 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__latex .slice-2-of-3 {
  display: inline-flex;
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.ML__latex .slice-3-of-3 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__latex .slice-1-of-1 {
  display: inline-flex;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__latex .ML__nulldelimiter {
  display: inline-block;
}
.ML__latex .ML__op-group {
  display: inline-block;
}
.ML__latex .ML__op-symbol {
  position: relative;
}
.ML__latex .ML__op-symbol.ML__small-op {
  font-family: KaTeX_Size1;
}
.ML__latex .ML__op-symbol.ML__large-op {
  font-family: KaTeX_Size2;
}
.ML__latex:has(.ML__center_environment),
.ML__latex:has(.ML__multiline_environment),
.ML__latex:has(.ML__align_environment),
.ML__latex:has(.ML__eqnarray_environment),
.ML__latex:has(.ML__gather_environment) {
  width: 100%;
}
.ML__latex .ML__multiline_environment {
  display: inline-flex;
  width: 100%;
}
.ML__latex .ML__center_environment {
  display: inline-flex;
  width: 100%;
  justify-content: center;
}
.ML__latex .ML__align_environment,
.ML__latex .ML__eqnarray_environment,
.ML__latex .ML__gather_environment {
  display: inline-block;
}
.ML__latex .ML__mtable .ML__vertical-separator {
  display: inline-block;
  min-width: 1px;
  box-sizing: border-box;
}
.ML__latex .ML__mtable .ML__arraycolsep {
  display: inline-block;
}
.ML__latex .ML__mtable .col-align-m > .ML__vlist-t {
  text-align: center;
}
.ML__latex .ML__mtable .col-align-c > .ML__vlist-t {
  text-align: center;
}
.ML__latex .ML__mtable .col-align-l > .ML__vlist-t {
  text-align: left;
}
.ML__latex .ML__mtable .col-align-r > .ML__vlist-t {
  text-align: right;
}
[data-href] {
  cursor: pointer;
}
.ML__error {
  display: inline-block;
  background-image: radial-gradient(ellipse at center, hsl(341, 100%, 40%), rgba(0, 0, 0, 0) 70%);
  background-color: hsla(341, 100%, 40%, 0.1);
  background-repeat: repeat-x;
  background-size: 3px 3px;
  padding-bottom: 3px;
  background-position: 0 100%;
}
.ML__error > .ML__error {
  background: transparent;
  padding: 0;
}
.ML__placeholder {
  color: var(--_placeholder-color);
  opacity: var(--_placeholder-opacity);
  padding-left: 0.4ex;
  padding-right: 0.4ex;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}
.ML__notation {
  position: absolute;
  box-sizing: border-box;
  line-height: 0;
}
/* This class is used to implement the \`\\mathtip\` and \`\\texttip\` commands
   For UI elements, see \`[data-ML__tooltip]\`
*/
.ML__tooltip-container {
  position: relative;
  transform: scale(0);
}
.ML__tooltip-container .ML__tooltip-content {
  position: fixed;
  display: inline-table;
  visibility: hidden;
  z-index: 2;
  width: max-content;
  max-width: 400px;
  padding: 12px 12px;
  border: var(--tooltip-border);
  border-radius: var(--tooltip-border-radius);
  background: var(--tooltip-background-color);
  --_selection-color: var(--tooltip-color);
  color: var(--tooltip-color);
  box-shadow: var(--tooltip-box-shadow);
  opacity: 0;
  transition: opacity 0.15s cubic-bezier(0.4, 0, 1, 1);
}
.ML__tooltip-container .ML__tooltip-content .ML__text {
  white-space: normal;
}
.ML__tooltip-container .ML__tooltip-content .ML__base {
  display: contents;
}
.ML__tooltip-container:hover .ML__tooltip-content {
  visibility: visible;
  opacity: 1;
  font-size: 0.75em;
  transform: scale(1) translate(0, 3em);
}
`,HK=`#mathlive-environment-popover.is-visible {
  visibility: visible;
}
#mathlive-environment-popover {
  --_environment-panel-height: var(--environment-panel-height, 70px);
  --_accent-color: var(--accent-color, #aaa);
  --_background: var(--environment-panel-background, #fff);
  --_button-background: var(--environment-panel-button-background, white);
  --_button-background-hover: var(--environment-panel-button-background-hover, #f5f5f7);
  --_button-background-active: var(--environment-panel-button-background-active, #f5f5f7);
  --_button-text: var(--environment-panel-button-text, #e3e4e8);
  position: absolute;
  width: calc(var(--_environment-panel-height) * 2);
  height: var(--_environment-panel-height);
  border-radius: 4px;
  border: 1.5px solid var(--_accent-color);
  background-color: var(--_background);
  box-shadow: 0 0 30px 0 var(--environment-shadow, rgba(0, 0, 0, 0.4));
  pointer-events: all;
  visibility: hidden;
}
#mathlive-environment-popover .MLEP__array-buttons {
  height: calc(var(--_environment-panel-height) * 5/4);
  width: calc(var(--_environment-panel-height) * 5/4);
  margin-left: calc(0px - var(--_environment-panel-height) * 0.16);
  margin-top: calc(0px - var(--_environment-panel-height) * 0.19);
}
#mathlive-environment-popover .MLEP__array-buttons .font {
  fill: white;
}
#mathlive-environment-popover .MLEP__array-buttons circle {
  fill: #7f7f7f;
  transition: fill 300ms;
}
#mathlive-environment-popover .MLEP__array-buttons .MLEP__array-insert-background {
  fill-opacity: 1;
  fill: var(--_background);
  stroke: var(--_accent-color);
  stroke-width: 3px;
}
#mathlive-environment-popover .MLEP__array-buttons line {
  stroke: var(--_accent-color);
  stroke-opacity: 0;
  stroke-width: 40;
  pointer-events: none;
  transition: stroke-opacity 300ms;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover circle {
  fill: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover line {
  stroke-opacity: 1;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls {
  height: 100%;
  width: 50%;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options {
  width: var(--_environment-panel-height);
  height: var(--_environment-panel-height);
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  justify-content: space-around;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg {
  pointer-events: all;
  margin-top: 2px;
  width: calc(var(--_environment-panel-height) / 3 * 28 / 24);
  height: calc(var(--_environment-panel-height) / 3 - 2px);
  border-radius: calc(var(--_environment-panel-height) / 25);
  background-color: var(--_button-background);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg:hover {
  background-color: var(--_button-background-hover);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg line {
  stroke: var(--_button-text);
  stroke-width: 2;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg rect,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path {
  fill-opacity: 0;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active {
  pointer-events: none;
  background-color: var(--_button-background-active);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active line {
  stroke: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active circle {
  fill: var(--_accent-color);
}
`,GK=`/* The element that display info while in latex mode */
#mathlive-suggestion-popover {
  --_suggestion-zindex: var(--suggestion-zindex, 100);
  background-color: rgba(97, 97, 97);
  color: #fff;
  text-align: center;
  border-radius: 8px;
  position: fixed;
  z-index: var(--_suggestion-zindex);
  display: none;
  flex-direction: column;
  justify-content: center;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
}
#mathlive-suggestion-popover.top-tip::after {
  content: '';
  position: absolute;
  top: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-bottom: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.bottom-tip::after {
  content: '';
  position: absolute;
  bottom: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-top: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.is-animated {
  transition: all 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  animation: ML__fade-in cubic-bezier(0, 0, 0.2, 1) 0.15s;
}
#mathlive-suggestion-popover.is-visible {
  display: flex;
}
@keyframes ML__fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
/* The wrapper class for the entire content of the popover panel */
#mathlive-suggestion-popover ul {
  display: flex;
  flex-flow: column;
  list-style: none;
  margin: 0;
  padding: 0;
  align-items: flex-start;
  max-height: 400px;
  overflow-y: auto;
}
#mathlive-suggestion-popover li {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin: 8px;
  padding: 8px;
  width: calc(100% - 16px - 16px);
  column-gap: 1em;
  border-radius: 8px;
  cursor: pointer;
  /* Since the content can be clicked on, provide feedback on hover */
}
#mathlive-suggestion-popover li a {
  color: #5ea6fd;
  padding-top: 0.3em;
  margin-top: 0.4em;
  display: block;
}
#mathlive-suggestion-popover li a:hover {
  color: #5ea6fd;
  text-decoration: underline;
}
#mathlive-suggestion-popover li:hover,
#mathlive-suggestion-popover li.is-pressed,
#mathlive-suggestion-popover li.is-active {
  background: rgba(255, 255, 255, 0.1);
}
/* The command inside a popover (inside a #mathlive-suggestion-popover) */
.ML__popover__command {
  font-size: 1.6rem;
  font-family: KaTeX_Main;
}
.ML__popover__current {
  background: #5ea6fd;
  color: #fff;
}
.ML__popover__latex {
  font-family: 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  align-self: center;
}
/* The keyboard shortcuts for a symbol as displayed in the popover */
.ML__popover__keybinding {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 0.8em;
  opacity: 0.7;
}
/* Style for the character that joins the modifiers of a keyboard shortcut 
(usually a "+" sign)*/
.ML__shortcut-join {
  opacity: 0.5;
}
`,WK=`/* The element that displays the keys as the user type them */
#mathlive-keystroke-caption-panel {
  visibility: hidden;
  /*min-width: 160px;*/
  /*background-color: rgba(97, 97, 200, .95);*/
  background: var(--secondary, hsl(var(--_hue), 19%, 26%));
  border-color: var(--secondary-border, hsl(0, 0%, 91%));
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
  text-align: center;
  border-radius: 6px;
  padding: 16px;
  position: absolute;
  z-index: 1;
  display: flex;
  flex-direction: row-reverse;
  justify-content: center;
  --keystroke: white;
  --on-keystroke: #555;
  --keystroke-border: #f7f7f7;
}
@media (prefers-color-scheme: dark) {
  body:not([theme='light']) #mathlive-keystroke-caption-panel {
    --keystroke: hsl(var(--_hue), 50%, 30%);
    --on-keystroke: hsl(0, 0%, 98%);
    --keystroke-border: hsl(var(--_hue), 50%, 25%);
  }
}
body[theme='dark'] #mathlive-keystroke-caption-panel {
  --keystroke: hsl(var(--_hue), 50%, 30%);
  --on-keystroke: hsl(0, 0%, 98%);
  --keystroke-border: hsl(var(--_hue), 50%, 25%);
}
#mathlive-keystroke-caption-panel > span {
  min-width: 14px;
  /*height: 8px;*/
  margin: 0 8px 0 0;
  padding: 4px;
  background-color: var(--keystroke);
  color: var(--on-keystroke);
  fill: currentColor;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 1em;
  border-radius: 6px;
  border: 2px solid var(--keystroke-border);
  /*box-shadow: 0 7px 14px rgba(0,0,0,0.25), 0 5px 5px rgba(0,0,0,0.22);*/
}
`,XK=`.ML__keyboard {
  --_keyboard-height: 0;
  --_keyboard-zindex: var(--keyboard-zindex, 105);
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_padding-horizontal: var(--keyboard-padding-horizontal, 0px);
  --_padding-top: var(--keyboard-padding-top, 5px);
  --_padding-bottom: var(--keyboard-padding-bottom, 0px);
  --_row-padding-left: var(--keyboard-row-padding-left, 0px);
  --_row-padding-right: var(--keyboard-row-padding-right, 0px);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-text-active: var(--keyboard-toolbar-text-active, var(--_accent-color));
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_toolbar-font-size: var(--keyboard-toolbar-font-size, '135%');
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, #f0f0f0);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-primary-background: var(--keycap-primary-background, var(--_accent-color));
  --_keycap-primary-text: var(--keycap-primary-text, #ddd);
  --_keycap-primary-background-hover: var(--keycap-primary-background-hover, #0d80f2);
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_keycap-height: var(--keycap-height, 60px);
  /* Keycap width (incl. margin) */
  --_keycap-max-width: var(--keycap-max-width, 100px);
  --_keycap-gap: var(--keycap-gap, 8px);
  --_keycap-font-size: var(--keycap-font-size, clamp(16px, 4cqw, 24px));
  --_keycap-small-font-size: var(--keycap-small-font-size, calc(var(--keycap-font-size) * 0.8));
  --_keycap-extra-small-font-size: var(--keycap-extra-small-font-size, calc(var(--keycap-font-size) / 1.42));
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-text, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
  --_variant-keycap-length: var(--variant-keycap-length, 70px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 30px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 12px);
  --_keycap-shift-font-size: var(--keycap-shift-font-size, 16px);
  --_keycap-shift-color: var(--keycap-shift-color, var(--_accent-color));
  --_box-placeholder-color: var(--box-placeholder-color, var(--_accent-color));
  --_box-placeholder-pressed-color: var(--box-placeholder-pressed-color, var(--keycap-text-pressed));
  --_keycap-glyph-size: var(--keycap-glyph-size, 20px);
  --_keycap-glyph-size-lg: var(--keycap-glyph-size-lg, 24px);
  --_keycap-glyph-size-xl: var(--keycap-glyph-size-xl, 50px);
}
.is-math-mode .MLK__rows .if-text-mode,
.is-text-mode .MLK__rows .if-math-mode {
  display: none;
}
.if-can-undo,
.if-can-redo,
.if-can-copy,
.if-can-cut,
.if-can-paste {
  opacity: 0.4;
  pointer-events: none;
}
.can-undo .if-can-undo,
.can-redo .if-can-redo,
.can-copy .if-can-copy,
.can-cut .if-can-cut,
.can-paste .if-can-paste {
  opacity: 1;
  pointer-events: all;
}
body > .ML__keyboard {
  position: fixed;
  --_padding-bottom: calc(var(--keyboard-padding-bottom, 0px) + env(safe-area-inset-bottom, 0));
}
body > .ML__keyboard.is-visible > .MLK__backdrop {
  box-shadow: 0 -5px 6px rgba(0, 0, 0, 0.08);
  border-top: 1px solid var(--_border);
}
body > .ML__keyboard.backdrop-is-transparent.is-visible > .MLK__backdrop {
  box-shadow: none;
  border: none;
}
body > .ML__keyboard.is-visible.animate > .MLK__backdrop {
  transition: 0.28s cubic-bezier(0, 0, 0.2, 1);
  transition-property: transform, opacity;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__keyboard {
  position: relative;
  overflow: hidden;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: var(--_keyboard-zindex);
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  opacity: 1;
  transform: none;
  pointer-events: none;
}
.ML__keyboard :where(div) {
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  transform: none;
}
.MLK__backdrop {
  position: absolute;
  bottom: calc(-1 * var(--_keyboard-height));
  width: 100%;
  height: var(--_keyboard-height);
  box-sizing: border-box;
  padding-top: var(--_padding-top);
  padding-bottom: var(--_padding-bottom);
  padding-left: var(--_padding-horizontal);
  padding-right: var(--_padding-horizontal);
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0);
  background: var(--_background);
}
.backdrop-is-transparent .MLK__backdrop {
  background: transparent;
}
/* If a custom layout has a custom container/backdrop
  (backdrop-is-transparent), make sure to let pointer event go through. */
.backdrop-is-transparent .MLK__plate {
  background: transparent;
  pointer-events: none;
}
/* If a custom layout has a custom container/backdrop, make sure to 
   allow pointer events on it. */
.backdrop-is-transparent .MLK__layer > div > div {
  pointer-events: all;
}
.ML__keyboard.is-visible > .MLK__backdrop {
  transform: translate(0, calc(-1 * var(--_keyboard-height)));
  opacity: 1;
  visibility: visible;
}
.caps-lock-indicator {
  display: none;
  width: 8px;
  height: 8px;
  background: #0cbc0c;
  box-shadow: inset 0 0 4px 0 #13ca13, 0 0 4px 0 #a9ef48;
  border-radius: 8px;
  right: 8px;
  top: 8px;
  position: absolute;
}
.ML__keyboard.is-caps-lock .caps-lock-indicator {
  display: block;
}
.ML__keyboard.is-caps-lock .shift {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
}
.MLK__plate {
  position: absolute;
  top: var(--_padding-top);
  left: var(--_padding-horizontal);
  width: calc(100% - 2 * var(--_padding-horizontal));
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  container-type: inline-size;
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
  pointer-events: all;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 16px;
  /* Size of toolbar labels */
  font-weight: 400;
  text-shadow: none;
}
.ML__box-placeholder {
  color: var(--_box-placeholder-color);
}
.MLK__tex {
  font-family: KaTeX_Main, KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__tex-math {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
  font-style: italic;
}
.MLK__layer {
  display: none;
  outline: none;
}
.MLK__layer.is-visible {
  display: flex;
  flex-flow: column;
}
/* Keyboard layouts are made or rows of keys... */
.MLK__rows {
  --_keycap-width: var(--keycap-width, min(var(--_keycap-max-width), 10cqw));
  display: flex;
  flex-flow: column;
  align-items: center;
  border-collapse: separate;
  clear: both;
  border: 0;
  margin: 0;
  margin-bottom: var(--_keycap-gap);
  gap: var(--_keycap-gap);
  /* If the styling include, e.g., some shadows, they will be
  cut off by the overflow. In that case, set the padding to 
  compensate. */
  padding-left: var(--_row-padding-left);
  padding-right: var(--_row-padding-right);
  overflow: visible;
  touch-action: none;
}
.MLK__rows > .MLK__row {
  display: flex;
  flex-flow: row;
  justify-content: center;
  width: 100%;
  gap: var(--_keycap-gap);
  margin: 0;
  padding: 0;
  /* For the alignment of the text on some modifiers (e.g. shift) */
  /* Extra spacing between two adjacent keys */
}
.MLK__rows > .MLK__row .tex {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .tex-math {
  font-family: KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .MLK__row .big-op {
  font-size: calc(1.25 * var(--_keycap-font-size));
}
.MLK__rows > .MLK__row .small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__rows > .MLK__row .bottom {
  justify-content: flex-end;
}
.MLK__rows > .MLK__row .left {
  align-items: flex-start;
  padding-left: 12px;
}
.MLK__rows > .MLK__row .right {
  align-items: flex-end;
  padding-right: 12px;
}
.MLK__rows > .MLK__row .w0 {
  width: 0;
}
.MLK__rows > .MLK__row .w5 {
  width: calc(0.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w15 {
  width: calc(1.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w20 {
  width: calc(2 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w40 {
  width: calc(4 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .w50 {
  width: calc(5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .MLK__row .MLK__keycap.w50 {
  font-size: 80%;
  padding-top: 10px;
  font-weight: 100;
}
.MLK__rows > .MLK__row .separator {
  background: transparent;
  border: none;
  pointer-events: none;
}
.MLK__rows > .MLK__row .horizontal-rule {
  height: 6px;
  margin-top: 3px;
  margin-bottom: 0;
  width: 100%;
  border-radius: 0;
  border-top: var(--_horizontal-rule);
}
.MLK__rows > .MLK__row .ghost {
  background: var(--_toolbar-background);
  border: none;
  color: var(--_toolbar-text);
}
.MLK__rows > .MLK__row .ghost:hover {
  background: var(--_toolbar-background-hover);
}
.MLK__rows > .MLK__row .bigfnbutton {
  font-size: var(--_keycap-extra-small-font-size);
}
.MLK__rows > .MLK__row .shift,
.MLK__rows > .MLK__row .action {
  color: var(--_keycap-secondary-text);
  background: var(--_keycap-secondary-background);
  border-color: var(--_keycap-secondary-border);
  border-bottom-color: var(--_keycap-secondary-border-bottom);
  line-height: 0.8;
  font-size: min(1rem, var(--_keycap-small-font-size));
  font-weight: 600;
  padding: 8px 12px 8px 12px;
}
.MLK__rows > .MLK__row .shift:hover,
.MLK__rows > .MLK__row .action:hover {
  background: var(--_keycap-secondary-background-hover);
}
.MLK__rows > .MLK__row .action.primary {
  background: var(--_keycap-primary-background);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .action.primary:hover {
  background: var(--_keycap-primary-background-hover);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .MLK__row .shift.selected,
.MLK__rows > .MLK__row .action.selected {
  color: var(--_toolbar-text-active);
}
.MLK__rows > .MLK__row .shift.selected.is-pressed,
.MLK__rows > .MLK__row .action.selected.is-pressed,
.MLK__rows > .MLK__row .shift.selected.is-active,
.MLK__rows > .MLK__row .action.selected.is-active {
  color: white;
}
.MLK__rows > .MLK__row .warning {
  background: #cd0030;
  color: white;
}
.MLK__rows > .MLK__row .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
/** A regular keycap
 * Use the :where() pseudo-class to give it a very low specifity, 
 * so that it can be overriden by custom style.
 */
:where(.MLK__rows > .MLK__row div) {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-evenly;
  width: calc(var(--_keycap-width) - var(--_keycap-gap));
  height: var(--_keycap-height);
  box-sizing: border-box;
  padding: 0;
  vertical-align: top;
  text-align: center;
  float: left;
  color: var(--_keycap-text);
  fill: currentColor;
  font-size: var(--_keycap-font-size);
  background: var(--_keycap-background);
  border: 1px solid var(--_keycap-border);
  border-bottom-color: var(--_keycap-border-bottom);
  border-radius: 6px;
  cursor: pointer;
  touch-action: none;
  /* Keys with a variants panel */
  position: relative;
  overflow: hidden;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
:where(.MLK__rows > .MLK__row div):hover {
  overflow: visible;
  background: var(--_keycap-background-hover);
  color: var(--_keycap-text-hover);
}
:where(.MLK__rows > .MLK__row div) .ML__latex {
  pointer-events: none;
  touch-action: none;
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph {
  margin: 8px 0;
  width: var(--_keycap-glyph-size);
  height: var(--_keycap-glyph-size);
  min-height: var(--_keycap-glyph-size);
}
:where(.MLK__rows > .MLK__row div) svg.svg-glyph-lg {
  margin: 8px 0;
  width: var(--_keycap-glyph-size-lg);
  height: var(--_keycap-glyph-size-lg);
  min-height: var(--_keycap-glyph-size-lg);
}
:where(.MLK__rows > .MLK__row div).MLK__tex-math {
  font-size: 25px;
}
:where(.MLK__rows > .MLK__row div).is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  z-index: calc(var(--_keyboard-zindex) - 5);
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active aside,
:where(.MLK__rows > .MLK__row div).action.is-active aside,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed aside,
:where(.MLK__rows > .MLK__row div).action.is-pressed aside {
  display: none;
}
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-active .MLK__shift,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed .MLK__shift,
:where(.MLK__rows > .MLK__row div).action.is-pressed .MLK__shift {
  display: none;
}
:where(.MLK__rows > .MLK__row div).shift.is-pressed,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-pressed,
:where(.MLK__rows > .MLK__row div).action.is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
}
:where(.MLK__rows > .MLK__row div).shift.is-active,
:where(.MLK__rows > .MLK__row div).MLK__keycap.is-active,
:where(.MLK__rows > .MLK__row div).action.is-active {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
:where(.MLK__rows > .MLK__row div) small {
  color: var(--_keycap-secondary-text);
}
:where(.MLK__rows > .MLK__row div) aside {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 10px;
  line-height: 10px;
  color: var(--_keycap-secondary-text);
}
/* Add an attribute 'data-tooltip' to display a tooltip on hover.
Note there are a different set of tooltip rules for the keyboard toggle
(it's in a different CSS tree) */
.ML__keyboard [data-tooltip] {
  position: relative;
}
.ML__keyboard [data-tooltip]::after {
  position: absolute;
  display: inline-table;
  content: attr(data-tooltip);
  top: inherit;
  bottom: 100%;
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  background: #616161;
  color: #fff;
  text-align: center;
  z-index: 2;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  border-radius: 2px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-weight: 400;
  font-size: 12px;
  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1) 1s;
  opacity: 0;
  transform: scale(0.5);
}
.ML__keyboard [data-tooltip]:hover {
  position: relative;
}
.ML__keyboard [data-tooltip]:hover::after {
  opacity: 1;
  transform: scale(1);
}
.MLK__toolbar {
  align-self: center;
  display: flex;
  flex-flow: row;
  justify-content: space-between;
  width: 100%;
  max-width: 996px;
  min-height: 32px;
  /* Icons for undo/redo, etc. */
}
.MLK__toolbar svg {
  height: 20px;
  width: 20px;
}
.MLK__toolbar > .left {
  position: relative;
  display: flex;
  justify-content: flex-start;
  flex-flow: row;
}
.MLK__toolbar > .right {
  display: flex;
  justify-content: flex-end;
  flex-flow: row;
}
.MLK__toolbar > div > div {
  /* "button" in the toolbar */
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--_toolbar-text);
  fill: currentColor;
  background: var(--_toolbar-background);
  font-size: var(--_toolbar-font-size);
  padding: 4px 15px;
  cursor: pointer;
  width: max-content;
  min-width: 42px;
  min-height: 34px;
  border: none;
  padding-left: 10px;
  padding-right: 10px;
  padding-bottom: 8px;
  padding-top: 8px;
  margin-top: 0;
  margin-bottom: 4px;
  margin-left: 4px;
  margin-right: 4px;
  border-radius: 8px;
  box-shadow: none;
  border-bottom: 2px solid transparent;
}
.MLK__toolbar > div > div:not(.disabled):not(.selected):hover {
  background: var(--_toolbar-background-hover);
}
.MLK__toolbar > div > div.disabled svg,
.MLK__toolbar > div > div.disabled:hover svg,
.MLK__toolbar > div > div.disabled.is-pressed svg {
  color: var(--_toolbar-text);
  opacity: 0.2;
}
.MLK__toolbar > div > div:hover,
.MLK__toolbar > div > div:active,
.MLK__toolbar > div > div.is-pressed,
.MLK__toolbar > div > div.is-active {
  color: var(--_toolbar-text-active);
}
.MLK__toolbar > div > div.selected {
  color: var(--_toolbar-text-active);
  background: var(--_toolbar-background-selected);
  border-radius: 0;
  border-bottom-color: var(--_toolbar-text-active);
  padding-bottom: 4px;
  margin-bottom: 8px;
}
/* This is the element that displays variants on press+hold */
.MLK__variant-panel {
  visibility: hidden;
  position: fixed;
  display: flex;
  flex-flow: row wrap-reverse;
  justify-content: center;
  align-content: center;
  margin: 0;
  padding: 0;
  bottom: auto;
  top: 0;
  box-sizing: content-box;
  transform: none;
  z-index: calc(var(--_keyboard-zindex) + 1);
  touch-action: none;
  max-width: 350px;
  background: var(--_variant-panel-background);
  text-align: center;
  border-radius: 6px;
  padding: 6px;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
  transition: none;
}
.MLK__variant-panel.is-visible {
  visibility: visible;
}
.MLK__variant-panel.compact {
  --_variant-keycap-length: var(--variant-keycap-length, 50px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 10px);
}
.MLK__variant-panel .item {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: center;
  font-size: var(--_variant-keycap-font-size);
  height: var(--_variant-keycap-length);
  width: var(--_variant-keycap-length);
  margin: 0;
  box-sizing: border-box;
  border-radius: 5px;
  border: 1px solid transparent;
  background: transparent;
  pointer-events: all;
  cursor: pointer;
  color: var(--_variant-keycap-text);
  fill: currentColor;
}
@media (max-height: 412px) {
  .MLK__variant-panel .item {
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
.MLK__variant-panel .item .ML__latex {
  pointer-events: none;
}
.MLK__variant-panel .item:hover {
  color: var(--_keycap-text-hover);
}
.MLK__variant-panel .item.is-active {
  background: var(--_variant-keycap-background-active);
  color: var(--_variant-keycap-text-active);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.is-pressed {
  background: var(--_variant-keycap-background-pressed);
  color: var(--_variant-keycap-text-pressed);
  --_box-placeholder-color: var(--_box-placeholder-pressed-color);
}
.MLK__variant-panel .item.small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__variant-panel .item.swatch-button {
  box-sizing: border-box;
  background: #fbfbfb;
}
.MLK__variant-panel .item.swatch-button > span {
  display: inline-block;
  margin: 6px;
  width: calc(100% - 12px);
  height: calc(100% - 12px);
  border-radius: 50%;
}
.MLK__variant-panel .item.swatch-button:hover {
  background: #f0f0f0;
}
.MLK__variant-panel .item.swatch-button:hover > span {
  border-radius: 2px;
}
.MLK__variant-panel .item.box > div,
.MLK__variant-panel .item.box > span {
  border: 1px dashed rgba(0, 0, 0, 0.24);
}
.MLK__variant-panel .item .warning {
  min-height: 60px;
  min-width: 60px;
  background: #cd0030;
  color: white;
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 5px;
}
.MLK__variant-panel .item .warning.is-pressed,
.MLK__variant-panel .item .warning.is-active {
  background: red;
}
.MLK__variant-panel .item .warning svg.svg-glyph {
  width: var(--_keycap-glyph-size-xl);
  height: var(--_keycap-glyph-size-xl);
}
.MLK__variant-panel .item aside {
  font-size: var(--_variant-keycap-aside-font-size);
  line-height: 12px;
  opacity: 0.78;
  padding-top: 2px;
  width: 100%;
  text-align: center;
  text-wrap: wrap;
}
.MLK__keycap {
  position: relative;
}
.MLK__shift {
  display: block;
  position: absolute;
  right: 4px;
  top: 4px;
  font-size: var(--_keycap-shift-font-size);
  color: var(--_keycap-shift-color);
}
.hide-shift .MLK__shift {
  display: none;
}
@media (max-width: 414px) {
  .MLK__variant-panel {
    max-width: 350px;
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
/* @xs breakpoint: iPhone 5 */
@container (max-width: 414px) {
  .MLK__rows {
    --_keycap-gap: max(var(--_keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--_keycap-height), 42px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width)), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    font-size: 100%;
    margin-left: 2px;
    margin-right: 2px;
  }
  .MLK__rows .shift,
  .MLK__rows .action {
    font-size: 65%;
  }
  .MLK__rows .warning svg.svg-glyph {
    width: 14px;
    height: 14px;
    min-height: 14px;
  }
}
@container (max-width: 744px) {
  .MLK__rows {
    --_keycap-gap: max(var(--keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--keycap-height, 52px), 52px);
    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width), 10cqw), 62px));
  }
  .MLK__toolbar > div > div {
    padding-left: 0;
    padding-right: 0;
  }
  .MLK__tooltip::after {
    padding: 8px 16px;
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.fnbutton {
    font-size: 16px;
  }
  .MLK__rows > .MLK__row > div.bigfnbutton {
    font-size: calc(var(--_keycap-extra-small-font-size) / 1.55);
  }
  .MLK__rows > .MLK__row > div.small {
    font-size: 13px;
  }
  .MLK__rows > .MLK__row > div > aside {
    display: none;
  }
  .MLK__shift {
    display: none;
  }
}
/* Medium breakpoint: larger phones */
@container (max-width: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@media (max-height: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .MLK__row > div > small {
    font-size: 14px;
  }
}
@container (max-width: 1444px) {
  .MLK__rows .if-wide {
    display: none;
  }
}
@media (prefers-color-scheme: dark) {
  .ML__keyboard {
    --_accent-color: var(--keyboard-accent-color, #0b5c9c);
    --_background: var(--keyboard-background, #151515);
    --_border: var(--keyboard-border, transparent);
    --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
    --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
    --keyboard-toolbar-background-hover: #303030;
    --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
    --_keycap-background: var(--keycap-background, #1f2022);
    --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
    --_keycap-border: var(--_keycap-border, transparent);
    --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
    --_keycap-text: var(--keycap-text, #e3e4e8);
    --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
    --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
    --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
    --keycap-secondary-border: transparent;
    --keycap-secondary-border-bottom: transparent;
    --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
    --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
    --_variant-panel-background: var(--variant-panel-background, #303030);
    --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
  }
}
/* Same as the media query, but with a class */
[theme='dark'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0b5c9c);
  --_background: var(--keyboard-background, #151515);
  --_border: var(--keyboard-border, transparent);
  --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
  --keyboard-toolbar-background-hover: #303030;
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
  --_keycap-background: var(--keycap-background, #1f2022);
  --_keycap-background-hover: var(--keycap-background-hover, #2f3032);
  --_keycap-border: var(--_keycap-border, transparent);
  --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
  --_keycap-text: var(--keycap-text, #e3e4e8);
  --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
  --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
  --keycap-secondary-border: transparent;
  --keycap-secondary-border-bottom: transparent;
  --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
  --_variant-panel-background: var(--variant-panel-background, #303030);
  --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
}
[theme='light'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, white);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--_keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--_keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_variant-panel-background: var(--variant-panel-background, #f0f0f0);
  --_variant-keycap-text: var(--variant-keycap-textvar, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
}
`,YK=`:host {
  --primary-color: #5898ff;
  --primary-color-dimmed: #c0c0f0;
  --primary-color-dark: var(--blue-500);
  --primary-color-light: var(--blue-100);
  --primary-color-reverse: #ffffff;
  --secondary-color: #ff8a65;
  --secondary-color-dimmed: #f0d5c5;
  --secondary-color-dark: var(--orange-500);
  --secondary-color-light: var(--orange-100);
  --secondary-color-reverse: #ffffff;
  --link-color: #5898ff;
  --link-color-dimmed: #c5c5c5;
  --link-color-dark: #121212;
  --link-color-light: #e2e2e2;
  --link-color-reverse: #ffffff;
  --semantic-blue: var(--blue-700);
  --semantic-red: var(--red-400);
  --semantic-orange: var(--orange-400);
  --semantic-green: var(--green-700);
  --neutral-100: #f5f5f5;
  --neutral-200: #eeeeee;
  --neutral-300: #e0e0e0;
  --neutral-400: #bdbdbd;
  --neutral-500: #9e9e9e;
  --neutral-600: #757575;
  --neutral-700: #616161;
  --neutral-800: #424242;
  --neutral-900: #212121;
  --red-25: #fff8f7;
  --red-50: #fff1ef;
  --red-100: #ffeae6;
  --red-200: #ffcac1;
  --red-300: #ffa495;
  --red-400: #ff7865;
  --red-500: #f21c0d;
  --red-600: #e50018;
  --red-700: #d30024;
  --red-800: #bd002c;
  --red-900: #a1002f;
  --orange-25: #fffbf8;
  --orange-50: #fff7f1;
  --orange-100: #fff3ea;
  --orange-200: #ffe1c9;
  --orange-300: #ffcca2;
  --orange-400: #ffb677;
  --orange-500: #fe9310;
  --orange-600: #f58700;
  --orange-700: #ea7c00;
  --orange-800: #dc6d00;
  --orange-900: #ca5b00;
  --brown-25: #fff8ef;
  --brown-50: #fff1df;
  --brown-100: #ffe9ce;
  --brown-200: #ebcca6;
  --brown-300: #cdaf8a;
  --brown-400: #af936f;
  --brown-500: #856a47;
  --brown-600: #7f5e34;
  --brown-700: #78511f;
  --brown-800: #6e4200;
  --brown-900: #593200;
  --yellow-25: #fffdf9;
  --yellow-50: #fffcf2;
  --yellow-100: #fffaec;
  --yellow-200: #fff2ce;
  --yellow-300: #ffe8ab;
  --yellow-400: #ffdf85;
  --yellow-500: #ffcf33;
  --yellow-600: #f1c000;
  --yellow-700: #dfb200;
  --yellow-800: #c9a000;
  --yellow-900: #ad8a00;
  --lime-25: #f4ffee;
  --lime-50: #e9ffdd;
  --lime-100: #ddffca;
  --lime-200: #a8fb6f;
  --lime-300: #94e659;
  --lime-400: #80d142;
  --lime-500: #63b215;
  --lime-600: #45a000;
  --lime-700: #268e00;
  --lime-800: #007417;
  --lime-900: #005321;
  --green-25: #f5fff5;
  --green-50: #ebffea;
  --green-100: #e0ffdf;
  --green-200: #a7ffa7;
  --green-300: #5afa65;
  --green-400: #45e953;
  --green-500: #17cf36;
  --green-600: #00b944;
  --green-700: #00a34a;
  --green-800: #008749;
  --green-900: #00653e;
  --teal-25: #f3ffff;
  --teal-50: #e6fffe;
  --teal-100: #d9fffe;
  --teal-200: #8dfffe;
  --teal-300: #57f4f4;
  --teal-400: #43e5e5;
  --teal-500: #17cfcf;
  --teal-600: #00c2c0;
  --teal-700: #00b5b1;
  --teal-800: #00a49e;
  --teal-900: #009087;
  --cyan-25: #f7fcff;
  --cyan-50: #eff8ff;
  --cyan-100: #e7f5ff;
  --cyan-200: #c2e6ff;
  --cyan-300: #95d5ff;
  --cyan-400: #61c4ff;
  --cyan-500: #13a7ec;
  --cyan-600: #069eda;
  --cyan-700: #0095c9;
  --cyan-800: #0088b2;
  --cyan-900: #0a7897;
  --blue-25: #f7faff;
  --blue-50: #eef5ff;
  --blue-100: #e5f1ff;
  --blue-200: #bfdbff;
  --blue-300: #92c2ff;
  --blue-400: #63a8ff;
  --blue-500: #0d80f2;
  --blue-600: #0077db;
  --blue-700: #006dc4;
  --blue-800: #0060a7;
  --blue-900: #005086;
  --indigo-25: #f8f7ff;
  --indigo-50: #f1efff;
  --indigo-100: #eae7ff;
  --indigo-200: #ccc3ff;
  --indigo-300: #ac99ff;
  --indigo-400: #916aff;
  --indigo-500: #63c;
  --indigo-600: #5a21b2;
  --indigo-700: #4e0b99;
  --indigo-800: #3b0071;
  --indigo-900: #220040;
  --purple-25: #fbf7ff;
  --purple-50: #f8f0ff;
  --purple-100: #f4e8ff;
  --purple-200: #e4c4ff;
  --purple-300: #d49aff;
  --purple-400: #c36aff;
  --purple-500: #a219e6;
  --purple-600: #9000c4;
  --purple-700: #7c009f;
  --purple-800: #600073;
  --purple-900: #3d0043;
  --magenta-25: #fff8fb;
  --magenta-50: #fff2f6;
  --magenta-100: #ffebf2;
  --magenta-200: #ffcddf;
  --magenta-300: #ffa8cb;
  --magenta-400: #ff7fb7;
  --magenta-500: #eb4799;
  --magenta-600: #da3689;
  --magenta-700: #c82179;
  --magenta-800: #b00065;
  --magenta-900: #8a004c;
}
@media (prefers-color-scheme: dark) {
  :host {
    --semantic-blue: var(--blue-700);
    --semantic-red: var(--red-400);
    --semantic-orange: var(--orange-400);
    --semantic-green: var(--green-700);
    --semantic-bg-blue: var(--blue-25);
    --semantic-bg-red: var(--red-25);
    --semantic-bg-orange: var(--orange-25);
    --semantic-bg-green: var(--green-25);
    --neutral-100: #121212;
    --neutral-200: #424242;
    --neutral-300: #616161;
    --neutral-400: #757575;
    --neutral-500: #9e9e9e;
    --neutral-600: #bdbdbd;
    --neutral-700: #e0e0e0;
    --neutral-800: #eeeeee;
    --neutral-900: #f5f5f5;
  }
}
:host([theme='dark']) {
  --semantic-blue: var(--blue-700);
  --semantic-red: var(--red-400);
  --semantic-orange: var(--orange-400);
  --semantic-green: var(--green-700);
  --semantic-bg-blue: var(--blue-25);
  --semantic-bg-red: var(--red-25);
  --semantic-bg-orange: var(--orange-25);
  --semantic-bg-green: var(--green-25);
  --neutral-100: #121212;
  --neutral-200: #424242;
  --neutral-300: #616161;
  --neutral-400: #757575;
  --neutral-500: #9e9e9e;
  --neutral-600: #bdbdbd;
  --neutral-700: #e0e0e0;
  --neutral-800: #eeeeee;
  --neutral-900: #f5f5f5;
}
/* @media (prefers-color-scheme: dark) {
  :host {
      --label-color: #fff;
      --active-label-color: #000;
      --menu-bg: #525252;
      --active-bg: #5898ff;
      --active-bg-dimmed: #5c5c5c;
  }
} */
:host {
  --ui-font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  --ui-font-size: 14px;
  --ui-line-height: 1.5;
  --ui-letter-spacing: 0.007em;
  --mono-font-family: 'Berkeley Mono', 'JetBrains Mono', 'IBM Plex Mono', 'Source Code Pro', Menlo, Monaco, 'Courier New', monospace;
  --ui-layer-1: var(--neutral-100);
  --ui-layer-2: var(--neutral-200);
  --ui-layer-3: var(--neutral-300);
  --ui-layer-4: var(--neutral-400);
  --ui-layer-5: var(--neutral-500);
  --ui-layer-6: var(--neutral-600);
  --ui-border-color: var(--primary-color);
  --ui-border-radius: 4px;
  --ui-text: var(--neutral-900);
  --ui-text-secondary: var(--neutral-700);
  --ui-text-placeholder: var(--neutral-500);
  --ui-text-muted: var(--neutral-300);
  /** A field is a UI element in which a user can type data, for
  * example an input or textarea element.
  */
  --ui-field-bg: var(--neutral-100);
  --ui-field-bg-hover: var(--neutral-100);
  --ui-field-bg-disabled: var(--neutral-300);
  --ui-field-bg-invalid: var(--red-100);
  --ui-field-bg-focus: var(--neutral-100);
  --ui-field-border: 0.5px solid var(--border-color);
  --ui-field-border-hover: 0.5px solid var(--border-color);
  --ui-field-border-disabled: 0.5px solid var(--border-color);
  --ui-field-border-invalid: 0.5px solid var(--border-color);
  --ui-field-border-focus: 0.5px solid var(--border-color);
  --ui-menu-bg: var(--neutral-100);
  --ui-menu-text: var(--neutral-900);
  --ui-menu-bg-hover: var(--neutral-200);
  --ui-menu-text-hover: var(--neutral-900);
  /** The \`active\` state is used for the state of menu items
  * when they are selected.
  */
  --ui-menu-bg-active: var(--primary-color);
  --ui-menu-text-active: var(--primary-color-reverse);
  /** The \`active-muted\` set is used for the state of
  * submenus when they are open.
  */
  --ui-menu-bg-active-muted: var(--neutral-300);
  --ui-menu-text-active-muted: var(--neutral-900);
  /* --ui-menu-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.302),
0 2px 6px 2px rgba(60, 64, 67, 0.149); */
  --ui-menu-shadow: 0 0 2px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 0, 0, 0.2);
  --ui-menu-divider: 0.5px solid #c7c7c7;
  /* var(--neutral-300); */
  --ui-menu-z-index: 10000;
  --page-bg: var(--neutral-100);
  --content-bg: var(--neutral-200);
}
@media (prefers-color-scheme: dark) {
  :host {
    --ui-menu-bg: var(--neutral-200);
  }
}
:host([theme='dark']) {
  --ui-menu-bg: var(--neutral-200);
}
/* PingFang SC is a macOS font. Microsoft Yahei is a Windows font. 
  Noto  is a Linux/Android font.
*/
:lang(zh-cn),
:lang(zh-sg),
:lang(zh-my),
:lang(zh) {
  --ui-font-family: -apple-system, system-ui, 'PingFang SC', 'Hiragino Sans GB', 'Noto Sans CJK SC', 'Noto Sans SC', 'Noto Sans', 'Microsoft Yahei UI', 'Microsoft YaHei New', 'Microsoft Yahei', '微软雅黑', SimSun, '宋体', STXihei, '华文细黑', sans-serif;
}
:lang(zh-tw),
:lang(zh-hk),
:lang(zh-mo) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans', 'Microsoft JhengHei UI', 'Microsoft JhengHei', '微軟正黑體', '新細明體', 'PMingLiU', '細明體', 'MingLiU', sans-serif;
}
:lang(ja),
:lang(ja-jp),
:lang(ja-jp-mac) {
  --ui-font-family: -apple-system, system-ui, 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans CJK JP', 'Noto Sans JP', 'Noto Sans', '游ゴシック', '游ゴシック体', YuGothic, 'Yu Gothic', 'メイリオ', Meiryo, 'ＭＳ Ｐゴシック', 'MS PGothic', sans-serif;
}
:lang(ko),
:lang(ko-kr),
:lang(ko-kr-std) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', '애플 SD 산돌고딕 Neo', 'Apple SD 산돌고딕 Neo', '돋움', Dotum, sans-serif;
}
:lang(ko-kr-apple) {
  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR', 'Noto Sans', 'Apple SD Gothic Neo', '애플 SD 산돌고딕 Neo', 'Apple SD 산돌고딕 Neo', '돋움', Dotum, sans-serif;
}
:lang(zh-cn),
:lang(zh-sg),
:lang(zh-my),
:lang(zh),
:lang(zh-tw),
:lang(zh-hk),
:lang(zh-mo),
:lang(ja),
:lang(ja-jp),
:lang(ja-jp-mac),
:lang(ko),
:lang(ko-kr),
:lang(ko-kr-std),
:lang(ko-kr-apple) {
  --ui-font-size: 1rem;
  --ui-line-height: 1.7;
  --ui-letter-spacing: 0;
}
:dir(rtl) {
  --ui-line-height: auto;
  --ui-letter-spacing: 0;
}
`,QK=`.ui-menu *,
.ui-menu ::before,
.ui-menu ::after {
  box-sizing: border-box;
}
.ui-menu {
  display: none;
  color-scheme: light dark;
  -webkit-user-select: none;
  /* Important: Safari iOS doesn't respect user-select */
  user-select: none;
  cursor: default;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: rgba(0 0 0 0);
  --active-label-color: #fff;
  /* ui-menu-text-active */
  --label-color: #121212;
  /* ui-menu-text */
  --menu-bg: #e2e2e2;
  /* ui-menu-background */
  --active-bg: #5898ff;
  /* ui-menu-background-active */
  --active-bg-dimmed: #c5c5c5;
  /* ui-menu-background-active-muted */
}
/** Use the :where pseudo selector to make the specificity of the
 * selector 0, so that it can be overridden by the user.
 */
:where(.ui-menu-container) {
  position: absolute;
  overflow: visible;
  width: auto;
  height: auto;
  z-index: 10000;
  border-radius: 8px;
  background: var(--ui-menu-bg);
  box-shadow: var(--ui-menu-shadow);
  list-style: none;
  padding: 6px 0 6px 0;
  margin: 0;
  user-select: none;
  cursor: default;
  color: var(--ui-menu-text);
  font-weight: normal;
  font-style: normal;
  text-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  outline: none;
  opacity: 1;
  /* The [popover] elements have a 1px solid black border. Ugh. */
  border: none;
  width: fit-content;
  height: fit-content;
}
:where(.ui-menu-container > li) {
  display: flex;
  flex-flow: row;
  align-items: center;
  padding: 1px 7px 1px 7px;
  margin-top: 0;
  margin-left: 6px;
  margin-right: 6px;
  border-radius: 4px;
  white-space: nowrap;
  position: relative;
  outline: none;
  fill: currentColor;
  user-select: none;
  cursor: default;
  text-align: left;
  color: inherit;
  font-family: var(--ui-font-family);
  font-size: var(--ui-font-size);
  line-height: var(--ui-line-height);
  letter-spacing: var(--ui-letter-spacing);
}
:where(.ui-menu-container > li > .label) {
  display: flex;
  align-items: center;
  justify-content: space-between;
  appearance: none;
  background: none;
  outline: none;
  width: 100%;
  margin: 0;
  padding: 1px 2px 1px 1px;
  overflow: visible;
  border: 1px solid transparent;
  white-space: nowrap;
  text-align: start;
  align-content: center;
}
:where(.ui-menu-container > li:has(.heading)) {
  margin-top: 0.5em;
}
:where(.ui-menu-container > li > .label.heading) {
  font-weight: bold;
  opacity: 0.4;
}
:where(.ui-menu-container > li.indent > .label) {
  margin-inline-start: 12px;
}
:where(.ui-menu-container > li > .label.indent) {
  margin-inline-start: 12px;
}
:where(.ui-menu-container > li[role='divider']) {
  border-bottom: 1px solid var(--ui-menu-divider);
  border-radius: 0;
  padding: 0;
  margin-left: 15px;
  margin-right: 15px;
  padding-top: 5px;
  margin-bottom: 5px;
  width: calc(100% - 30px);
  /** 100% - (margin-left + margin-right) */
}
:where(.ui-menu-container > li[aria-disabled='true']) {
  opacity: 0.5;
}
:where(.ui-menu-container > li.active) {
  background: var(--ui-menu-bg-active);
  background: -apple-system-control-accent;
  color: var(--ui-menu-text-active);
}
:where(.ui-menu-container > li.active.is-submenu-open) {
  background: var(--ui-menu-bg-active-muted);
  color: inherit;
}
:where(.ui-menu-container > li[aria-haspopup='true'] > .label) {
  padding-inline-end: 0;
}
:where(.ui-menu-container > li[aria-haspopup='true'].active::after) {
  color: var(--ui-menu-text-active);
}
/** Keyboard shortcut */
:where(.ui-menu-container > li > kbd) {
  font-family: var(--ui-font-family);
  margin-inline-start: 12px;
  opacity: 0.4;
}
:where(.ui-menu-container > li.active > kbd) {
  opacity: 0.85;
}
.ui-trailing-chevron {
  display: flex;
  margin-inline-start: 24px;
  width: 10px;
  height: 10px;
  margin-bottom: 4px;
}
.ui-trailing-chevron:dir(rtl) {
  transform: scaleX(-1);
}
.ui-checkmark {
  display: flex;
  margin-inline-end: -11px;
  margin-inline-start: -4px;
  margin-top: 2px;
  width: 16px;
  height: 16px;
}
.ui-mixedmark {
  display: flex;
  margin-inline-end: -11px;
  margin-inline-start: -4px;
  margin-top: 2px;
  width: 16px;
  height: 16px;
}
`,Ql;function tu(t){let e="";switch(t){case"mathfield-element":e=`
    :host { display: inline-block; background-color: field; color: fieldtext; border-width: 1px; border-style: solid; border-color: #acacac; border-radius: 2px;}
    :host([hidden]) { display: none; }
    :host([disabled]), :host([disabled]:focus), :host([disabled]:focus-within) { outline: none; opacity:  .5; }
    :host(:focus), :host(:focus-within) {
      outline: Highlight auto 1px;    /* For Firefox */
      outline: -webkit-focus-ring-color auto 1px;
    }
    :host([readonly]:focus), :host([readonly]:focus-within),
    :host([read-only]:focus), :host([read-only]:focus-within) {
      outline: none;
    }`;break;case"core":e=jK;break;case"mathfield":e=qK;break;case"environment-popover":e=HK;break;case"suggestion-popover":e=GK;break;case"keystroke-caption":e=WK;break;case"virtual-keyboard":e=XK;break;case"ui":e=YK;break;case"menu":e=QK;break}return e}function $c(t){return Ql||(Ql={}),Ql[t]||(Ql[t]=new CSSStyleSheet,Ql[t].replaceSync(tu(t))),Ql[t]}var bo;function Js(t){var e;try{if(!("adoptedStyleSheets"in document)){if(window.document.getElementById(`mathlive-style-${t}`))return;let n=window.document.createElement("style");n.id=`mathlive-style-${t}`,n.append(window.document.createTextNode(tu(t))),window.document.head.appendChild(n);return}if(bo||(bo={}),((e=bo[t])!=null?e:0)!==0)bo[t]+=1;else{let n=$c(t);document.adoptedStyleSheets=[...document.adoptedStyleSheets,n],bo[t]=1}}catch(n){console.error("Error injecting stylesheet",t,n)}}function Zs(t){if("adoptedStyleSheets"in document&&bo!=null&&bo[t]&&(bo[t]-=1,bo[t]<=0)){let e=Ql[t];document.adoptedStyleSheets=document.adoptedStyleSheets.filter(n=>n!==e)}}var I1=class GM extends re{constructor(e){var n;super(q(N({},e),{type:"accent",body:(n=e.body)!=null?n:void 0})),e.accentChar?this.accent=e.accentChar:this.svgAccent=e?.svgAccent,this.skipBoundary=!0,this.captureSelection=!0}static fromJson(e){return new GM(e)}toJson(){return q(N({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(e){var n;let r=new lt({parent:e,mathstyle:"cramp"},this.style),i=(n=re.createBox(r,this.body))!=null?n:new be("▢",{style:this.style}),o=0;!this.hasEmptyBranch("body")&&this.body.length===2&&this.body[1].isCharacterBox()&&(o=i.skew);let l=Math.min(i.height,Ks),c;if(this.svgAccent)c=ig(this.svgAccent),l=r.metrics.bigOpSpacing1-l;else if(this.accent){let f=new be(this.accent,{fontFamily:"Main-Regular"});f.italic=0;let p=this.accent===8407||this.accent===8411||this.accent===8412?" ML__accent-combining-char":"";c=new be(f,{classes:"ML__accent-body"+p})}c=new mn({shift:0,children:[{box:new be(i)},-l,{box:c,marginLeft:i.left+2*o,classes:["ML__center"]}]});let d=new be(c,{type:"lift"});return this.caret&&(d.caret=this.caret),this.bind(r,d.wrap(r)),this.attachSupsub(r,{base:d})}},B1={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},Hg=Object.fromEntries(Object.entries(B1).map(([t,e])=>[e,t]));function O1(t){var e;return(e={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"∣":8739,"∥":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[t])!=null?e:t.codePointAt(0)}function JK(t,e,n,r){var i;let o=new be(O1(t),{fontFamily:"Main-Regular",isSelected:r.isSelected,classes:"ML__small-delim "+((i=r.classes)!=null?i:"")}).wrap(e);return n&&o.setTop((1-e.scalingFactor)*Wi),o}function WM(t,e,n,r,i){var o,l;let c=new lt({parent:r,mathstyle:"textstyle"},i?.style),d=new be(O1(t),{fontFamily:`Size${e}-Regular`,isSelected:i.isSelected,classes:((o=i.classes)!=null?o:"")+` ML__delim-size${e}`,type:(l=i.type)!=null?l:"ignore"}).wrap(c);return n&&d.setTop((1-c.scalingFactor)*Wi),d}function XM(t,e,n,r,i){var o;let l,c,d,f;l=d=f=O1(t),c=null;let p="Size1-Regular";t==="\\vert"||t==="\\lvert"||t==="\\rvert"||t==="\\mvert"||t==="\\mid"?d=l=f=8739:t==="\\Vert"||t==="\\lVert"||t==="\\rVert"||t==="\\mVert"||t==="\\|"?d=l=f=8741:t==="\\uparrow"?d=f=9168:t==="\\Uparrow"?d=f=8214:t==="\\downarrow"?l=d=9168:t==="\\Downarrow"?l=d=8214:t==="\\updownarrow"?(l=8593,d=9168,f=8595):t==="\\Updownarrow"?(l=8657,d=8214,f=8659):t==="["||t==="\\lbrack"?(l=9121,d=9122,f=9123,p="Size4-Regular"):t==="]"||t==="\\rbrack"?(l=9124,d=9125,f=9126,p="Size4-Regular"):t==="\\lfloor"||t==="⌊"?(d=l=9122,f=9123,p="Size4-Regular"):t==="\\lceil"||t==="⌈"?(l=9121,d=f=9122,p="Size4-Regular"):t==="\\rfloor"||t==="⌋"?(d=l=9125,f=9126,p="Size4-Regular"):t==="\\rceil"||t==="⌉"?(l=9124,d=f=9125,p="Size4-Regular"):t==="("||t==="\\lparen"?(l=9115,d=9116,f=9117,p="Size4-Regular"):t===")"||t==="\\rparen"?(l=9118,d=9119,f=9120,p="Size4-Regular"):t==="\\{"||t==="\\lbrace"?(l=9127,c=9128,f=9129,d=9130,p="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(l=9131,c=9132,f=9133,d=9130,p="Size4-Regular"):t==="\\lgroup"||t==="⟮"?(l=9127,f=9129,d=9130,p="Size4-Regular"):t==="\\rgroup"||t==="⟯"?(l=9131,f=9133,d=9130,p="Size4-Regular"):t==="\\lmoustache"||t==="⎰"?(l=9127,f=9133,d=9130,p="Size4-Regular"):t==="\\rmoustache"||t==="⎱"?(l=9131,f=9129,d=9130,p="Size4-Regular"):t==="\\surd"?(l=57345,f=9143,d=57344,p="Size4-Regular"):t==="\\ulcorner"?(l=9484,d=f=32):t==="\\urcorner"?(l=9488,d=f=32):t==="\\llcorner"?(f=9492,d=l=32):t==="\\lrcorner"&&(l=9496,d=l=32);let y=Hc(l,p),v=y.height+y.depth,x=Hc(d,p),S=x.height+x.depth,R=Hc(f,p),I=R.height+R.depth,L=0,j=1;if(c!==null){let U=Hc(c,p);L=U.height+U.depth,j=2}let z=v+I+L,G=Math.max(0,Math.ceil((e-z)/(j*S))),ie=z+G*j*S,B=Wi;n&&(B=B*r.scalingFactor);let M=ie/2-B,A=[];A.push({box:new be(f,{fontFamily:p})}),A.push(-.008);let C=new be(d,{fontFamily:p});if(c===null)for(let U=0;U<G;U++)A.push({box:C});else{for(let U=0;U<G;U++)A.push({box:C});A.push(-.008),A.push({box:new be(c,{fontFamily:p})}),A.push(-.008);for(let U=0;U<G;U++)A.push({box:C})}A.push(-.008),A.push({box:new be(l,{fontFamily:p})});let P="";p==="Size1-Regular"?P=" delim-size1":p==="Size4-Regular"&&(P=" delim-size4");let D=new mn({bottom:M,children:A},{classes:P});return new be(D,q(N({},i??{}),{classes:((o=i?.classes)!=null?o:"")+" ML__delim-mult"}))}var YM=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","⌊","⌋","⌈","⌉"]),ZK=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","⟮","⟯","⎰","⎱"]),QM=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),e$=[0,1.2,1.8,2.4,3];function t$(t,e,n,r){return t===void 0||t==="."?Eu(n,r.classes):(t==="<"||t==="\\lt"||t==="⟨"?t="\\langle":(t===">"||t==="\\gt"||t==="⟩")&&(t="\\rangle"),YM.has(t)||QM.has(t)?WM(t,e,!1,n,r):ZK.has(t)?XM(t,e$[e],!1,n,r):null)}var n$=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],r$=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],i$=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function a$(t){return t.type==="small"?"Main-Regular":t.type==="large"?"Size"+t.size+"-Regular":(t.type,"Size4-Regular")}function o$(t,e,n,r){let i={"-4":0,"-3":1,0:2}[r.mathstyle.sizeDelta];for(let o=i;o<n.length&&n[o].type!=="stack";o++){let l=Hc(t,a$(n[o]));if(l.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let c=l.height+l.depth;if(n[o].type==="small"&&(n[o].mathstyle==="scriptscriptstyle"?c*=Math.max(H4[Math.max(1,r.size-2)],r.minFontScale):n[o].mathstyle==="scriptstyle"&&(c*=Math.max(H4[Math.max(1,r.size-1)],r.minFontScale))),c>e)return n[o]}return n[n.length-1]}function Gg(t,e,n,r,i,o){if(!e||e.length===0||e===".")return Eu(i);e==="<"||e==="\\lt"?e="\\langle":(e===">"||e==="\\gt")&&(e="\\rangle");let l;QM.has(e)?l=n$:YM.has(e)?l=i$:l=r$;let c=o$(O1(e),n,l,i),d=new lt({parent:i,mathstyle:c.mathstyle},o?.style);return c.type==="small"?JK(e,d,r,q(N({},o),{type:t})):c.type==="large"?WM(e,c.size,r,d,q(N({},o),{type:t})):(c.type,XM(e,n,r,d,q(N({},o),{type:t})))}function $f(t,e,n,r,i,o){if(e===".")return Eu(i,o?.classes);let l=Wi*i.scalingFactor,c=901,d=5/bh,f=Math.max(n-l,r+l),p=Math.max(f/500*c,2*f-d);return Gg(t,e,p,!0,i,o)}function Eu(t,e){let n=new be(null,{classes:" ML__nulldelimiter "+(e??""),type:"ignore"});return n.width=t.getRegisterAsEm("nulldelimiterspace"),n.wrap(new lt({parent:t,mathstyle:"textstyle"}))}var Ia=class JM extends re{constructor(e){var n;super({type:"placeholder",command:"\\placeholder",mode:(n=e?.mode)!=null?n:"math",style:e?.style}),this.captureSelection=!0}static fromJson(e){return new JM(e)}toJson(){return super.toJson()}render(e){let n;return this.value=e.placeholderSymbol,typeof e.renderPlaceholder=="function"?n=e.renderPlaceholder(e):n=this.createBox(e),this.caret&&(n.classes+=" ML__placeholder-selected"),n}_serialize(e){return e.skipPlaceholders?"":"\\placeholder{}"}},ZM=["matrix","matrix*","pmatrix","pmatrix*","bmatrix","bmatrix*","Bmatrix","Bmatrix*","vmatrix","vmatrix*","Vmatrix","Vmatrix*"],e2=["cases","dcases","rcases"],eA=["align","align*","aligned","gather","gather*","gathered","split"],s$=["array","subequations","eqnarray"];function l$(t){return eA.includes(t)||e2.includes(t)||e2.includes(t)||ZM.includes(t)||s$.includes(t)}function tA(t){return ZM.includes(t)}function u$(t){return e2.includes(t)}function c$(t){return eA.includes(t)}function h$(t,e,n){let r=0;for(let f of n.columns)"align"in f&&(r+=1);r=Math.max(r,n.minColumns);let i=0,o=[];for(let f of e){i=Math.max(i,Math.min(f.length,r));let p=0;for(;p<f.length;){let y=[],v=Math.min(f.length,p+r);for(;p<v;)y.push(d$(f[p],t.mode)),p+=1;if(y.length<n.minColumns)for(;y.length<n.minColumns;)y.push([new re({type:"first",mode:t.mode})]);o.push(y)}}!t.isMultiline&&o.length>0&&o[o.length-1].length===1&&f$(o[o.length-1][0])&&o.pop();let l=[];for(let f of o){if(f.length!==i)for(let p=f.length;p<i;p++)t.isMultiline?f.push([new re({type:"first",mode:t.mode})]):f.push([new re({type:"first",mode:t.mode}),new Ia]);l.push(f)}let c=0,d=0;for(let f of l){d=0;for(let p of f){for(let y of p)y.parent=t,y.parentBranch=[c,d];d+=1}c+=1}return t.isDirty=!0,l}function d$(t,e){return t.length===0?[new re({type:"first",mode:e})]:t[0].type!=="first"?[new re({type:"first",mode:e}),...t]:(t.slice(1).some(n=>n.type==="first"),t)}function f$(t){return t.length===1&&t[0].type==="first"}var rt=class nA extends re{get isMultiline(){let e=this.environmentName;return["lines","multline","multline*","align","split","gather","gathered"].includes(e)}constructor(e,n,r,i={}){var o,l,c,d;if(super({type:"array",isRoot:i.isRoot}),this.environmentName=e,i.columns)i.columns.length===0?this.colFormat=[{align:"l"}]:this.colFormat=[...i.columns];else if(i.minColumns){let f=[];for(let p=0;p<i.minColumns;p++)f.push({align:"l"});this.colFormat=f}else this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}];this.minColumns=(o=i.minColumns)!=null?o:1,this.minRows=(l=i.minRows)!=null?l:1,this.maxRows=(c=i.maxRows)!=null?c:1/0,this._rows=h$(this,n,{columns:this.colFormat,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows}),this.rowGaps=r,i.arraycolsep!==void 0&&(this.arraycolsep=i.arraycolsep),this.colSeparationType=i.colSeparationType,i.arraystretch!==void 0&&(this.arraystretch=i.arraystretch),i.mathstyleName&&(this.mathstyleName=i.mathstyleName),i.leftDelim&&(this.leftDelim=i.leftDelim),i.rightDelim&&(this.rightDelim=i.rightDelim),this.classes=(d=i.classes)!=null?d:[]}static fromJson(e){return new nA(e.environmentName,e.array,e.rowGaps,e)}toJson(){let e=q(N({},super.toJson()),{environmentName:this.environmentName,array:this._rows.map(n=>n.map(r=>r.map(i=>i.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType,minColumns:this.minColumns,minRows:this.minRows,maxRows:this.maxRows});return this.arraystretch!==void 0&&(e.arraystretch=this.arraystretch),this.arraycolsep!==void 0&&(e.arraycolsep=this.arraycolsep),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.isRoot&&(e.isRoot=!0),e.minColumns=this.minColumns,e.minRows=this.minRows,e.maxRows=this.maxRows,this.mathstyleName&&(e.mathstyleName=this.mathstyleName),this.classes.length>0&&(e.classes=this.classes),e}branch(e){var n;if(Ao(e))return(n=this._rows[e[0]][e[1]])!=null?n:void 0}createBranch(e){var n;return Ao(e)?(this.isDirty=!0,(n=this.branch(e))!=null?n:[]):[]}get rowCount(){return this._rows.length}get colCount(){return this._rows[0].length}get maxColumns(){return this.colFormat.filter(e=>!!e.align).length}removeBranch(e){if(Yl(e))return super.removeBranch(e);let[n,...r]=this.branch(e);return n.type,this._rows[e[0]][e[1]]=void 0,r.forEach(i=>{i.parent=void 0,i.parentBranch=void 0}),this.isDirty=!0,r}get hasChildren(){return this.children.length>0}get children(){let e=[];for(let n of this._rows)for(let r of n)if(r)for(let i of r)e.push(...i.children),e.push(i);return[...e,...super.children]}render(e){var n,r,i,o,l,c;let d=new lt({parent:e,mathstyle:this.mathstyleName},this.style),f=d.getRegisterAsEm("arrayrulewidth"),p=d.getRegisterAsEm("arraycolsep"),y=d.getRegisterAsEm("doublerulesep"),v=(r=(n=this.arraystretch)!=null?n:d.getRegisterAsNumber("arraystretch"))!=null?r:1,x=typeof this.arraycolsep=="number"?this.arraycolsep:p;this.colSeparationType==="small"&&(x=.2778*(new lt({parent:e,mathstyle:"scriptstyle"}).scalingFactor/e.scalingFactor));let S=v*cK,R=.7*S,I=.3*S,L=0,j=[],z=0,G=this._rows.length;for(let ue=0;ue<G;++ue){let ve=this._rows[ue];z=Math.max(z,ve.length);let De=new lt({parent:d,mathstyle:this.mathstyleName},this.style),V=R/De.scalingFactor,se=I/De.scalingFactor,de={cells:[],height:0,depth:0,pos:0};for(let Ae of ve){let Ue=(i=re.createBox(De,Ae,{type:"ignore"}))!=null?i:new be(null,{type:"ignore"});se=Math.max(se,Ue.depth),V=Math.max(V,Ue.height),de.cells.push(Ue)}let ce=(o=BM(this.rowGaps[ue]))!=null?o:0;ce>0&&(ce+=I,se=Math.max(se,ce),ce=0),ue<G-1&&!tA(this.environmentName)&&this.environmentName!=="cases"&&this.environmentName!=="array"&&(se+=d.getRegisterAsEm("jot")),de.height=V,de.depth=se,L+=V,de.pos=L,L+=se+ce,j.push(de)}let ie=L/2+Wi,B=[];for(let ue=0;ue<z;ue++){let ve=[];for(let De of j){let V=De.cells[ue];V&&(V.depth=De.depth,V.height=De.height,ve.push({box:V,shift:De.pos-ie}))}ve.length>0&&B.push(new mn({individualShift:ve}))}let M=[],A=!1,C=!1,P=0,D=!this.leftDelim,{colFormat:U}=this;for(let ue of U){if("align"in ue&&P>=B.length)break;if("align"in ue)A?M.push(T0(2*x)):(C||D)&&M.push(T0(x)),M.push(new be(B[P],{classes:"col-align-"+ue.align})),P++,A=!0,C=!1,D=!1;else if("gap"in ue){if(typeof ue.gap=="number")M.push(T0(ue.gap));else{let ve=m$(e,j,ie,ue.gap);ve&&M.push(ve)}A=!1,C=!1,D=!1}else if("separator"in ue){let ve=new be(null,{classes:"ML__vertical-separator"});ve.height=L,ve.setStyle("height",L,"em"),ve.setStyle("border-right",`${f}em ${ue.separator} currentColor`),ve.setStyle("vertical-align",-(L-ie),"em");let De=0;C?De=y-f:A&&(De=x-f),ve.left=De,M.push(ve),A=!1,C=!0,D=!1}}A&&!this.rightDelim&&M.push(T0(x));let O=new be(M,{classes:["ML__mtable",...this.classes].join(" ")});if((!this.leftDelim||this.leftDelim===".")&&(!this.rightDelim||this.rightDelim==="."))return this.caret&&(O.caret=this.caret),this.bind(e,O);let ke=O.height,Ke=O.depth,W=this.bind(e,new be([this.bind(e,$f("open",(l=this.leftDelim)!=null?l:".",ke,Ke,d,{isSelected:this.isSelected})),O,this.bind(e,$f("close",(c=this.rightDelim)!=null?c:".",ke,Ke,d,{isSelected:this.isSelected}))],{type:"ord"}));return W?(W.setStyle("display","inline-block"),this.caret&&(W.caret=this.caret),this.bind(e,this.attachSupsub(e,{base:W}))):null}_serialize(e){var n;let r=[];if(this.environmentName==="lines"?r.push("\\displaylines{"):r.push(`\\begin{${this.environmentName}}`),this.environmentName==="array"){if(r.push("{"),this.colFormat!==void 0)for(let i of this.colFormat)"align"in i&&typeof i.align=="string"?r.push(i.align):"separator"in i&&i.separator==="solid"?r.push("|"):"separator"in i&&i.separator==="dashed"&&r.push(":");r.push("}")}for(let i=0;i<this._rows.length;i++){for(let o=0;o<this._rows[i].length;o++)o>0&&r.push(" & "),r.push(re.serialize(this._rows[i][o],e));if(i<this._rows.length-1){let o=this.rowGaps[i];o!=null&&o.dimension?r.push(`\\\\[${o.dimension} ${(n=o.unit)!=null?n:"pt"}] `):r.push("\\\\ ")}}return this.environmentName==="lines"?r.push("}"):r.push(`\\end{${this.environmentName}}`),Ze(r)}forEachCell(e){for(let n=0;n<this.rowCount;n++)for(let r=0;r<this.colCount;r++)e(this._rows[n][r],n,r)}getCell(e,n){var r;return(r=this._rows[e])==null?void 0:r[n]}setCell(e,n,r){this.type==="array"&&Array.isArray(this._rows)&&this._rows[e][n];for(let o of this._rows[e][n])o.parent=void 0,o.parentBranch=void 0;let i=[new re({type:"first",mode:this.mode}),...r.filter(o=>o.type!=="first")];this._rows[e][n]=i,ql(this),this.isDirty=!0}addRowBefore(e){this.type==="array"&&Array.isArray(this._rows),this._rows.splice(e,0,new Array(this.colCount).fill(A0(this,!this.isMultiline))),ql(this),this.isDirty=!0}addRowAfter(e){this.type==="array"&&Array.isArray(this._rows),this._rows.splice(e+1,0,new Array(this.colCount).fill(A0(this,!this.isMultiline))),ql(this),this.isDirty=!0}removeRow(e){this.type==="array"&&Array.isArray(this._rows)&&this.rowCount>e;let n=this._rows.splice(e,1);for(let r of n)for(let i of r)if(i)for(let o of i)o.parent=void 0,o.parentBranch=void 0;ql(this),this.isDirty=!0}addColumnBefore(e){this.type==="array"&&Array.isArray(this._rows);for(let n of this._rows)n.splice(e,0,A0(this));ql(this),this.isDirty=!0}addColumnAfter(e){this.type==="array"&&Array.isArray(this._rows);for(let n of this._rows)n.splice(e+1,0,A0(this));ql(this),this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(e){this.type==="array"&&Array.isArray(this._rows)&&this.colCount>e;for(let n of this._rows){let r=n.splice(e,1);for(let i of r)if(i)for(let o of i)o.parent=void 0,o.parentBranch=void 0}ql(this),this.isDirty=!0}get cells(){let e=[];for(let n of this._rows)for(let r of n)r&&e.push(r.filter(i=>i.type!=="first"));return e}get rows(){return this._rows}};function A0(t,e=!1){let n=new re({type:"first",mode:t.mode});n.parent=t;let r=[n];if(e){let i=new Ia;i.parent=t,r.push(i)}return r}function ql(t){for(let e=0;e<t.rowCount;e++)for(let n=0;n<t.colCount;n++){let r=t.getCell(e,n);if(r)for(let i of r)i&&(i.parent=t,i.parentBranch=[e,n])}}function T0(t){let e=new be(null,{classes:"ML__arraycolsep"});return e.width=t,e}function m$(t,e,n,r){if(!r)return null;let i=[];for(let o of e){let l=re.createBox(t,r,{type:"ignore"});l&&(l.depth=o.depth,l.height=o.height,i.push({box:l,shift:o.pos-n}))}return new mn({individualShift:i}).wrap(t)}var el=class rA extends re{constructor(e){super({mode:e.mode,command:e.command,style:e.style,body:e.body,type:"box"}),this.framecolor=e.framecolor,this.backgroundcolor=e.backgroundcolor,this.padding=e.padding,this.offset=e.offset,this.border=e.border}static fromJson(e){return new rA(e)}toJson(){return q(N({},super.toJson()),{framecolor:this.framecolor,backgroundcolor:this.backgroundcolor,padding:this.padding,offset:this.offset,border:this.border})}render(e){var n,r,i,o;let l=re.createBox(e,this.body,{type:"lift"});if(!l)return null;let c=e.toEm((n=this.offset)!=null?n:{dimension:0});l.depth+=c,l.setStyle("display","inline-block"),l.setStyle("position","relative"),l.setStyle("height",Math.floor(100*l.height+l.depth)/100,"em"),l.setStyle("vertical-align",-Math.floor(100*l.height)/100,"em");let d=new lt({parent:e},this.style),f=d.toEm((r=this.padding)!=null?r:{register:"fboxsep"}),p=new be(null,{classes:"ML__box"});p.height=l.height+f,p.depth=l.depth+f,p.setStyle("box-sizing","border-box"),p.setStyle("position","absolute"),p.setStyle("top",-f+.3,"em"),p.setStyle("left",0),p.setStyle("height",p.height+p.depth,"em"),p.setStyle("width","100%"),this.backgroundcolor&&p.setStyle("background-color",(i=d.toColor(this.backgroundcolor))!=null?i:"transparent"),this.framecolor&&p.setStyle("border",`${d.getRegisterAsEm("fboxrule",2)}em solid ${(o=d.toColor(this.framecolor))!=null?o:"black"}`),this.border&&p.setStyle("border",this.border);let y=new be([p,l],{type:"lift"});return y.setStyle("display","inline-block"),y.setStyle("position","relative"),y.setStyle("line-height",0),y.height=l.height+f+(c>0?c:0),y.depth=l.depth+f+(c<0?-c:0),y.setStyle("padding-left",f,"em"),y.setStyle("padding-right",f,"em"),y.setStyle("height",Math.floor(100*(l.height+l.depth+2*f+Math.abs(c)))/100,"em"),y.setStyle("margin-top",-f,"em"),y.setStyle("top",Math.floor(100*(l.depth-l.height+2*f-c))/100,"em"),y.setStyle("vertical-align",Math.floor(100*(l.depth+2*f))/100,"em"),this.caret&&(y.caret=this.caret),this.attachSupsub(e,{base:y})}_serialize(e){return e.skipStyles?Ze([this.bodyToLatex(e),this.supsubToLatex(e)]):super._serialize(e)}},iA=class aA extends re{constructor(e,n){var r;super({type:"composition",mode:(r=n?.mode)!=null?r:"math",value:e})}static fromJson(e){return new aA(e.value,e)}toJson(){return super.toJson()}render(e){let n=new be(this.value,{classes:"ML__composition",type:"composition"});return this.bind(e,n),this.caret&&(n.caret=this.caret),n}_serialize(e){return""}},Jl=class oA extends re{constructor(e){super({type:"error",value:e,command:e,mode:"math"}),this.verbatimLatex=e}static fromJson(e){return new oA(e.command)}toJson(){return super.toJson()}render(e){let n=this.createBox(e,{classes:"ML__error"});return this.caret&&(n.caret=this.caret),n}},sA=class lA extends re{constructor(e,n){super({type:"group",mode:n}),this.body=e,this.boxType=e.length>1?"ord":"ignore",this.skipBoundary=!0,this.displayContainsHighlight=!1,e&&e.length===1&&e[0].command===","&&(this.captureSelection=!0)}static fromJson(e){return new lA(e.body,e.mode)}render(e){let n=re.createBox(e,this.body,{type:this.boxType});return n?(this.caret&&(n.caret=this.caret),this.bind(e,n)):null}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let n=Jn(this.command,this.mode);return n!=null&&n.serialize?n.serialize(this,e):`{${this.bodyToLatex(e)}}`}},nn=class uA extends re{constructor(e,n,r){super({type:"leftright",style:r.style,displayContainsHighlight:!0}),this.variant=e,this.body=n,this.leftDelim=r.leftDelim,this.rightDelim=r.rightDelim}static fromJson(e){var n;return new uA((n=e.variant)!=null?n:"",e.body,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),e}_serialize(e){var n,r;let i=this.matchingRightDelim();return this.variant==="left...right"?Ze(["\\left",(n=this.leftDelim)!=null?n:".",this.bodyToLatex(e),"\\right",i]):this.variant==="mleft...mright"?Ze(["\\mleft",(r=this.leftDelim)!=null?r:".",this.bodyToLatex(e),"\\mright",i]):Ze([!this.leftDelim||this.leftDelim==="."?"":this.leftDelim,this.bodyToLatex(e),i])}matchingRightDelim(){var e,n;if(this.rightDelim&&this.rightDelim!=="?")return this.rightDelim;let r=(e=this.leftDelim)!=null?e:".";return(n=B1[r])!=null?n:r}render(e){var n,r;let i=new lt({parent:e},this.style);this.body;let o=new lt({parent:e,mathstyle:"textstyle"},this.style),l=(n=re.createBox(i,this.body,{type:"inner"}))!=null?n:new be(null,{type:"inner"}),c=l.height/o.scalingFactor,d=l.depth/o.scalingFactor,f=[];if(this.leftDelim&&f.push(this.bind(o,$f("open",this.leftDelim,c,d,o,{isSelected:this.isSelected,classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),l&&(cA(l.children,this,i,c,d),f.push(l)),this.rightDelim){let x=this.containsCaret?" ML__contains-caret":"",S=this.rightDelim;S==="?"&&(i.smartFence?(S=this.matchingRightDelim(),x+=" ML__smart-fence__close"):S="."),f.push(this.bind(o,$f("close",S,c,d,o,{isSelected:this.isSelected,classes:x+" ML__close",mode:this.mode,style:this.style})))}let p=this.variant==="mleft...mright",y=this.leftSibling;y&&(!p&&y.isFunction&&(p=!0),!p&&y.type==="subsup"&&(r=y.leftSibling)!=null&&r.isFunction&&(p=!0));let v=new be(f,{type:p?"close":"inner",classes:"ML__left-right"});return v.setStyle("margin-top",`${-l.depth}em`),v.setStyle("height",`${l.height+l.depth}em`),this.caret&&(v.caret=this.caret),this.bind(i,v.wrap(i))}};function cA(t,e,n,r,i){if(t)for(let o=0;o<t.length;o++){let l=t[o];l.type==="middle"?(t[o]=e.bind(n,$f("inner",l.value,r,i,n,{isSelected:e.isSelected})),t[o].caret=l.caret,t[o].isSelected=l.isSelected,t[o].cssId=l.cssId,t[o].htmlData=l.htmlData,t[o].htmlStyle=l.htmlStyle,t[o].attributes=l.attributes,t[o].cssProperties=l.cssProperties):l.children&&cA(l.children,e,n,r,i)}}var hA=class dA extends re{constructor(e,n){var r;super({type:"macro",command:e,style:n.style}),this.body=n.body,n.captureSelection===void 0?n.args?this.captureSelection=!1:this.captureSelection=!0:this.captureSelection=n.captureSelection,this.macroArgs=n.args,this.expand=(r=n.expand)!=null?r:!1}static fromJson(e){return new dA(e.command,e)}toJson(){let e=super.toJson();return this.expand&&(e.expand=!0),this.captureSelection!==void 0&&(e.captureSelection=this.captureSelection),this.macroArgs&&(e.args=this.macroArgs),e}_serialize(e){var n;return e.expandMacro&&this.expand?this.bodyToLatex(e):this.command+((n=this.macroArgs)!=null?n:"")}applyStyle(e,n){let r={};e.color&&(r.color=e.color),e.backgroundColor&&(r.backgroundColor=e.backgroundColor),super.applyStyle(r,n)}render(e){let n=re.createBox(e,this.body,{type:"lift"});return n?(this.caret&&(n.caret=this.caret),this.bind(e,n)):null}},p$=class fA extends re{constructor(){super({type:"macro-argument"})}static fromJson(e){return new fA}toJson(){return super.toJson()}_serialize(e){return""}render(e){return null}},mA=class pA extends re{constructor(e,n,r=!1,i,o){var l;super({type:"prompt",mode:(l=o?.mode)!=null?l:"math",style:o?.style,command:"\\placeholder"}),this.body=i,this.correctness=n,this.placeholderId=e,this.locked=r,this.captureSelection=this.locked}static fromJson(e){return new pA(e.placeholderId,e.correctness,e.locked,e.body,e)}toJson(){let e=super.toJson();return this.placeholderId&&(e.placeholderId=this.placeholderId),this.body||delete e.body,this.body&&(e.body=this.body.filter(n=>n.type!=="first").map(n=>n.toJson())),this.correctness&&(e.correctness=this.correctness),e.locked=this.locked,e}render(e){let n=new lt({parent:e}),r=n.getRegisterAsEm("fboxsep"),i=r,o=r,l=re.createBox(e,this.body);if(!l)return null;l.height||(l.height=n.metrics.xHeight),l.setStyle("vertical-align",-l.height,"em"),this.correctness==="correct"?l.setStyle("color","var(--correct-color, var(--ML__correct-color))"):this.correctness==="incorrect"&&l.setStyle("color","var(--incorrect-color, var(--ML__incorrect-color))");let c=new be(l,{type:"ord"});c.setStyle("display","inline-block"),c.setStyle("height",l.height+l.depth,"em"),c.setStyle("vertical-align",-o,"em");let d="ML__prompt ";this.locked?d+=" ML__lockedPromptBox ":d+=" ML__editablePromptBox ",this.correctness==="correct"?d+=" ML__correctPromptBox ":this.correctness==="incorrect"&&(d+=" ML__incorrectPromptBox "),this.containsCaret&&(d+=" ML__focusedPromptBox ");let f=new be(null,{classes:d,attributes:{part:"prompt"}});f.height=c.height+o,f.depth=c.depth+o,f.width=c.width+2*i,f.setStyle("position","absolute"),f.setStyle("height",`calc(${c.height+c.depth+2*o}em - 2px)`),i===0&&f.setStyle("width","100%"),i!==0&&(f.setStyle("width",`calc(100% + ${2*i}em)`),f.setStyle("top",r,"em"),f.setStyle("left",-i,"em")),(!this.body||this.body.length===1)&&(f.width=3*i,f.setStyle("width",`calc(100% + ${3*i}em)`),f.setStyle("left",-1.5*i,"em"));let p="";this.correctness==="incorrect"&&(p+='<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="0.5" stroke="var(--incorrect-color, var(--ML__incorrect-color))" stroke-linecap="round" />'),p&&(f.svgOverlay=p);let y=new be([f,c],{classes:"ML__prompt-atom"});return c.setStyle("line-height",1),y.setStyle("position","relative"),y.setStyle("display","inline-block"),y.setStyle("line-height",0),y.height=c.height+o+.2,y.depth=c.depth+o,y.left=i,y.right=i,y.setStyle("height",c.height+o,"em"),y.setStyle("top",c.depth-c.height,"em"),y.setStyle("vertical-align",c.depth+o,"em"),y.setStyle("margin-left",.5,"em"),y.setStyle("margin-right",.5,"em"),this.caret&&(y.caret=this.caret),this.bind(n,this.attachSupsub(e,{base:y}))}_serialize(e){var n;let r=(n=this.bodyToLatex(e))!=null?n:"";if(e.skipPlaceholders)return r;let i="\\placeholder";return this.placeholderId&&(i+=`[${this.placeholderId}]`),this.correctness==="correct"?i+="[correct]":this.correctness==="incorrect"&&(i+="[incorrect]"),this.locked&&(i+="[locked]"),Bt(i,r)}},N1=class gA extends re{constructor(e){super({type:"subsup",style:e?.style}),this.subsupPlacement="auto"}get children(){if(!this._children){let e=[],n=this.branch("subscript");if(n)for(let i of n)e.push(...i.children),e.push(i);let r=this.branch("superscript");if(r)for(let i of r)e.push(...i.children),e.push(i);this._children=e}return this._children}static fromJson(e){let n=new gA(e);for(let r of vh)e[r]&&n.setChildren(e[r],r);return n}render(e){var n;let r=new lt({parent:e,isPhantom:!0}),i=this.leftSibling,o=(n=i.render(r))!=null?n:new be(null),l=new be(null);return l.height=o.height,l.depth=o.depth,this.attachSupsub(e,{base:l,isCharacterBox:i.isCharacterBox(),type:"ignore"})}_serialize(e){return this.supsubToLatex(e)}};function Ic(t){return t?!/^(<$$>|<$>|<space>|<{>|<}>|#[0-9\?]|\\.+)$/.test(t):!1}var yA=class{constructor(t,e,n){this.errors=[],this.index=0,this.endCount=0;var r,i,o,l;n!=null||(n={}),this.tokens=t,this.context=e instanceof lt&&!(n!=null&&n.parseMode)&&!n.mathstyle?e:new lt({from:e,mathstyle:n.mathstyle},n.style),this.args=(r=n.args)!=null?r:void 0,this.smartFence=this.context.smartFence,this.parsingContext={parent:void 0,mathlist:[],style:(i=n.style)!=null?i:{},parseMode:(o=n.parseMode)!=null?o:"math",mathstyle:(l=n.mathstyle)!=null?l:"displaystyle",tabular:!1}}beginContext(t){var e,n,r,i,o,l;if(t!=null&&t.root){this.parsingContext={parent:this.parsingContext.parent,mathlist:[],style:{},parseMode:(e=t?.mode)!=null?e:"math",mathstyle:(n=t?.mathstyle)!=null?n:"displaystyle",tabular:(r=t?.tabular)!=null?r:!1};return}let c=this.parsingContext,d={parent:c,mathlist:[],style:N({},c.style),parseMode:(i=t?.mode)!=null?i:c.parseMode,mathstyle:(o=t?.mathstyle)!=null?o:c.mathstyle,tabular:(l=t?.tabular)!=null?l:!1};this.parsingContext=d}endContext(){this.parsingContext=this.parsingContext.parent}onError(t){this.errors.push(N({before:Kl(this.tokens.slice(this.index,this.index+10)),after:Kl(this.tokens.slice(Math.max(0,this.index-10),this.index))},t))}get mathlist(){return this.parsingContext.mathlist}set mathlist(t){this.parsingContext.mathlist=t}get parseMode(){return this.parsingContext.parseMode}set parseMode(t){this.parsingContext.parseMode=t}get tabularMode(){return this.parsingContext.tabular}get style(){let t=this.parsingContext;for(;t;){if(t.style)return N({},t.style);t=t.parent}return{}}set style(t){this.parsingContext.style=t}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}next(){this.index+=1}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}expandUnicode(){if(!this.peek()||this.parseMode!=="math")return;let t=eK(this.peek());t&&this.tokens.splice(this.index,1,...Kf(t))}match(t){return this.tokens[this.index]===t?(this.index++,!0):!1}lastSubsupAtom(){let t;return this.mathlist.length>0&&(t=this.mathlist[this.mathlist.length-1],t.type==="subsup"||t.subsupPlacement!==void 0)||(t=new N1({style:this.style}),this.mathlist.push(t)),t}hasPattern(t){return t.test(this.tokens[this.index])}hasInfixCommand(){var t;let{index:e}=this;if(e<this.tokens.length&&this.tokens[e].startsWith("\\")){let n=Jn(this.tokens[e],this.parseMode);return!n||n.definitionType==="symbol"||n.ifMode&&!n.ifMode.includes(this.parseMode)?!1:(t=n.infix)!=null?t:!1}return!1}matchColumnSeparator(){return!this.tabularMode||this.peek()!=="&"?!1:(this.index++,!0)}matchRowSeparator(){if(!this.tabularMode)return!1;let t=this.peek();return t!=="\\\\"&&t!=="\\cr"&&t!=="\\tabularnewline"?!1:(this.index++,!0)}placeholder(){var t;let e=(t=this.args)==null?void 0:t.call(this,"?");return e?Mi(e,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new Ia({mode:this.parseMode,style:this.style})]}skipWhitespace(){for(;this.match("<space>"););}skipUntilToken(t){let e=this.tokens[this.index];for(;e&&e!==t;)e=this.tokens[++this.index];e===t&&this.index++}skipFiller(){for(;this.match("\\relax")||this.match("<space>"););}matchKeyword(t){let e=this.index,n=this.end(),r="";for(;!n;){let o=this.get();Ic(o)?(r+=o,n=this.end()||r.length>=t.length):n=!0}let i=t.toUpperCase()===r.toUpperCase();return i||(this.index=e),i}scanString(){let t="";for(;!this.end();){let e=this.peek();if(e==="]")return t;if(e==="<space>")t+=" ";else if(e.startsWith("\\"))this.onError({code:"unexpected-command-in-string"}),t+=e.substring(1);else if(Ic(e))t+=e;else return t;this.next()}return t}scanBalancedString(){let t="",e=this.end(),n=1;for(;!e;){let r=this.get();r==="<space>"?t+=" ":r==="<{>"?(t+="{",n+=1):r==="<}>"?(n-=1,n>0?t+="}":this.index-=1):r==="<$>"?t+="$":r==="<$$>"?t+="$$":t+=r,e=n===0||this.end()}return t}scanLiteralGroup(){var t;if(!this.match("<{>"))return"";let e="",n=1;for(;n>0&&!this.end();){let r=this.get();r==="<}>"?(n-=1,n>0&&(e+="}")):r==="<{>"?(n+=1,e+="{"):(/\\[a-zA-Z]+$/.test(e)&&/^[a-zA-Z]/.test(r)&&(e+=" "),e+=(t={"<space>":" ","<$$>":"$$","<$>":"$"}[r])!=null?t:r)}return e}scanNumber(t=!0){var e,n;let r=!1,i=this.peek();for(;i==="<space>"||i==="+"||i==="-";)this.get(),i==="-"&&(r=!r),i=this.peek();t=!!t;let o=10,l=/\d/;if(this.match("'"))o=8,l=/[0-7]/,t=!0;else if(this.match('"'))o=16,l=/[\dA-F]/,t=!0;else if(this.match("x"))o=16,l=/[\dA-Fa-f]/,t=!0;else if(this.match("`"))return i=this.get(),i?i.length===2&&i.startsWith("\\")?{number:(r?-1:1)*((e=i.codePointAt(1))!=null?e:0),base:"alpha"}:{number:(r?-1:1)*((n=i.codePointAt(0))!=null?n:0),base:"alpha"}:null;let c="";for(;this.hasPattern(l);)c+=this.get();if(!t&&(this.match(".")||this.match(",")))for(c+=".";this.hasPattern(l);)c+=this.get();let d=t?Number.parseInt(c,o):Number.parseFloat(c);return Number.isNaN(d)?null:{number:r?-d:d,base:o===16?"hexadecimal":o===8?"octal":"decimal"}}scanRegister(){var t;let e=this.index,n=this.scanNumber(!1);if(this.skipWhitespace(),this.match("\\relax"))return n;let r=!1;if(n===null)for(;;){let o=this.peek();if(o==="-")r=!r;else if(o!=="+")break;this.next(),this.skipWhitespace()}if(this.match("\\global")){this.skipWhitespace();let o=this.get();return o.startsWith("\\")?n?{register:o,global:!0,factor:(r?-1:1)*n.number}:r?{register:o,global:!0,factor:-1}:{register:o,global:!0}:(this.index=e,null)}let i=this.get();return i!=null&&i.startsWith("\\")?(i=i.substring(1),this.context.registers[i]?!r||n!==null?{register:i,factor:(r?-1:1)*((t=n?.number)!=null?t:1)}:{register:i}:(this.index=e,null)):(this.index=e,null)}scanValue(){let t=this.scanRegister();if(t)return t;let e=this.index,n=this.scanGlueOrDimen();if(n&&("unit"in n||"glue"in n&&"unit"in n.glue))return n;this.index=e;let r=this.scanNumber();if(r)return r;if(this.end()||!Ic(this.peek()))return null;let i=this.scanString();return i.length>0?{string:i}:null}scanDimen(){let t=this.scanNumber(!1);if(t===null)return null;let e=t.number;this.skipWhitespace(),this.matchKeyword("true"),this.skipWhitespace();let n;return this.matchKeyword("pt")?n="pt":this.matchKeyword("mm")?n="mm":this.matchKeyword("cm")?n="cm":this.matchKeyword("ex")?n="ex":this.matchKeyword("px")?n="px":this.matchKeyword("em")?n="em":this.matchKeyword("bp")?n="bp":this.matchKeyword("dd")?n="dd":this.matchKeyword("pc")?n="pc":this.matchKeyword("in")?n="in":this.matchKeyword("mu")&&(n="mu"),n?{dimension:e,unit:n}:{dimension:e}}scanGlueOrDimen(){let t=this.scanDimen();if(t===null)return null;if(this.skipWhitespace(),this.match("\\relax"))return t;let e={glue:t};if(this.matchKeyword("plus")){let n=this.scanDimen();if(n)e.grow=n;else return e}if(this.skipWhitespace(),this.match("\\relax"))return e;if(this.skipWhitespace(),this.matchKeyword("minus")){let n=this.scanDimen();if(n)e.shrink=n;else return e}return!e.grow&&!e.shrink?t:e}scanColspec(){this.skipWhitespace();let t=[];for(;!this.end()&&!(this.peek()==="<}>"||this.peek()==="]");){let e=this.get();e==="c"||e==="r"||e==="l"?t.push({align:e}):e==="|"?t.push({separator:"solid"}):e===":"?t.push({separator:"dashed"}):e==="@"&&(this.match("<{>")&&(this.beginContext({mode:"math"}),t.push({gap:this.scan(n=>n==="<}>")}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return t}scanModeSet(){let t;if(this.match("\\(")&&(t="textstyle"),!t&&this.match("\\[")&&(t="displaystyle"),!t)return null;this.beginContext({mode:"math",mathstyle:t});let e=this.scan(n=>n===(t==="displaystyle"?"\\]":"\\)"));return this.match(t==="displaystyle"?"\\]":"\\)")||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),e}scanModeShift(){let t="";if(this.match("<$>")&&(t="<$>"),!t&&this.match("<$$>")&&(t="<$$>"),!t)return null;this.beginContext({mode:"math",mathstyle:t==="<$>"?"textstyle":"displaystyle"});let e=this.scan(n=>n===t);return this.match(t)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),e}scanEnvironment(){if(!this.match("\\begin"))return null;let t=this.scanArgument("string");if(!t)return null;let e=oK(t);if(!e)return this.onError({code:"unknown-environment",arg:t}),null;let n=[];if(e.params)for(let c of e.params)if(c.isOptional)n.push(this.scanOptionalArgument(c.type));else{let d=this.scanArgument(c.type);d||this.onError({code:"missing-argument",arg:t}),n.push(d)}this.beginContext({tabular:e.tabular,root:e.rootOnly});let r=[],i=[],o=[],l=!1;do if(this.end()&&(this.onError({code:"unbalanced-environment",arg:t}),l=!0),!l&&this.match("\\end")&&(this.scanArgument("string")!==t&&this.onError({code:"unbalanced-environment",arg:t}),l=!0),!l)if(this.matchColumnSeparator())o.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){o.push(this.mathlist),this.mathlist=[];let c=null;this.skipWhitespace(),this.match("[")&&(c=this.scanDimen(),this.skipWhitespace(),this.match("]")),i.push(c??{dimension:0}),r.push(o),o=[]}else this.mathlist.push(...this.scan(c=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(c)));while(!l);return o.push(this.mathlist),o.length>0&&r.push(o),this.endContext(),e.rootOnly&&(this.index=this.tokens.length),e.createAtom(t,r,i,n,this.context.maxMatrixCols)}scanExpression(){let t=this.mathlist;if(this.mathlist=[],this.parseExpression()){let e=this.mathlist;return this.mathlist=t,e}return this.mathlist=t,null}scan(t){this.beginContext(),t||(t=l=>l==="<}>");let e="",n=null,r=[],i=null;for(;!this.end()&&!t(this.peek());)this.hasInfixCommand()&&!e?(e=this.get(),n=Jn(e,"math"),n&&(r=this.scanArguments(n)[1]),i=this.mathlist,this.mathlist=[]):this.parseExpression();let o;return e?(r.unshift(this.mathlist),i&&r.unshift(i),o=[n.createAtom({command:e,args:r,style:this.style,mode:this.parseMode})]):o=this.mathlist,this.endContext(),o}scanGroup(){let t=this.index;if(!this.match("<{>"))return null;let e=this.scan(r=>r==="<}>");if(this.match("<}>")||this.onError({code:"unbalanced-braces"}),e.length===1&&e[0].type==="placeholder")return e[0];let n=new sA(e,this.parseMode);return n.verbatimLatex=Kl(this.tokens.slice(t,this.index)),n}scanSmartFence(){if(this.skipWhitespace(),!this.match("("))return null;this.beginContext();let t=1;for(;!this.end()&&t!==0;)this.match("(")&&(t+=1),this.match(")")&&(t-=1),t!==0&&this.parseExpression();let e=new nn("",this.mathlist,{leftDelim:"(",rightDelim:t===0?")":"?"});return this.endContext(),e}scanDelim(){this.skipWhitespace();let t=this.peek();if(!t)return this.onError({code:"unexpected-end-of-string"}),null;if(!Ic(t)&&!t.startsWith("\\"))return null;this.next();let e=Jn(t,"math");return e?e.definitionType==="function"&&e.ifMode&&!e.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:t}),null):e.definitionType==="symbol"&&(e.type==="mopen"||e.type==="mclose")||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(t)?t:(this.onError({code:"unexpected-delimiter",arg:t}),null):(this.onError({code:"unknown-command",arg:t}),null)}scanLeftRight(){var t;if(this.match("\\right"))return this.onError({code:"unbalanced-braces"}),new Jl("\\right");if(this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),new Jl("\\mright");let e="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;e="\\mright"}let n=this.scanDelim();if(!n)return this.onError({code:"unexpected-delimiter"}),new Jl(e==="\\right"?"\\left":"\\mleft");for(this.beginContext();!this.end()&&!this.match(e);)this.parseExpression();let r=this.mathlist;this.endContext();let i=(t=this.scanDelim())!=null?t:".";return new nn(e==="\\right"?"left...right":"mleft...mright",r,{leftDelim:n,rightDelim:i,style:this.style})}parseSupSub(){if(this.parseMode!=="math")return!1;let t=this.peek();if(t!=="^"&&t!=="_"&&t!=="'")return!1;let e=this.lastSubsupAtom();for(;t==="^"||t==="_"||t==="'";)this.match("'")?this.match("'")?e.addChild(new re({type:"mord",command:"\\doubleprime",mode:"math",value:"′′"}),"superscript"):e.addChild(new re({type:"mord",command:"\\prime",mode:"math",value:"′"}),"superscript"):(this.match("^")||this.match("_"))&&e.addChildren(we(this.scanArgument("expression")),t==="_"?"subscript":"superscript"),t=this.peek();return!0}parseLimits(){if(this.parseMode!=="math")return!1;let t=this.match("\\limits"),e=!t&&this.match("\\nolimits"),n=!e&&!t&&this.match("\\displaylimits");if(!t&&!e&&!n)return!1;let r=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return r===null?!1:(r.explicitSubsupPlacement=!0,t&&(r.subsupPlacement="over-under"),e&&(r.subsupPlacement="adjacent"),n&&(r.subsupPlacement="auto"),!0)}scanArguments(t){if(!(t!=null&&t.params))return[void 0,[]];let e,n=[],r=t.infix?2:0;for(;r<t.params.length;){let i=t.params[r];i.type==="rest"?n.push(this.scan(o=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(o))):i.isOptional?n.push(this.scanOptionalArgument(i.type)):i.type.endsWith("*")?e=i.type.slice(0,-1):n.push(this.scanArgument(i.type)),r+=1}return[e,n]}scanSymbolOrLiteral(){let t=this.peek();if(!t)return null;this.next();let e;if(Ic(t)){let n=ei.createAtom(this.parseMode,t,N({},this.style));return n?[n]:null}if(e=this.scanMacro(t),e)return[e];if(t.startsWith("\\")){let n=Jn(t,this.parseMode);if(!n)return this.onError({code:"unknown-command",arg:t}),[new Jl(t)];if(n.definitionType==="symbol"){let r=N({},this.style);n.variant&&(r.variant=n.variant),e=new re({type:n.type,command:t,style:r,value:String.fromCodePoint(n.codepoint),mode:this.parseMode,verbatimLatex:t})}else{if(n.applyMode||n.applyStyle||n.infix)return this.onError({code:"invalid-command",arg:t}),[new Jl(t)];n.createAtom&&(e=n.createAtom({command:t,args:[],style:this.style,mode:this.parseMode}))}}return e?[e]:null}scanArgument(t){var e;this.skipFiller();let n=this.parseMode;if(t==="auto"&&(t=n),!this.match("<{>")){if(t==="string")return this.scanString();if(t==="value")return this.scanValue();if(t==="delim")return(e=this.scanDelim())!=null?e:".";if(t==="expression")return this.scanExpression();if(t==="math"){t!==n&&this.beginContext({mode:"math"});let i=this.scanSymbolOrLiteral();return t!==n&&this.endContext(),i}if(t==="text"){t!==n&&this.beginContext({mode:"text"});let i=this.scanSymbolOrLiteral();return t!==n&&this.endContext(),i}return t==="balanced-string"?null:t==="rest"?this.scan(i=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(i)):null}if(t==="text"){this.beginContext({mode:"text"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let i=this.mathlist;return this.endContext(),{group:i}}if(t==="math"){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let i=this.mathlist;return this.endContext(),{group:i}}let r=null;if(t==="expression"){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let i=this.mathlist;return this.endContext(),{group:i}}return t==="string"?r=this.scanString():t==="balanced-string"?r=this.scanBalancedString():t==="colspec"?r=this.scanColspec():t==="value"&&(r=this.scanValue()),this.skipUntilToken("<}>"),r}scanOptionalArgument(t){if(t=t==="auto"?this.parseMode:t,this.skipFiller(),!this.match("["))return null;let e=null;for(;!this.end()&&!this.match("]");)if(t==="string")e=this.scanString();else if(t==="value")e=this.scanValue();else if(t==="colspec")e=this.scanColspec();else if(t==="bbox"){let n={},r=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let i of r){let o=i.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(o)n.padding={dimension:parseInt(o[1]),unit:o[2]};else{let l=i.match(/^\s*border\s*:\s*(.*)/);l?n.border=l[1]:n.backgroundcolor={string:i}}}e=n}else t==="math"&&(this.beginContext({mode:"math"}),e=this.mathlist.concat(this.scan(n=>n==="]")),this.endContext());return e}scanSymbolOrCommand(t){var e,n,r;if(t==="\\placeholder"){let c=this.scanOptionalArgument("string"),d=this.scanOptionalArgument("math"),f=re.serialize(d,{defaultMode:"math"}),p=[],y;!y&&f==="correct"?y="correct":!y&&f==="incorrect"?y="incorrect":f!==""&&(p=d);let v=this.scanOptionalArgument("string")==="locked",x=this.scanArgument("auto"),S;return x&&Array.isArray(x)&&x.length>0?S=x:x&&typeof x=="object"&&"group"in x?S=x.group:S=p,c?[new mA(c,y,v,S??p,{mode:this.parseMode,style:this.style})]:[new Ia({mode:this.parseMode,style:this.style})]}if(t==="\\renewcommand"||t==="\\newcommand"||t==="\\providecommand"||t==="\\def"){let c=this.index,d=this.scanLiteralGroup()||this.next();if(!d)return null;if(this.context.registers[d.substring(1)]){let f=this.scanArgument("string");f!==null&&(this.context.registers[d.substring(1)]=f);let p=Ze([t,Kl(this.tokens.slice(c,this.index))]);return[new re({type:"text",value:"",verbatimLatex:p})]}}let i=this.scanMacro(t);if(i)return[i];let o=Jn(t,this.parseMode);if(!o)return this.parseMode==="text"?(/[a-zA-Z]/.test((e=this.peek())!=null?e:"")&&(t+=" "),[...t].map(c=>new re({type:"text",value:c,mode:"text",style:this.style}))):(this.onError({code:"unknown-command",arg:t}),[new Jl(t)]);let l=this.index;if(o.definitionType==="symbol"){let c=N({},this.style);o.variant&&(c.variant=o.variant),i=new re({type:o.type,command:t,style:c,value:String.fromCodePoint(o.codepoint),mode:this.parseMode})}else{if(o.ifMode&&!o.ifMode.includes(this.parseMode))return[];let c=this.parseMode;o.applyMode&&(this.parseMode=o.applyMode);let d,f=[];if(o.parse?f=o.parse(this):[d,f]=this.scanArguments(o),this.parseMode=c,o.applyMode&&!o.applyStyle&&!o.createAtom)return we(f[0]);if(o.infix)return this.onError({code:"too-many-infix-commands",arg:t}),null;if(typeof o.createAtom=="function")i=o.createAtom({command:t,args:f,style:this.style,mode:this.parseMode}),d&&(i.body=we(this.scanArgument(d)));else if(typeof o.applyStyle=="function"){let p=o.applyStyle(this.style,t,f,this.context),y=this.parseMode;if(o.applyMode&&(this.parseMode=o.applyMode),d){let v=this.style;this.style=p;let x=this.scanArgument(d);return this.style=v,this.parseMode=y,we(x)}this.style=p}else i=new re({type:"mord",command:(n=o.command)!=null?n:t,style:N({},this.style),value:t,mode:(r=o.applyMode)!=null?r:this.parseMode})}if(!i)return null;if(i instanceof re&&i.verbatimLatex===void 0&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(t)){let c=Ze([t,Kl(this.tokens.slice(l,this.index))]);c&&(i.verbatimLatex=c)}if(i.verbatimLatex===null&&(i.verbatimLatex=void 0),i.isFunction&&this.smartFence){let c=this.scanSmartFence();if(c)return[i,c]}return[i]}scanSymbolCommandOrLiteral(){this.expandUnicode();let t=this.get();if(!t)return null;if(Ic(t)){let e=ei.createAtom(this.parseMode,t,N({},this.style));if(!e)return null;if(e.isFunction&&this.smartFence){let n=this.scanSmartFence();if(n)return[e,n]}return[e]}return t.startsWith("\\")?this.scanSymbolOrCommand(t):t==="<space>"?this.parseMode==="text"?[new Dh(" "," ",this.style)]:null:(t==="<}>"?this.onError({latex:"",code:"unbalanced-braces"}):this.onError({latex:"",code:"unexpected-token",arg:t}),null)}scanMacro(t){var e;let n=this.context.getMacro(t);if(!n)return null;let r=this.index,i=n.args,o={"?":(e=this.args)==null?void 0:e.call(this,"?")};for(let l=1;l<=i;l++){let c=this.scanLiteralGroup();if(!c){let d=this.index;this.scanExpression(),c=Kl(this.tokens.slice(d,this.index))}o[l]=c}return new hA(t,{expand:n.expand,captureSelection:n.captureSelection,args:r===this.index?null:Kl(this.tokens.slice(r,this.index)),style:this.parsingContext.style,body:Mi(n.def,{context:this.context,parseMode:this.parseMode,args:l=>o[l],mathstyle:this.parsingContext.mathstyle,style:this.parsingContext.style})})}parseExpression(){var t,e,n,r;let i=(r=(n=(e=(t=this.scanEnvironment())!=null?t:this.scanModeShift())!=null?e:this.scanModeSet())!=null?n:this.scanGroup())!=null?r:this.scanLeftRight();if(i===null){if(this.parseSupSub()||this.parseLimits())return!0;i=this.scanSymbolCommandOrLiteral()}return i?(Rn(i)?this.mathlist.push(...i):this.mathlist.push(i),!0):!1}};function Mi(t,e){var n,r,i,o;let l=(n=e?.args)!=null?n:void 0,c=new yA(Kf(t,l),e?.context,{args:l,mathstyle:(r=e?.mathstyle)!=null?r:"displaystyle",parseMode:(i=e?.parseMode)!=null?i:"math",style:(o=e?.style)!=null?o:{}}),d=[];for(;!c.end();)d.push(...c.scan(()=>!1));return d}function g$(t,e){var n;let r=new yA(Kf(t,null),e?.context,{mathstyle:"displaystyle",parseMode:(n=e?.parseMode)!=null?n:"math"});for(;!r.end();)r.scan();return r.errors}var bA=class vA extends re{constructor(e,n){super({type:"chem"},{command:e,mode:"math"});let r=Gt.go(me.go(n,e==="\\pu"?"pu":"ce"),!1);this.body=Mi(r),this._verbatimLatex=e+"{"+n+"}",this.arg=n,this.captureSelection=!0}static fromJson(e){return new vA(e.command,e.arg)}set verbatimLatex(e){}get verbatimLatex(){return this._verbatimLatex}toJson(){return q(N({},super.toJson()),{arg:this.arg})}render(e){let n=re.createBox(e,this.body,{type:"inner"});return this.caret&&(n.caret=this.caret),this.bind(e,n)}_serialize(e){return this.verbatimLatex,this.verbatimLatex}};oe(["ce","pu"],"{chemformula:balanced-string}",{createAtom:t=>{var e;return new bA(t.command,(e=t.args[0])!=null?e:"")}});var me={go:function(t,e){if(!t)return[];e===void 0&&(e="ce");var n="0",r={};r.parenthesisLevel=0,t=t.replace(/\n/g," "),t=t.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),t=t.replace(/[\u2026]/g,"...");for(var i,o=10,l=[];;){i!==t?(o=10,i=t):o--;var c=me.stateMachines[e],d=c.transitions[n]||c.transitions["*"];e:for(var f=0;f<d.length;f++){var p=me.patterns.match_(d[f].pattern,t);if(p){for(var y=d[f].task,v=0;v<y.action_.length;v++){var x;if(c.actions[y.action_[v].type_])x=c.actions[y.action_[v].type_](r,p.match_,y.action_[v].option);else if(me.actions[y.action_[v].type_])x=me.actions[y.action_[v].type_](r,p.match_,y.action_[v].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+y.action_[v].type_+")"];me.concatArray(l,x)}if(n=y.nextState||n,t.length>0){if(y.revisit||(t=p.remainder),!y.toContinue)break e}else return l}}if(o<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,e){if(e)if(Object.prototype.toString.call(e)==="[object Array]")for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return e&&e[0]?{match_:e.slice(1),remainder:t.substr(e[0].length)}:null},"(-)(9)^(-9)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return e&&e[0]?{match_:e.slice(1),remainder:t.substr(e[0].length)}:null},"state of aggregation $":function(t){var e=me.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(e&&e.remainder.match(/^($|[\s,;\)\]\}])/))return e;var n=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return n?{match_:n[0],remainder:t.substr(n[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(t){return me.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return me.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return me.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return me.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return me.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return me.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return me.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return me.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(t){return me.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return me.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return me.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$":function(t){return me.patterns.findObserveGroups(t,"${","","","}$")},"$(...)$":function(t){return me.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return me.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return me.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return me.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return me.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return me.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return me.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return me.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return me.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(t){return me.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(t){return me.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(t){return me.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return me.patterns.findObserveGroups(t,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){var e;if(e=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),e)return{match_:e[0],remainder:t.substr(e[0].length)};var n=me.patterns.findObserveGroups(t,"","$","$","");return n&&(e=n.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),e)?{match_:e[0],remainder:t.substr(e[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var e=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return e?{match_:e[0],remainder:t.substr(e[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,e,n,r,i,o,l,c,d,f){var p=function(L,j){if(typeof j=="string")return L.indexOf(j)!==0?null:j;var z=L.match(j);return z?z[0]:null},y=function(L,j,z){for(var G=0;j<L.length;){var ie=L.charAt(j),B=p(L.substr(j),z);if(B!==null&&G===0)return{endMatchBegin:j,endMatchEnd:j+B.length};if(ie==="{")G++;else if(ie==="}"){if(G===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];G--}j++}return null},v=p(t,e);if(v===null||(t=t.substr(v.length),v=p(t,n),v===null))return null;var x=y(t,v.length,r||i);if(x===null)return null;var S=t.substring(0,r?x.endMatchEnd:x.endMatchBegin);if(o||l){var R=this.findObserveGroups(t.substr(x.endMatchEnd),o,l,c,d);if(R===null)return null;var I=[S,R.match_];return{match_:f?I.join(""):I,remainder:R.remainder}}else return{match_:S,remainder:t.substr(x.endMatchEnd)}},match_:function(t,e){var n=me.patterns.patterns[t];if(n===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if(typeof n=="function")return me.patterns.patterns[t](e);var r=e.match(n);if(r){var i;return r[2]?i=[r[1],r[2]]:r[1]?i=r[1]:i=r[0],{match_:i,remainder:e.substr(r[0].length)}}return null}},actions:{"a=":function(t,e){t.a=(t.a||"")+e},"b=":function(t,e){t.b=(t.b||"")+e},"p=":function(t,e){t.p=(t.p||"")+e},"o=":function(t,e){t.o=(t.o||"")+e},"q=":function(t,e){t.q=(t.q||"")+e},"d=":function(t,e){t.d=(t.d||"")+e},"rm=":function(t,e){t.rm=(t.rm||"")+e},"text=":function(t,e){t.text_=(t.text_||"")+e},insert:function(t,e,n){return{type_:n}},"insert+p1":function(t,e,n){return{type_:n,p1:e}},"insert+p1+p2":function(t,e,n){return{type_:n,p1:e[0],p2:e[1]}},copy:function(t,e){return e},rm:function(t,e){return{type_:"rm",p1:e||""}},text:function(t,e){return me.go(e,"text")},"{text}":function(t,e){var n=["{"];return me.concatArray(n,me.go(e,"text")),n.push("}"),n},"tex-math":function(t,e){return me.go(e,"tex-math")},"tex-math tight":function(t,e){return me.go(e,"tex-math tight")},bond:function(t,e,n){return{type_:"bond",kind_:n||e}},"color0-output":function(t,e){return{type_:"color0",color:e[0]}},ce:function(t,e){return me.go(e)},"1/2":function(t,e){var n=[];e.match(/^[+\-]/)&&(n.push(e.substr(0,1)),e=e.substr(1));var r=e.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return r[1]=r[1].replace(/\$/g,""),n.push({type_:"frac",p1:r[1],p2:r[2]}),r[3]&&(r[3]=r[3].replace(/\$/g,""),n.push({type_:"tex-math",p1:r[3]})),n},"9,9":function(t,e){return me.go(e,"9,9")}},createTransitions:function(t){var e,n,r,i,o={};for(e in t)for(n in t[e])for(r=n.split("|"),t[e][n].stateArray=r,i=0;i<r.length;i++)o[r[i]]=[];for(e in t)for(n in t[e])for(r=t[e][n].stateArray||[],i=0;i<r.length;i++){var l=t[e][n];if(l.action_){l.action_=[].concat(l.action_);for(var c=0;c<l.action_.length;c++)typeof l.action_[c]=="string"&&(l.action_[c]={type_:l.action_[c]})}else l.action_=[];for(var d=e.split("|"),f=0;f<d.length;f++)if(r[i]==="*")for(var p in o)o[p].push({pattern:d[f],task:l});else o[r[i]].push({pattern:d[f],task:l})}return o},stateMachines:{}};me.stateMachines={ce:{transitions:me.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,e){var n;if((t.d||"").match(/^[0-9]+$/)){var r=t.d;t.d=void 0,n=this.output(t),t.b=r}else n=this.output(t);return me.actions["o="](t,e),n},"d= kv":function(t,e){t.d=e,t.dType="kv"},"charge or bond":function(t,e){if(t.beginsWithBond){var n=[];return me.concatArray(n,this.output(t)),me.concatArray(n,me.actions.bond(t,e,"-")),n}else t.d=e},"- after o/d":function(t,e,n){var r=me.patterns.match_("orbital",t.o||""),i=me.patterns.match_("one lowercase greek letter $",t.o||""),o=me.patterns.match_("one lowercase latin letter $",t.o||""),l=me.patterns.match_("$one lowercase latin letter$ $",t.o||""),c=e==="-"&&(r&&r.remainder===""||i||o||l);c&&!t.a&&!t.b&&!t.p&&!t.d&&!t.q&&!r&&o&&(t.o="$"+t.o+"$");var d=[];return c?(me.concatArray(d,this.output(t)),d.push({type_:"hyphen"})):(r=me.patterns.match_("digits",t.d||""),n&&r&&r.remainder===""?(me.concatArray(d,me.actions["d="](t,e)),me.concatArray(d,this.output(t))):(me.concatArray(d,this.output(t)),me.concatArray(d,me.actions.bond(t,e,"-")))),d},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,e){return{type_:"state of aggregation",p1:me.go(e,"o")}},comma:function(t,e){var n=e.replace(/\s*$/,""),r=n!==e;return r&&t.parenthesisLevel===0?{type_:"comma enumeration L",p1:n}:{type_:"comma enumeration M",p1:n}},output:function(t,e,n){var r;if(!t.r)r=[],!t.a&&!t.b&&!t.p&&!t.o&&!t.q&&!t.d&&!n||(t.sb&&r.push({type_:"entitySkip"}),!t.o&&!t.q&&!t.d&&!t.b&&!t.p&&n!==2?(t.o=t.a,t.a=void 0):!t.o&&!t.q&&!t.d&&(t.b||t.p)?(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):t.o&&t.dType==="kv"&&me.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&t.dType==="kv"&&!t.q&&(t.dType=void 0),r.push({type_:"chemfive",a:me.go(t.a,"a"),b:me.go(t.b,"bd"),p:me.go(t.p,"pq"),o:me.go(t.o,"o"),q:me.go(t.q,"pq"),d:me.go(t.d,t.dType==="oxidation"?"oxidation":"bd"),dType:t.dType}));else{var i;t.rdt==="M"?i=me.go(t.rd,"tex-math"):t.rdt==="T"?i=[{type_:"text",p1:t.rd||""}]:i=me.go(t.rd);var o;t.rqt==="M"?o=me.go(t.rq,"tex-math"):t.rqt==="T"?o=[{type_:"text",p1:t.rq||""}]:o=me.go(t.rq),r={type_:"arrow",r:t.r,rd:i,rq:o}}for(var l in t)l!=="parenthesisLevel"&&l!=="beginsWithBond"&&delete t[l];return r},"oxidation-output":function(t,e){var n=["{"];return me.concatArray(n,me.go(e,"oxidation")),n.push("}"),n},"frac-output":function(t,e){return{type_:"frac-ce",p1:me.go(e[0]),p2:me.go(e[1])}},"overset-output":function(t,e){return{type_:"overset",p1:me.go(e[0]),p2:me.go(e[1])}},"underset-output":function(t,e){return{type_:"underset",p1:me.go(e[0]),p2:me.go(e[1])}},"underbrace-output":function(t,e){return{type_:"underbrace",p1:me.go(e[0]),p2:me.go(e[1])}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:me.go(e[1])}},"r=":function(t,e){t.r=e},"rdt=":function(t,e){t.rdt=e},"rd=":function(t,e){t.rd=e},"rqt=":function(t,e){t.rqt=e},"rq=":function(t,e){t.rq=e},operator:function(t,e,n){return{type_:"operator",kind_:n||e}}}},a:{transitions:me.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:me.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:me.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var e={type_:"text",p1:t.text_};for(var n in t)delete t[n];return e}}}},pq:{transitions:me.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,e){return{type_:"state of aggregation subscript",p1:me.go(e,"o")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:me.go(e[1],"pq")}}}},bd:{transitions:me.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,e){return{type_:"color",color1:e[0],color2:me.go(e[1],"bd")}}}},oxidation:{transitions:me.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(t,e){return{type_:"roman numeral",p1:e||""}}}},"tex-math":{transitions:me.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var n in t)delete t[n];return e}}}},"tex-math tight":{transitions:me.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,e){t.o=(t.o||"")+"{"+e+"}"},output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var n in t)delete t[n];return e}}}},"9,9":{transitions:me.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:me.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,e){var n=[];return e[0]==="+-"||e[0]==="+/-"?n.push("\\pm "):e[0]&&n.push(e[0]),e[1]&&(me.concatArray(n,me.go(e[1],"pu-9,9")),e[2]&&(e[2].match(/[,.]/)?me.concatArray(n,me.go(e[2],"pu-9,9")):n.push(e[2])),(e[3]||e[4])&&(e[3]==="e"||e[4]==="*"?n.push({type_:"cdot"}):n.push({type_:"times"}))),e[5]&&n.push("10^{"+e[5]+"}"),n},"number^":function(t,e){var n=[];return e[0]==="+-"||e[0]==="+/-"?n.push("\\pm "):e[0]&&n.push(e[0]),me.concatArray(n,me.go(e[1],"pu-9,9")),n.push("^{"+e[2]+"}"),n},operator:function(t,e,n){return{type_:"operator",kind_:n||e}},space:function(){return{type_:"pu-space-1"}},output:function(t){var e,n=me.patterns.match_("{(...)}",t.d||"");n&&n.remainder===""&&(t.d=n.match_);var r=me.patterns.match_("{(...)}",t.q||"");if(r&&r.remainder===""&&(t.q=r.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var i={d:me.go(t.d,"pu"),q:me.go(t.q,"pu")};t.o==="//"?e={type_:"pu-frac",p1:i.d,p2:i.q}:(e=i.d,i.d.length>1||i.q.length>1?e.push({type_:" / "}):e.push({type_:"/"}),me.concatArray(e,i.q))}else e=me.go(t.d,"pu-2");for(var o in t)delete t[o];return e}}},"pu-2":{transitions:me.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,e){t.rm+="^{"+e+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var e=[];if(t.rm){var n=me.patterns.match_("{(...)}",t.rm||"");n&&n.remainder===""?e=me.go(n.match_,"pu"):e={type_:"rm",p1:t.rm}}for(var r in t)delete t[r];return e}}},"pu-9,9":{transitions:me.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var n=t.text_.length%3;n===0&&(n=3);for(var r=t.text_.length-3;r>0;r-=3)e.push(t.text_.substr(r,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(0,n)),e.reverse()}else e.push(t.text_);for(var i in t)delete t[i];return e},"output-o":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){for(var n=t.text_.length-3,r=0;r<n;r+=3)e.push(t.text_.substr(r,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(r))}else e.push(t.text_);for(var i in t)delete t[i];return e}}}};var Gt={go:function(t,e){if(!t)return"";for(var n="",r=!1,i=0;i<t.length;i++){var o=t[i];typeof o=="string"?n+=o:(n+=Gt._go2(o),o.type_==="1st-level escape"&&(r=!0))}return!e&&!r&&n&&(n="{"+n+"}"),n},_goInner:function(t){return t&&Gt.go(t,!0)},_go2:function(t){var e;switch(t.type_){case"chemfive":e="";var n={a:Gt._goInner(t.a),b:Gt._goInner(t.b),p:Gt._goInner(t.p),o:Gt._goInner(t.o),q:Gt._goInner(t.q),d:Gt._goInner(t.d)};n.a&&(n.a.match(/^[+\-]/)&&(n.a="{"+n.a+"}"),e+=n.a+"\\,"),(n.b||n.p)&&(e+="{\\vphantom{X}}",e+="^{\\hphantom{"+(n.b||"")+"}}_{\\hphantom{"+(n.p||"")+"}}",e+="{\\vphantom{X}}",e+="^{\\smash[t]{\\vphantom{2}}\\llap{"+(n.b||"")+"}}",e+="_{\\vphantom{2}\\llap{\\smash[t]{"+(n.p||"")+"}}}"),n.o&&(n.o.match(/^[+\-]/)&&(n.o="{"+n.o+"}"),e+=n.o),t.dType==="kv"?((n.d||n.q)&&(e+="{\\vphantom{X}}"),n.d&&(e+="^{"+n.d+"}"),n.q&&(e+="_{\\smash[t]{"+n.q+"}}")):t.dType==="oxidation"?(n.d&&(e+="{\\vphantom{X}}",e+="^{"+n.d+"}"),n.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+n.q+"}}")):(n.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+n.q+"}}"),n.d&&(e+="{\\vphantom{X}}",e+="^{"+n.d+"}"));break;case"rm":e="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),e="\\mathrm{"+t.p1+"}"):e="\\text{"+t.p1+"}";break;case"roman numeral":e="\\mathrm{"+t.p1+"}";break;case"state of aggregation":e="\\mskip2mu "+Gt._goInner(t.p1);break;case"state of aggregation subscript":e="\\mskip1mu "+Gt._goInner(t.p1);break;case"bond":if(e=Gt._getBond(t.kind_),!e)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var r="\\frac{"+t.p1+"}{"+t.p2+"}";e="\\mathchoice{\\textstyle"+r+"}{"+r+"}{"+r+"}{"+r+"}";break;case"pu-frac":var i="\\frac{"+Gt._goInner(t.p1)+"}{"+Gt._goInner(t.p2)+"}";e="\\mathchoice{\\textstyle"+i+"}{"+i+"}{"+i+"}{"+i+"}";break;case"tex-math":e=t.p1+" ";break;case"frac-ce":e="\\frac{"+Gt._goInner(t.p1)+"}{"+Gt._goInner(t.p2)+"}";break;case"overset":e="\\overset{"+Gt._goInner(t.p1)+"}{"+Gt._goInner(t.p2)+"}";break;case"underset":e="\\underset{"+Gt._goInner(t.p1)+"}{"+Gt._goInner(t.p2)+"}";break;case"underbrace":e="\\underbrace{"+Gt._goInner(t.p1)+"}_{"+Gt._goInner(t.p2)+"}";break;case"color":e="{\\color{"+t.color1+"}{"+Gt._goInner(t.color2)+"}}";break;case"color0":e="\\color{"+t.color+"}";break;case"arrow":var o={rd:Gt._goInner(t.rd),rq:Gt._goInner(t.rq)},l=Gt._getArrow(t.r);o.rd||o.rq?t.r==="<=>"||t.r==="<=>>"||t.r==="<<=>"||t.r==="<-->"?(l="\\long"+l,o.rd&&(l="\\overset{"+o.rd+"}{"+l+"}"),o.rq&&(t.r==="<-->"?l="\\underset{\\lower2mu{"+o.rq+"}}{"+l+"}":l="\\underset{\\lower6mu{"+o.rq+"}}{"+l+"}"),l=" {}\\mathrel{"+l+"}{} "):(o.rq&&(l+="[{"+o.rq+"}]"),l+="{"+o.rd+"}",l=" {}\\mathrel{\\x"+l+"}{} "):l=" {}\\mathrel{\\long"+l+"}{} ",e=l;break;case"operator":e=Gt._getOperator(t.kind_);break;case"1st-level escape":e=t.p1+" ";break;case"space":e=" ";break;case"entitySkip":e="~";break;case"pu-space-1":e="~";break;case"pu-space-2":e="\\mkern3mu ";break;case"1000 separator":e="\\mkern2mu ";break;case"commaDecimal":e="{,}";break;case"comma enumeration L":e="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":e="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":e="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":e="\\text{-}";break;case"addition compound":e="\\,{\\cdot}\\,";break;case"electron dot":e="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":e="{\\times}";break;case"prime":e="\\prime ";break;case"cdot":e="\\cdot ";break;case"tight cdot":e="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":e="\\times ";break;case"circa":e="{\\sim}";break;case"^":e="uparrow";break;case"v":e="downarrow";break;case"ellipsis":e="\\ldots ";break;case"/":e="/";break;case" / ":e="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return e},_getArrow:function(t){switch(t){case"->":return"rightarrow";case"→":return"rightarrow";case"⟶":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"leftrightarrows";case"<=>":return"rightleftharpoons";case"⇌":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},_A=class xA extends re{constructor(e){super(q(N({},e),{type:"delim"})),this.value=e.delim,this.size=e.size}static fromJson(e){return new xA(e)}toJson(){return q(N({},super.toJson()),{delim:this.value,size:this.size})}render(e){return new be(this.value,{type:"middle"})}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let n=Jn(this.command,this.mode);return n!=null&&n.serialize?n.serialize(this,e):Bt(this.command,this.value)}},wA=class EA extends re{constructor(e){super(q(N({},e),{type:"sizeddelim",value:e.delim})),this.delimType=e.delimType,this.size=e.size}static fromJson(e){return new EA(e)}toJson(){return q(N({},super.toJson()),{delim:this.value,size:this.size,delimType:this.delimType})}render(e){let n=t$(this.value,this.size,e,{classes:{open:"ML__open",close:"ML__close"}[this.delimType],type:this.delimType,isSelected:this.isSelected});return n?(n=this.bind(e,n),this.caret&&(n.caret=this.caret),n):null}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let n=Jn(this.command,this.mode);return n!=null&&n.serialize?n.serialize(this,e):Bt(this.command,this.value)}},lm=class SA extends re{constructor(e,n,r,i){var o,l;super({type:"enclose",command:e,style:i.style}),this.body=n,this.backgroundcolor=i.backgroundcolor,r.updiagonalarrow&&(r.updiagonalstrike=!1),r.box&&(r.left=!1,r.right=!1,r.bottom=!1,r.top=!1),this.notation=r,this.shadow=(o=i.shadow)!=null?o:"none",this.strokeWidth=(l=i.strokeWidth)!=null?l:"0.06em",this.strokeWidth||(this.strokeWidth="0.06em"),this.strokeStyle=i.strokeStyle,this.svgStrokeStyle=i.svgStrokeStyle,this.strokeColor=i.strokeColor,this.borderStyle=i.borderStyle,this.padding=i.padding,this.captureSelection=!1}static fromJson(e){return new SA(e.command,e.body,e.notation,e)}toJson(){return q(N({},super.toJson()),{notation:this.notation,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}_serialize(e){var n;if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=Jn(this.command,this.mode);if(r!=null&&r.serialize)return r.serialize(this,e);let i=(n=this.command)!=null?n:"";if(this.command==="\\enclose"){i+="{"+Object.keys(this.notation).join(" ")+"}";let o="",l="";this.backgroundcolor&&this.backgroundcolor!=="transparent"&&(o+=l+'mathbackground="'+this.backgroundcolor+'"',l=","),this.shadow&&this.shadow!=="auto"&&(o+=l+'shadow="'+this.shadow+'"',l=","),this.strokeWidth||this.strokeStyle!=="solid"?(o+=l+this.borderStyle,l=","):this.strokeColor&&this.strokeColor!=="currentColor"&&(o+=l+'mathcolor="'+this.strokeColor+'"',l=","),o&&(i+=`[${o}]`)}return Bt(i,this.bodyToLatex(e))}render(e){let n=new lt({parent:e},this.style),r=re.createBox(n,this.body);if(!r)return null;let i=y$(this.borderStyle),o=n.toEm(!this.padding||this.padding==="auto"?{register:"fboxsep"}:{string:this.padding});r.setStyle("position","relative"),r.setStyle("display","inline-block"),r.setStyle("height",r.height+r.depth,"em"),r.setStyle("width",r.width,"em");let l=new be(null,{classes:"ML__notation"}),c=r.height+r.depth+2*o,d=r.width+2*o,f="";if(this.notation.horizontalstrike&&(f+=this.line(3,50,97,50)),this.notation.verticalstrike&&(f+=this.line(50,3,50,97)),this.notation.updiagonalstrike&&(f+=this.line(3,97,97,3)),this.notation.downdiagonalstrike&&(f+=this.line(3,3,97,97)),this.notation.updiagonalarrow){f+=this.line(o.toString(),(o+r.depth+r.height).toString(),(o+r.width).toString(),o.toString());let y=.03*Math.sqrt(d*d+c*c)*1,v=r.width*y,x=(r.depth+r.height)*y,S=o+r.width,R=o;R+x-.4*v<0&&(R=.4*v-x),f+='<polygon points="',f+=`${S},${R} ${S-v-.4*x},${R+x-.4*v} `,f+=`${S-.7*v},${R+.7*x} ${S-v+.4*x},${R+x+.4*v} `,f+=`${S},${R}`,f+=`" stroke='none' fill="${this.strokeColor}"`,f+="/>"}if(this.notation.phasorangle){let y=xE(n),v=(r.height+r.depth+2*y+o).toString(),x=(r.height+r.depth)/2;f+=this.line(o.toString(),v,(o+x+r.width).toString(),v),f+=this.line(o.toString(),v,(o+x).toString(),(o-y).toString()),c+=y,r.left+=c/2-o}if(this.notation.longdiv){let y=xE(n);c+=y,f+=this.line(o.toString(),o.toString(),(o+r.width).toString(),o.toString());let v=.3;r.left+=v+y,r.setTop(o+y),f+='<path d="',f+=`M ${o} ${o}  a${v} ${(r.depth+r.height+2*y)/2}, 0, 1, 1, 0 ${r.depth+r.height+2*y} "`,f+=` stroke-width="${b$(n)}" stroke="${this.strokeColor}" fill="none"`,f+="/>"}if(l.height=r.height+o,l.depth=r.depth+o,l.setStyle("box-sizing","border-box"),l.setStyle("left",`calc(-1 * ${i} - ${o}em)`),l.setStyle("height",`calc( ${r.height+r.depth+2*o}em + ${i})`),l.setStyle("top",`calc(-${o}em )`),l.setStyle("width",`calc(${r.width+2*o}em + ${i})`),this.backgroundcolor&&l.setStyle("background-color",this.backgroundcolor),this.notation.box&&l.setStyle("border","1px solid red"),this.notation.actuarial&&(l.setStyle("border-top",this.borderStyle),l.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(l.setStyle("border-bottom",this.borderStyle),l.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(l.setStyle("border-radius","8px"),l.setStyle("border",this.borderStyle)),this.notation.circle&&(l.setStyle("border-radius","50%"),l.setStyle("border",this.borderStyle)),this.notation.top&&l.setStyle("border-top",this.borderStyle),this.notation.left&&l.setStyle("border-left",this.borderStyle),this.notation.right&&l.setStyle("border-right",this.borderStyle),this.notation.bottom&&l.setStyle("border-bottom",this.borderStyle),f){let y="";this.shadow==="auto"&&(y+="filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)"),this.shadow!=="none"&&(y+=`filter: drop-shadow(${this.shadow})`),y+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,y+=' stroke-linecap="round"',this.svgStrokeStyle&&(y+=` stroke-dasharray="${this.svgStrokeStyle}"`),l.svgStyle=y,l.svgOverlay=f}let p=new be([l,r]);return p.setStyle("position","relative"),p.setStyle("height",`${Math.floor(100*(l.depth+l.height))/100}em`),p.setStyle("display","inline-block"),p.height=l.height,p.depth=l.depth,p.left=o,p.right=o,this.caret&&(p.caret=this.caret),p.wrap(n)}line(e,n,r,i){return`<line x1="${D0(e)}"  y1="${D0(n)}" x2="${D0(r)}" y2="${D0(i)}" vector-effect="non-scaling-stroke"></line>`}};function D0(t){return typeof t=="number"?`${Math.floor(100*t)/100}%`:t}function y$(t){if(!t)return"1px";let e=t.match(/([0-9][a-zA-Z\%]+)/);return e===null?"1px":e[1]}function b$(t){return(Math.floor(100*t.metrics.sqrtRuleThickness/t.scalingFactor)/100/10).toString()+"em"}function xE(t){let e=t.isDisplayStyle?Ks:t.metrics.defaultRuleThickness;return t.metrics.defaultRuleThickness+t.scalingFactor*e/4}var lg={fractionNavigationOrder:"numerator-denominator"},Ru=class kA extends re{constructor(e,n,r){var i,o,l;super(q(N({},r),{type:"genfrac",displayContainsHighlight:!0})),this.above=e,this.below=n,this.hasBarLine=(i=r?.hasBarLine)!=null?i:!0,this.continuousFraction=(o=r?.continuousFraction)!=null?o:!1,this.align=(l=r?.align)!=null?l:"center",this.numerPrefix=r?.numerPrefix,this.denomPrefix=r?.denomPrefix,this.mathstyleName=r?.mathstyleName,this.leftDelim=r?.leftDelim,this.rightDelim=r?.rightDelim}static fromJson(e){return new kA(e.above,e.below,e)}toJson(){let e={};return this.continuousFraction&&(e.continuousFraction=!0),this.align!=="center"&&(e.align=this.align),this.numerPrefix&&(e.numerPrefix=this.numerPrefix),this.denomPrefix&&(e.denomPrefix=this.denomPrefix),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.hasBarLine||(e.hasBarLine=!1),this.mathstyleName&&(e.mathstyleName=this.mathstyleName),N(N({},super.toJson()),e)}get children(){if(this._children)return this._children;let e=[];if(lg.fractionNavigationOrder==="denominator-numerator"){for(let n of this.below)e.push(...n.children),e.push(n);for(let n of this.above)e.push(...n.children),e.push(n)}else{for(let n of this.above)e.push(...n.children),e.push(n);for(let n of this.below)e.push(...n.children),e.push(n)}return this._children=e,e}render(e){var n,r;let i=new lt({parent:e,mathstyle:this.mathstyleName},this.style),o=i.metrics,l=new lt({parent:i,mathstyle:this.continuousFraction?"":"numerator"},this.style),c=this.numerPrefix?new be([new be(this.numerPrefix),re.createBox(l,this.above)],{isTight:l.isTight,type:"ignore"}):(n=re.createBox(l,this.above,{type:"ignore"}))!=null?n:new be(null,{type:"ignore"}),d=new lt({parent:i,mathstyle:this.continuousFraction?"":"denominator"},this.style),f=this.denomPrefix?new be([new be(this.denomPrefix),re.createBox(d,this.below,{type:"ignore"})]):(r=re.createBox(d,this.below,{type:"ignore"}))!=null?r:new be(null,{type:"ignore"}),p=this.hasBarLine?o.defaultRuleThickness:0,y,v=0,x;i.isDisplayStyle?(y=l.metrics.num1,v=p>0?3*p:7*p,x=d.metrics.denom1):(p>0?(y=l.metrics.num2,v=p):(y=l.metrics.num3,v=3*o.defaultRuleThickness),x=d.metrics.denom2);let S=[];this.isSelected&&S.push("ML__selected");let R=c.depth,I=f.height,L;if(p<=0){let M=y-R-(I-x);M<v&&(y+=(v-M)/2,x+=(v-M)/2),L=new mn({individualShift:[{box:c,shift:-y,classes:[...S,L0(this.align)]},{box:f,shift:x,classes:[...S,L0(this.align)]}]}).wrap(i)}else{let M=new be(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});M.softWidth=Math.max(c.width,f.width),M.height=p/2,M.depth=p/2;let A=Wi+p/2;y<v+R+A&&(y=v+R+A);let C=Wi-p/2;x<v+I-C&&(x=v+I-C),L=new mn({individualShift:[{box:f,shift:x,classes:[...S,L0(this.align)]},{box:M,shift:-C,classes:S},{box:c,shift:-y,classes:[...S,L0(this.align)]}]}).wrap(i)}let j=i.isDisplayStyle?o.delim1:o.delim2,z=this.leftDelim?this.bind(e,Gg("open",this.leftDelim,j,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):Eu(i,"ML__open"),G=null;this.continuousFraction?G=new be(null,{type:"close"}):this.rightDelim?G=this.bind(e,Gg("close",this.rightDelim,j,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):G=Eu(i,"ML__close");let ie=new be([z,L,G],{isTight:i.isTight,type:"inner",classes:"ML__mfrac"}),B=this.bind(e,ie);return this.caret&&(B.caret=this.caret),this.attachSupsub(e,{base:B})}};function L0(t){var e;return(e={left:"ML__left",right:"ML__right",center:"ML__center"}[t])!=null?e:"ML__center"}var An=class CA extends re{constructor(e,n){var r;super({type:"latex",value:e,mode:"latex"}),this.isSuggestion=(r=n?.isSuggestion)!=null?r:!1,this.isError=!1}static fromJson(e){let n=new CA(e.value);return e.isSuggestion&&(n.isSuggestion=!0),e.isError&&(n.isError=!0),n}toJson(){let e={};return this.isSuggestion&&(e.isSuggestion=!0),this.isError&&(e.isError=!0),N({type:"latex",value:this.value},e)}render(e){let n=new be(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return n?(this.caret&&(n.caret=this.caret),this.bind(e,n)):null}},wf=class MA extends re{constructor(e=""){super({type:"latexgroup",mode:"latex"}),this.body=[...e].map(n=>new An(n)),this.skipBoundary=!0}static fromJson(e){return new MA}toJson(){return super.toJson()}render(e){let n=re.createBox(e,this.body);return n?(this.caret&&(n.caret=this.caret),this.bind(e,n)):null}_serialize(e){var n,r;return(r=(n=this.body)==null?void 0:n.map(i=>i.value).join(""))!=null?r:""}},P3=class AA extends re{constructor(e,n){super(q(N({},n),{type:"extensible-symbol",isFunction:n?.isFunction})),this.value=e,this.variant=n?.variant,this.subsupPlacement=n?.limits}static fromJson(e){return new AA(e.symbol,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.value&&(e.symbol=this.value),e}render(e){var n;let r=e.isDisplayStyle&&this.value!=="\\smallint",i=new be(this.value,{fontFamily:r?"Size2-Regular":"Size1-Regular",classes:"ML__op-symbol "+(r?"ML__large-op":"ML__small-op"),type:"op",maxFontSize:e.scalingFactor,isSelected:this.isSelected});if(!i)return null;i.right=i.italic;let o=(i.height-i.depth)/2-Wi*e.scalingFactor,l=i.italic;i.setTop(o);let c=i;if(this.superscript||this.subscript){let d=(n=this.subsupPlacement)!=null?n:"auto";d==="auto"&&e.isDisplayStyle&&(d="over-under"),c=d==="over-under"?this.attachLimits(e,{base:i,baseShift:o,slant:l}):this.attachSupsub(e,{base:i})}return new be(this.bind(e,c),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let n=Jn(this.command,this.mode);if(n!=null&&n.serialize)return n.serialize(this,e);let r=[];return r.push(this.command),this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&r.push("\\limits"),this.subsupPlacement==="adjacent"&&r.push("\\nolimits"),this.subsupPlacement==="auto"&&r.push("\\displaylimits")),r.push(this.supsubToLatex(e)),Ze(r)}},Iu=class TA extends re{constructor(e){let n=e.body;super(q(N({},e),{type:"overlap",body:typeof n=="string"?[new re({value:n})]:n,style:e?.style})),this.skipBoundary=!0,this.align=e?.align,this.boxType=e?.boxType}static fromJson(e){return new TA(e)}toJson(){let e={};return this.align&&(e.align=this.align),this.boxType&&(e.boxType=this.boxType),N(N({},super.toJson()),e)}render(e){let n=re.createBox(e,this.body,{classes:"ML__inner"});return n?(this.caret&&(n.caret=this.caret),this.bind(e,new be([n,new be(null,{classes:"ML__fix"})],{classes:this.align==="right"?"ML__rlap":"ML__llap",type:this.boxType}))):null}},Li=class DA extends re{constructor(e){var n,r,i,o;super({type:"overunder",command:e.command,style:e.style,mode:e.mode,body:e.body,skipBoundary:(n=e.skipBoundary)!=null?n:!0}),this.subsupPlacement=e.supsubPlacement,this.svgAbove=e.svgAbove,this.svgBelow=e.svgBelow,this.svgBody=e.svgBody,this.above=e.above,this.below=e.below,this.boxType=(r=e.boxType)!=null?r:"ord",this.paddedBody=(i=e.paddedBody)!=null?i:!1,this.paddedLabels=(o=e.paddedLabels)!=null?o:!1}static fromJson(e){return new DA(e)}toJson(){let e=super.toJson();return this.skipBoundary||(e.skipBoundary=!1),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.svgAbove&&(e.svgAbove=this.svgAbove),this.svgBelow&&(e.svgBelow=this.svgBelow),this.svgBody&&(e.svgBody=this.svgBody),this.boxType!=="ord"&&(e.boxType=this.boxType),this.paddedBody&&(e.paddedBody=!0),this.paddedLabels&&(e.paddedLabels=!0),e}render(e){let n=this.svgBody?ig(this.svgBody):re.createBox(e,this.body,{type:"ignore"}),r=new lt({parent:e,mathstyle:"scriptstyle"},this.style),i=null;this.svgAbove?i=ig(this.svgAbove):this.above&&(i=re.createBox(r,this.above,{type:"ignore"}));let o=null;this.svgBelow?o=ig(this.svgBelow):this.below&&(o=re.createBox(r,this.below,{type:"ignore"})),this.paddedBody&&(n=new be([Eu(e,"ML__open"),n,Eu(e,"ML__close")],{type:"ignore"}));let l=v$(e,{base:n,above:i,below:o,type:this.boxType==="bin"||this.boxType==="rel"?this.boxType:"ord",paddedAboveBelow:this.paddedLabels});return l?(this.subsupPlacement==="over-under"?l=this.attachLimits(e,{base:l,type:l.type}):l=this.attachSupsub(e,{base:l}),this.caret&&(l.caret=this.caret),this.bind(e,l)):null}};function v$(t,e){if(!e.base)return null;if(!e.above&&!e.below){let c=new be(e.base,{type:e.type});return c.setStyle("position","relative"),c}let n=0;e.above&&(n=t.metrics.bigOpSpacing5);let r=null,i=e.base,o=0,l=["ML__center"];if(e.paddedAboveBelow&&l.push("ML__label_padding"),e.below&&e.above){let c=t.metrics.bigOpSpacing5+e.below.height+e.below.depth+i.depth+o;r=new mn({bottom:c,children:[t.metrics.bigOpSpacing5,{box:e.below,classes:l},{box:i,classes:["ML__center"]},n,{box:e.above,classes:l},t.metrics.bigOpSpacing5]})}else e.below?r=new mn({top:i.height-o,children:[t.metrics.bigOpSpacing5,{box:e.below,classes:l},{box:i,classes:["ML__center"]}]}):e.above&&(r=new mn({bottom:i.depth+o,children:[{box:i,classes:["ML__center"]},n,{box:e.above,classes:l},t.metrics.bigOpSpacing5]}));return new be(r,{type:e.type})}var Rh=class LA extends re{constructor(e){var n,r,i,o;super(q(N({},e),{type:"phantom"})),this.captureSelection=!0,this.isInvisible=(n=e.isInvisible)!=null?n:!1,this.smashDepth=(r=e.smashDepth)!=null?r:!1,this.smashHeight=(i=e.smashHeight)!=null?i:!1,this.smashWidth=(o=e.smashWidth)!=null?o:!1}static fromJson(e){return new LA(e)}toJson(){let e={};return this.isInvisible&&(e.isInvisible=!0),this.smashDepth&&(e.smashDepth=!0),this.smashHeight&&(e.smashHeight=!0),this.smashWidth&&(e.smashWidth=!0),N(N({},super.toJson()),e)}render(e){let n=new lt({parent:e,isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return this.isInvisible,re.createBox(n,this.body,{classes:"ML__inner"});let r=re.createBox(this.isInvisible?n:e,this.body);if(!r)return null;if(this.smashWidth){let i=new be(null,{classes:"ML__fix"});return new be([r,i],{classes:"ML__rlap"}).wrap(e)}if(!this.smashHeight&&!this.smashDepth)return r;if(this.smashHeight&&(r.height=0),this.smashDepth&&(r.depth=0),r.children)for(let i of r.children)this.smashHeight&&(i.height=0),this.smashDepth&&(i.depth=0);return new mn({firstBaseline:[{box:r}]},{type:r.type}).wrap(e)}},um=class RA extends re{constructor(e){var n;super(N({type:"spacing"},e)),this.width=e?.width,this._braced=(n=e?.braced)!=null?n:!1}static fromJson(e){return new RA(e)}toJson(){let e=super.toJson();return this.width!==void 0&&(e.width=this.width),this._braced&&(e.braced=!0),e}render(e){var n;if(this.command==="space")return new be(this.mode==="math"?null:" ");let r;if(this.width!==void 0)r=new be(null,{classes:"ML__mspace"}),r.left=e.toEm(this.width);else{let i=(n={"\\qquad":"ML__qquad","\\quad":"ML__quad","\\enspace":"ML__enspace","\\;":"ML__thickspace","\\:":"ML__mediumspace","\\>":"ML__mediumspace","\\,":"ML__thinspace","\\!":"ML__negativethinspace"}[this.command])!=null?n:"ML__mediumspace";r=new be(null,{classes:i})}return r=this.bind(e,r),this.caret&&(r.caret=this.caret),r}_serialize(e){var n;if(!e.expandMacro&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let r=Jn(this.command,this.mode);if(r!=null&&r.serialize)return r.serialize(this,e);let i=(n=this.command)!=null?n:"";return this.width===void 0?i:this._braced&&!("register"in this.width)?`${i}{${Un(this.width)}}`:`${i}${Un(this.width)}`}},IA=class BA extends re{constructor(e){var n;super(q(N({},e),{type:"surd",mode:(n=e.mode)!=null?n:"math",style:e.style,displayContainsHighlight:!0,body:e.body})),this.above=e.index}static fromJson(e){return new BA(q(N({},e),{index:e.above}))}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let n=Jn(this.command,this.mode);if(n!=null&&n.serialize)return n.serialize(this,e);let r=this.command,i=this.bodyToLatex(e);return this.above&&!this.hasEmptyBranch("above")?Bt(`${r}[${this.aboveToLatex(e)}]`,i):/^[0-9]$/.test(i)?`${r}${i}`:Bt(r,i)}get children(){if(this._children)return this._children;let e=[];if(this.above)for(let n of this.above)e.push(...n.children),e.push(n);if(this.body)for(let n of this.body)e.push(...n.children),e.push(n);return this._children=e,e}render(e){var n;let r=new lt({parent:e,mathstyle:"cramp"},this.style),i=(n=re.createBox(r,this.body,{type:"inner"}))!=null?n:new be(null),o=r.scalingFactor,l=r.metrics.defaultRuleThickness/o,c=e.isDisplayStyle?Ks:l,d=new be(null,{classes:"ML__sqrt-line",style:this.style});d.height=l,d.softWidth=i.width;let f=o*(l+c/4),p=Math.max(o*2*c,i.height+i.depth)+f+l,y=new lt({parent:e},this.style),v=this.bind(y,new be(Gg("inner","\\surd",p,!1,y,{isSelected:this.isSelected}),{isSelected:this.isSelected,classes:"ML__sqrt-sign",style:this.style}));if(!v)return null;let x=v.height+v.depth-l;x>i.height+i.depth+f&&(f=(f+x-(i.height+i.depth))/2),v.setTop(v.height-i.height-f);let S=this.bind(e,new mn({firstBaseline:[{box:new be(i)},f-2*l,{box:d},l]})),R=re.createBox(new lt({parent:e,mathstyle:"scriptscriptstyle"}),this.above,{type:"ignore"});if(!R){let j=new be([v,S],{classes:this.containsCaret?"ML__contains-caret":"",type:"inner"});return j.setStyle("display","inline-block"),j.setStyle("height",j.height+j.depth,"em"),this.caret&&(j.caret=this.caret),this.bind(e,j)}let I=new mn({shift:-.6*(Math.max(v.height,S.height)-Math.max(v.depth,S.depth)),children:[{box:R}]}),L=new be([new be(I,{classes:"ML__sqrt-index",type:"ignore"}),v,S],{type:"inner",classes:this.containsCaret?"ML__contains-caret":""});return L.height=v.height,L.depth=v.depth,this.caret&&(L.caret=this.caret),this.bind(e,L)}},_$=class extends be{constructor(t){super(null,{type:"skip"}),this._width=t}toMarkup(){return`<span style="display:inline-block;width:${Math.ceil(this.width*100)/100}em"></span>`}};function ug(t,e){if(!t.parent)return;let n=t.parent.children,r=n.indexOf(t),i=r-1;for(;i>=0&&n[i].type==="ignore";)i-=1;if(i<0&&t.parent.parent&&t.parent.type==="lift"){ug(t.parent,e);return}r>0&&n[r-1].type==="skip"?n[r-1].width+=e:n.splice(r,0,new _$(e))}var x$={ord:{op:3,bin:4,rel:5,inner:3},op:{ord:3,op:3,rel:5,inner:3},bin:{ord:4,op:4,open:4,inner:4},rel:{ord:5,op:5,open:5,inner:5},close:{op:3,bin:4,rel:5,inner:3},punct:{ord:3,op:3,rel:3,open:3,punct:3,inner:3},inner:{ord:3,op:3,bin:4,rel:5,open:3,punct:3,inner:3}},w$={ord:{op:3},op:{ord:3,op:3},close:{op:3},inner:{op:3}};function E$(t){Ef(t,(e,n)=>{n.type==="bin"&&(!e||/^(middle|bin|op|rel|open|punct)$/.test(e.type))&&(n.type="ord"),e?.type==="bin"&&/^(rel|close|punct)$/.test(n.type)&&(e.type="ord"),n.type!=="ignore"&&(e=n)})}function cm(t,e){if(!t.children)return t;let n=t.children;E$(n);let r=e.getRegisterAsEm("thinmuskip"),i=e.getRegisterAsEm("medmuskip"),o=e.getRegisterAsEm("thickmuskip");return Ef(n,(l,c)=>{var d,f,p;if(!l)return;let y=l.type,v=c.isTight?(d=w$[y])!=null?d:null:(f=x$[y])!=null?f:null,x=(p=v?.[c.type])!=null?p:null;x===3&&ug(c,r),x===4&&ug(c,i),x===5&&ug(c,o)}),t}function Ef(t,e,n=void 0){if(!t)return n;t=[...t];for(let r of t)r.type==="lift"?n=Ef(r.children,e,n):r.type==="ignore"?Ef(r.children,e):(e(n,r),Ef(r.children,e),n=r);return n}var z3=class OA extends re{constructor(e){super({type:"tooltip",command:e.command,mode:e.mode,style:e.style,body:e.body,displayContainsHighlight:!0}),this.tooltip=new re({type:"root",mode:e.content,body:e.tooltip,style:{}}),this.skipBoundary=!0,this.captureSelection=!1}static fromJson(e){return new OA(q(N({},e),{tooltip:$s(e.tooltip)}))}toJson(){var e;let n=(e=this.tooltip.body)==null?void 0:e.filter(r=>r.type!=="first").map(r=>r.toJson());return q(N({},super.toJson()),{tooltip:n})}render(e){let n=re.createBox(new lt,this.body);if(!n)return null;let r=new lt({parent:e,mathstyle:"displaystyle"},{fontSize:R3}),i=D1(cm(new be(this.tooltip.render(r),{classes:"ML__tooltip-content"}),r)),o=new be([i,n],{classes:"ML__tooltip-container"});return this.caret&&(o.caret=this.caret),this.bind(e,o)}},Bu=class NA extends re{constructor(e,n){super(q(N({},n),{type:"operator",isFunction:n?.isFunction})),this.value=e,this.variant=n?.variant,this.variantStyle=n?.variantStyle,this.subsupPlacement=n?.limits}static fromJson(e){return new NA(e.symbol,e)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.variantStyle&&(e.variantStyle=this.variantStyle),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.value&&(e.symbol=this.value),e}render(e){var n;let r=new be(this.value,{type:"op",mode:"math",maxFontSize:e.scalingFactor,style:{variant:this.variant,variantStyle:this.variantStyle},isSelected:this.isSelected,letterShapeStyle:e.letterShapeStyle}),i=r;if(this.superscript||this.subscript){let o=(n=this.subsupPlacement)!=null?n:"auto";i=o==="over-under"||o==="auto"&&e.isDisplayStyle?this.attachLimits(e,{base:r}):this.attachSupsub(e,{base:r})}return new be(this.bind(e,i),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&typeof this.verbatimLatex=="string")return this.verbatimLatex;let n=Jn(this.command,this.mode);if(n!=null&&n.serialize)return n.serialize(this,e);let r=[this.command];return this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&r.push("\\limits"),this.subsupPlacement==="adjacent"&&r.push("\\nolimits"),this.subsupPlacement==="auto"&&r.push("\\displaylimits")),r.push(this.supsubToLatex(e)),Ze(r)}};function $s(t){if(Rn(t))return t.map(r=>$s(r));if(typeof t=="string")return re.fromJson(t);t=N({},t);for(let r of vh)t[r]&&(t[r]=$s(t[r]));t.args&&(t.args=S$(t.args)),t.array&&(t.array=$s(t.array));let e=t.type,n;e==="accent"&&(n=I1.fromJson(t)),e==="array"&&(n=rt.fromJson(t)),e==="box"&&(n=el.fromJson(t)),e==="chem"&&(n=bA.fromJson(t)),e==="composition"&&(n=iA.fromJson(t)),e==="delim"&&(n=_A.fromJson(t)),e==="enclose"&&(n=lm.fromJson(t)),e==="error"&&(n=Jl.fromJson(t)),e==="extensible-symbol"&&(n=P3.fromJson(t)),e==="genfrac"&&(n=Ru.fromJson(t)),e==="group"&&(n=sA.fromJson(t)),e==="latex"&&(n=An.fromJson(t)),e==="latexgroup"&&(n=wf.fromJson(t)),e==="leftright"&&(n=nn.fromJson(t)),e==="macro"&&(n=hA.fromJson(t)),e==="macro-argument"&&(n=p$.fromJson(t)),e==="operator"&&(n=Bu.fromJson(t)),e==="overlap"&&(n=Iu.fromJson(t)),e==="overunder"&&(n=Li.fromJson(t)),e==="placeholder"&&(n=Ia.fromJson(t)),e==="prompt"&&(n=mA.fromJson(t)),e==="phantom"&&(n=Rh.fromJson(t)),e==="sizeddelim"&&(n=wA.fromJson(t)),e==="spacing"&&(n=um.fromJson(t)),e==="subsup"&&(n=N1.fromJson(t)),e==="surd"&&(n=IA.fromJson(t)),e==="text"&&(n=Dh.fromJson(t)),e==="tooltip"&&(n=z3.fromJson(t)),n||(n=re.fromJson(t));for(let r of vh)t[r]&&n.setChildren(t[r],r);return t.verbatimLatex!==void 0&&(n.verbatimLatex=t.verbatimLatex),t.subsupPlacement&&(n.subsupPlacement=t.subsupPlacement),t.explicitSubsupPlacement&&(n.explicitSubsupPlacement=!0),t.isFunction&&(n.isFunction=!0),t.skipBoundary&&(n.skipBoundary=!0),t.captureSelection&&(n.captureSelection=!0),n}function S$(t){if(t){if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e=>e==="<null>"?null:typeof e=="object"&&"group"in e?{group:e.group.map(n=>$s(n))}:typeof e=="object"&&"atoms"in e?e.atoms.map(n=>$s(n)):e)}}function V3(t,e){!t||!e||(Rn(t)?t.forEach(n=>V3(n,e)):typeof t=="object"&&t.applyStyle(e,{unstyledOnly:!0}))}function t2(t,e,n,r){function i(l,c){for(let d of o)if(d.style[l]!==c)return!1;return!0}if(e=t.normalizeRange(e),e[0]===e[1])return!1;let o=t.getAtoms(e,{includeChildren:!0});r.operation==="toggle"&&(n.color&&i("color",n.color)&&(n.color="none",delete n.verbatimColor),n.backgroundColor&&i("backgroundColor",n.backgroundColor)&&(n.backgroundColor="none",delete n.verbatimBackgroundColor),n.fontFamily&&i("fontFamily",n.fontFamily)&&(n.fontFamily="none"),n.fontSeries&&i("fontSeries",n.fontSeries)&&(n.fontSeries="auto"),n.fontShape&&i("fontShape",n.fontShape)&&(n.fontShape="auto"),n.fontSize&&i("fontSize",n.fontSize)&&(n.fontSize=R3),n.variant&&i("variant",n.variant)&&(n.variant="normal"),n.variantStyle&&i("variantStyle",n.variantStyle)&&(n.variantStyle=""));for(let l of o)l.applyStyle(n);return!0}function k$(t){return{up:"italic",bold:"bolditalic",italic:"italic",bolditalic:"bolditalic","":"italic"}[t??""]}function P1(t){return{up:"up",bold:"bold",italic:void 0,bolditalic:"bold","":void 0}[t??""]}var wE={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams ML__bold"],"ams-italic":["AMS-Regular","ML__ams ML__it"],"ams-bolditalic":["AMS-Regular","ML__ams ML__bold ML__it"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans ML__it"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans ML__bold ML__it"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak ML__bold"],"fraktur-italic":["Fraktur-Regular","ML__frak ML__it"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak ML__bold ML__it"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb ML__bold"],"double-struck-italic":["AMS-Regular","ML__bb ML_italic"],"double-struck-bolditalic":["AMS-Regular","ML__bb ML_bolditalic"]},n2={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^’‘]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},PA=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,C$=/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/,M$=[/^[a-z]$/,/^[A-Z]$/,PA,C$],A$={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]},T$=class extends ei{constructor(){super("math")}createAtom(t,e,n){var r,i,o,l,c,d;if(e===null)return new re({type:"mord",mode:"math",command:t,value:t,style:n});let f;try{f=(o=(i=globalThis.MathfieldElement)==null?void 0:i.isFunction((r=e.command)!=null?r:t))!=null?o:!1}catch{f=!1}if(e.definitionType==="symbol"){let y=new re({type:(l=e.type)!=null?l:"mord",mode:"math",command:(c=e.command)!=null?c:t,value:String.fromCodePoint(e.codepoint),isFunction:f,style:n});return t.startsWith("\\")&&(y.verbatimLatex=t),y}let p=new re({type:"mord",mode:"math",command:(d=e.command)!=null?d:t,value:t,isFunction:f,style:n});return t.startsWith("\\")&&(p.verbatimLatex=t),p}serialize(t,e){let n=D$(t,q(N({},e),{defaultMode:"math"}));return n.length===0||e.defaultMode!=="text"?n:["$ ",...n," $"]}getFont(t,e){var n,r;if(e.variant,e.fontFamily){let[f,p]=wE[e.fontFamily];return p&&(t.classes+=" "+p),f}let{variant:i}=e,{variantStyle:o}=e;if(i==="normal"&&!o&&/[\u00A3\u0131\u0237]/.test(t.value)&&(i="main",o="italic"),i==="normal"&&!o&&t.value.length===1){let f=!1;M$.forEach((p,y)=>{var v;p.test(t.value)&&A$[(v=e.letterShapeStyle)!=null?v:"tex"][y]==="it"&&(f=!0)}),f&&(o=k$(o))}o==="up"&&(o=void 0);let l=o?i+"-"+o:i,[c,d]=wE[l];if(n2[i]&&!n2[i].test(t.value)){let f=K4(t.value,i,o);return f||(f=(n=K4(t.value,i))!=null?n:t.value,t.classes+=(r={bold:" ML__bold",italic:" ML__it","bold-italic":" ML__bold ML__it"}[o??""])!=null?r:""),t.value=f,null}return PA.test(t.value)&&(t.classes+=" lcGreek"),d&&(t.classes+=" "+d),c}};function D$(t,e){return Lo(t,"bold").map(n=>{if(X4(n[0])!=="bold"||X4(n[0].parent)==="bold")return Ze(R0(n,e));let r=Ze(n.map(i=>{var o;return(o=i.value)!=null?o:""}));return/^[a-zA-Z0-9]+$/.test(r)?Bt("\\mathbf",Ze(R0(n,e))):Bt("\\bm",Ze(R0(n,e)))})}function R0(t,e){let{parent:n}=t[0],r=Y4(n);return Lo(t,"variant").map(i=>{let o=Y4(i[0]),l="";o&&o!==r&&(l={calligraphic:"\\mathcal","calligraphic-uo":"\\mathcal",fraktur:"\\mathfrak","fraktur-uo":"\\mathfrak","double-struck":"\\mathbb","double-struck-uo":"\\mathbb",script:"\\mathscr","script-uo":"\\mathscr",monospace:"\\mathtt","monospace-uo":"\\mathtt","sans-serif":"\\mathsf","sans-serif-uo":"\\mathsf",normal:"","normal-up":"\\mathrm","normal-italic":"\\mathnormal","normal-bold":"","normal-bolditalic":"\\mathbfit",ams:"","ams-up":"\\mathrm","ams-italic":"\\mathit","ams-bold":"","ams-bolditalic":"\\mathbfit",main:"","main-up":"\\mathrm","main-italic":"\\mathit","main-bold":"","main-bolditalic":"\\mathbfit"}[o]);let c=Ze(i.map(d=>d._serialize(e)));return l?Bt(l,c):c})}new T$;function L$(t,e){return t.map(n=>n._serialize(e))}function R$(t,e){return Lo(t,"fontShape").map(n=>{let r=L$(n,e),{fontShape:i}=n[0].style,o="";return i==="it"&&(o="\\textit"),i==="sl"&&(o="\\textsl"),i==="sc"&&(o="\\textsc"),i==="n"&&(o="\\textup"),!o&&i?`{${Bt("\\fontshape",i)}${Ze(r)}}`:o?Bt(o,Ze(r)):Ze(r)})}function I$(t,e){return Lo(t,"fontSeries").map(n=>{let r=R$(n,e),{fontSeries:i}=n[0].style,o="";return i==="b"&&(o="\\textbf"),i==="l"&&(o="\\textlf"),i==="m"&&(o="\\textmd"),i&&!o?`{${Bt("\\fontseries",i)}${Ze(r)}}`:o?Bt(o,Ze(r)):Ze(r)})}function B$(t,e){return Lo(t,"fontSize").map(n=>{var r,i;let o=I$(n,e),l=(i=["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][(r=n[0].style.fontSize)!=null?r:""])!=null?i:"";return l?`${l} ${Ze(o)}`:Ze(o)})}function O$(t,e,n){return Lo(t,"fontFamily").map(r=>{var i;n=n&&!r.every(d=>d.style.fontFamily||d.style.fontShape||d.style.fontSeries||d.style.fontSize);let o=B$(r,e),{fontFamily:l}=r[0].style,c=(i={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[l??""])!=null?i:"";return c?`\\${c}{${Ze(o)}}`:l?`{\\fontfamily{${r[0].style.fontFamily}} ${Ze(o)}}`:n?`\\text{${Ze(o)}}`:Ze(o)})}var EE={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"},N$=class extends ei{constructor(){super("text")}createAtom(t,e,n){return e&&e.definitionType==="symbol"?new Dh(t,String.fromCodePoint(e.codepoint),n??{}):null}serialize(t,e){return O$(t,q(N({},e),{defaultMode:"text"}),e.defaultMode!=="text")}getFont(t,e){var n,r,i,o,l;let{fontFamily:c}=e;if(EE[c]?t.classes+=" "+EE[c]:c&&t.setStyle("font-family",c),e.fontShape&&(t.classes+=" ",t.classes+=(n={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[e.fontShape])!=null?n:""),e.fontSeries){let d=e.fontSeries.match(/(.?[lbm])?(.?[cx])?/);d&&(t.classes+=" ",t.classes+=(i={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[(r=d[1])!=null?r:""])!=null?i:"",t.classes+=" ",t.classes+=(l={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[(o=d[2])!=null?o:""])!=null?l:"")}return"Main-Regular"}};new N$;var P$=class extends ei{constructor(){super("latex")}createAtom(t){return new An(t)}serialize(t,e){return t.filter(n=>n instanceof An&&!n.isSuggestion).map(n=>n.value)}getFont(){return null}};new P$;var z$={id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["x","X","≈","˛"],KeyC:["j","J","∆","Ô"],KeyD:["e","E","´","´"],KeyE:[".",">","≥","˘"],KeyF:["u","U","¨","¨"],KeyG:["i","I","ˆ","ˆ"],KeyH:["d","D","∂","Î"],KeyI:["c","C","ç","Ç"],KeyJ:["h","H","˙","Ó"],KeyK:["t","T","†","ˇ"],KeyL:["n","N","˜","˜"],KeyM:["m","M","µ","Â"],KeyN:["b","B","∫","ı"],KeyO:["r","R","®","‰"],KeyP:["l","L","¬","Ò"],KeyQ:["'",'"',"æ","Æ"],KeyR:["p","P","π","∏"],KeyS:["o","O","ø","Ø"],KeyT:["y","Y","¥","Á"],KeyU:["g","G","©","˝"],KeyV:["k","K","˚",""],KeyW:[",","<","≤","¯"],KeyX:["q","Q","œ","Œ"],KeyY:["f","F","ƒ","Ï"],KeyZ:[";",":","…","Ú"],Digit1:["1","!","¡","⁄"],Digit2:["2","@","™","€"],Digit3:["3","#","£","‹"],Digit4:["4","$","¢","›"],Digit5:["5","%","∞","ﬁ"],Digit6:["6","^","§","ﬂ"],Digit7:["7","&","¶","‡"],Digit8:["8","*","•","°"],Digit9:["9","(","ª","·"],Digit0:["0",")","º","‚"],Space:[" "," "," "," "],Minus:["[","{","“","”"],Equal:["]","}","‘","’"],BracketLeft:["/","?","÷","¿"],BracketRight:["=","+","≠","±"],Backslash:["\\","|","«","»"],Semicolon:["s","S","ß","Í"],Quote:["-","_","–","—"],Backquote:["`","~","`","`"],Comma:["w","W","∑","„"],Period:["v","V","√","◊"],Slash:["z","Z","Ω","¸"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["§","±","§","±"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},r2={id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["b","B","∫","ı"],KeyC:["c","C","ç","Ç"],KeyD:["d","D","∂","Î"],KeyE:["e","E","´","´"],KeyF:["f","F","ƒ","Ï"],KeyG:["g","G","©","˝"],KeyH:["h","H","˙","Ó"],KeyI:["i","I","ˆ","ˆ"],KeyJ:["j","J","∆","Ô"],KeyK:["k","K","˚",""],KeyL:["l","L","¬","Ò"],KeyM:["m","M","µ","Â"],KeyN:["n","N","˜","˜"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","œ","Œ"],KeyR:["r","R","®","‰"],KeyS:["s","S","ß","Í"],KeyT:["t","T","†","ˇ"],KeyU:["u","U","¨","¨"],KeyV:["v","V","√","◊"],KeyW:["w","W","∑","„"],KeyX:["x","X","≈","˛"],KeyY:["y","Y","¥","Á"],KeyZ:["z","Z","Ω","¸"],Digit1:["1","!","¡","⁄"],Digit2:["2","@","™","€"],Digit3:["3","#","£","‹"],Digit4:["4","$","¢","›"],Digit5:["5","%","∞","ﬁ"],Digit6:["6","^","§","ﬂ"],Digit7:["7","&","¶","‡"],Digit8:["8","*","•","°"],Digit9:["9","(","ª","·"],Digit0:["0",")","º","‚"],Space:[" "," "," "," "],Minus:["-","_","–","—"],Equal:["=","+","≠","±"],BracketLeft:["[","{","“","”"],BracketRight:["]","}","‘","’"],Backslash:["\\","|","«","»"],Semicolon:[";",":","…","Ú"],Quote:["'",'"',"æ","Æ"],Backquote:["`","˜","`","`"],Comma:[",","<","≤","¯"],Period:[".",">","≥","˘"],Slash:["/","?","÷","¿"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["§","±","§","±"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},zA={id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","á","Á"],KeyB:["b","B","",""],KeyC:["c","C","©","¢"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","é","É"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","í","Í"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","ø","Ø"],KeyM:["m","M","µ",""],KeyN:["n","N","ñ","Ñ"],KeyO:["o","O","ó","Ó"],KeyP:["p","P","ö","Ö"],KeyQ:["q","Q","ä","Ä"],KeyR:["r","R","®",""],KeyS:["s","S","ß","§"],KeyT:["t","T","þ","Þ"],KeyU:["u","U","ú","Ú"],KeyV:["v","V","",""],KeyW:["w","W","å","Å"],KeyX:["x","X","",""],KeyY:["y","Y","ü","Ü"],KeyZ:["z","Z","æ","Æ"],Digit1:["1","!","¡","¹"],Digit2:["2","@","²",""],Digit3:["3","#","³",""],Digit4:["4","$","¤","£"],Digit5:["5","%","€",""],Digit6:["6","^","¼",""],Digit7:["7","&","½",""],Digit8:["8","*","¾",""],Digit9:["9","(","‘",""],Digit0:["0",")","’",""],Space:[" "," ","",""],Minus:["-","_","¥",""],Equal:["=","+","×","÷"],BracketLeft:["[","{","«",""],BracketRight:["]","}","»",""],Backslash:["\\","|","¬","¦"],Semicolon:[";",":","¶","°"],Quote:["'",'"',"´","¨"],Backquote:["`","~","",""],Comma:[",","<","ç","Ç"],Period:[".",">","",""],Slash:["/","?","¿",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}},VA={id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","¦"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},V$={id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","‡","Ω"],KeyB:["b","B","ß","∫"],KeyC:["c","C","©","¢"],KeyD:["d","D","∂","∆"],KeyE:["e","E","ê","Ê"],KeyF:["f","F","ƒ","·"],KeyG:["g","G","ﬁ","ﬂ"],KeyH:["h","H","Ì","Î"],KeyI:["i","I","î","ï"],KeyJ:["j","J","Ï","Í"],KeyK:["k","K","È","Ë"],KeyL:["l","L","¬","|"],KeyM:[",","?","∞","¿"],KeyN:["n","N","~","ı"],KeyO:["o","O","œ","Œ"],KeyP:["p","P","π","∏"],KeyQ:["a","A","æ","Æ"],KeyR:["r","R","®","‚"],KeyS:["s","S","Ò","∑"],KeyT:["t","T","†","™"],KeyU:["u","U","º","ª"],KeyV:["v","V","◊","√"],KeyW:["z","Z","Â","Å"],KeyX:["x","X","≈","⁄"],KeyY:["y","Y","Ú","Ÿ"],KeyZ:["w","W","‹","›"],Digit1:["&","1","","´"],Digit2:["é","2","ë","„"],Digit3:['"',"3","“","”"],Digit4:["'","4","‘","’"],Digit5:["(","5","{","["],Digit6:["§","6","¶","å"],Digit7:["è","7","«","»"],Digit8:["!","8","¡","Û"],Digit9:["ç","9","Ç","Á"],Digit0:["à","0","ø","Ø"],Space:[" "," "," "," "],Minus:[")","°","}","]"],Equal:["-","_","—","–"],BracketLeft:["^","¨","ô","Ô"],BracketRight:["$","*","€","¥"],Backslash:["`","£","@","#"],Semicolon:["m","M","µ","Ó"],Quote:["ù","%","Ù","‰"],Backquote:["<",">","≤","≥"],Comma:[";",".","…","•"],Period:[":","/","÷","\\"],Slash:["=","+","≠","±"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","•","Ÿ"],NumpadEqual:["=","=","=","="]}},F$={id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["é","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["è","7","`",""],Digit8:["_","8","\\",""],Digit9:["ç","9","^",""],Digit0:["à","0","@",""],Space:[" "," ","",""],Minus:[")","°","]",""],Equal:["=","+","}",""],BracketLeft:["^","¨","",""],BracketRight:["$","£","¤",""],Backslash:["*","µ","",""],Semicolon:["m","M","",""],Quote:["ù","%","",""],Backquote:["²","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","§","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}},U$={id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","Ω"],KeyB:["b","B","”","’"],KeyC:["c","C","¢","©"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","€","¢"],KeyF:["f","F","đ","ª"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̉","̛"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:[",","?","́","̋"],KeyN:["n","N","n","N"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","þ","Þ"],KeyQ:["a","A","æ","Æ"],KeyR:["r","R","¶","®"],KeyS:["s","S","ß","§"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","“","‘"],KeyW:["z","Z","«","<"],KeyX:["x","X","»",">"],KeyY:["y","Y","←","¥"],KeyZ:["w","W","ł","Ł"],Digit1:["&","1","¹","¡"],Digit2:["é","2","~","⅛"],Digit3:['"',"3","#","£"],Digit4:["'","4","{","$"],Digit5:["(","5","[","⅜"],Digit6:["-","6","|","⅝"],Digit7:["è","7","`","⅞"],Digit8:["_","8","\\","™"],Digit9:["ç","9","^","±"],Digit0:["à","0","@","°"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:[")","°","]","¿"],Equal:["=","+","}","̨"],BracketLeft:["̂","̈","̈","̊"],BracketRight:["$","£","¤","̄"],Backslash:["*","µ","̀","̆"],Semicolon:["m","M","µ","º"],Quote:["ù","%","̂","̌"],Backquote:["²","~","¬","¬"],Comma:[";",".","─","×"],Period:[":","/","·","÷"],Slash:["!","§","̣","̇"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","¦"]}},K$={id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["b","B","∫","‹"],KeyC:["c","C","ç","Ç"],KeyD:["d","D","∂","™"],KeyE:["e","E","€","‰"],KeyF:["f","F","ƒ","Ï"],KeyG:["g","G","©","Ì"],KeyH:["h","H","ª","Ó"],KeyI:["i","I","⁄","Û"],KeyJ:["j","J","º","ı"],KeyK:["k","K","∆","ˆ"],KeyL:["l","L","@","ﬂ"],KeyM:["m","M","µ","˘"],KeyN:["n","N","~","›"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","«","»"],KeyR:["r","R","®","¸"],KeyS:["s","S","‚","Í"],KeyT:["t","T","†","˝"],KeyU:["u","U","¨","Á"],KeyV:["v","V","√","◊"],KeyW:["w","W","∑","„"],KeyX:["x","X","≈","Ù"],KeyY:["z","Z","Ω","ˇ"],KeyZ:["y","Y","¥","‡"],Digit1:["1","!","¡","¬"],Digit2:["2",'"',"“","”"],Digit3:["3","§","¶","#"],Digit4:["4","$","¢","£"],Digit5:["5","%","[","ﬁ"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","˜"],Digit9:["9",")","}","·"],Digit0:["0","=","≠","¯"],Space:[" "," "," "," "],Minus:["ß","?","¿","˙"],Equal:["´","`","'","˚"],BracketLeft:["ü","Ü","•","°"],BracketRight:["+","*","±",""],Backslash:["#","'","‘","’"],Semicolon:["ö","Ö","œ","Œ"],Quote:["ä","Ä","æ","Æ"],Backquote:["<",">","≤","≥"],Comma:[",",";","∞","˛"],Period:[".",":","…","÷"],Slash:["-","_","–","—"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","°","„","“"],NumpadEqual:["=","=","=","="]}},$$={id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","µ",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"²",""],Digit3:["3","§","³",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["ß","?","\\","ẞ"],Equal:["´","`","",""],BracketLeft:["ü","Ü","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["ö","Ö","",""],Quote:["ä","Ä","",""],Backquote:["^","°","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}},q$={id:"linux.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","æ","Æ"],KeyB:["b","B","“","‘"],KeyC:["c","C","¢","©"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","€","€"],KeyF:["f","F","đ","ª"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̣","̇"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:["m","M","µ","º"],KeyN:["n","N","”","’"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","þ","Þ"],KeyQ:["q","Q","@","Ω"],KeyR:["r","R","¶","®"],KeyS:["s","S","ſ","ẞ"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","„","‚"],KeyW:["w","W","ł","Ł"],KeyX:["x","X","«","‹"],KeyY:["z","Z","←","¥"],KeyZ:["y","Y","»","›"],Digit1:["1","!","¹","¡"],Digit2:["2",'"',"²","⅛"],Digit3:["3","§","³","£"],Digit4:["4","$","¼","¤"],Digit5:["5","%","½","⅜"],Digit6:["6","&","¬","⅝"],Digit7:["7","/","{","⅞"],Digit8:["8","(","[","™"],Digit9:["9",")","]","±"],Digit0:["0","=","}","°"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["ß","?","\\","¿"],Equal:["́","̀","̧","̨"],BracketLeft:["ü","Ü","̈","̊"],BracketRight:["+","*","~","¯"],Backslash:["#","'","’","̆"],Semicolon:["ö","Ö","̋","̣"],Quote:["ä","Ä","̂","̌"],Backquote:["̂","°","′","″"],Comma:[",",";","·","×"],Period:[".",":","…","÷"],Slash:["-","_","–","—"],PrintScreen:["","","",""],PageUp:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",",","",","],IntlBackslash:["<",">","|","̱"],AltRight:["\r","\r","\r","\r"],MetaRight:[".",".",".","."]}},j$={id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["b","B","ß",""],KeyC:["c","C","©"," "],KeyD:["d","D","∂","∆"],KeyE:["e","E","€","€"],KeyF:["f","F","ƒ","ﬁ"],KeyG:["g","G","","ﬂ"],KeyH:["h","H","™"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","¶","¯"],KeyK:["k","K","§","ˇ"],KeyL:["l","L"," ","˘"],KeyM:["m","M","µ","˚"],KeyN:["n","N"," ","˙"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","œ","Œ"],KeyR:["r","R","®"," "],KeyS:["s","S","∫"," "],KeyT:["t","T","†","‡"],KeyU:["u","U"," "," "],KeyV:["v","V","√","◊"],KeyW:["w","W","æ","Æ"],KeyX:["x","X","∑","›"],KeyY:["y","Y","¥"," "],KeyZ:["z","Z","Ω","‹"],Digit1:["1","!","|","ı"],Digit2:["2",'"',"@","˝"],Digit3:["3","·","#","•"],Digit4:["4","$","¢","£"],Digit5:["5","%","∞","‰"],Digit6:["6","&","¬"," "],Digit7:["7","/","÷","⁄"],Digit8:["8","(","“","‘"],Digit9:["9",")","”","’"],Digit0:["0","=","≠","≈"],Space:[" "," "," "," "],Minus:["'","?","´","¸"],Equal:["¡","¿","‚","˛"],BracketLeft:["`","^","[","ˆ"],BracketRight:["+","*","]","±"],Backslash:["ç","Ç","}","»"],Semicolon:["ñ","Ñ","~","˜"],Quote:["´","¨","{","«"],Backquote:["<",">","≤","≥"],Comma:[",",";","„",""],Period:[".",":","…","…"],Slash:["-","_","–","—"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["º","ª","\\","°"]}},H$={id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","·","#",""],Digit4:["4","$","~",""],Digit5:["5","%","€",""],Digit6:["6","&","¬",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["¡","¿","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["ç","Ç","}",""],Semicolon:["ñ","Ñ","",""],Quote:["´","¨","{",""],Backquote:["º","ª","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}},G$={id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","æ","Æ"],KeyB:["b","B","”","’"],KeyC:["c","C","¢","©"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","€","¢"],KeyF:["f","F","đ","ª"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̉","̛"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:["m","M","µ","º"],KeyN:["n","N","n","N"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","þ","Þ"],KeyQ:["q","Q","@","Ω"],KeyR:["r","R","¶","®"],KeyS:["s","S","ß","§"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","“","‘"],KeyW:["w","W","ł","Ł"],KeyX:["x","X","»",">"],KeyY:["y","Y","←","¥"],KeyZ:["z","Z","«","<"],Digit1:["1","!","|","¡"],Digit2:["2",'"',"@","⅛"],Digit3:["3","·","#","£"],Digit4:["4","$","~","$"],Digit5:["5","%","½","⅜"],Digit6:["6","&","¬","⅝"],Digit7:["7","/","{","⅞"],Digit8:["8","(","[","™"],Digit9:["9",")","]","±"],Digit0:["0","=","}","°"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["'","?","\\","¿"],Equal:["¡","¿","̃","~"],BracketLeft:["̀","̂","[","̊"],BracketRight:["+","*","]","̄"],Backslash:["ç","Ç","}","̆"],Semicolon:["ñ","Ñ","~","̋"],Quote:["́","̈","{","{"],Backquote:["º","ª","\\","\\"],Comma:[",",";","─","×"],Period:[".",":","·","÷"],Slash:["-","_","̣","̇"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","¦"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}};function FA(t){let e=t.split("+"),n={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:e.pop()};return e.includes("shift")&&(n.shift=!0),e.includes("alt")&&(n.alt=!0),e.includes("ctrl")&&(n.ctrl=!0),e.includes("cmd")&&(n.cmd=!0),e.includes("win")&&(n.win=!0),e.includes("meta")&&(n.meta=!0),n}function Gc(t){let e="";return t.shift&&(e+="shift+"),t.alt&&(e+="alt+"),t.ctrl&&(e+="ctrl+"),t.cmd&&(e+="cmd+"),t.win&&(e+="win+"),t.meta&&(e+="meta+"),e+t.key}var W$={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},Wg=[];function F3(){switch(Th()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function Yr(t){(!t.platform||t.platform===F3())&&Wg.push(t)}function X$(t,e){var n;let r={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!t)return r;for(let[i,o]of Object.entries(e.mapping)){if(o[0]===t)return r.key=`[${i}]`,r;if(o[1]===t)return r.shift=!0,r.key=`[${i}]`,r;if(o[2]===t)return r.alt=!0,r.key=`[${i}]`,r;if(o[3]===t)return r.shift=!0,r.alt=!0,r.key=`[${i}]`,r}return r.key=(n=W$[t])!=null?n:"",r}function Y$(t){if(t.code)return t;let e=Object.entries(qf().mapping),n=!1,r=!1,i="";for(let o=0;o<4;o++){for(let[l,c]of e)if(c[o]===t.key){i=l,o===3?(n=!0,r=!0):o===2?n=!0:o===1&&(r=!0);break}if(i)break}return new KeyboardEvent(t.type,q(N({},t),{altKey:n,shiftKey:r,code:i}))}function Q$(t){var e,n;if(!t||t.key==="Unidentified"||t.key==="Dead")return;let r=t.shiftKey&&t.altKey?3:t.altKey?2:t.shiftKey?1:0;for(let i of Wg)((e=i.mapping[t.code])==null?void 0:e[r])===t.key?i.score+=1:(n=i.mapping[t.code])!=null&&n[r]&&(i.score=0);Wg.sort((i,o)=>o.score-i.score)}function qf(){return Wg[0]}function J$(){switch(F3()){case"apple":return r2;case"windows":return zA;case"linux":return VA}return r2}switch(F3()){case"apple":Yr(r2),Yr(V$),Yr(j$),Yr(K$);break;case"windows":Yr(zA),Yr(F$),Yr(H$),Yr($$);break;case"linux":Yr(VA),Yr(U$),Yr(G$),Yr(q$);break}Yr(z$);function U3(t){var e;let n=/macos|ios/.test(Th()),r=t.split("+"),i="";for(let o of r)i&&(i+=n?" ":'<span class="ML__shortcut-join">+</span>'),o.startsWith("[Key")?i+=o.slice(4,5):o.startsWith("Key")?i+=o.slice(3,4):o.startsWith("[Digit")?i+=o.slice(6,7):o.startsWith("Digit")?i+=o.slice(5,6):i+=(e={cmd:"⌘",meta:n?"⌘":"Ctrl",shift:n?"⇧":"Shift",alt:n?"⌥":"Alt",ctrl:n?"⌃":"Ctrl","\n":n?"⏎":"Return","[return]":n?"⏎":"Return","[enter]":n?"⌤":"Enter","[tab]":n?"⇥":"Tab","[escape]":"Esc","[backspace]":n?"⌫":"Backspace","[delete]":n?"⌦":"Del","[pageup]":n?"⇞":"Page Up","[pagedown]":n?"⇟":"Page Down","[home]":n?"⤒":"Home","[end]":n?"⤓":"End","[space]":"Space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"⇠",up:"⇡",right:"⇢",down:"⇣","[arrowleft]":"⇠","[arrowup]":"⇡","[arrowright]":"⇢","[arrowdown]":"⇣"}[o.toLowerCase()])!=null?e:o.toUpperCase();return i}function Xg(t){if(t instanceof MouseEvent||t instanceof PointerEvent)return{x:t.clientX,y:t.clientY};if(typeof TouchEvent<"u"&&t instanceof TouchEvent){let e=[...t.touches].reduce((r,i)=>({x:r.x+i.clientX,y:r.y+i.clientY}),{x:0,y:0}),n=t.touches.length;return{x:e.x/n,y:e.y/n}}}function su(t){let e={alt:!1,control:!1,shift:!1,meta:!1};return(t instanceof MouseEvent||t instanceof PointerEvent||typeof TouchEvent<"u"&&t instanceof TouchEvent||t instanceof KeyboardEvent)&&(t.altKey&&(e.alt=!0),t.ctrlKey&&(e.control=!0),t.metaKey&&(e.meta=!0),t.shiftKey&&(e.shift=!0)),e}function Z$(t,e){return!t&&e||t&&!e?!1:!t||!e?!0:t.alt===e.alt&&t.control===e.control&&t.shift===e.shift&&t.meta===e.meta}var eq=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function z1(t){return t.ctrlKey||t.metaKey||["Dead","Process"].includes(t.key)?!1:t.code===""?!0:eq.has(t.code)}function Yg(){var t;let e=document.activeElement;for(;(t=e?.shadowRoot)!=null&&t.activeElement;)e=e.shadowRoot.activeElement;return e}var qi=class ho{static get scrim(){return ho._scrim||(ho._scrim=new ho),ho._scrim}static open(e){ho.scrim.open(e)}static close(){ho.scrim.close()}static get state(){return ho.scrim.state}static get element(){return ho.scrim.element}constructor(e){var n,r;this.lightDismiss=(n=e?.lightDismiss)!=null?n:!0,this.translucent=(r=e?.translucent)!=null?r:!1,this.state="closed"}get element(){if(this._element)return this._element;let e=document.createElement("div");return e.setAttribute("role","presentation"),e.style.position="fixed",e.style.contain="content",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.zIndex="var(--scrim-zindex, 10099)",e.style.outline="none",this.translucent?(e.style.background="rgba(255, 255, 255, .2)",e.style.backdropFilter="contrast(40%)"):e.style.background="transparent",this._element=e,e}open(e){var n;if(this.state!=="closed")return;this.state="opening",this.onDismiss=e?.onDismiss,this.savedActiveElement=Yg();let{element:r}=this;((n=e?.root)!=null?n:document.body).appendChild(r),r.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let i=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let o=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${o+i}px`;let l=document.querySelector(".MLK__plate");if(l instanceof HTMLElement){this.savedMlkPaddingRight=l.style.paddingRight;let c=Number.parseFloat(getComputedStyle(l).paddingRight);l.style.paddingRight=`${c+i}px`}e!=null&&e.child&&r.append(e.child),this.state="open"}close(){var e,n,r,i,o;if(this.state!=="open"){this.element.parentElement;return}this.state="closing",typeof this.onDismiss=="function"&&this.onDismiss(),this.onDismiss=void 0;let{element:l}=this;l.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),l.remove(),document.body.style.overflow=(e=this.savedOverflow)!=null?e:"",document.body.style.marginRight=(n=this.savedMarginRight)!=null?n:"";let c=document.querySelector(".MLK__plate");c instanceof HTMLElement&&(c.style.paddingRight=(r=this.savedMlkPaddingRight)!=null?r:""),Yg()!==this.savedActiveElement&&((o=(i=this.savedActiveElement)==null?void 0:i.focus)==null||o.call(i)),l.innerHTML="",this.state="closed"}handleEvent(e){this.lightDismiss&&(e.target===this._element&&e.type==="click"?(this.close(),e.preventDefault(),e.stopPropagation()):e.target===document&&(e.type==="touchmove"||e.type==="scroll")&&(this.close(),e.preventDefault(),e.stopPropagation()))}};function tq(t,e,n){let r=null,i=null,o=!1,l=!1,c=!1,d=new AbortController,f=d.signal;return t.addEventListener("keydown",p=>{if(o||p.key==="Process"||p.code==="CapsLock"||/(Control|Meta|Alt|Shift)(Left|Right)/.test(p.code)){r=null;return}r=p,i=null,n.onKeystroke(p)?t.textContent="":r=null},{capture:!0,signal:f}),t.addEventListener("keypress",p=>{o||(r&&i&&n.onKeystroke(r),i=p)},{capture:!0,signal:f}),t.addEventListener("compositionstart",p=>{t.textContent="",o=!0,n.onCompositionStart(p.data)},{capture:!0,signal:f}),t.addEventListener("compositionupdate",p=>{o&&n.onCompositionUpdate(p.data)},{capture:!0,signal:f}),t.addEventListener("compositionend",p=>{t.textContent="",o&&(o=!1,n.onCompositionEnd(p.data))},{capture:!0,signal:f}),t.addEventListener("beforeinput",p=>p.stopImmediatePropagation(),{signal:f}),t.addEventListener("input",p=>{var y;if(!o&&(t.textContent="",p.inputType!=="insertCompositionText")){if(p.inputType==="insertFromPaste"){p.preventDefault(),p.stopPropagation();return}n.onInput((y=p.data)!=null?y:""),p.preventDefault(),p.stopPropagation()}},{signal:f}),t.addEventListener("paste",p=>{t.focus({preventScroll:!0}),t.textContent="",n.onPaste(p)||p.preventDefault(),p.stopImmediatePropagation()},{signal:f}),t.addEventListener("cut",p=>n.onCut(p),{capture:!0,signal:f}),t.addEventListener("copy",p=>n.onCopy(p),{capture:!0,signal:f}),t.addEventListener("blur",p=>{var y,v;if(((v=(y=p.relatedTarget)==null?void 0:y._mathfield)==null?void 0:v.element)===e){t.focus({preventScroll:!0}),p.preventDefault(),p.stopPropagation();return}let x=!1,S=p.relatedTarget;for(;S;){if(S.classList.contains("ML__keyboard")){x=!0;break}S=S.parentElement}if(x){t.focus({preventScroll:!0}),p.preventDefault(),p.stopPropagation();return}let R=qi.state;if(R==="open"||R==="opening"){p.preventDefault(),p.stopPropagation();return}if(p.relatedTarget===p.target.getRootNode().host){p.preventDefault(),p.stopPropagation();return}c||l||(c=!0,r=null,i=null,n.onBlur(),c=!1)},{capture:!0,signal:f}),t.addEventListener("focus",p=>{c||l||(l=!0,n.onFocus(),l=!1)},{capture:!0,signal:f}),{dispose:()=>d.abort(),cancelComposition:()=>{o&&(typeof t.blur=="function"&&t.blur(),requestAnimationFrame(()=>t.focus({preventScroll:!0})))},blur:()=>{typeof t.blur=="function"&&(c=!0,t.blur(),c=!1)},focus:()=>{!l&&typeof t.focus=="function"&&(l=!0,t.focus({preventScroll:!0}),l=!1)},hasFocus:()=>Yg()===t,setAriaLabel:p=>t.setAttribute("aria-label",p),setValue:p=>{var y;t.textContent!==p&&(t.textContent=p,t.style.left="-1000px",(y=window.getSelection())==null||y.selectAllChildren(t))},moveTo:(p,y)=>{t.style.top=`${y}px`,t.style.left=`${p}px`}}}function qc(t){var e;if(!t||!z1(t))return"";let n;return t.key==="Unidentified"&&t.target&&(n=t.target.value),n=(e=n??t.key)!=null?e:t.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(n)&&(n=""),n}function UA(t){t=Y$(t);let e=[];return t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.length===0?`[${t.code}]`:(e.push(`[${t.code}]`),e.join("+"))}function nq(t){if(Di()){let e=Th(),n=t.startsWith("!"),r=t.endsWith(e);if(n&&!r||!n&&r)return!0}return t==="!other"?!1:t==="other"}function rq(t,e,n){if(t.length===0)return"";let r=Gc(FA(UA(n))),i=Gc({key:n.key,shift:n.shiftKey,alt:n.altKey,ctrl:n.ctrlKey,meta:n.metaKey||n.ctrlKey&&/macos|ios/.test(Th()),cmd:!1,win:!1});for(let o=t.length-1;o>=0;o--)if((t[o].key===r||t[o].key===i)&&(!t[o].ifMode||t[o].ifMode===e))return t[o].command;return""}function SE(t){let e=t;return Rn(e)&&(e=e.length>0?e[0]+"("+e.slice(1).join("")+")":""),e}function iq(t,e){let n=[];if(typeof e=="string"){let o=zK[e];Rn(o)?n=o.slice():o&&n.push(o)}let r=SE(e),i=new RegExp("^"+r.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let o of t)i.test(SE(o.command))&&n.push(o.key);return n.map(U3)}function aq(t,e){if(t.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(t.ifPlatform))throw new Error(`Unexpected platform "${t.ifPlatform}" for keybinding ${t.key}`);if(t.ifLayout!==void 0&&(e.score===0||!t.ifLayout.includes(e.id)))return;let n=FA(t.key),r=t.ifPlatform;if(n.cmd){if(r&&r!=="macos"&&r!=="ios")throw new Error('Unexpected "cmd" modifier with platform "'+r+`"
"cmd" modifier can only be used with macOS or iOS platform.`);r||(r=Th()==="ios"?"ios":"macos"),n.win=!1,n.cmd=!1,n.meta=!0}if(n.win){if(r&&r!=="windows")throw new Error('Unexpected "win" modifier with platform "'+r+`"
"win" modifier can only be used with Windows platform.`);r="windows",n.win=!1,n.cmd=!1,n.meta=!0}if(r&&!nq(r))return;if(/^\[.+\]$/.test(n.key))return q(N({},t),{key:Gc(n)});let i=X$(n.key,e);if(!i)return q(N({},t),{key:Gc(n)});if(i.shift&&n.shift||i.alt&&n.alt)throw new Error(`The keybinding ${t.key} (${i2(t.command)}) is conflicting with the key combination ${Gc(i)} using the ${e.displayName} keyboard layout`);return i.shift=i.shift||n.shift,i.alt=i.alt||n.alt,i.meta=n.meta,i.ctrl=n.ctrl,q(N({},t),{key:Gc(i)})}function i2(t){if(Array.isArray(t)){let e=[...t];return e.shift()+"("+e.map(n=>typeof n=="string"?`"${n}"`:n.toString()).join(", ")+")"}return t}function oq(t,e){let n=[],r=[];for(let i of t)try{let o=aq(i,e);if(!o)continue;let l=r.find(c=>c.key===o.key&&c.ifMode===o.ifMode);if(l)throw new Error(`Ambiguous key binding ${i.key} (${i2(i.command)}) matches ${l.key} (${i2(l.command)}) with the ${e.displayName} keyboard layout`);r.push(o)}catch(o){o instanceof Error&&n.push(o.message)}return[r,n]}var sq=class extends Lt{constructor(){super("latex")}createAtom(t){return new An(t)}onPaste(t,e){if(!e)return!1;let n=typeof e=="string"?e:e.getData("application/x-latex")||e.getData("text/plain");return n&&t.model.contentWillChange({inputType:"insertFromPaste",data:n})?(t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,n)&&(t.startRecording(),t.snapshot("paste"),t.model.contentDidChange({inputType:"insertFromPaste"}),Qt(t)),t.startRecording(),!0):!1}insert(t,e,n){if(!t.contentWillChange({data:e,inputType:"insertText"}))return!1;n||(n={}),n.insertionMode||(n.insertionMode="replaceSelection"),n.selectionMode||(n.selectionMode="placeholder");let{silenceNotifications:r}=t;n.silenceNotifications&&(t.silenceNotifications=!0);let i=t.silenceNotifications;t.silenceNotifications=!0,n.insertionMode==="replaceSelection"&&!t.selectionIsCollapsed?t.deleteAtoms(Zn(t.selection)):n.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):n.insertionMode==="insertBefore"?t.collapseSelection("backward"):n.insertionMode==="insertAfter"&&t.collapseSelection("forward");let o=[];for(let d of e)aK.test(d)&&o.push(new An(d));let l=t.at(t.position);if(l instanceof wf&&(l=l.lastChild),!(l.parent instanceof wf)){let d=new wf;l.parent.addChildAfter(d,l),l=d.firstChild}let c=l.parent.addChildrenAfter(o,l);return t.silenceNotifications=i,n.selectionMode==="before"||(n.selectionMode==="item"?t.setSelection(t.anchor,t.offsetOf(c)):c&&(t.position=t.offsetOf(c))),t.contentDidChange({data:e,inputType:"insertText"}),t.silenceNotifications=r,!0}};function K3(t){return t.atoms.find(e=>e.type==="latexgroup")}function Qg(t){var e,n;let r=K3(t);return(n=(e=r?.body)==null?void 0:e.filter(i=>i.type==="latex"))!=null?n:[]}function KA(t,e){var n;let r=0,i=!1,o=Number.isFinite(e?.before)?(n=e?.before)!=null?n:0:t.lastOffset;for(;r<=o&&!i;){let d=t.at(r);i=d instanceof An&&d.isSuggestion,i||r++}if(!i)return[void 0,void 0];let l=r,c=!1;for(;l<=o&&!c;){let d=t.at(l);c=!(d instanceof An&&d.isSuggestion),c||l++}return[r-1,l-1]}new sq;function lq(t,e){t.flushInlineShortcutBuffer(),t.stopCoalescingUndo();let n=a2(t,e),{model:r}=t;return r.selectionIsCollapsed?(t.defaultStyle.fontSeries&&n.fontSeries===t.defaultStyle.fontSeries&&(n.fontSeries="auto"),n.fontShape&&n.fontShape===t.defaultStyle.fontShape&&(n.fontShape="auto"),n.color&&n.color===t.defaultStyle.color&&(n.color="none"),n.backgroundColor&&n.backgroundColor===t.defaultStyle.backgroundColor&&(n.backgroundColor="none"),n.fontSize&&n.fontSize===t.defaultStyle.fontSize&&(n.fontSize="auto"),t.defaultStyle=N(N({},t.defaultStyle),n)):t.model.deferNotifications({content:!0,type:"insertText"},()=>{r.selection.ranges.forEach(i=>t2(r,i,n,{operation:"toggle"})),t.snapshot("style-change")}),!0}Cr({applyStyle:lq},{target:"mathfield",canUndo:!0,changeContent:!0});function a2(t,e){var n,r,i,o,l,c,d,f,p,y;let v={};if(typeof e.color=="string"){let S=(r=t.colorMap((n=e.color)!=null?n:e.verbatimColor))!=null?r:"none";S!==e.color&&(v.verbatimColor=(i=e.verbatimColor)!=null?i:e.color),v.color=S}if(typeof e.backgroundColor=="string"){let S=(l=t.backgroundColorMap((o=e.backgroundColor)!=null?o:e.verbatimBackgroundColor))!=null?l:"none";S!==e.backgroundColor&&(v.verbatimBackgroundColor=(c=e.verbatimBackgroundColor)!=null?c:e.backgroundColor),v.backgroundColor=S}typeof e.fontFamily=="string"&&(v.fontFamily=e.fontFamily),typeof e.series=="string"&&(v.fontSeries=e.series),typeof e.fontSeries=="string"&&(v.fontSeries=e.fontSeries.toLowerCase()),v.fontSeries&&(v.fontSeries=(d={bold:"b",medium:"m",normal:"m"}[v.fontSeries])!=null?d:v.fontSeries),typeof e.shape=="string"&&(v.fontShape=e.shape),typeof e.fontShape=="string"&&(v.fontShape=e.fontShape.toLowerCase()),v.fontShape&&(v.fontShape=(f={italic:"it",up:"n",upright:"n",normal:"n"}[v.fontShape])!=null?f:v.fontShape),e.variant&&(v.variant=e.variant.toLowerCase()),e.variantStyle&&(v.variantStyle=e.variantStyle.toLowerCase());let x=(p=e.size)!=null?p:e.fontSize;return typeof x=="number"?v.fontSize=Math.max(1,Math.min(10,x)):typeof x=="string"&&(v.fontSize=(y={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[x.toLowerCase()])!=null?y:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[x]),v}function $3(t,e,n){var r,i;let o=t.model;if(o.mode==="latex")return{};let l=t.styleBias;if(l==="none")return t.defaultStyle;if(o.mode==="text")return(i=(r=o.at(l==="right"?n.after:n.before))==null?void 0:r.style)!=null?i:t.defaultStyle;if(o.mode==="math"){let c=o.at(l==="right"?n.after:n.before);return c?q(N({},c.style),{variant:"normal"}):t.defaultStyle}return{}}function _h(t){let e=t.options.onInsertStyle;if(e===null)return{};e===void 0&&(e=$3);let n=t.model,r=t.styleBias,i=n.at(n.position),o=kE(n,i,r),l=kE(n,i.rightSibling,r);return e(t,n.position,{before:o,after:l})}function kE(t,e,n){var r;return!e||e.type==="first"&&n!=="right"?-1:e.type!=="group"?t.offsetOf(e):!e.body||e.body.length<2?-1:((r=e.body)==null?void 0:r.length)===1||n!=="right"?t.offsetOf(e.body[0]):t.offsetOf(e.body[e.body.length-1])}function V1(t){let e=Qg(t.model).filter(n=>n.isSuggestion);if(e.length!==0){t.model.position=t.model.offsetOf(e[0].leftSibling);for(let n of e)n.parent.removeChild(n)}}function hm(t,e){var n;let{model:r}=t;V1(t);for(let p of Qg(r))p.isError=!1;if(!r.selectionIsCollapsed||t.options.popoverPolicy==="off"){wh(t);return}let i=[],o=r.at(r.position);for(;o&&o instanceof An&&/^[a-zA-Z\*]$/.test(o.value);)o=o.leftSibling;if(o&&o instanceof An&&o.value==="\\")for(i.push(o),o=o.rightSibling;o&&o instanceof An&&/^[a-zA-Z\*]$/.test(o.value);)i.push(o),o=o.rightSibling;let l=i.map(p=>p.value).join(""),c=sK(t,l);if(c.length===0){if(/^\\[a-zA-Z\*]+$/.test(l))for(let p of i)p.isError=!0;wh(t);return}let d=(n=e?.atIndex)!=null?n:0;t.suggestionIndex=d<0?c.length-1:d%c.length;let f=c[t.suggestionIndex];if(f!==l){let p=i[i.length-1];p.parent.addChildrenAfter([...f.slice(l.length-f.length)].map(y=>new An(y,{isSuggestion:!0})),p),fu(t,{interactive:!0})}cq(t,c)}function CE(t){let[e,n]=KA(t,{before:t.position});if(e===void 0||n===void 0)return!1;let r=!1;return t.getAtoms([e,n]).forEach(i=>{i.isSuggestion&&(i.isSuggestion=!1,r=!0)}),r}function xh(t,e="accept",n){var r,i;wh(t);let o=K3(t.model);if(!o)return!1;if(e==="accept-suggestion"||e==="accept-all"){let f=Qg(t.model).filter(p=>p.isSuggestion);if(f.length!==0){for(let p of f)p.isSuggestion=!1;t.model.position=t.model.offsetOf(f[f.length-1])}if(e==="accept-suggestion")return f.length!==0}let l=Qg(t.model).filter(f=>!f.isSuggestion).map(f=>f.value).join(""),c=o.leftSibling;if(o.parent.removeChild(o),t.model.position=t.model.offsetOf(c),t.switchMode((r=n?.mode)!=null?r:"math"),e==="reject")return!0;let d=N({},_h(t));return!/^[a-zA-Z0-9]$/.test(l)&&t.styleBias!=="none"&&(d.variant="normal",d.variantStyle=void 0),Lt.insert(t.model,l,{selectionMode:(i=n?.selectItem)!=null&&i?"item":"placeholder",format:"latex",mode:"math",style:d}),t.snapshot(),t.model.announce("replacement"),t.switchMode("math"),!0}function F1(t){var e;let n=document.getElementById(t);return n?n.dataset.refcount=Number(Number.parseInt((e=n.dataset.refcount)!=null?e:"0")+1).toString():(n=document.createElement("div"),n.setAttribute("aria-hidden","true"),n.dataset.refcount="1",n.id=t,document.body.append(n)),n}function dm(t){var e;let n=document.getElementById(t);if(!n)return;let r=Number.parseInt((e=n.getAttribute("data-refcount"))!=null?e:"0");r<=1?n.remove():n.dataset.refcount=Number(r-1).toString()}function uq(t,e){let n=new lt({from:t.context}),r=new re({mode:"math",type:"root",body:Mi(e,{context:n})}),i=D1(cm(new be(r.render(n),{classes:"ML__base"}),n));return L1(i,{classes:"ML__latex"}).toMarkup()}function cq(t,e){var n;if(e.length===0){wh(t);return}let r="";for(let[o,l]of e.entries()){let c=l,d=uq(t,l),f=iq(t.keybindings,c).join("<br>");r+=`<li role="button" data-command="${c}" ${o===t.suggestionIndex?"class=ML__popover__current":""}><span class="ML__popover__latex">${c}</span><span class="ML__popover__command">${d}</span>`,f&&(r+=`<span class="ML__popover__keybinding">${f}</span>`),r+="</li>"}let i=hq(t,`<ul>${r}</ul>`);o2()&&((n=i.querySelector(".ML__popover__current"))==null||n.scrollIntoView({block:"nearest",inline:"nearest"})),setTimeout(()=>{var o;i&&!o2()&&(i.classList.add("is-visible"),U1(t),(o=i.querySelector(".ML__popover__current"))==null||o.scrollIntoView({block:"nearest",inline:"nearest"}))},32)}function o2(){let t=document.getElementById("mathlive-suggestion-popover");return t?t.classList.contains("is-visible"):!1}function U1(t,e){var n,r,i;if(!t.element||t.element.mathfield!==t||!o2())return;if(((n=t.model.at(t.model.position))==null?void 0:n.type)!=="latex"){wh(t);return}if(e!=null&&e.deferred){setTimeout(()=>U1(t),32);return}let o=sg(t.field);if(!o)return;let l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=window.innerWidth-document.documentElement.clientWidth,f=window.innerHeight-document.documentElement.clientHeight,p=(i=(r=window.mathVirtualKeyboard)==null?void 0:r.boundingRect.height)!=null?i:0,y=document.getElementById("mathlive-suggestion-popover");o.x+y.offsetWidth/2>c-d?y.style.left=`${c-y.offsetWidth-d}px`:o.x-y.offsetWidth/2<0?y.style.left="0":y.style.left=`${o.x-y.offsetWidth/2}px`;let v=o.y-o.height;l-f-p-o.y<v?(y.classList.add("ML__popover--reverse-direction"),y.classList.remove("top-tip"),y.classList.add("bottom-tip"),y.style.top=`${o.y-o.height-y.offsetHeight-15}px`):(y.classList.remove("ML__popover--reverse-direction"),y.classList.add("top-tip"),y.classList.remove("bottom-tip"),y.style.top=`${o.y+15}px`)}function wh(t){t.suggestionIndex=0,document.getElementById("mathlive-suggestion-popover")&&dm("mathlive-suggestion-popover")}function hq(t,e){let n=document.getElementById("mathlive-suggestion-popover");return n?dm("mathlive-suggestion-popover"):(Js("suggestion-popover"),Js("core")),n=F1("mathlive-suggestion-popover"),n.addEventListener("pointerdown",r=>r.preventDefault()),n.addEventListener("click",r=>{let i=r.target;for(;i&&!i.dataset.command;)i=i.parentElement;i&&(xh(t,"reject"),Lt.insert(t.model,i.dataset.command,{selectionMode:"placeholder",format:"latex",mode:"math"}),t.dirty=!0,t.focus())}),n.innerHTML=globalThis.MathfieldElement.createHTML(e),n}function dq(){document.getElementById("mathlive-suggestion-popover")&&(dm("mathlive-suggestion-popover"),Zs("suggestion-popover"),Zs("core"))}function fq(){let t=String(new Error().stack).replace(/^Error.*\n/,"").split(`
`);if(t.length===0)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${new Error().stack}").`),"";let e=t[1],n=e.match(/http.*\.ts[\?:]/);return n&&(e=t[2]),n=e.match(/(https?:.*):[0-9]+:[0-9]+/),n||(n=e.match(/at (.*(\.ts))[\?:]/),n||(n=e.match(/at (.*(\.mjs|\.js))[\?:]/))),n?n[1]:(console.error(t),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${e}").`),"")}var Es=null,ME,AE,Xv=((AE=(ME=globalThis?.document)==null?void 0:ME.currentScript)==null?void 0:AE.src)||fq();async function $A(t){if(/^(?:[a-z+]+:)?\/\//i.test(t)){try{return new URL(t).href}catch{}if(t.startsWith("//"))try{return new URL(`${window.location.protocol}${t}`).href}catch{}return t}if(Es===null)try{let e=await fetch(Xv,{method:"HEAD"});e.status===200&&(Es=e.url,Es=Es.replace(/\/\+esm$/,"/"),Es.includes("jsdelivr.net/")&&(Es+="/"))}catch{console.error(`Invalid URL "${t}" (relative to "${Xv}")`)}return new URL(t,Es??Xv).href}function mq(t,e,n={}){return new FontFace(t,`url(${e}.woff2) format('woff2')`,n)}var Jr="not-loaded";async function pq(){return Jr="not-loaded",q3()}async function q3(){var t;if(Jr==="not-loaded"){if(Jr="loading",(t=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))!=null?t:!1){Jr="ready";return}if(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document){let e=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],n=Array.from(document.fonts).map(o=>o.family);if(e.every(o=>n.includes(o))){Jr="ready";return}if(!globalThis.MathfieldElement.fontsDirectory){Jr="not-loaded";return}let r=await $A(globalThis.MathfieldElement.fontsDirectory);if(!r){document.body.classList.add("ML__fonts-did-not-load"),Jr="error";return}r.endsWith("/")&&(r=r.slice(0,-1));let i=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular"],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(o=>mq(o[0].replace(/-[a-zA-Z]+$/,""),`${r}/${o[0]}`,o[1]));try{(await Promise.all(i.map(o=>{try{return o.load()}catch{}}))).forEach(o=>document.fonts.add(o)),Jr="ready";return}catch(o){console.error(`MathLive 0.106.0: The math fonts could not be loaded from "${r}"`,{cause:o}),document.body.classList.add("ML__fonts-did-not-load")}Jr="error"}}}function gq(t,e=0){let n=3735928559^e,r=1103547991^e;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);n=Math.imul(n^o,2654435761),r=Math.imul(r^o,1597334677)}return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}function Qt(t,e){!t||t.dirty||!t.field||(t.resizeObserver.unobserve(t.field),t.dirty=!0,requestAnimationFrame(()=>{po(t)&&t.dirty&&(t.atomBoundsCache=new Map,fu(t,e),t.atomBoundsCache=void 0,t.resizeObserver.observe(t.field),t.resizeObserverStarted=!0)}))}function yq(t,e){var n;e=e??{};let r=new lt({from:q(N({},t.context),{atomIdsSettings:{seed:e.forHighlighting?gq(re.serialize([t.model.root],{expandMacro:!1,defaultMode:t.options.defaultMode})):"random",groupNumbers:(n=e.forHighlighting)!=null?n:!1},letterShapeStyle:t.options.letterShapeStyle}),mathstyle:t.options.defaultMode==="inline-math"?"textstyle":"displaystyle"}),i=t.model.root.render(r);return L1(cm(i,r),{classes:t.hasEditablePrompts?"ML__latex ML__prompting":"ML__latex",attributes:{translate:"no","aria-hidden":"true"}})}function qA(t,e){try{let{model:n}=t;n.root.caret=void 0,n.root.isSelected=!1,n.root.containsCaret=!0;for(let r of n.atoms)r.caret=void 0,r.isSelected=!1,r.containsCaret=!1;if(n.selectionIsCollapsed){let r=n.at(n.position);r.caret=t.model.mode;let i=r.parent;for(;i;)i.containsCaret=!0,i=i.parent}else{let r=n.getAtoms(n.selection,{includeChildren:!0});for(let i of r)i.isSelected=!0}return yq(t,e).toMarkup()}catch(n){return console.error(n),'<span class="ML__latex" translate="no" aria-hidden="true">🚫</span>'}}function fu(t,e){if(!po(t))return;e!=null||(e={});let n=t.element.querySelector("[part=virtual-keyboard-toggle]");n&&(n.style.display=t.hasEditableContent?"":"none");let r=t.field;if(!r)return;let i=t.isSelectionEditable&&t.hasFocus(),o=r.classList.contains("ML__focused");o&&!i?r.classList.remove("ML__focused"):!o&&i&&r.classList.add("ML__focused");let l=qA(t,e),c=t.element.querySelector("[part=menu-toggle]");if(c){let d=!1;(t.disabled||t.readOnly&&!t.hasEditableContent||t.userSelect==="none")&&(d=!0),!d&&r.offsetWidth<50&&(d=!0),c.style.display=d?"none":""}if(t.model.atoms.length<=1){let d=t.options.contentPlaceholder;d&&(l+=`<span part=placeholder class="ML__content-placeholder">${xn(d)}</span>`)}r.innerHTML=globalThis.MathfieldElement.createHTML(l),Jg(t,e.interactive),t.dirty=!1}function Jg(t,e){let n=t.field;if(!n)return;for(let l of n.querySelectorAll(".ML__selection, .ML__contains-highlight"))l.remove();if(!(e!=null&&e)&&Jr!=="error"&&Jr!=="ready"){setTimeout(()=>{Jr==="ready"?Jg(t):setTimeout(()=>Jg(t),128)},32);return}let r=t.model,i,o=()=>{if(i!==void 0)return i;let l=n.offsetWidth,c=n.getBoundingClientRect().width;return i=Math.floor(c)/l,isNaN(i)&&(i=1),i};if(r.selectionIsCollapsed){U1(t,{deferred:!0});let l=r.at(r.position);for(;l&&l.type!=="prompt"&&!(l.containsCaret&&l.displayContainsHighlight);)l=l.parent;if(l!=null&&l.containsCaret&&l.displayContainsHighlight){let c=o(),d=KM(t,Lh(t,l),c);if(d){d.left/=c,d.right/=c,d.top/=c,d.bottom/=c;let f=document.createElement("div");f.classList.add("ML__contains-highlight"),f.style.position="absolute",f.style.left=`${d.left+1}px`,f.style.top=`${Math.ceil(d.top)}px`,f.style.width=`${Math.ceil(d.right-d.left)}px`,f.style.height=`${Math.ceil(d.bottom-d.top)}px`,n.insertBefore(f,n.childNodes[0])}}return}for(let l of bq(qM(t,{excludeAtomsWithBackground:!0}))){let c=o();l.left/=c,l.right/=c,l.top/=c,l.bottom/=c;let d=document.createElement("div");d.classList.add("ML__selection"),d.style.position="absolute",d.style.left=`${l.left}px`,d.style.top=`${l.top}px`,d.style.width=`${Math.ceil(l.right-l.left)}px`,d.style.height=`${Math.ceil(l.bottom-l.top-1)}px`,n.insertBefore(d,n.childNodes[0])}}function bq(t){let e=[];for(let n of t){let r=!1;for(let i of e)if(n.left===i.left&&n.right===i.right&&n.top===i.top&&n.bottom===i.bottom){r=!0;break}r||e.push(n)}t=e,e=[];for(let n of t){let r=0;for(let i of t)if(n.left>=i.left&&n.right<=i.right&&n.top>=i.top&&n.bottom<=i.bottom&&(r+=1,r>1))break;r===1&&e.push(n)}return e}function jA(t){if(!t)return;let e=t.model,n=e.selection,r=re.serialize([e.root],{expandMacro:!1,defaultMode:t.options.defaultMode});Lt.insert(e,r,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",silenceNotifications:!0,mode:"math"});let i=e.silenceNotifications;e.silenceNotifications=!0,e.selection=n,e.silenceNotifications=i,Qt(t)}function TE(){for(let t of document.querySelectorAll(".ML__mathfield"))"_mathfield"in t&&jA(t._mathfield)}var HA=3,xa;function Cr(t,e){e=N({target:"mathfield",canUndo:!1,audioFeedback:void 0,changeContent:!1,changeSelection:!1},e??{}),xa||(xa={});for(let n of Object.keys(t))xa[n],xa[n]=q(N({},e),{fn:t[n]})}function j3(t){let e;if(Array.isArray(t)){if(t[0]==="performWithFeedback")return j3(t[1]);e=t[0]}else e=t;return xa[e]}function sh(t){var e;return(e=j3(t))==null?void 0:e.target}function vq(t,e){var n,r;if(e=jf(e),!e)return!1;let i,o=[],l=!1,c=!1;Rn(e)?(i=e[0],o=e.slice(1)):i=e;let d=xa[i],f=d?.target;if(f==="model"){if(!t.isSelectionEditable&&d!=null&&d.changeContent)return t.model.announce("plonk"),!1;/^(delete|add)/.test(i)&&(i!=="deleteBackward"&&t.flushInlineShortcutBuffer(),t.snapshot(i)),/^complete/.test(i)||V1(t),xa[i].fn(t.model,...o),hm(t),c=!0,l=!0}else if(f==="virtual-keyboard")c=(r=(n=window.mathVirtualKeyboard)==null?void 0:n.executeCommand(e))!=null?r:!1,l=!0;else if(xa[i]){if(!t.isSelectionEditable&&d!=null&&d.changeContent)return t.model.announce("plonk"),!1;/^(undo|redo)/.test(i)&&t.flushInlineShortcutBuffer(),c=xa[i].fn(t,...o),l=!0}else throw new Error(`Unknown command "${i}"`);return f!=="virtual-keyboard"&&(!t.model.selectionIsCollapsed||d!=null&&d.changeSelection&&i!=="deleteBackward")&&(t.flushInlineShortcutBuffer(),d!=null&&d.changeContent||t.stopCoalescingUndo(),t.defaultStyle={}),c&&Qt(t),l}function _q(t,e){var n;if(!t)return!1;t.focus(),X3.keypressVibration&&xM()&&navigator.vibrate(HA);let r=j3(e);globalThis.MathfieldElement.playSound((n=r?.audioFeedback)!=null?n:"keypress");let i=t.executeCommand(e);return t.scrollIntoView(),i}Cr({performWithFeedback:(t,e)=>_q(t,e)});function xq(t){return hm(t,{atIndex:t.suggestionIndex+1}),!1}function wq(t){return hm(t,{atIndex:t.suggestionIndex-1}),!1}Cr({complete:xh},{target:"mathfield",audioFeedback:"return",canUndo:!0,changeContent:!0,changeSelection:!0});Cr({dispatchEvent:(t,e,n)=>{var r,i;return(i=(r=t.host)==null?void 0:r.dispatchEvent(new CustomEvent(e,{detail:n})))!=null?i:!1}},{target:"mathfield"});Cr({nextSuggestion:xq,previousSuggestion:wq},{target:"mathfield",audioFeedback:"keypress",changeSelection:!0});function jf(t){if(!t)return;if(Rn(t)&&t.length>0){let n=t[0];return n=n.replace(/-\w/g,r=>r[1].toUpperCase()),n==="performWithFeedback"&&t.length===2?[n,jf(t[1])]:[n,...t.slice(1)]}if(typeof t!="string")return;let e=t.trim().match(/^([a-zA-Z0-9-]+)\((.*)\)$/);if(e){let n=e[1].replace(/-\w/g,i=>i[1].toUpperCase()),r=e[2].split(",").map(i=>i.trim());return[n,...r.map(i=>{if(/"[^"]*"/.test(i)||/'[^']*'/.test(i))return i.slice(1,-1);if(/^true$/.test(i))return!0;if(/^false$/.test(i))return!1;if(/^[-]?\d+$/.test(i))return parseInt(i,10);if(/^\{.*\}$/.test(i))try{return JSON.parse(i)}catch{return console.error("Invalid argument:",i),i}return jf(i)})]}return t.replace(/-\w/g,n=>n[1].toUpperCase())}var Zg="mathlive#virtual-keyboard-message";function H3(t){var e;return t.type!=="message"?!1:((e=t.data)==null?void 0:e.type)===Zg}var Eq=class GA{constructor(){this.targetOrigin=window.origin,this.originValidator="none",this._boundingRect=new DOMRect(0,0,0,0),this._isShifted=!1,window.addEventListener("message",this),this.sendMessage("proxy-created"),this.listeners={}}static get singleton(){return this._singleton||(this._singleton=new GA),this._singleton}getKeycap(e){}setKeycap(e,n){this.sendMessage("update-setting",{setKeycap:{keycap:e,value:n}})}set alphabeticLayout(e){this.sendMessage("update-setting",{alphabeticLayout:e})}set layouts(e){this.sendMessage("update-setting",{layouts:e})}get normalizedLayouts(){return[]}set editToolbar(e){this.sendMessage("update-setting",{editToolbar:e})}set container(e){throw new Error("Container inside an iframe cannot be changed")}show(e){this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:!0},bubbles:!0,cancelable:!0,composed:!0}))&&(this.sendMessage("show",e),this.dispatchEvent(new Event("virtual-keyboard-toggle")))}hide(e){this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:!1},bubbles:!0,cancelable:!0,composed:!0}))&&(this.sendMessage("hide",e),this.dispatchEvent(new Event("virtual-keyboard-toggle")))}get isShifted(){return this._isShifted}get visible(){return this._boundingRect.height>0}set visible(e){e?this.show():this.hide()}get boundingRect(){return this._boundingRect}executeCommand(e){return this.sendMessage("execute-command",{command:e}),!0}updateToolbar(e){this.sendMessage("update-toolbar",e)}update(e){this.sendMessage("update-setting",e)}connect(){this.sendMessage("connect")}disconnect(){this.sendMessage("disconnect")}addEventListener(e,n,r){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(n)||this.listeners[e].add(n)}dispatchEvent(e){return!this.listeners[e.type]||this.listeners[e.type].size===0?!0:(this.listeners[e.type].forEach(n=>{typeof n=="function"?n(e):n?.handleEvent(e)}),!e.defaultPrevented)}removeEventListener(e,n,r){this.listeners[e]&&this.listeners[e].delete(n)}handleEvent(e){if(H3(e)){if(!N3(e.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");this.handleMessage(e.data)}}handleMessage(e){let{action:n}=e;if(n==="execute-command"){let{command:r}=e;sh(r)==="virtual-keyboard"&&this.executeCommand(r);return}if(n==="synchronize-proxy"){this._boundingRect=e.boundingRect,this._isShifted=e.isShifted;return}if(n==="geometry-changed"){this._boundingRect=e.boundingRect,this.dispatchEvent(new Event("geometrychange"));return}}sendMessage(e,n={}){if(!window.top)throw new DOMException("A frame does not have access to the top window and can‘t communicate with the keyboard. Review virtualKeyboardTargetOrigin and originValidator on mathfields embedded in an iframe","SecurityError");window.top.postMessage(N({type:Zg,action:e},n),this.targetOrigin)}},Sq={numeric:{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",rows:[[{latex:"x",shift:"y",variants:["y","z","t","r","x^2","x^n","x^{#?}","x_n","x_i","x_{#?}",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"}]},{latex:"n",shift:"a",variants:["i","j","p","k","a","u"]},"[separator-5]","[7]","[8]","[9]","[/]","[separator-5]",{latex:"\\exponentialE",shift:"\\ln",variants:["\\exp","\\times 10^{#?}","\\ln","\\log_{10}","\\log","\\lg","\\operatorname{lb}"]},{latex:"\\imaginaryI",variants:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"]},{latex:"\\pi",shift:"\\sin",variants:["\\prod",{latex:"\\theta",aside:"theta"},{latex:"\\rho",aside:"rho"},{latex:"\\tau",aside:"tau"},"\\sin","\\cos","\\tan"]}],[{label:"<",latex:"<",class:"hide-shift",shift:{latex:"\\le",label:"≤"}},{label:">",latex:">",class:"hide-shift",shift:{latex:"\\ge",label:"≥"}},"[separator-5]","[4]","[5]","[6]","[*]","[separator-5]",{class:"hide-shift",latex:"#@^2}",shift:"#@^{\\prime}}"},{latex:"#@^{#0}}",class:"hide-shift",shift:"#@_{#?}"},{class:"hide-shift",latex:"\\sqrt{#0}",shift:{latex:"\\sqrt[#0]{#?}}"}}],["[(]","[)]","[separator-5]","[1]","[2]","[3]","[-]","[separator-5]",{latex:"\\int^{\\infty}_{0}\\!#?\\,\\mathrm{d}x",class:"small hide-shift",shift:"\\int",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{class:"hide-shift",latex:"\\forall",shift:"\\exists"},{label:"[backspace]",width:1}],[{label:"[shift]",width:2},"[separator-5]","[0]","[.]","[=]","[+]","[separator-5]","[left]","[right]",{label:"[action]",width:1}]]},greek:{label:"&alpha;&beta;&gamma;",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.greek",rows:[[{label:"<i>&#x03c6;</i>",class:"MLK__tex hide-shift",insert:"\\varphi",aside:"phi var.",shift:"\\Phi"},{label:"<i>&#x03c2;</i>",class:"MLK__tex hide-shift",insert:"\\varsigma",aside:"sigma var.",shift:"\\Sigma"},{label:"<i>&#x03f5;</i>",class:"MLK__tex hide-shift",insert:"\\epsilon",aside:"epsilon",shift:'\\char"0190'},{label:"<i>&rho;</i>",class:"MLK__tex hide-shift",insert:"\\rho",aside:"rho",shift:'\\char"3A1'},{label:"<i>&tau;</i>",class:"MLK__tex hide-shift",insert:"\\tau",aside:"tau",shift:'\\char"3A4'},{label:"<i>&upsilon;</i>",class:"MLK__tex hide-shift",insert:"\\upsilon",aside:"upsilon",shift:"\\Upsilon"},{label:"<i>&theta;</i>",class:"MLK__tex hide-shift",insert:"\\theta",aside:"theta",shift:"\\Theta"},{label:"<i>&iota;</i>",class:"MLK__tex hide-shift",insert:"\\iota",aside:"iota",shift:'\\char"399'},{label:"<i>&omicron;</i>",class:"MLK__tex hide-shift",insert:"\\omicron",aside:"omicron",shift:'\\char"39F'},{label:"<i>&pi;</i>",class:"MLK__tex hide-shift",insert:"\\pi",aside:"pi",shift:"\\Pi"}],["[separator-5]",{label:"<i>&alpha;</i>",class:"MLK__tex hide-shift",insert:"\\alpha",aside:"alpha",shift:'\\char"391'},{label:"<i>&sigma;</i>",class:"MLK__tex hide-shift",insert:"\\sigma",aside:"sigma",shift:"\\Sigma"},{label:"<i>&delta;</i>",class:"MLK__tex hide-shift",insert:"\\delta",aside:"delta",shift:"\\Delta"},{latex:"\\phi",class:"MLK__tex hide-shift",insert:"\\phi",aside:"phi",shift:"\\Phi"},{label:"<i>&gamma;</i>",class:"MLK__tex hide-shift",insert:"\\gamma",aside:"gamma",shift:"\\Gamma"},{label:"<i>&eta;</i>",class:"MLK__tex hide-shift",insert:"\\eta",aside:"eta",shift:'\\char"397'},{label:"<i>&xi;</i>",class:"MLK__tex hide-shift",insert:"\\xi",aside:"xi",shift:"\\Xi"},{label:"<i>&kappa;</i>",class:"MLK__tex hide-shift",insert:"\\kappa",aside:"kappa",shift:"\\Kappa"},{label:"<i>&lambda;</i>",class:"MLK__tex hide-shift",insert:"\\lambda",aside:"lambda",shift:"\\Lambda"},"[separator-5]"],["[shift]",{label:"<i>&zeta;</i>",class:"MLK__tex hide-shift",insert:"\\zeta",aside:"zeta",shift:'\\char"396'},{label:"<i>&chi;</i>",class:"MLK__tex hide-shift",insert:"\\chi",aside:"chi",shift:'\\char"3A7'},{label:"<i>&psi;</i>",class:"MLK__tex hide-shift",insert:"\\psi",aside:"psi",shift:"\\Psi"},{label:"<i>&omega;</i>",class:"MLK__tex hide-shift",insert:"\\omega",aside:"omega",shift:"\\Omega"},{label:"<i>&beta;</i>",class:"MLK__tex hide-shift",insert:"\\beta",aside:"beta",shift:'\\char"392'},{label:"<i>&nu;</i>",class:"MLK__tex hide-shift",insert:"\\nu",aside:"nu",shift:'\\char"39D'},{label:"<i>&mu;</i>",class:"MLK__tex hide-shift",insert:"\\mu",aside:"mu",shift:'\\char"39C'},"[backspace]"],["[separator]",{label:"<i>&#x03b5;</i>",class:"MLK__tex",insert:"\\varepsilon",aside:"epsilon var."},{label:"<i>&#x03d1;</i>",class:"MLK__tex",insert:"\\vartheta",aside:"theta var."},{label:"<i>&#x3f0;</i>",class:"MLK__tex",insert:"\\varkappa",aside:"kappa var."},{label:"<i>&#x03d6;</i>",class:"MLK__tex",insert:"\\varpi",aside:"pi var."},{label:"<i>&#x03f1;</i>",class:"MLK__tex",insert:"\\varrho",aside:"rho var."},"[left]","[right]","[action]"]]},symbols:{label:"&infin;≠∈",labelClass:"MLK__tex",tooltip:"keyboard.tooltip.symbols",rows:[[{latex:"\\sin",shift:"\\sin^{-1}",variants:[{class:"small",latex:"\\sinh"},{class:"small",latex:"\\sin^{-1}"},{class:"small",latex:"\\operatorname{arsinh}"}]},"\\ln",{latex:"\\mathrm{abs}",insert:"\\mathrm{abs}\\left(#0\\right)"},{latex:"\\rightarrow",shift:"\\Rightarrow",variants:[{latex:"\\implies",aside:"implies"},{latex:"\\to",aside:"to"},"\\dashv",{latex:"\\roundimplies",aside:"round implies"}]},{latex:"\\exists",variants:["\\nexists"],shift:"\\nexists"},{latex:"\\in",shift:"\\notin",variants:["\\notin","\\owns"]},"\\cup",{latex:"\\overrightarrow{#@}",shift:"\\overleftarrow{#@}",variants:["\\overleftarrow{#@}","\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"]},{class:"small hide-shift",latex:"\\lim_{#?}",shift:"\\lim_{x\\to\\infty}",variants:[{class:"small",latex:"\\liminf_{#?}"},{class:"small",latex:"\\limsup_{#?}"}]},"\\exponentialE"],[{latex:"\\cos",shift:"\\cos^{-1}",variants:[{class:"small",latex:"\\cosh"},{class:"small",latex:"\\cos^{-1}"},{class:"small",latex:"\\operatorname{arcosh}"}]},{latex:"\\log",shift:"\\log_{10}",variants:["\\log_{#0}","\\log_{10}"]},"\\left\\vert#0\\right\\vert",{latex:"\\larr",shift:"\\lArr",variants:[{latex:"\\impliedby",aside:"implied by"},{latex:"\\gets",aside:"gets"},"\\lArr","\\vdash",{latex:"\\models",aside:"models"}]},{latex:"\\forall",shift:"\\lnot",variants:[{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"}]},{latex:"\\ni",shift:"\\not\\owns"},"\\cap",{latex:"\\overline{#@}",shift:"\\underline{#@}",variants:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}","\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"]},{class:"hide-shift small",latex:"\\int",shift:"\\iint",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\intop","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"]},{latex:"\\pi",shift:"\\tau",variants:["\\tau"]}],[{latex:"\\tan",shift:"\\tan^{-1}",variants:[{class:"small",latex:"\\tanh"},{class:"small",latex:"\\tan^{-1}"},{class:"small",latex:"\\operatorname{artanh}"},{class:"small",latex:"\\arctan"},{class:"small",latex:"\\operatorname{arctg}"},{class:"small",latex:"\\operatorname{tg}"}]},{latex:"\\exp",insert:"\\exp\\left(#0\\right)",variants:["\\exponentialE^{#0}"]},"\\left\\Vert#0\\right\\Vert",{latex:"\\lrArr",shift:"\\leftrightarrow",variants:[{latex:"\\iff",aside:"if and only if"},"\\leftrightarrow","\\leftrightarrows","\\Leftrightarrow",{latex:"^\\biconditional",aside:"biconditional"}]},{latex:"\\vert",shift:"!"},{latex:"#@^{\\complement}",aside:"complement",variants:[{latex:"\\setminus",aside:"set minus"},{latex:"\\smallsetminus",aside:"small set minus"}]},{latex:"\\subset",shift:"\\subseteq",variants:["\\subset","\\subseteq","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsubseteq","\\supset","\\supseteq","\\supsetneq","\\supsetneqq","\\nsupset","\\nsupseteq"]},{latex:"#@^{\\prime}",shift:"#@^{\\doubleprime}",variants:["#@^{\\doubleprime}","#@\\degree"]},{latex:"\\mathrm{d}",shift:"\\partial",variants:["\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{latex:"\\infty",variants:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"]}],[{label:"[shift]",width:2},{class:"box",latex:",",shift:";",variants:[";","?"]},{class:"box",latex:"\\colon",shift:"\\Colon",variants:[{latex:"\\Colon",aside:"such that",class:"box"},{latex:":",aside:"ratio",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\therefore",aside:"therefore",class:"box"},{latex:"\\because",aside:"because",class:"box"}]},{class:"box",latex:"\\cdot",aside:"centered dot",shift:"\\ast",variants:["\\circ","\\bigcirc","\\bullet","\\odot","\\oslash","\\circledcirc","\\ast","\\star","\\times","\\doteq","\\doteqdot"]},"[separator]","[left]","[right]",{label:"[backspace]",width:1,class:"action hide-shift"},{label:"[action]",width:1}]]},compact:{label:"compact",rows:[["[+]","[-]","[*]","[/]","[=]","[.]","[(]","[)]","\\sqrt{#0}","#@^{#?}"],["[1]","[2]","[3]","[4]","[5]","[6]","[7]","[8]","[9]","[0]"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]},minimalist:{label:"minimalist",layers:[{style:`
          div.minimalist-backdrop {
            display: flex;
            justify-content: center;
          }          
          div.minimalist-container {
            --keycap-height: 40px;
            --keycap-max-width: 53px;
            --keycap-small-font-size: 12px;
            background: var(--keyboard-background);
            padding: 20px 20px 0px 20px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            border: 1px solid var(--keyboard-border);
            box-shadow: 0 0 32px rgb(0 0 0 / 30%);
          }        
        `,backdrop:"minimalist-backdrop",container:"minimalist-container",rows:[["+","-","\\times",{latex:"\\frac{#@}{#0}",class:"small"},"=","[.]","(",")",{latex:"\\sqrt{#0}",class:"small"},{latex:"#@^{#?}",class:"small"}],["1","2","3","4","5","6","7","8","9","0"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]}]},"numeric-only":{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",id:"numeric-only",rows:[["7","8","9","[separator]",{label:"[backspace]",width:2}],["4","5","6","[separator]","[separator]","[separator]"],["1","2","3","[separator]","[separator]","[separator]"],["0",{label:"[.]",variants:[]},"-","[separator]","[left]","[right]"]]}},cg={0:["\\varnothing","\\infty"],1:["\\frac{1}{#@}","#@^{-1}","\\times 10^{#?}","\\phi","\\imaginaryI"],2:["\\frac{1}{2}","#@^2","\\sqrt2","\\exponentialE"],3:["\\frac{1}{3}","#@^3","\\sqrt3","\\pi"],4:["\\frac{1}{4}","#@^4"],5:["\\frac{1}{5}","#@^5","\\sqrt5"],6:["\\frac{1}{6}","#@^6"],7:["\\frac{1}{7}","#@^7"],8:["\\frac{1}{8}","#@^8"],9:["\\frac{1}{9}","#@^9"],".":[".",",",";","\\colon"],",":["{,}",".",";","\\colon"],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"å","à","á","â","ä","æ"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"Å","À","Á","Â","Ä","Æ"],b:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"},"ç"],d:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"},"è","é","ê","ë"],E:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"},"È","É","Ê","Ë"],g:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"},"ì","í","î","ï"],I:[{latex:"\\imaginaryI",aside:"imaginary i"},"Ì","Í","Î","Ï"],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"},"ñ"],o:["ø","œ","ò","ó","ô","ö"],O:["ø","Œ","Ò","Ó","Ô","Ö"],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],u:["ù","ú","û","ü"],U:["Ù","Ú","Û","Ü"],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],y:["ý","ÿ"],Y:["Ÿ"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>⁻³⧸₁₈ em"},{latex:'\\char"203A\\,\\char"2039',insert:"\\,",aside:"thin space<br>³⧸₁₈ em"},{latex:'\\char"203A\\:\\char"2039',insert:"\\:",aside:"medium space<br>⁴⧸₁₈ em"},{latex:'\\char"203A\\;\\char"2039',insert:"\\;",aside:"thick space<br>⁵⧸₁₈ em"},{latex:'\\char"203A\\ \\char"2039',insert:"\\ ",aside:"⅓ em"},{latex:'\\char"203A\\enspace\\char"2039',insert:"\\enspace",aside:"½ em"},{latex:'\\char"203A\\quad\\char"2039',insert:"\\quad",aside:"1 em"},{latex:'\\char"203A\\qquad\\char"2039',insert:"\\qquad",aside:"2 em"}]},Sf;function WA(t,e){var n,r,i,o,l;let c=ol.singleton;if(!c)return;let d=Xc(t),f="";if(window.mathVirtualKeyboard.isShifted){let L=(n=c.getKeycap(d?.id))==null?void 0:n.shift;typeof L=="object"&&"variants"in L&&(f=(r=L.variants)!=null?r:"")}else f=(o=(i=c.getKeycap(d?.id))==null?void 0:i.variants)!=null?o:"";if(typeof f=="string"&&!s2(f)||Array.isArray(f)&&f.length===0){e?.();return}let p={},y="";for(let L of Cq(f)){let j=G3(L),z=Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);p[z]=j;let[G,ie]=K1(j);y+=`<div id=${z} class="item ${ie}">${G}</div>`}let v=document.createElement("div");v.setAttribute("aria-hidden","true"),v.className="MLK__variant-panel",v.style.height="auto";let x=Object.keys(p).length,S=5;x===1?S=1:x===2||x===4?S=2:x===3||x===5||x===6?S=3:x>=7&&x<14&&(S=4),v.style.width=`calc(var(--variant-keycap-length) * ${S} + 12px)`,v.innerHTML=X3.createHTML(y),qi.open({root:(l=c?.container)==null?void 0:l.querySelector(".ML__keyboard"),child:v}),Sf=new AbortController;let{signal:R}=Sf,I=t?.getBoundingClientRect();if(I){I.top-v.clientHeight<0&&(v.style.width="auto",x<=6?v.style.height="56px":x<=12?v.style.height="108px":x<=18?v.style.height="205px":v.classList.add("compact"));let L=Math.max(0,Math.min(window.innerWidth-v.offsetWidth,(I.left+I.right-v.offsetWidth)/2)),j=I.top-v.clientHeight+5;v.style.left=`${L}px`,v.style.top=`${j}px`,v.classList.add("is-visible"),requestAnimationFrame(()=>{var z;v.addEventListener("pointerup",G=>{let ie=Xc(G.target);!(ie!=null&&ie.id)||!p[ie.id]||(l2(p[ie.id]),Wc(),e?.(),G.preventDefault())},{capture:!0,passive:!1,signal:R}),v.addEventListener("pointerenter",G=>{let ie=Xc(G.target);!(ie!=null&&ie.id)||!p[ie.id]||ie.classList.add("is-active")},{capture:!0,signal:R}),v.addEventListener("pointerleave",G=>{let ie=Xc(G.target);G.target&&"tagName"in G.target&&typeof G.target.tagName=="string"&&G.target.tagName.toUpperCase()==="ASIDE"||!(ie!=null&&ie.id)||!p[ie.id]||ie.classList.remove("is-active")},{capture:!0,signal:R}),(z=c.getKeycap(d?.id))!=null&&z.stickyVariantPanel?window.addEventListener("pointerdown",G=>{if(!(G.target instanceof Node))return;let ie=v.contains(G.target);G.target===v||ie||(Wc(),e?.())},{signal:R}):(window.addEventListener("pointercancel",()=>{Wc(),e?.()},{signal:R}),window.addEventListener("pointerup",()=>{Wc(),e?.()},{signal:R}))})}}function Wc(){Sf?.abort(),Sf=null,qi.state==="open"&&qi.close()}function kq(t){if(t==="foreground-color"){let e=[];for(let n of Object.keys(du))e.push({class:"swatch-button",label:'<span style="border: 3px solid '+du[n]+'"></span>',command:["applyStyle",{color:n}]});return e}if(t==="background-color"){let e=[];for(let n of Object.keys(hu))e.push({class:"swatch-button",label:'<span style="background:'+hu[n]+'"></span>',command:["applyStyle",{backgroundColor:n}]});return e}}function s2(t){return cg[t]!==void 0}function Cq(t){var e;return typeof t!="string"?t:(cg[t]||(cg[t]=(e=kq(t))!=null?e:[]),cg[t])}function Mq(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n} !important`).join(";")}function Aq(t){return Object.keys(t).map(e=>`${e} {${Mq(t[e])}}`).join("")}function Jd(t){if(!t)return"";let e=new lt,n=new re({mode:"math",type:"root",body:Mi(t,{context:e,args:i=>i==="@"?"{\\class{ML__box-placeholder}{\\blacksquare}}":"\\placeholder{}"})}),r=D1(cm(new be(n.render(e),{classes:"ML__base"}),e));return L1(r,{classes:"ML__latex"}).toMarkup()}function kf(t){if(Array.isArray(t))return t.map(n=>kf(n)).flat();let e=typeof t=="string"?{markup:t}:t;return"rows"in e&&Array.isArray(e.rows)&&(e.rows=e.rows.map(n=>n.map(r=>G3(r)))),e.id!=null||(e.id="ML__layer_"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36)),[e]}function Tq(){var t,e;let n=window.mathVirtualKeyboard.alphabeticLayout;if(n==="auto"){let l=qf();l&&(n=l.virtualLayout),(!n||n==="auto")&&(n=(t={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[Qe.locale.slice(0,2)])!=null?t:"qwerty")}let r={qwerty:["qwertyuiop"," asdfghjkl ","^zxcvbnm~"],azerty:["azertyuiop","qsdfghjklm","^ wxcvbn ~"],qwertz:["qwertzuiop"," asdfghjkl ","^yxcvbnm~"],dvorak:["^  pyfgcrl ","aoeuidhtns","qjkxbmwvz~"],colemak:[" qwfpgjluy ","arstdhneio","^zxcvbkm~"]},i=(e=r[n])!=null?e:r.qwerty,o=n==="azerty"?[[{label:"1",variants:"1"},{label:"2",shift:{latex:"é"},variants:"2"},{label:"3",shift:{latex:"ù"},variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{label:"(",latex:"("},variants:"5"},{label:"6",shift:{label:")",latex:")"},variants:"6"},{label:"7",shift:{latex:"è"},variants:"7"},{label:"8",shift:{latex:"ê"},variants:"8"},{label:"9",shift:{latex:"ç"},variants:"9"},{label:"0",shift:{latex:"à"},variants:"0"}]]:[[{label:"1",variants:"1"},{label:"2",variants:"2"},{label:"3",variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{latex:"\\frac{#@}{#?}"},variants:"5"},{label:"6",shift:{latex:"#@^#?"},variants:"6"},{label:"7",variants:"7"},{label:"8",shift:{latex:"\\times"},variants:"8"},{label:"9",shift:{label:"(",latex:"("},variants:"9"},{label:"0",shift:{label:")",latex:")"},variants:"0"}]];for(let l of i){let c=[];for(let d of l)/[a-z]/.test(d)?c.push({label:d,class:"hide-shift",shift:{label:d.toUpperCase(),variants:s2(d.toUpperCase())?d.toUpperCase():void 0},variants:s2(d)?d:void 0}):d==="~"?n!=="dvorak"?c.push("[backspace]"):c.push({label:"[backspace]",width:1}):d==="^"?c.push("[shift]"):d===" "&&c.push("[separator-5]");o.push(c)}return o.push(["[-]","[+]","[=]",{label:" ",width:1.5},{label:",",shift:";",variants:".",class:"hide-shift"},"[.]","[left]","[right]",{label:"[action]",width:1.5}]),{label:"abc",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.alphabetic",layers:kf({rows:o})}}function XA(t){if(t==="alphabetic")return Tq();if(typeof t=="string")return XA(Sq[t]);let e;if("rows"in t&&Array.isArray(t.rows)){let i=t,{rows:o}=i,l=Ug(i,["rows"]);e=q(N({},l),{layers:kf({rows:t.rows})})}else if("markup"in t&&typeof t.markup=="string"){let i=t,{markup:o}=i,l=Ug(i,["markup"]);e=q(N({},l),{layers:kf(t.markup)})}else e=N({},t),"layers"in t?e.layers=kf(t.layers):console.error('MathLive 0.106.0: provide either a "rows", "markup" or "layers" property');let n=!1,r=!1;for(let i of e.layers)if(i.rows)for(let o of i.rows.flat()){lh(o)&&(n=!0);let l=o.command;typeof l=="string"&&["undo","redo","cut","copy","paste"].includes(l)&&(r=!0)}return(!("displayShiftedKeycaps"in t)||t.displayShiftedKeycaps===void 0)&&(e.displayShiftedKeycaps=n),(!("displayEditToolbar"in t)||t.displayEditToolbar===void 0)&&(e.displayEditToolbar=!r),e}function Dq(t,e){var n,r;let i='<div class="left">';if(t.normalizedLayouts.length>1)for(let[o,l]of t.normalizedLayouts.entries()){let c=l,d=[o===e?"selected":"layer-switch"];c.tooltip&&d.push("MLK__tooltip"),c.labelClass&&d.push(...c.labelClass.split(" ")),i+=`<div class="${d.join(" ")}"`,c.tooltip&&(i+=" data-tooltip='"+((n=qe(c.tooltip))!=null?n:c.tooltip)+"' "),o!==e&&(i+=`data-layer="${c.layers[0].id}"`),i+=`>${(r=c.label)!=null?r:"untitled"}</div>`}return i+="</div>",i}function Lq(t,e){let n="";if(t.editToolbar==="none")return"";let r=[];e.selectionIsCollapsed?r.push("undo","redo","pasteFromClipboard"):r.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let i={undo:`<div class='action ${e.canUndo===!1?"disabled":""}'
          data-command='"undo"'
          data-tooltip='${qe("tooltip.undo")}'>
          <svg><use xlink:href='#svg-undo' /></svg>
      </div>`,redo:`<div class='action ${e.canRedo===!1?"disabled":""}'
          data-command='"redo"'
          data-tooltip='${qe("tooltip.redo")}'>
          <svg><use xlink:href='#svg-redo' /></svg>
      </div>`,cutToClipboard:`
        <div class='action'
            data-command='"cutToClipboard"'
            data-tooltip='${qe("tooltip.cut to clipboard")}'>
            <svg><use xlink:href='#svg-cut' /></svg>
        </div>
    `,copyToClipboard:`
        <div class='action'
            data-command='"copyToClipboard"'
            data-tooltip='${qe("tooltip.copy to clipboard")}'>
            <svg><use xlink:href='#svg-copy' /></svg>
        </div>
    `,pasteFromClipboard:`
        <div class='action'
            data-command='"pasteFromClipboard"'
            data-tooltip='${qe("tooltip.paste from clipboard")}'>
            <svg><use xlink:href='#svg-paste' /></svg>
        </div>
    `};return n+=r.map(o=>i[o]).join(""),n}function Rq(t){for(let e of t)Iq(e)}function Iq(t){let e=ol.singleton;if(!e)return;let n={};if(!t.id){if(t.hasAttribute("data-label")&&(n.label=t.dataset.label),t.hasAttribute("data-latex")&&(n.latex=t.dataset.latex),t.hasAttribute("data-key")&&(n.key=t.dataset.key),t.hasAttribute("data-insert")&&(n.insert=t.dataset.insert),t.hasAttribute("data-variants")&&(n.variants=t.dataset.variants),t.hasAttribute("data-aside")&&(n.aside=t.dataset.aside),t.className&&(n.class=t.className),!n.label&&!n.latex&&!n.key&&!n.insert&&(n.latex=t.innerText,n.label=t.innerHTML),t.hasAttribute("data-command"))try{n.command=JSON.parse(t.dataset.command)}catch{}t.id=e.registerKeycap(n)}if(!t.innerHTML){let[r,i]=K1(n);t.innerHTML=globalThis.MathfieldElement.createHTML(r)}}function Bq(){Js("virtual-keyboard"),Js("core"),q3()}function Oq(){Zs("core"),Zs("virtual-keyboard")}var Nq=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

<symbol id="svg-delete-backward" viewBox="0 0 576 512">
  <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>
</symbol>

<symbol id="svg-shift" viewBox="0 0 384 512">
  <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>
</symbol>

<symbol id="svg-commit" viewBox="0 0 512 512">
  <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>
</symbol>


<symbol id="circle-plus" viewBox="0 0 512 512"><path d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344c0 13.3 10.7 24 24 24s24-10.7 24-24V280h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H280V168c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H168c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"/></symbol>

<symbol id="svg-command" viewBox="0 0 640 512">
  <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>
</symbol>

<symbol id="svg-undo" viewBox="0 0 512 512">
  <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>
</symbol>
<symbol id="svg-redo" viewBox="0 0 512 512">
  <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>
</symbol>
<symbol id="svg-arrow-left" viewBox="0 0 320 512">
  <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>
</symbol>
<symbol id="svg-arrow-right" viewBox="0 0 320 512">
  <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>
</symbol>
<symbol id="svg-tab" viewBox="0 0 448 512">
  <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>
</symbol>
<symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>
<symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>
<symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>
</symbol>
<symbol id="svg-angle-double-right" viewBox="0 0 512 512"><path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/>
</symbol>
<symbol id="svg-angle-double-left" viewBox="0 0 512 512"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/>
</symbol>
<symbol id="svg-trash" viewBox="0 0 448 512">
  <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>
</symbol>
<symbol id="svg-keyboard-down" viewBox="0 0 576 512"><path d="M64 48c-8.8 0-16 7.2-16 16V240c0 8.8 7.2 16 16 16H512c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64zM0 64C0 28.7 28.7 0 64 0H512c35.3 0 64 28.7 64 64V240c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM159 359c9.4-9.4 24.6-9.4 33.9 0l95 95 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L305 505c-4.5 4.5-10.6 7-17 7s-12.5-2.5-17-7L159 393c-9.4-9.4-9.4-24.6 0-33.9zm1-167c0-8.8 7.2-16 16-16H400c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V192zM120 88h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H120c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H200c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H280c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H360c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H440c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16z"/></symbol>
</svg>`;function Pq(t){t.resetKeycapRegistry(),Bq();let e=document.createElement("div");e.className="ML__keyboard";let n=document.createElement("div");n.className="MLK__plate",n.innerHTML=globalThis.MathfieldElement.createHTML(Nq+t.normalizedLayouts.map((l,c)=>zq(t,l,c)).join(""));let r=document.createElement("div");r.className="MLK__backdrop",r.appendChild(n),e.appendChild(r),e.addEventListener("pointerdown",Fq,{passive:!1});let i=e.querySelectorAll(".ML__edit-toolbar");if(i)for(let l of i)l.addEventListener("click",c=>{var d,f;let p=c.target,y="";for(;p&&!y;)y=(d=p?.getAttribute("data-command"))!=null?d:"",p=(f=p?.parentElement)!=null?f:null;y&&t.executeCommand(JSON.parse(y))});Rq(e.querySelectorAll(".MLK__keycap, .action, .fnbutton, .bigfnbutton"));let o=e.querySelectorAll(".MLK__layer");o.length>0;for(let l of o)l.addEventListener("pointerdown",c=>c.preventDefault());return t.currentLayer=t.latentLayer,e}function zq(t,e,n){var r;let i=[];if(!("layers"in e))return"";for(let o of e.layers)i.push(`<div tabindex="-1" class="MLK__layer" id="${o.id}">`),(t.normalizedLayouts.length>1||e.displayEditToolbar)&&(i.push("<div class='MLK__toolbar' role='toolbar'>"),i.push(Dq(t,n)),((r=e.displayEditToolbar)==null||r)&&i.push('<div class="ML__edit-toolbar right"></div>'),i.push("</div>")),i.push(Vq(t,o)),i.push("</div>");return i.join("")}function Vq(t,e){if(typeof e=="string")return e;let n="";if(typeof e.style=="string"?n+=`<style>${e.style}</style>`:typeof e.style=="object"&&(n+=`<style>${Aq(e.style)}</style>`),e.backdrop&&(n+=`<div class='${e.backdrop}'>`),e.container&&(n+=`<div class='${e.container}'>`),e.rows){n+="<div class=MLK__rows>";for(let r of e.rows){n+='<div dir="ltr" class=MLK__row>';for(let i of r)if(i){let o=t.registerKeycap(i),[l,c]=K1(i);/(^|\s)separator/.test(c)?n+=`<div class="${c}"`:n+=`<div tabindex="-1" id="${o}" class="${c}"`,i.tooltip&&(n+=` data-tooltip="${i.tooltip}"`),n+=`>${l}</div>`}n+="</div>"}n+="</div>"}else e.markup&&(n+=e.markup);return e.container&&(n+="</div>"),e.backdrop&&(n+="</div>"),n}function K1(t,e={shifted:!1}){var n,r,i,o,l,c,d;let f="",p=(n=t.class)!=null?n:"";if(e.shifted&&lh(t)&&(p+=" is-active"),e.shifted&&"shift"in t)typeof t.shift=="string"?f=Jd(t.shift):typeof t.shift=="object"&&(f=t.shift.label?t.shift.label:(r=Jd(t.shift.latex||t.shift.insert||"")||t.shift.key)!=null?r:""),typeof t.shift=="object"&&(p=(o=(i=t.shift.class)!=null?i:t.class)!=null?o:"");else{if(f=t.label?t.label:(l=Jd(t.latex||t.insert||"")||t.key)!=null?l:"",t.shift){let y;typeof t.shift=="string"?y=Jd(t.shift):t.shift.label?y=t.shift.label:y=(c=Jd(t.shift.latex||t.shift.insert||"")||t.shift.key)!=null?c:"",f+=`<span class="MLK__shift">${y}</span>`}t.aside&&(f+=`<aside>${t.aside}</aside>`)}return t.layer&&!/layer-switch/.test(p)&&(p+=" layer-switch"),/(^|\s)(separator|action|shift|fnbutton|bigfnbutton)($|\s)/.test(p)||(p+=" MLK__keycap"),!/\bw[0-9]+\b/.test(p)&&t.width&&(p+=(d={0:" w0",.5:" w5",1.5:" w15",2:" w20",5:" w50"}[t.width])!=null?d:""),[f,p||"MLK__keycap"]}var fo={"[left]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-left /></svg>",command:"performWithFeedback(moveToPreviousChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-left /></svg>",command:"performWithFeedback(extendSelectionBackward)"}},"[right]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-right /></svg>",command:"performWithFeedback(moveToNextChar)",shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-right /></svg>",command:"performWithFeedback(extendSelectionForward)"}},"[up]":{class:"action hide-shift",label:"↑",command:"performWithFeedback(moveUp)",shift:{label:"↟",command:"performWithFeedback(extendSelectionUpward)"}},"[down]":{class:"action hide-shift",label:"↓",command:"performWithFeedback(moveDown)",shift:{label:"↡",command:"performWithFeedback(extendSelectionDownward)"}},"[return]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[action]":{class:"action hide-shift",command:"performWithFeedback(commit)",shift:{label:"<svg class=svg-glyph><use xlink:href=#circle-plus /></svg>",command:"performWithFeedback(addRowAfter)"},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[hr]":{class:"separator horizontal-rule"},"[hide-keyboard]":{class:"action",command:["hideVirtualKeyboard"],width:1.5,label:"<svg class=svg-glyph-lg><use xlink:href=#svg-keyboard-down /></svg>"},"[.]":{variants:".",command:"performWithFeedback(insertDecimalSeparator)",shift:",",class:"big-op hide-shift",label:"."},"[,]":{variants:",",command:"performWithFeedback(insertDecimalSeparator)",shift:".",class:"big-op hide-shift",label:","},"[+]":{variants:[{latex:"\\sum_{#0}^{#0}",class:"small"},"\\oplus"],latex:"+",label:"+",class:"big-op hide-shift",shift:{latex:"\\sum",insert:"\\sum",class:"small"}},"[-]":{variants:["\\pm","\\ominus"],latex:"-",label:"&#x2212;",shift:"\\pm",class:"big-op hide-shift"},"[/]":{class:"big-op hide-shift",shift:{class:"",latex:"\\frac{1}{#@}"},variants:["/","\\div","\\%","\\oslash"],latex:"\\frac{#@}{#?}",label:"&divide;"},"[*]":{variants:[{latex:"\\prod_{#0}^{#0}",class:"small"},"\\otimes","\\cdot"],latex:"\\cdot",label:"&times;",shift:{latex:"\\times"},class:"big-op hide-shift"},"[=]":{variants:["\\neq","\\equiv","\\varpropto","\\thickapprox","\\lt","\\gt","\\le","\\ge"],latex:"=",label:"=",shift:{label:"≠",latex:"\\ne"},class:"big-op hide-shift"},"[backspace]":{class:"action bottom right hide-shift",width:1.5,command:"performWithFeedback(deleteBackward)",label:"<svg class=svg-glyph><use xlink:href=#svg-delete-backward /></svg>",shift:{class:"action warning",label:"<svg class=svg-glyph><use xlink:href=#svg-trash /></svg>",command:"deleteAll"}},"[undo]":{class:"ghost if-can-undo",command:"undo",label:"<svg class=svg-glyph><use xlink:href=#svg-undo /></svg>",tooltip:"tooltip.undo"},"[redo]":{class:"ghost  if-can-redo",command:"redo",label:"<svg class=svg-glyph><use xlink:href=#svg-redo /></svg>",tooltip:"tooltip.redo"},"[(]":{variants:[{latex:"\\lbrack",key:"["},"\\langle","\\lfloor","\\lceil",{latex:"\\lbrace",key:"{"}],key:"(",label:"(",shift:{label:"[",key:"["},class:"hide-shift"},"[)]":{variants:[{latex:"\\rbrack",key:"]"},"\\rangle","\\rfloor","\\rceil",{latex:"\\rbrace",key:"}"}],key:")",label:")",shift:{label:"]",latex:"\\rbrack"},class:"hide-shift"},"[0]":{variants:"0",latex:"0",label:"0",shift:"\\infty",class:"hide-shift"},"[1]":{variants:"1",latex:"1",label:"1",shift:"#@^{-1}",class:"hide-shift"},"[2]":{variants:"2",latex:"2",label:"2",shift:"#@^2",class:"hide-shift"},"[3]":{variants:"3",latex:"3",label:"3",shift:"#@^3",class:"hide-shift"},"[4]":{variants:"4",latex:"4",label:"4",shift:"#@^4",class:"hide-shift"},"[5]":{variants:"5",latex:"5",label:"5",shift:"#@^5",class:"hide-shift"},"[6]":{variants:"6",latex:"6",label:"6",shift:"#@^6",class:"hide-shift"},"[7]":{variants:"7",latex:"7",label:"7",shift:"#@^7",class:"hide-shift"},"[8]":{variants:"8",latex:"8",label:"8",shift:"#@^8",class:"hide-shift"},"[9]":{variants:"9",latex:"9",label:"9",shift:"#@^9",class:"hide-shift"},"[separator-5]":{class:"separator",width:.5},"[separator]":{class:"separator"},"[separator-10]":{class:"separator"},"[separator-15]":{class:"separator",width:1.5},"[separator-20]":{class:"separator",width:2},"[separator-50]":{class:"separator",width:5},"[shift]":{class:"shift bottom left",width:1.5,label:"<span class=caps-lock-indicator></span><svg class=svg-glyph><use xlink:href=#svg-shift /></svg>"},"[foreground-color]":{variants:"foreground-color",command:["applyStyle",{color:"red"}],label:"<span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'>"},"[background-color]":{variants:"background-color",command:["applyStyle",{backgroundColor:"yellow"}],label:"<span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span>"}};function G3(t){var e;if(typeof t=="string"){if(t==="[.]"&&globalThis.MathfieldElement.decimalSeparator===","&&(t="[,]"),!fo[t])return{latex:t};t={label:t}}let n;return"label"in t&&t.label&&fo[t.label]&&(n=q(N(N({},fo[t.label]),t),{label:fo[t.label].label})),"key"in t&&t.key&&fo[t.key]&&(n=q(N(N({},fo[t.key]),t),{key:fo[t.key].key})),n?(n.command==="insertDecimalSeparator"&&(n.label=(e=globalThis.MathfieldElement.decimalSeparator)!=null?e:"."),(n.tooltip===void 0||n.tooltip===null||n.tooltip===!1)&&delete n.tooltip,(n.tooltip===void 0||n.tooltip===null||n.tooltip===!1)&&delete n.tooltip,(n.aside===void 0||n.aside===null||n.aside===!1)&&delete n.aside,(n.variants===void 0||n.variants===null||n.variants===!1)&&delete n.variants,(n.shift===void 0||n.shift===null||n.shift===!1)&&delete n.shift,n):t}var Cf;function Fq(t){var e;if(t.button!==0)return;let n=ol.singleton;if(!n)return;let r=t.target;for(;r&&!r.getAttribute("data-layer");)r=r.parentElement;if(r){n.currentLayer=(e=r.getAttribute("data-layer"))!=null?e:"",t.preventDefault();return}let i=Xc(t.target);if(!(i!=null&&i.id))return;let o=n.getKeycap(i.id);if(!o)return;t.type;let l=new AbortController,c=l.signal;i.classList.add("is-pressed"),i.addEventListener("pointerenter",I0(l),{capture:!0,signal:c}),i.addEventListener("pointerleave",I0(l),{capture:!0,signal:c}),i.addEventListener("pointercancel",I0(l),{signal:c}),i.addEventListener("pointerup",I0(l),{signal:c}),lh(o)&&(i.classList.add("is-active"),n.shiftPressCount++),o.variants&&(Cf&&clearTimeout(Cf),Cf=setTimeout(()=>{i.classList.contains("is-pressed")&&(i.classList.remove("is-pressed"),i.classList.add("is-active"),t.target&&"releasePointerCapture"in t.target&&t.target.releasePointerCapture(t.pointerId),WA(i,()=>{l.abort(),i?.classList.remove("is-active")}))},o.stickyVariantPanel?0:300)),t.preventDefault()}function I0(t){return e=>{let n=Xc(e.target);if(!(n!=null&&n.id))return;let r=ol.singleton;if(!r)return;let i=r.getKeycap(n.id);if(i){if(e.type==="pointerenter"&&e.target===n&&e.isPrimary&&n.classList.add("is-pressed"),e.type==="pointercancel"){n.classList.remove("is-pressed"),lh(i)&&(r.shiftPressCount--,n.classList.toggle("is-active",r.isShifted)),t.abort();return}if(e.type==="pointerleave"&&e.target===n){n.classList.remove("is-pressed"),lh(i)&&(r.shiftPressCount--,n.classList.toggle("is-active",r.isShifted));return}if(e.type==="pointerup"){Cf&&clearTimeout(Cf),lh(i)?n.classList.toggle("is-active",r.isShifted):n.classList.contains("is-pressed")&&(n.classList.remove("is-pressed"),r.isShifted&&i.shift?typeof i.shift=="string"?r.executeCommand(["insert",i.shift,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]):l2(i.shift):l2(i),r.shiftPressCount===1&&!e.shiftKey&&(r.shiftPressCount=0)),t.abort(),e.preventDefault();return}}}}function l2(t){var e;let n=t.command;!n&&t.insert&&(n=["insert",t.insert,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),!n&&t.key&&(n=["typedText",t.key,{focus:!0,feedback:!0,simulateKeystroke:!0}]),!n&&t.latex&&(n=["insert",t.latex,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),n||(n=["typedText",t.label,{focus:!0,feedback:!0,simulateKeystroke:!0}]),(e=ol.singleton)==null||e.executeCommand(n)}function Uq(t){if(t.nodeType!==1)return!1;let e=t.classList;return e.contains("MLK__keycap")||e.contains("shift")||e.contains("action")||e.contains("fnbutton")||e.contains("bigfnbutton")}function Xc(t){if(!t)return;let e=t;for(;e&&!Uq(e);)e=e.parentElement;return e??void 0}function lh(t){return!!t.class&&/(^|\s)shift($|\s)/.test(t.class)}var ol=class YA{constructor(){this.originalContainerBottomPadding=null,this.keycapRegistry={},this._shiftPressCount=0;var e;this.targetOrigin=window.origin,this.originValidator="none",this._alphabeticLayout="auto",this._layouts=Object.freeze(["default"]),this._editToolbar="default",this._container=void 0,this._visible=!1,this._rebuilding=!1,this.observer=new ResizeObserver(n=>{this.adjustBoundingRect(),this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect})}),this.listeners={};try{(e=window.top)==null||e.addEventListener("message",this)}catch{window.addEventListener("message",this)}document.addEventListener("focusin",n=>{let r=n.target;r!=null&&r.isConnected&&setTimeout(()=>{let i=DE();i&&!i.readOnly&&i.mathVirtualKeyboardPolicy==="auto"&&_M()&&this.show({animate:!0})},300)}),document.addEventListener("focusout",n=>{n.target instanceof Su&&n.target.mathVirtualKeyboardPolicy!=="manual"&&setTimeout(()=>{DE()||this.hide()},300)})}get currentLayer(){var e,n,r;return(r=(n=(e=this._element)==null?void 0:e.querySelector(".MLK__layer.is-visible"))==null?void 0:n.id)!=null?r:""}set currentLayer(e){var n;if(!this._element){this.latentLayer=e;return}let r=e?this._element.querySelector(`#${e}.MLK__layer`):null;r||(r=this._element.querySelector(".MLK__layer")),r&&((n=this._element.querySelector(".MLK__layer.is-visible"))==null||n.classList.remove("is-visible"),r.classList.add("is-visible")),this.render()}get shiftPressCount(){return this._shiftPressCount}set shiftPressCount(e){var n;this._shiftPressCount=e>2||e<0?0:e,(n=this._element)==null||n.classList.toggle("is-caps-lock",this.shiftPressCount===2),this.render()}get isShifted(){return this._shiftPressCount>0}resetKeycapRegistry(){this.keycapRegistry={}}registerKeycap(e){let n="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36);return this.keycapRegistry[n]=e,n}setKeycap(e,n){fo[e]=G3(n),this.rebuild()}getKeycap(e){var n;return e?(n=fo[e])!=null?n:this.keycapRegistry[e]:void 0}getLayer(e){let n=this.normalizedLayouts;for(let r of n)for(let i of r.layers)if(i.id===e)return i}get alphabeticLayout(){return this._alphabeticLayout}set alphabeticLayout(e){this._alphabeticLayout=e,this._normalizedLayouts=void 0,this.rebuild()}get layouts(){return this._layouts}set layouts(e){this.updateNormalizedLayouts(e),this.rebuild()}updateNormalizedLayouts(e){let n=Array.isArray(e)?[...e]:[e],r=n.findIndex(i=>i==="default");r>=0&&n.splice(r,1,"numeric","symbols","alphabetic","greek"),this._layouts=Object.freeze(n),this._normalizedLayouts=n.map(i=>XA(i))}get normalizedLayouts(){return this._normalizedLayouts||this.updateNormalizedLayouts(this._layouts),this._normalizedLayouts}get editToolbar(){return this._editToolbar}set editToolbar(e){this._editToolbar=e,this.rebuild()}get container(){return this._container===void 0?window.document.body:this._container}set container(e){this._container=e,this.rebuild()}static get singleton(){if(this._singleton===void 0)try{this._singleton=new YA}catch{this._singleton=null}return this._singleton}get style(){return this._style}addEventListener(e,n,r){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(n)||this.listeners[e].add(n)}dispatchEvent(e){return!this.listeners[e.type]||this.listeners[e.type].size===0?!0:(this.listeners[e.type].forEach(n=>{typeof n=="function"?n(e):n?.handleEvent(e)}),!e.defaultPrevented)}removeEventListener(e,n,r){this.listeners[e]&&this.listeners[e].delete(n)}get element(){return this._element}set element(e){var n;this._element!==e&&((n=this._element)==null||n.remove(),this._element=e)}get visible(){return this._visible}set visible(e){e?this.show():this.hide()}get boundingRect(){var e;if(!this._visible)return new DOMRect;let n=(e=this._element)==null?void 0:e.getElementsByClassName("MLK__plate")[0];return n?n.getBoundingClientRect():new DOMRect}adjustBoundingRect(){if(!this._element)return;let e=this.boundingRect.height;if(this.container===document.body){this._element.style.setProperty("--_keyboard-height",`calc(${e}px + var(--_padding-top) + var(--_padding-bottom) + env(safe-area-inset-bottom, 0))`);let n=e-1;this.container.style.paddingBottom=this.originalContainerBottomPadding?`calc(${this.originalContainerBottomPadding} + ${n}px)`:`${n}px`}else this._element.style.setProperty("--_keyboard-height",`${e}px`)}rebuild(){if(this._rebuilding||!this._element)return;this._rebuilding=!0;let e=this.currentLayer;requestAnimationFrame(()=>{this._rebuilding=!1,this._element&&(this._element.remove(),this._element=void 0),this.visible&&(this.buildAndAttachElement(),this.currentLayer=e,this.render(),this.adjustBoundingRect(),this._element.classList.add("is-visible"))})}render(){var e;if(!this._element)return;let n=this.getLayer(this.currentLayer);this._element.classList.toggle("backdrop-is-transparent",!!(n&&(n.backdrop||n.container)));let r=this._element.querySelectorAll(".MLK__layer.is-visible .MLK__keycap, .MLK__layer.is-visible .action, .fnbutton, .MLK__layer.is-visible .bigfnbutton, .MLK__layer.is-visible .shift");if(!r)return;let i=this.isShifted;for(let o of r){let l=this.getKeycap(o.id);if(l){let[c,d]=K1(l,{shifted:i});o.innerHTML=globalThis.MathfieldElement.createHTML(c),o.className=d,i&&typeof l.shift=="object"&&(e=l.shift)!=null&&e.tooltip?o.dataset.tooltip=l.shift.tooltip:!i&&l.tooltip&&(o.dataset.tooltip=l.tooltip)}}}show(e){var n;if(this._visible)return;let r=this.container;if(r&&window.mathVirtualKeyboard&&this.stateWillChange(!0)){if(this._element||(this.buildAndAttachElement(),this.adjustBoundingRect()),!this._visible){let i=this._element.getElementsByClassName("MLK__plate")[0];if(i&&this.observer.observe(i),r===window.document.body){let o=r.style.paddingBottom;this.originalContainerBottomPadding=o;let l=i.offsetHeight-1;r.style.paddingBottom=o?`calc(${o} + ${l}px)`:`${l}px`}window.addEventListener("mouseup",this),window.addEventListener("blur",this),window.addEventListener("keydown",this,{capture:!0}),window.addEventListener("keyup",this,{capture:!0}),(n=this._element)==null||n.classList.toggle("is-caps-lock",this.shiftPressCount===2),this.currentLayer=this.latentLayer}this._visible=!0,e!=null&&e.animate?requestAnimationFrame(()=>{this._element&&(this._element.classList.add("animate"),this._element.addEventListener("transitionend",()=>{var i;return(i=this._element)==null?void 0:i.classList.remove("animate")},{once:!0}),this._element.classList.add("is-visible"),this.stateChanged())}):(this._element.classList.add("is-visible"),this.stateChanged())}}hide(e){var n;let r=this.container;if(r&&this._visible&&this.stateWillChange(!1)){if(this._visible=!1,this._element){this.latentLayer=this.currentLayer;let i=this._element.getElementsByClassName("MLK__plate")[0];i&&this.observer.unobserve(i),window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("keydown",this,{capture:!0}),window.removeEventListener("keyup",this,{capture:!0}),window.removeEventListener("contextmenu",this,{capture:!0}),Wc(),Oq(),(n=this._element)==null||n.remove(),this._element=void 0,this.originalContainerBottomPadding!==null&&(r.style.paddingBottom=this.originalContainerBottomPadding)}this.stateChanged()}}get height(){var e,n;return(n=(e=this.element)==null?void 0:e.offsetHeight)!=null?n:0}buildAndAttachElement(){var e;this.element,this.element=Pq(this),window.addEventListener("contextmenu",this,{capture:!0}),this.element.addEventListener("contextmenu",n=>{n.shiftKey||((n.ctrlKey||n.button===2)&&WA(n.target),n.preventDefault(),n.stopPropagation())},{capture:!0}),(e=this.container)==null||e.appendChild(this.element)}handleEvent(e){if(H3(e)){if(!N3(e.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");e.data.action==="disconnect"?this.connectedMathfieldWindow=void 0:e.data.action!=="update-setting"&&e.data.action!=="proxy-created"&&e.data.action!=="execute-command"&&(e.source,this.connectedMathfieldWindow=e.source),this.handleMessage(e.data,e.source)}if(this._element)switch(e.type){case"mouseup":case"blur":document.body.style.userSelect="",this.shiftPressCount=0;break;case"contextmenu":e.button!==2&&e.preventDefault();break;case"keydown":{e.key==="Shift"&&!e.repeat&&(this.shiftPressCount=1);break}case"keyup":{(e.key==="Shift"||!e.getModifierState("Shift")&&this.shiftPressCount!==2)&&(this.shiftPressCount=0);break}}}handleMessage(e,n){let{action:r}=e;if(r==="execute-command"){let{command:i}=e,o=sh(i);if(window.top!==void 0&&o!=="virtual-keyboard")return;this.executeCommand(i);return}if((r==="connect"||r==="show")&&this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},n),r!=="disconnect"&&window===window.top){if(r==="show"){typeof e.animate<"u"?this.show({animate:e.animate}):this.show();return}if(r==="hide"){typeof e.animate<"u"?this.hide({animate:e.animate}):this.hide();return}if(r==="update-setting"){if(e.alphabeticLayout&&(this.alphabeticLayout=e.alphabeticLayout),e.layouts&&(this.layouts=e.layouts),e.editToolbar&&(this.editToolbar=e.editToolbar),e.setKeycap){let{keycap:i,value:o}=e.setKeycap;this.setKeycap(i,o),this.render()}return}if(r==="proxy-created"){this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},n);return}}}sendMessage(e,n,r){if(n.command&&this.dispatchEvent(new CustomEvent("math-virtual-keyboard-command",{detail:n.command})),r||(r=this.connectedMathfieldWindow),this.targetOrigin===null||this.targetOrigin==="null"||r===window){window.dispatchEvent(new MessageEvent("message",{source:window,data:N({type:Zg,action:e},n)}));return}if(r)r.postMessage(N({type:Zg,action:e},n),{targetOrigin:this.targetOrigin});else if(e==="execute-command"&&Array.isArray(n.command)&&n.command[0]==="insert"){let i=n.command[1].split("");for(let o of i)this.dispatchEvent(new KeyboardEvent("keydown",{key:o,bubbles:!0})),this.dispatchEvent(new KeyboardEvent("keyup",{key:o,bubbles:!0}))}}stateWillChange(e){return this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:e},bubbles:!0,cancelable:!0,composed:!0}))}stateChanged(){this.dispatchEvent(new Event("virtual-keyboard-toggle")),this._visible||(this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect}))}focus(){this.sendMessage("focus",{})}blur(){this.sendMessage("blur",{})}updateToolbar(e){let n=this._element;if(!n)return;n.classList.toggle("is-math-mode",e.mode==="math"),n.classList.toggle("is-text-mode",e.mode==="text"),n.classList.toggle("can-undo",e.canUndo),n.classList.toggle("can-redo",e.canRedo),n.classList.toggle("can-copy",!e.selectionIsCollapsed),n.classList.toggle("can-copy",!e.selectionIsCollapsed),n.classList.toggle("can-paste",!0);let r=n.querySelectorAll(".ML__edit-toolbar");if(r)for(let i of r)i.innerHTML=Lq(this,e)}update(e){this._style=e.style,this.updateToolbar(e)}connect(){this.connectedMathfieldWindow=window}disconnect(){this.connectedMathfieldWindow=void 0}executeCommand(e){if(e=jf(e),!e)return!1;let n,r=[],i=sh(e);return Rn(e)?(n=e[0],n==="performWithFeedback"&&(i=sh(e.slice(1))),r=e.slice(1)):n=e,i==="virtual-keyboard"?xa[n].fn(void 0,...r):(this.sendMessage("execute-command",{command:e}),!1)}dispose(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("message",this)}};function DE(){let t=Yg(),e=null;for(;t;){if("host"in t&&t.host instanceof Su){e=t.host;break}t=t.parentNode}return e}if(Di()&&!("mathVirtualKeyboard"in window))if(window===window.top){let t=ol.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>t})}else Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>Eq.singleton,configurable:!0});function e1(t){let e={};for(let n of Object.keys(t))switch(n){case"scriptDepth":let r=t.scriptDepth;if(Rn(r))e.scriptDepth=[r[0],r[1]];else if(typeof r=="number")e.scriptDepth=[r,r];else if(typeof r=="string"){let[o,l]=r.split(",").map(c=>parseInt(c.trim()));e.scriptDepth=[o,l]}else throw new TypeError("Unexpected value for scriptDepth");break;case"mathVirtualKeyboardPolicy":let i=t.mathVirtualKeyboardPolicy.toLowerCase();if(i==="sandboxed"){if(window!==window.top){let o=ol.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>o})}i="manual"}e.mathVirtualKeyboardPolicy=i;break;case"letterShapeStyle":t.letterShapeStyle==="auto"?Qe.locale.startsWith("fr")?e.letterShapeStyle="french":e.letterShapeStyle="tex":e.letterShapeStyle=t.letterShapeStyle;break;case"defaultMode":["text","math","inline-math"].includes(t.defaultMode)?e.defaultMode=t.defaultMode:(console.error('MathLive 0.106.0:  valid values for defaultMode are "text", "math" or "inline-math"'),e.defaultMode="math");break;case"macros":e.macros=j4(t.macros);break;default:Rn(t[n])?e[n]=[...t[n]]:typeof t[n]=="object"&&!(t[n]instanceof Element)&&n!=="computeEngine"?e[n]=N({},t[n]):e[n]=t[n]}return e}function nu(t,e){let n;typeof e=="string"?n=[e]:e===void 0?n=Object.keys(t):n=e;let r={};for(let i of n)t[i]===null?r[i]=null:Rn(t[i])?r[i]=[...t[i]]:typeof t[i]=="object"&&!(t[i]instanceof Element)&&i!=="computeEngine"?r[i]=N({},t[i]):r[i]=t[i];return typeof e=="string"?r[e]:r}function hg(){return{readOnly:!1,defaultMode:"math",macros:{},registers:{},colorMap:T1,backgroundColorMap:A3,letterShapeStyle:Qe.locale.startsWith("fr")?"french":"tex",minFontScale:0,maxMatrixCols:10,smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,isImplicitFunction:t=>["\\sin","\\cos","\\tan","\\arcsin","\\arccos","\\arctan","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th","\\lg","\\lb","\\log","\\ln"].includes(t),mathModeSpace:"",placeholderSymbol:"▢",contentPlaceholder:"",popoverPolicy:"auto",environmentPopoverPolicy:"off",keybindings:PK,inlineShortcuts:VM,inlineShortcutTimeout:0,mathVirtualKeyboardPolicy:"auto",virtualKeyboardTargetOrigin:window?.origin,originValidator:"none",onInsertStyle:$3,onInlineShortcut:()=>"",onScrollIntoView:null,onExport:NK,value:""}}function LE(t){return t.defaultMode==="inline-math"?"math":t.defaultMode}function Kq(t,e){let n=t.at(t.position);if(n.type==="composition")n.value=e;else{let{caret:r}=n;n.caret=void 0;let i=new iA(e,{mode:n.mode});i.caret=r,n.parent.addChildAfter(i,n),t.position+=1}}function $q(t){let e=t.at(t.position);e.type==="composition"&&(e.parent.removeChild(e),t.position-=1)}D3(["math","displaymath"],Pr);D3("center",Pr);Do(["multline","multline*"],"",Pr);oe("displaylines","",{parse:t=>{if(t.skipWhitespace(),!t.match("<{>"))return[];let e=[],n=[];t.mathlist.length>0&&e.push([t.mathlist]),t.beginContext({tabular:!0,root:!0});do{if(t.end()||t.match("<}>"))break;t.matchColumnSeparator()||t.matchRowSeparator()?(e.push([n]),n=[]):n.push(...t.scan(i=>["<}>","&","\\cr","\\\\","\\tabularnewline"].includes(i)))}while(!0);t.endContext(),e.push([n]);let r=t.scan();return r.length>0&&e.push([r]),e},createAtom:t=>new rt("lines",t.args,[],{leftDelim:".",rightDelim:".",columns:[{align:"l"}],classes:["ML__multiline_environment"],isRoot:!0,minColumns:1,maxColumns:1,minRows:1})});Do("split","",Pr);Do(["gather","gather*","gathered"],"",Pr);Do(["equation","equation*","subequations"],"",Pr);D3(["align","align*","eqnarray"],Pr,{tabular:!0});Do(["aligned"],"",Pr);Do("array","{columns:colspec}",(t,e,n,r)=>new rt(t,e,n,{columns:r[0],mathstyleName:"textstyle"}));Do(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",Pr);Do(["smallmatrix","smallmatrix*"],"[columns:colspec]",Pr);Do(["cases","dcases","rcases"],"",Pr);function Pr(t,e=[[[]]],n=[],r=[],i){switch(t){case"math":return new rt(t,e,n,{mathstyleName:"textstyle",isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"displaymath":return new rt(t,e,n,{mathstyleName:"textstyle",isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"center":return new rt(t,e,n,{columns:[{align:"c"}],classes:["ML__center_environment"],isRoot:!0,minColumns:1,maxColumns:1,minRows:1,maxRows:1});case"multline":case"multline*":return new rt(t,e,n,{columns:[{align:"m"}],leftDelim:".",rightDelim:".",isRoot:!0,minColumns:1,maxColumns:1,minRows:1});case"split":return new rt(t,e,n,{columns:[{align:"r"},{align:"l"}],minColumns:2,minRows:1,isRoot:!1});case"gather":case"gather*":return new rt(t,e,n,{columns:[{gap:.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1,isRoot:!0,classes:["ML__gather_environment"]});case"gathered":return new rt(t,e,n,{columns:[{gap:.25},{align:"c"},{gap:0}],minColumns:1,maxColumns:1,minRows:1});case"equation":case"equation*":case"subequations":return new rt(t,e,n,{columns:[{align:"c"}],isRoot:!0,minColumns:1,maxColumns:1,minRows:1});case"aligned":{let o=0;for(let d of e)o=Math.max(o,d.length);let l=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],c=2;for(;c<o;)l.push({gap:1},{align:"r"},{gap:.25},{align:"l"}),c+=2;return l.push({gap:0}),new rt(t,e,n,{arraycolsep:0,columns:l,minColumns:2,minRows:1,isRoot:t!=="aligned"})}case"eqnarray":return new rt(t,e,n,{arraycolsep:0,columns:[{gap:0},{align:"r"},{align:"c"},{align:"l"}],minColumns:3,maxColumns:3,minRows:1,isRoot:!0,classes:["ML__eqnarray_environment"]});case"align":case"align*":return new rt(t,e,n,{arraycolsep:0,columns:[{gap:0},{align:"r"},{gap:.25},{align:"l"}],minColumns:2,maxColumns:2,minRows:1,isRoot:!0,classes:["ML__align_environment"]});case"pmatrix":case"pmatrix*":return new rt(t,e,n,{mathstyleName:"textstyle",leftDelim:"(",rightDelim:")",columns:jl(r[0],i)});case"bmatrix":case"bmatrix*":return new rt(t,e,n,{mathstyleName:"textstyle",leftDelim:"[",rightDelim:"]",columns:jl(r[0],i)});case"Bmatrix":case"Bmatrix*":return new rt(t,e,n,{mathstyleName:"textstyle",leftDelim:"\\lbrace",rightDelim:"\\rbrace",columns:jl(r[0],i)});case"vmatrix":case"vmatrix*":return new rt(t,e,n,{mathstyleName:"textstyle",leftDelim:"\\vert",rightDelim:"\\vert",columns:jl(r[0],i)});case"Vmatrix":case"Vmatrix*":return new rt(t,e,n,{mathstyleName:"textstyle",leftDelim:"\\Vert",rightDelim:"\\Vert",columns:jl(r[0],i)});case"matrix":case"matrix*":return new rt(t,e,n,{mathstyleName:"textstyle",leftDelim:".",rightDelim:".",columns:jl(r?.[0],i)});case"smallmatrix":case"smallmatrix*":return new rt(t,e,n,{mathstyleName:"scriptstyle",columns:jl(r?.[0],i),colSeparationType:"small",arraystretch:.5});case"cases":case"dcases":return new rt(t,e,n,{mathstyleName:t==="dcases"?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]});case"rcases":return new rt(t,e,n,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]});case"lines":return new rt(t,e,n,{leftDelim:".",rightDelim:".",columns:[{align:"l"}],isRoot:!0,minColumns:1,maxColumns:1,minRows:1})}return new rt(t,e,n,{mathstyleName:"textstyle"})}function jl(t,e=10){return t??Array(e).fill({align:"c"})}function qq(t){let e=t.at(t.position);for(;e&&!Ao(e.parentBranch);)e=e.parent;return[e.firstSibling,e.lastSibling]}function jq(t,e){let n=t.at(t.position);for(;n&&!(n.parent instanceof rt);)n=n.parent;if(n&&n.type==="array"&&n.environmentName,!n||!(n.parent instanceof rt)){let r=t.at(t.position);if(n=r,!n.parent.parent){let i=t.extractAtoms([t.position,t.lastOffset]),o=t.extractAtoms([0,t.position]),l;return e.endsWith("column")?(o.length===0&&(o=O0()),i.length===0&&(i=O0()),l=Pr("split",[[o,i]]),t.root=l,Zd(l,0,0)?Bc(t,l,0,0):Zd(l,0,1)?Bc(t,l,0,1):t.position=t.offsetOf(r)):(l=Pr("lines",[[o],[i]]),t.root=l,Bc(t,l,1,0)),[void 0,[0,0]]}if(n.parent instanceof nn){let i=n.parent,o=t.extractAtoms([t.position,t.offsetOf(i.lastChild)]),l=t.extractAtoms([t.offsetOf(i.firstChild),t.position]);l.length===0&&(l=O0()),o.length===0&&(o=O0());let c="pmatrix",d=i.leftDelim,f=i.rightDelim;d==="("&&(f===")"||f==="?")?c="pmatrix":(d==="["||d==="\\lbrack")&&(f==="]"||f==="\\rbrack"||f==="?")?c="bmatrix":d==="\\vert"&&f==="\\vert"?c="vmatrix":d==="\\Vert"&&f==="\\Vert"?c="Vmatrix":(d==="{"||d==="\\lbrace")&&(f==="."||f==="?")&&(c="cases");let p=Pr(c,e.endsWith("column")?[[l,o]]:[[l],[o]]);return i.parent.addChildBefore(p,i),i.parent.removeChild(i),Zd(p,0,0)?Bc(t,p,0,0):e.endsWith("column")?Zd(p,0,1)?Bc(t,p,0,1):t.position=t.offsetOf(n):Zd(p,1,0)?Bc(t,p,1,0):t.position=t.offsetOf(n),[void 0,[0,0]]}}return n&&n.parent instanceof rt?[n.parent,n.parentBranch]:[void 0,[0,0]]}function Zd(t,e,n){let r=t.getCell(e,n);return!r||r.length!==2?!1:r[1].type==="placeholder"}function Hq(t,e,n,r){let i=e.getCell(n,r);return i?[t.offsetOf(i[0]),t.offsetOf(i[i.length-1])]:-1}function Bc(t,e,n,r){let i=Hq(t,e,n,r);typeof i!="number"&&t.setSelection(i)}function B0(t,e,n,r,i){let o=e.getCell(n,r);o&&t.setPositionHandlingPlaceholder(t.offsetOf(o[i==="start"?0:o.length-1]))}function Hf(t,e){let[n,[r,i]]=jq(t,e);if(n)switch(e){case"after row":n.addRowAfter(r),B0(t,n,r+1,0,"end");break;case"after column":if(n.maxColumns<=n.colCount){t.announce("plonk");return}n.addColumnAfter(i),B0(t,n,r,i+1,"end");break;case"before row":n.addRowBefore(r),B0(t,n,r,0,"start");break;case"before column":if(n.maxColumns<=n.colCount){t.announce("plonk");return}n.addColumnBefore(i),B0(t,n,r,i,"start");break}}function QA(t){var e;let n=t.at(t.position);if(!Ao(n.parentBranch)&&n.parent!==t.root&&t.root.type!=="root")return t.announce("plonk"),!1;if(!t.contentWillChange({inputType:"insertText"}))return!1;if((e=t.parentEnvironment)!=null&&e.isMultiline){t.selectionIsCollapsed||t.deleteAtoms(Zn(t.selection));let[r,i]=qq(t),o=t.extractAtoms([t.position,t.offsetOf(i)]),l=t.extractAtoms([t.offsetOf(r),t.position]),c=r.parent,[d,f]=r.parentBranch;return c.setCell(d,f,l),Hf(t,"after row"),c.setCell(d+1,f,o),t.position=t.offsetOf(c.getCell(d+1,f)[0]),t.contentDidChange({inputType:"insertText"}),!0}return Hf(t,"after row"),t.contentDidChange({inputType:"insertText"}),!0}function Gq(t){return t.contentWillChange({inputType:"insertText"})?(Hf(t,"before row"),t.contentDidChange({inputType:"insertText"}),!0):!1}function JA(t){return t.contentWillChange({inputType:"insertText"})?(Hf(t,"after column"),t.contentDidChange({inputType:"insertText"}),!0):!1}function Wq(t){return t.contentWillChange({inputType:"insertText"})?(Hf(t,"before column"),t.contentDidChange({inputType:"insertText"}),!0):!1}function ZA(t,e){if(!t.contentWillChange({}))return!1;t.mathfield.snapshot();let n=".",r=".";switch(e){case"pmatrix":case"pmatrix*":n="(",r=")";break;case"bmatrix":case"bmatrix*":n="[",r="]";break;case"Bmatrix":case"Bmatrix*":n="\\lbrace",r="\\rbrace";break;case"vmatrix":case"vmatrix*":n="\\vert",r="\\vert";break;case"Vmatrix":case"Vmatrix*":n="\\Vert",r="\\Vert";break;case"matrix":case"matrix*":n=".",r=".";break;case"cases":case"dcases":n="\\lbrace";break;case"rcases":r="\\rbrace";break}let i=t.at(t.position),o=i.type==="array"?i:t.parentEnvironment;return o.environmentName=e,o.leftDelim=n,o.rightDelim=r,t.contentDidChange({}),!0}function eT(t,e){let n=t.at(t.position);for(;n&&!(Array.isArray(n.parentBranch)&&n.parent instanceof rt);)n=n.parent;if(Array.isArray(n?.parentBranch)&&n?.parent instanceof rt){let r=n.parent,i=n.parentBranch,o;switch(e){case"row":if(r.rowCount>1){r.removeRow(i[0]);let l=r.getCell(Math.max(0,i[0]-1),i[1]);o=t.offsetOf(l[l.length-1])}break;case"column":if(r.colCount>r.minColumns){r.removeColumn(i[1]);let l=r.getCell(i[0],Math.max(0,i[1]-1));o=t.offsetOf(l[l.length-1])}break}o!==void 0&&t.setPositionHandlingPlaceholder(o)}}function Xq(t){return t.contentWillChange({inputType:"deleteContent"})?(eT(t,"row"),t.contentDidChange({inputType:"deleteContent"}),!0):!1}function Yq(t){return t.contentWillChange({inputType:"deleteContent"})?(eT(t,"column"),t.contentDidChange({inputType:"deleteContent"}),!0):!1}Cr({addRowAfter:QA,addColumnAfter:JA,addRowBefore:Gq,addColumnBefore:Wq,removeRow:Xq,removeColumn:Yq,setEnvironment:ZA},{target:"model",canUndo:!0,changeContent:!0,changeSelection:!0});function O0(){return[new Ia]}var tT=class nT{constructor(e){this.recording=!1,this.model=e,this.reset()}reset(){this.stack=[],this.index=-1,this.lastOp=""}startRecording(){this.recording=!0}stopRecording(){this.recording=!1}canUndo(){return this.index-1>=0}canRedo(){return this.stack.length-1>this.index}stopCoalescing(e){e&&this.index>=0&&(this.stack[this.index].selection=e),this.lastOp=""}undo(){if(!this.canUndo())return!1;let e=this.stack[this.index-1];return this.index-=1,this.lastOp="",this.model.setState(e,{silenceNotifications:!1,type:"undo"}),!0}redo(){if(!this.canRedo())return!1;let e=this.stack[this.index+1];return this.index+=1,this.lastOp="",this.model.setState(e,{silenceNotifications:!1,type:"redo"}),!0}pop(){this.canUndo()&&(this.stack.splice(this.index,this.stack.length-this.index),this.index-=1)}snapshot(e){return this.recording?(e&&e===this.lastOp&&this.pop(),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index+=1,this.stack.length>nT.maximumDepth&&(this.stack.shift(),this.index-=1),this.lastOp=e??"",!0):!1}};tT.maximumDepth=1e3;var Qq=tT;function u2(t,e,n){if(t.at(e).mode!=="text")return e;let r=n==="backward"?-1:1,i;if(Uf.test(t.at(e).value)){let o=e,l;do l=t.at(o).mode==="text"&&Uf.test(t.at(o).value),o+=r;while(t.at(o)&&l);i=t.at(o)?o-2*r:o-r}else if(/\s/.test(t.at(e).value)){let o=e;for(;t.at(o)&&t.at(o).mode==="text"&&/\s/.test(t.at(o).value);)o+=r;if(!t.at(o))i=o-r;else{let l=!0;do l=t.at(o).mode==="text"&&!/\s/.test(t.at(o).value),o+=r;while(t.at(o)&&l);i=t.at(o)?o-2*r:o-r}}else{let o=e;for(;t.at(o)&&t.at(o).mode==="text"&&!/\s/.test(t.at(o).value);)o+=r;i=t.at(o)?o:o-r;let l=!0;for(;t.at(o)&&l;)l=t.at(o).mode==="text"&&/\s/.test(t.at(o).value),l&&(i=o),o+=r;i=t.at(o)?o-2*r:o-r}return i-(r>0?0:1)}function Yc(t,e,n){var r,i,o,l,c,d,f;let p=t.position;(r=n?.extend)!=null&&r||t.collapseSelection(e);let y=t.at(t.position);if(e==="forward"&&(y.type==="subsup"?(y=y.rightSibling,y||(y=t.at(t.position+1))):y=t.at(t.position+1)),!y)return t.announce("plonk"),!1;let v=t.offsetOf(y);if(y instanceof Dh)v=u2(t,v,e);else if(y instanceof An)if(y.isSuggestion)for(;y&&y instanceof An;)y.isSuggestion=!1,v=t.offsetOf(y),y=y.rightSibling;else if(e==="forward"){if(y=y.rightSibling,!y||!(y instanceof An))return t.announce("plonk"),!1;for(;y&&y instanceof An&&/[a-zA-Z\*]/.test(y.value);)v=t.offsetOf(y),y=y.rightSibling}else{if(y=y.leftSibling,!y||!(y instanceof An))return t.announce("plonk"),!1;for(;y&&y instanceof An&&/[a-zA-Z\*]/.test(y.value);)v=t.offsetOf(y),y=y.leftSibling}else if(e==="forward"&&y.type==="mopen"){let x=0;do y.type==="mopen"?x+=1:y.type==="mclose"&&(x-=1),y=y.rightSibling;while(!y.isLastSibling&&x!==0);v=t.offsetOf(y.leftSibling)}else if(e==="backward"&&y.type==="mclose"){let x=0;do y.type==="mopen"?x+=1:y.type==="mclose"&&(x-=1),y=y.leftSibling;while(!y.isFirstSibling&&x!==0);v=t.offsetOf(y)}else if(e==="backward")if(y.type==="first")for(;v>0&&y.type==="first";)v-=1,y=t.at(v);else{let x=y.type;y.type==="subsup"&&(v=t.offsetOf(t.at(v).leftSibling)),v-=1;let S=(i=t.at(v))==null?void 0:i.type;for(;v>=0&&S===x;)((o=t.at(v))==null?void 0:o.type)==="subsup"?v=t.offsetOf(t.at(v).leftSibling):v-=1,S=t.at(v).type}else{let{type:x}=y,S=(l=t.at(v))==null?void 0:l.type,{lastOffset:R}=t;for(;v<=R&&(S===x||S==="subsup");){for(;((c=t.at(v).rightSibling)==null?void 0:c.type)==="subsup";)v=t.offsetOf(t.at(v).rightSibling);v+=1,S=(d=t.at(v))==null?void 0:d.type}v-=1}if((f=n?.extend)!=null&&f){if(!t.setSelection(t.anchor,v))return t.announce("plonk"),!1}else{if(v===t.position)return t.announce("plonk"),!1;t.position=v}return t.announce("move",p),t.mathfield.stopCoalescingUndo(),!0}function wa(t,e,n){var r,i;if(n=n??{extend:!1},t.mathfield.styleBias=e==="backward"?"right":"left",e!=="forward"){let[c,d]=KA(t);c!==void 0&&d!==void 0&&t.deleteAtoms([c,d])}if(e==="upward")return Zq(t,n);if(e==="downward")return ej(t,n);if(n.extend){let c=dg(t,t.position,e);c<0&&(c=0),c>t.lastOffset&&(c=t.lastOffset);let d=t.setSelection(t.anchor,c);return t.mathfield.stopCoalescingUndo(),d}if(t.selectionIsPlaceholder){t.collapseSelection(e);let c=wa(t,e);return t.mathfield.stopCoalescingUndo(),c}let o=t.position,l=o;if(t.collapseSelection(e)?(o=t.position,rT(t,o)||(o=dg(t,o,e))):o=dg(t,o,e),o<0||o>t.lastOffset){let c=!0;return t.silenceNotifications||(c=(i=(r=t.mathfield.host)==null?void 0:r.dispatchEvent(new CustomEvent("move-out",{detail:{direction:e},cancelable:!0,bubbles:!0,composed:!0})))!=null?i:!0),c&&t.announce("plonk"),c}return t.setPositionHandlingPlaceholder(o),t.mathfield.stopCoalescingUndo(),t.announce("move",l),!0}function dg(t,e,n){return e=e+(n==="forward"?1:-1),e<0||e>t.lastOffset||rT(t,e)?e:dg(t,e,n)}function rT(t,e){var n;let r=t.at(e),i=r.parent;for(;i&&!i.inCaptureSelection;)i=i.parent;return!(i!=null&&i.inCaptureSelection||(n=r.parent)!=null&&n.skipBoundary&&(!r.isFirstSibling&&r.isLastSibling||r.type==="first")||t.mathfield.hasEditablePrompts&&!r.parentPrompt)}function Jq(t,e,n){let r=1/0,i=0;for(;i<e.length;i++){let o=e[i],l=t.getHTMLElement(o);if(!l)continue;let c=jM(l).right,d=Math.abs(n-c);if(d<=r)r=d;else break}return e[i-1]}function t1(t,e,n,r,i){let o=t.mathfield.hasEditablePrompts,l=o?n.filter(f=>f.type==="prompt"&&!f.captureSelection):n,c=jM(t.mathfield.getHTMLElement(e)).right,d=t.offsetOf(Jq(t.mathfield,l,c))-(o?1:0);if(r){let[f,p]=t.selection.ranges[0],y;d<(i==="up"?f:p)?y={ranges:[[d,p]],direction:"backward"}:y={ranges:[[f,d]],direction:"forward"},t.setSelection(y)}else t.setPositionHandlingPlaceholder(d);t.announce(`move ${i}`)}function Zq(t,e){var n,r;let i=(n=e?.extend)!=null?n:!1;i||t.collapseSelection("backward");let o=()=>{var d,f;let p=!0;return t.silenceNotifications||(p=(f=(d=t.mathfield.host)==null?void 0:d.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))!=null?f:!0),t.announce(p?"line":"plonk"),p},l=t.at(t.position),c=l;for(;c&&c.parentBranch!=="below"&&!(Array.isArray(c.parentBranch)&&c.parent instanceof rt);)c=c.parent;if(Array.isArray(c?.parentBranch)&&c.parent instanceof rt){let d=c.parent;if(c.parentBranch[0]<1)return o();let f=c.parentBranch[0]-1,p=d.getCell(f,c.parentBranch[1]);if(!p.some(y=>y.type==="prompt"&&!y.captureSelection)&&t.mathfield.hasEditablePrompts)return o();t1(t,l,p,i,"up")}else if(c){let d=(r=c.parent.branch("above"))!=null?r:c.parent.createBranch("above");if(!d.some(f=>f.type==="prompt"&&f.placeholderId)&&t.mathfield.hasEditablePrompts)return o();t1(t,l,d,i,"up")}else return o();return t.mathfield.stopCoalescingUndo(),!0}function ej(t,e){var n,r;let i=(n=e?.extend)!=null?n:!1;i||t.collapseSelection("forward");let o=()=>{var d,f;let p=!0;return t.silenceNotifications||(p=(f=(d=t.mathfield.host)==null?void 0:d.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))!=null?f:!0),t.announce(p?"line":"plonk"),p},l=t.at(t.position),c=l;for(;c&&c.parentBranch!=="above"&&!(Ao(c.parentBranch)&&c.parent instanceof rt);)c=c.parent;if(Ao(c?.parentBranch)&&c.parent instanceof rt){let d=c.parent;if(c.parentBranch[0]+1>d.rows.length-1)return o();let f=c.parentBranch[0]+1,p=d.getCell(f,c.parentBranch[1]);if(!p.some(y=>y.type==="prompt"&&!y.captureSelection)&&t.mathfield.hasEditablePrompts)return o();t1(t,l,p,i,"down")}else if(c){let d=(r=c.parent.branch("below"))!=null?r:c.parent.createBranch("below");if(!d.some(f=>f.type==="prompt")&&t.mathfield.hasEditablePrompts)return o();t1(t,l,d,i,"down")}else return o();return!0}function iT(t){let e=t.position,n=t.at(e).parent;return n!=null&&n.parent?(t.position=t.offsetOf(n),t.mathfield.stopCoalescingUndo(),t.announce("move",e),!0):(t.announce("plonk"),!1)}function tj(t){let e=0,n=t.at(t.position),r=!1;for(;n;)(!n.hasEmptyBranch("superscript")||!n.hasEmptyBranch("subscript"))&&(e+=1),n.hasEmptyBranch("superscript")?n.hasEmptyBranch("subscript")||(r=!1):r=!0,n=n.parent;return r?e:0}function nj(t){let e=0,n=t.at(t.position),r=!1;for(;n;)(!n.hasEmptyBranch("superscript")||!n.hasEmptyBranch("subscript"))&&(e+=1),n.hasEmptyBranch("superscript")?n.hasEmptyBranch("subscript")||(r=!0):r=!1,n=n.parent;return r?e:0}function RE(t){var e;if(t.collapseSelection(),tj(t)>=t.mathfield.options.scriptDepth[1])return t.announce("plonk"),!1;let n=t.at(t.position);return n.subsupPlacement===void 0&&(((e=n.rightSibling)==null?void 0:e.type)!=="subsup"&&n.parent.addChildAfter(new N1({style:n.style}),n),n=n.rightSibling),n.createBranch("superscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(n.superscript[0]))),!0}function IE(t){var e;if(t.collapseSelection(),nj(t)>=t.mathfield.options.scriptDepth[0])return t.announce("plonk"),!1;let n=t.at(t.position);return n.subsupPlacement===void 0&&(((e=t.at(t.position+1))==null?void 0:e.type)!=="subsup"&&n.parent.addChildAfter(new N1({style:t.at(t.position).style}),n),n=t.at(t.position+1)),n.createBranch("subscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(n.subscript[0]))),!0}function rj(){function t(d){let f=[],p=[];return[...d.querySelectorAll(`input, select, textarea, a[href], button,
        [tabindex], audio[controls], video[controls],
        [contenteditable]:not([contenteditable="false"]), details>summary`)].filter(e).forEach((y,v)=>{let x=r(y);x===0?f.push(y):p.push({documentOrder:v,tabIndex:x,node:y})}),p.sort((y,v)=>y.tabIndex===v.tabIndex?y.documentOrder-v.documentOrder:y.tabIndex-v.tabIndex).map(y=>y.node).concat(f)}function e(d){return!(!n(d)||i(d)||r(d)<0)}function n(d){return!(d.disabled||d.type==="hidden"&&d.tagName.toUpperCase()==="INPUT"||c(d))}function r(d){var f;let p=Number.parseInt((f=d.getAttribute("tabindex"))!=null?f:"NaN",10);return Number.isNaN(p)?d.contentEditable==="true"||(d.nodeName==="AUDIO"||d.nodeName==="VIDEO")&&d.getAttribute("tabindex")===null?0:d.tabIndex:p}function i(d){return d.tagName.toUpperCase()==="INPUT"&&d.type==="radio"&&!l(d)}function o(d,f){for(let p of d)if(p.checked&&p.form===f)return p;return null}function l(d){var f;if(!d.name)return!0;let p=((f=d.form)!=null?f:d.ownerDocument).querySelectorAll('input[type="radio"][name="'+d.name+'"]'),y=o(p,d.form);return!y||y===d}function c(d){if(!Di()||d===document.activeElement||d.contains(document.activeElement))return!1;if(getComputedStyle(d).visibility==="hidden")return!0;let f=d.getBoundingClientRect();if(f.width===0||f.height===0)return!0;for(;d;){if(getComputedStyle(d).display==="none")return!0;d=d.parentElement}return!1}return Di()?t(document.body):[]}function sr(t,e,n="forward"){let r=t.position;if(Rn(e)){let i=t.offsetOf(e[0]),o=t.offsetOf(e[e.length-1]);return n==="forward"?t.setSelection(i,o):t.setSelection(o,i),t.announce("move",r),t.mathfield.stopCoalescingUndo(),!0}return n==="forward"?sr(t,[e.leftSibling,e]):sr(t,[e,e.leftSibling])}function Ki(t,e){let n=t.position;if(typeof e=="number"&&(e=t.at(e)),e.type==="prompt")t.setSelection(t.offsetOf(e.firstChild),t.offsetOf(e.lastChild));else{let r=t.offsetOf(e);e.type==="placeholder"?t.setSelection(r-1,r):t.position=r}return t.announce("move",n),t.mathfield.stopCoalescingUndo(),!0}function Qc(t,e){var n,r;let i=e==="forward"?1:-1;t.at(t.anchor).type==="placeholder"&&wa(t,e);let o,l=t.at(t.anchor).parentPrompt;l?e==="forward"?o=t.offsetOf(l)+1:o=t.offsetOf(l.leftSibling):o=Math.max(t.position+i,0);let c=c2(t,o,e);if(!c||e==="forward"&&t.offsetOf(c)<o||e==="backward"&&t.offsetOf(c)>o){if(!((r=(n=t.mathfield.host)==null?void 0:n.dispatchEvent(new CustomEvent("move-out",{detail:{direction:e},cancelable:!0,bubbles:!0,composed:!0})))==null||r))return t.announce("plonk"),!1;let d=rj();if(!document.activeElement||d.length<=1)return t.announce("plonk"),!1;let f=d.indexOf(document.activeElement)+i;return f<0&&(f=d.length-1),f>=d.length&&(f=0),d[f].focus(),t.mathfield.stopCoalescingUndo(),!0}return Ki(t,c),!0}function c2(t,e=0,n="forward"){return t.findAtom(r=>r.type==="placeholder"||r.type==="prompt"||!t.mathfield.readOnly&&r.treeDepth>2&&r.isFirstSibling&&r.isLastSibling,e,n)}Cr({moveToOpposite:t=>{let e={superscript:"subscript",subscript:"superscript",above:"below",below:"above"},n=t.at(t.position),{parent:r}=n;if(!r)return t.announce("plonk"),!1;let i=n.parentBranch,o;if(typeof i=="string"&&(o=e[i]),!o){let c=n.subsupPlacement?IE(t):RE(t);return t.mathfield.stopCoalescingUndo(),c}r.branch(o)||r.createBranch(o);let l=t.setSelection(t.getBranchRange(t.offsetOf(r),o));return t.mathfield.stopCoalescingUndo(),l},moveBeforeParent:t=>{let{parent:e}=t.at(t.position);return e?(t.position=t.offsetOf(e),t.mathfield.stopCoalescingUndo(),!0):(t.announce("plonk"),!1)},moveAfterParent:t=>iT(t),moveToNextChar:t=>wa(t,"forward"),moveToPreviousChar:t=>wa(t,"backward"),moveUp:t=>wa(t,"upward"),moveDown:t=>wa(t,"downward"),moveToNextWord:t=>Yc(t,"forward"),moveToPreviousWord:t=>Yc(t,"backward"),moveToGroupStart:t=>{let e=t.offsetOf(t.at(t.position).firstSibling);return e===t.position?(t.announce("plonk"),!1):(t.position=e,t.mathfield.stopCoalescingUndo(),!0)},moveToGroupEnd:t=>{let e=t.offsetOf(t.at(t.position).lastSibling);return e===t.position?(t.announce("plonk"),!1):(t.position=e,t.mathfield.stopCoalescingUndo(),!0)},moveToNextGroup:t=>{var e,n,r,i;if(t.position===t.lastOffset&&t.anchor===t.lastOffset)return Qc(t,"forward");let o=t.at(t.position);if(o.mode==="text"){if(t.selectionIsCollapsed){let y=o;for(;y&&y.mode==="text";)y=y.leftSibling;let v=o;for(;((e=v.rightSibling)==null?void 0:e.mode)==="text";)v=v.rightSibling;if(y&&v)return sr(t,[y,v])}if(o.rightSibling.mode==="text"){let y=o;for(;y&&y.mode==="text";)y=y.rightSibling;return y?(Ki(t,(n=y.leftSibling)!=null?n:y),t.mathfield.switchMode("math"),!0):Ki(t,t.lastOffset)}}let l=t.at(t.anchor).parentPrompt,c=l?t.offsetOf(l)+1:Math.max(t.position+1,0),d=c2(t,c,"forward");if(d&&t.offsetOf(d)<c)return Qc(t,"forward");if(d)return Ki(t,d);let f=BE(t,o,y=>y.type==="leftright"||y.type==="text","forward");if(f){if(f.mode==="text"){let y=f;for(;y&&y.mode==="text";)y=y.rightSibling;return sr(t,[(r=f.leftSibling)!=null?r:f,(i=y.leftSibling)!=null?i:y])}return sr(t,f)}let p=o.parent;if(p){if(p.type==="leftright"||p.type==="surd")return sr(t,p);if(o.parentBranch==="superscript"&&p.subscript)return sr(t,p.subscript);if(o.parentBranch==="above"&&p.below)return sr(t,p.below);if(o.parentBranch==="superscript"||o.parentBranch==="subscript")return Ki(t,p);if(o.parentBranch==="above"||o.parentBranch==="below")return sr(t,p)}return Ki(t,t.lastOffset)},moveToPreviousGroup:t=>{var e;if(t.position===0&&t.anchor===0)return Qc(t,"backward");let n=t.at(t.position),r=n.mode;if(r==="text"){if(t.selectionIsCollapsed){let c=n;for(;c&&c.mode==="text";)c=c.leftSibling;let d=n;for(;((e=d.rightSibling)==null?void 0:e.mode)==="text";)d=d.rightSibling;if(c&&d)return sr(t,[c,d])}for(;n&&n.mode==="text";)n=n.leftSibling;return n?Ki(t,n):Ki(t,0)}let i=t.at(t.anchor).parentPrompt,o=i?t.offsetOf(i.leftSibling):Math.max(t.position-1,0),l=c2(t,o,"backward");if(l&&t.offsetOf(l)>o)return Qc(t,"backward");if(l)return Ki(t,l);if(r==="math"){let c=BE(t,n,f=>f.type==="leftright"||f.type==="text","backward");if(c){if(c.mode==="text"){let f=c;for(;f&&f.mode==="text";)f=f.leftSibling;return sr(t,[c,f])}return sr(t,c)}let d=n.parent;if(d){if(d.type==="leftright"||d.type==="surd")return sr(t,d);if(n.parentBranch==="subscript"&&d.superscript)return sr(t,d.superscript);if(n.parentBranch==="below"&&d.above)return sr(t,d.above);if(n.parentBranch==="superscript"||n.parentBranch==="subscript")return Ki(t,d);if(n.parentBranch==="above"||n.parentBranch==="below")return sr(t,d)}return Ki(t,0)}return!1},moveToMathfieldStart:t=>t.selectionIsCollapsed&&t.position===0?(t.announce("plonk"),!1):(t.position=0,t.mathfield.stopCoalescingUndo(),!0),moveToMathfieldEnd:t=>t.selectionIsCollapsed&&t.position===t.lastOffset?(t.announce("plonk"),!1):(t.position=t.lastOffset,t.mathfield.stopCoalescingUndo(),!0),moveToSuperscript:RE,moveToSubscript:IE},{target:"model",changeSelection:!0});Cr({moveToNextPlaceholder:t=>Qc(t,"forward"),moveToPreviousPlaceholder:t=>Qc(t,"backward")},{target:"model",changeSelection:!0,audioFeedback:"return"});function BE(t,e,n,r){if(r==="forward"){let o=e.rightSibling;for(;o&&!n(o);)o=o.rightSibling;return o}let i=e.leftSibling;for(;i&&!n(i);)i=i.leftSibling;return i}function N0(t,e,n){typeof e=="function"&&(n=e,e=1/0),e===void 0&&(e=1/0);let r=t.position,i=!1,o="";for(;!i;){let l=t.at(r);i=e===0||l===void 0||l.type==="first"||l.mode!=="math"||!(l.type&&/mord|mpunct|operator/.test(l.type)||l.type==="mop"&&/[a-zA-Z ]+/.test(l.value))||!l.hasEmptyBranch("superscript")||!l.hasEmptyBranch("subscript")||typeof n=="function"&&!n(l),i||(l.mode="text",l.command=l.value,l.verbatimLatex=void 0,o+=l.value),r-=1,e-=1}t.contentDidChange({data:o,inputType:"insertText"})}function ef(t,e,n){typeof e=="function"&&(n=e,e=1/0),e===void 0&&(e=1/0);let r=t.position,i=!1,o=[];for(;!i;){let l=t.at(r);i=e===0||!l||l.type==="first"||l.isFirstSibling||l.mode!=="text"||l.value===" "||typeof n=="function"&&!n(l),i||(o.push(re.serialize([l],{defaultMode:"math"})),l.mode="math"),r-=1,e-=1}W3(t),t.contentDidChange({data:Ze(o),inputType:"insertText"})}function W3(t){var e;let n=t.position-1;for(;n>=0&&((e=t.at(n))==null?void 0:e.mode)==="math";)n-=1;if(!(n<0)&&t.at(n).mode==="text"&&t.at(n).value===" "&&t.at(n-1).mode==="math"){t.at(n-1).parent.removeChild(t.at(n-1));let r=t.silenceNotifications;t.silenceNotifications=!0,t.position-=1,t.silenceNotifications=r,t.contentDidChange({inputType:"deleteContent"})}}function ij(t){let e="",n=t.position,r=!1;for(;!r;){let i=t.at(n);r=!(i&&(i.mode==="text"||i.mode==="math"&&i.type&&/mord|mpunct/.test(i.type))),r||(e=i.value+e),n-=1}return e}function aj(t,e,n){let{model:r}=t;if(r.mode==="latex"||!r.at(r.position).isLastSibling||!n||!z1(n))return!1;let i=qc(n);if(!r.selectionIsCollapsed)return!!(t.model.mode==="text"&&/[/_^]/.test(i));let o=ij(r)+i;if(t.model.mode==="text"){if(e==="Esc"||/[/\\]/.test(i))return!0;if(/[\^_]/.test(i))return/(^|\s)[a-zA-Z][^_]$/.test(o)&&ef(r,1),!0;let l={")":"(","}":"{","]":"["}[i],{parent:c}=r.at(r.position);if(l&&c instanceof nn&&c.leftDelim===l)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(o))return!1;if(/[$€£₤₺¥¤฿¢₡₧₨₹₩₱]/u.test(i))return!0;if(/(^|[^a-zA-Z'’])[a-zA-Z] $/.test(o))return ef(r,1),!1;if(/\D\.[^\d\s]$/.test(o)){ef(r,1);let d=r.at(r.position);return d.value="⋅",d.style.variant="normal",d.command="\\cdot",d.verbatimLatex=void 0,r.contentDidChange({data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(o)||/\.\d$/.test(o)||/\([\d+\-.]$/.test(o))return ef(r,1),!0;if(/\([a-z][,;]$/.test(o))return ef(r,2),!0;if(/[\d+\-=><*|]$/.test(i))return W3(r),!0}else{if(e==="[Space]")return N0(r,void 0,l=>/[a-z][:,;.]$/.test(l.value)),!0;if(/[a-zA-Z]{3,}$/.test(o)&&!/(dxd|abc|xyz|uvw)$/.test(o))return N0(r,void 0,l=>/[a-zA-Z]/.test(l.value)),!0;if(/(^|\W)(if)$/i.test(o))return N0(r,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(o)&&!/(αβγ)$/.test(o))return N0(r,void 0,l=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(l.value)),!0;if(i==="?"||i==="."&&!/[\d-+]\.$/.test(o))return!0}return!1}function oj(t,e){if(!t.isSelectionEditable||!t.keystrokeCaptionVisible)return;let n=aT(),r=t.element.getBoundingClientRect();n.style.left=`${r.left}px`,n.style.top=`${r.top-64}px`,n.innerHTML=globalThis.MathfieldElement.createHTML("<span>"+(U3(e)||e)+"</span>"+n.innerHTML),n.style.visibility="visible",setTimeout(()=>{n.childNodes.length>0&&n.childNodes[n.childNodes.length-1].remove(),n.childNodes.length===0&&(n.style.visibility="hidden")},3e3)}function sj(t){if(t.keystrokeCaptionVisible=!t.keystrokeCaptionVisible,t.keystrokeCaptionVisible){let e=aT();e.innerHTML=""}else{let e=F1("mathlive-keystroke-caption-panel");e.style.visibility="hidden"}return!1}function aT(){return document.getElementById("mathlive-keystroke-caption-panel")||(Js("keystroke-caption"),Js("core"),F1("mathlive-keystroke-caption-panel"))}function lj(){document.getElementById("mathlive-keystroke-caption-panel")&&(dm("mathlive-keystroke-caption-panel"),Zs("core"),Zs("keystroke-caption"))}function oT(t,e){var n,r,i,o;let{model:l}=t,c=UA(e);if(e.isTrusted){Q$(e);let R=qf();t.keyboardLayout!==R.id&&(t.keyboardLayout=R.id,t._keybindings=void 0)}if(clearTimeout(t.inlineShortcutBufferFlushTimer),t.inlineShortcutBufferFlushTimer=0,oj(t,c),e.isTrusted&&e.defaultPrevented)return t.flushInlineShortcutBuffer(),!1;let d,f=0,p="",y=0,v=t.inlineShortcutBuffer;if(t.isSelectionEditable){if(l.mode==="math")if(c==="[Backspace]")t.undoManager.lastOp==="insert-shortcut"?p="undo":v.pop();else if(!z1(e))t.flushInlineShortcutBuffer();else{let R=qc(e),I=[...(r=(n=v[v.length-1])==null?void 0:n.keystrokes)!=null?r:[],R];v.push({state:l.getState(),keystrokes:I,leftSiblings:uj(t)}),f=0;let L="";for(;!d&&f<I.length;)y=v.length-(I.length-f),L=I.slice(f).join(""),d=B3(v[y].leftSiblings,L,t.options.inlineShortcuts),!d&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(L)&&(d=t.options.onInlineShortcut(t,L)),f+=1;t.flushInlineShortcutBuffer({defer:!0})}t.options.smartMode&&(d?t.switchMode("math"):aj(t,c,e)&&(t.switchMode({math:"text",text:"math"}[l.mode]),p=""))}if(!d){if(p||(p=rq(t.keybindings,l.mode,e)),!p&&(c==="[Enter]"||c==="[Return]")){let R=!0;return l.contentWillChange({inputType:"insertLineBreak"})&&(t.host&&(R=t.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),!R&&e.preventDefault?(e.preventDefault(),e.stopPropagation()):((i=l.parentEnvironment)!=null&&i.isMultiline&&t.executeCommand("addRowAfter"),l.contentDidChange({inputType:"insertLineBreak"}))),R}if((!p||c==="[Space]")&&l.mode==="math"){if(c==="[Space]"){if(t.styleBias="none",t.flushInlineShortcutBuffer(),t.options.mathModeSpace)return Lt.insert(l,t.options.mathModeSpace,{format:"latex",mode:"math"}),t.snapshot("insert-space"),p="",t.dirty=!0,t.scrollIntoView(),e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1;let R=l.at(l.position+1),I=l.at(l.position-1);if(R?.mode==="text"||I?.mode==="text")return Lt.insert(l," ",{mode:"text"}),t.snapshot("insert-space"),t.dirty=!0,t.scrollIntoView(),!1}(o=l.at(l.position))!=null&&o.isDigit()&&globalThis.MathfieldElement.decimalSeparator===","&&qc(e)===","&&(p="insertDecimalSeparator")}}if(!d&&!p){if(l.mathfield.smartFence){if(d2(l,qc(e),_h(t)))return t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}else{let{parent:R}=l.at(l.position);if(R instanceof nn&&R.rightDelim==="?"&&l.at(l.position).isLastSibling&&/^[)}\]|]$/.test(c))return t.snapshot(),R.isDirty=!0,R.rightDelim=c,l.position+=1,l.selectionDidChange(),l.contentDidChange({data:qc(e),inputType:"insertText"}),t.snapshot("insert-fence"),t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1;if(!l.selectionIsCollapsed){let I=qc(e);if(I==="("||I==="{"||I==="["){let L={"(":"(","{":"\\lbrace","[":"\\lbrack"}[I],j={"(":")","{":"\\rbrace","[":"\\rbrack"}[I],[z,G]=Zn(l.selection);return t.snapshot(),l.position=G,Lt.insert(l,j,{format:"latex"}),l.position=z,Lt.insert(l,L,{format:"latex"}),l.setSelection(z+1,G+1),l.contentDidChange({data:I,inputType:"insertText"}),t.snapshot("insert-fence"),t.dirty=!0,t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}}}return!0}let x=l.at(Math.max(l.position,l.anchor)),{parent:S}=x;if(p==="moveAfterParent"&&S?.type==="leftright"&&x.isLastSibling&&t.options.smartFence&&d2(l,".",t.defaultStyle)&&(p="",Qt(t)),t.keyboardDelegate.cancelComposition(),p)t.executeCommand(p);else if(d){let R=_h(t);l.setState(v[y].state);let I=v[v.length-1].keystrokes;I=I.slice(f-1);for(let L of I)Lt.insert(l,L,{silenceNotifications:!0,style:R});t.snapshot("insert-shortcut"),l.setState(v[y].state),l.deferNotifications({content:!0,selection:!0,data:d,type:"insertText"},()=>(Lt.insert(l,d,{format:"latex",style:R}),W3(t.model),d.endsWith(" ")&&(t.switchMode("text"),Lt.insert(l," ",{style:R,mode:"text"})),t.snapshot(),l.selectionIsCollapsed||t.flushInlineShortcutBuffer(),!0)),t.dirty=!0,l.announce("replacement")}return t.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}function h2(t,e,n){let{model:r}=t;if(!t.isSelectionEditable){r.announce("plonk");return}n!=null||(n={}),n.focus&&t.focus(),n.feedback&&globalThis.MathfieldElement.playSound("keypress"),typeof n.mode=="string"&&(t.switchMode(n.mode),t.snapshot());let i=TM(e),o=window.mathVirtualKeyboard;if(o!=null&&o.isShifted&&(i=typeof i=="string"?i.toUpperCase():i.map(l=>l.toUpperCase())),n.simulateKeystroke){let l=!0;for(let c of i)oT(t,new KeyboardEvent("keypress",{key:c}))&&(l=!1);if(l)return}if(r.mode==="latex")r.deferNotifications({content:!0,selection:!0,data:e,type:"insertText"},()=>{V1(t);for(let l of i)Lt.insert(r,l,{insertionMode:"replaceSelection"});t.snapshot("insert-latex"),hm(t)});else if(r.mode==="text"){let l=N(N({},hj(r)),t.defaultStyle);for(let c of i)Lt.insert(r,c,{style:l,insertionMode:"replaceSelection"});t.snapshot("insert-text")}else if(r.mode==="math")for(let l of i)cj(t,l);t.dirty=!0,t.scrollIntoView()}function uj(t){let e=t.model,n=[],r=e.at(Math.min(e.position,e.anchor));for(;r.type!=="first";)n.push(r),r=r.leftSibling;return n}function cj(t,e){let n=t.model,r={"^":"moveToSuperscript",_:"moveToSubscript"," ":t.options.mathModeSpace?["insert",t.options.mathModeSpace]:"moveAfterParent"}[e];if(r){t.executeCommand(r);return}let i=N({},_h(t));!/[a-zA-Z0-9]/.test(e)&&t.styleBias!=="none"&&(i.variant="normal",i.variantStyle=void 0);let o=n.at(n.position);if(/\d/.test(e)&&t.options.smartSuperscript&&o.parentBranch==="superscript"&&o.parent.type!=="mop"&&o.parent.type!=="operator"&&o.parent.type!=="extensible-symbol"&&o.hasNoSiblings){if(!Lt.insert(n,e,{style:i,insertionMode:"replaceSelection"})){t.undoManager.pop();return}t.snapshot("insert-mord"),iT(n);return}let l=e;l==="{"?l="\\lbrace":l==="}"?l="\\rbrace":l==="&"?l="\\&":l==="#"?l="\\#":l==="$"?l="\\$":l==="%"?l="\\%":l==="~"?l="\\~":l==="\\"&&(l="\\backslash"),Lt.insert(n,l,{style:i,insertionMode:"replaceSelection"})&&t.snapshot(`insert-${n.at(n.position).type}`)}function hj(t){var e,n,r,i;if(t.selectionIsCollapsed)return(n=(e=t.at(t.position))==null?void 0:e.style)!=null?n:{};let o=Zn(t.selection)[0];return(i=(r=t.at(o+1))==null?void 0:r.style)!=null?i:{}}function d2(t,e,n){var r;if(!e||t.mode!=="math")return!1;let i=t.at(t.position),{parent:o}=i,l={"(":"(",")":")","{":"\\lbrace","}":"\\rbrace","[":"\\lbrack","]":"\\rbrack","|":"|"}[e];if(!l)return!1;let c=Hg[l],d=B1[l];if(!t.selectionIsCollapsed){t.mathfield.snapshot();let[f,p]=Zn(t.selection),y=t.extractAtoms([f,p]),v=o.addChildrenAfter([new nn("left...right",y,{leftDelim:l,rightDelim:d})],t.at(f));return t.setSelection(t.offsetOf(v.firstChild),t.offsetOf(v.lastChild)),t.mathfield.snapshot("insert-fence"),t.contentDidChange({data:l,inputType:"insertText"}),!0}if(l==="|"){let f=o instanceof nn?o.leftDelim+o.rightDelim:"";if(f==="\\lbrace\\rbrace"||f==="\\{\\}"||f==="\\lbrace?")return t.mathfield.snapshot(),Lt.insert(t,"\\,\\middle\\vert\\,",{format:"latex",style:n}),t.mathfield.snapshot("insert-fence"),t.contentDidChange({data:l,inputType:"insertText"}),!0}if(d){if(o instanceof nn&&o.firstChild===i&&(o.leftDelim==="?"||o.leftDelim==="."))return o.leftDelim=l,o.isDirty=!0,t.mathfield.snapshot(),t.contentDidChange({data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;if(!(o instanceof nn)){let v=i;for(;v&&!(v.type==="mclose"&&v.value===d);)v=v.rightSibling;if(v){t.mathfield.snapshot();let x=t.extractAtoms([t.offsetOf(i),t.offsetOf(v)]);return x.pop(),o.addChildrenAfter([new nn("left...right",x,{leftDelim:l,rightDelim:d})],i),t.position=t.offsetOf(o.firstChild)+1,t.contentDidChange({data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}}let f=t.offsetOf(i.lastSibling),p;for(p=t.position;p<=f;p++){let v=t.at(p);if(v instanceof nn&&(v.leftDelim==="?"||v.leftDelim===".")&&OE(l,v.rightDelim))break}let y=t.at(p);if(p<=f&&y instanceof nn){y.leftDelim=l,t.mathfield.snapshot();let v=t.extractAtoms([t.position,p-1]);return v=v.filter(x=>x.type!=="first"),y.addChildren(v,y.parentBranch),t.position+=1,t.contentDidChange({data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}if(o instanceof nn&&(o.leftDelim==="?"||o.leftDelim===".")&&OE(l,o.rightDelim)){o.isDirty=!0,o.leftDelim=l,t.mathfield.snapshot();let v=t.extractAtoms([t.offsetOf(i.firstSibling),t.position]);for(let x of v)o.parent.addChildBefore(x,o);return t.contentDidChange({data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}if(!(o instanceof nn&&o.leftDelim==="|")){if(l==="("){let v=t.position-1,x=!1;for(;v>=0;){let S=t.at(v);if(S.type==="first")break;if(S.type==="mord"&&S.value&&/^[\d]$/.test(S.value)){v-=1;continue}if(S.type==="group"&&((r=S.body)==null?void 0:r.length)===2&&S.body[0].type==="first"&&S.body[1].value===","){x=!0;break}if(S.type==="mord"&&(S.value===","||S.value===".")){x=!0;break}break}if(x)return!1}if(t.mathfield.snapshot(),Lt.insert(t,`\\left${l}\\right?`,{format:"latex",style:n}),i.lastSibling.type!=="first"){let v=t.offsetOf(i.lastSibling),x=t.extractAtoms([t.position,v]);t.at(t.position).body=x,t.position-=1}return t.mathfield.snapshot("insert-fence"),!0}}if(c){if(l===")"){let S=t.position-1,R=!1;for(;S>=0;){let I=t.at(S);if(I.type==="first")break;if(I.type==="mord"&&I.value&&/^[\d]$/.test(I.value)){R=!0,S-=1;continue}break}if(R&&t.at(S).type==="mopen"&&t.at(S).value==="(")return!1}let f=i;for(;f;){if(f.type==="mopen"&&f.value===c){t.mathfield.snapshot();let S=f.leftSibling,R=t.extractAtoms([t.offsetOf(f.leftSibling),t.offsetOf(i)]);[,...R]=R;let I=new nn("left...right",R,{leftDelim:c,rightDelim:l});return o.addChildrenAfter([I],S),t.position=t.offsetOf(I),t.contentDidChange({data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}f=f.leftSibling}if(o instanceof nn&&i.isLastSibling&&Yv(o.leftDelim,l))return t.mathfield.snapshot(),o.isDirty=!0,o.rightDelim=l,t.position+=1,t.contentDidChange({data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;let p=t.offsetOf(i.firstSibling),y;for(y=t.position;y>=p;y--){let S=t.at(y);if(S instanceof nn&&(S.rightDelim==="?"||S.rightDelim===".")&&Yv(S.leftDelim,l))break}let v=t.at(y);if(y>=p&&v instanceof nn)return t.mathfield.snapshot(),v.rightDelim=l,v.addChildren(t.extractAtoms([y,t.position]),v.parentBranch),t.contentDidChange({data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;if(o instanceof nn&&(o.rightDelim==="?"||o.rightDelim===".")&&Yv(o.leftDelim,l))return t.mathfield.snapshot(),o.isDirty=!0,o.rightDelim=l,o.parent.addChildren(t.extractAtoms([t.position,t.offsetOf(i.lastSibling)]),o.parentBranch),t.position=t.offsetOf(o),t.contentDidChange({data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;let x=o.parent;return x instanceof nn&&(x.rightDelim==="?"||x.rightDelim===".")&&t.at(t.position).isLastSibling?(t.position=t.offsetOf(x),d2(t,l,n)):!1}return!1}function Yv(t,e){return t?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(t)?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(e):B1[t]===e:!0}function OE(t,e){return e?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(e)?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(t):Hg[e]===t:!0}Cr({undo:t=>(t.undo(),!0),redo:t=>(t.redo(),!0),scrollIntoView:t=>(t.scrollIntoView(),!0),scrollToStart:t=>(t.field.scroll(0,0),!0),scrollToEnd:t=>{let e=t.field.getBoundingClientRect();return t.field.scroll(e.left-window.scrollX,0),!0},toggleKeystrokeCaption:sj,toggleContextMenu:t=>{let e=t.toggleContextMenu();return e||t.model.announce("plonk"),e},plonk:t=>(t.model.announce("plonk"),!0),switchMode:(t,e,n,r)=>(t.switchMode(e,n,r),!0),insert:(t,e,n)=>t.insert(e,n),typedText:(t,e,n)=>(h2(t,e,n),!0),insertDecimalSeparator:t=>{let e=t.model;return e.mode==="math"&&globalThis.MathfieldElement.decimalSeparator===","&&e.at(Math.max(e.position,e.anchor)).isDigit()?(t.insert("{,}",{format:"latex"}),t.snapshot("insert-mord"),!0):(t.insert("."),!0)},commit:t=>{var e,n;let r=t.model;return r.contentWillChange({inputType:"insertLineBreak"})&&((e=t.host)==null||e.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),(n=r.parentEnvironment)!=null&&n.isMultiline&&t.executeCommand("addRowAfter"),r.contentDidChange({inputType:"insertLineBreak"})),!0},insertPrompt:(t,e,n)=>{let r=t.getPrompts(),i="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36),o=0;for(;r.includes(i)&&o<100;){if(o===99)return console.error("could not find a unique ID after 100 tries"),!1;i="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(Math.random()*1e5).toString(36),o++}return t.insert(`\\placeholder[${e??i}]{}`,n),!0}});Cr({copyToClipboard:t=>(t.focus(),t.model.selectionIsCollapsed&&t.select(),"queryCommandSupported"in document&&document.queryCommandSupported("copy")&&document.execCommand("copy")||t.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1)},{target:"mathfield"});Cr({cutToClipboard:t=>(t.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("cut")&&document.execCommand("cut")||t.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:t=>(t.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("paste")?(document.execCommand("paste"),!0):(navigator.clipboard.readText().then(e=>{e&&t.model.contentWillChange({inputType:"insertFromPaste",data:e})?(t.stopCoalescingUndo(),t.stopRecording(),t.insert(e,{mode:t.model.mode})&&(hm(t),t.startRecording(),t.snapshot("paste"),t.model.contentDidChange({inputType:"insertFromPaste"}),Qt(t))):t.model.announce("plonk"),t.startRecording()}),!0))},{target:"mathfield",canUndo:!0,changeContent:!0,changeSelection:!0});function f2(t){let[e,n]=Zn(t.selection);if(e=NE(t,e,"backward"),n=NE(t,n,"forward"),e===n){let r=t.at(e);if(r.type==="leftright")return t.setSelection(t.offsetOf(r.firstChild)-1,n);if(r.type==="first"&&(r.parent.type==="leftright"||r.parent.type==="surd"))return t.setSelection(e-1,t.offsetOf(r.parent.lastChild)+1);t.setSelection(e-1,n)}else t.setSelection(e,n);return!0}function NE(t,e,n){var r,i,o;let l=t.at(e);if(!l)return e;let c=n==="forward"?1:-1;if(l.mode==="text"){for(;l&&!(l.mode!=="text"||!Uf.test(l.value));)e+=c,l=t.at(e);return n==="backward"?e-1:e}if(l.mode==="latex"){if(/[a-zA-Z\*]/.test(l.value))if(n==="backward")for(;l&&l.mode==="latex"&&l.value!=="\\"&&/[a-zA-Z]/.test(l.value);)e+=c,l=t.at(e);else for(;l&&l.mode==="latex"&&/[a-zA-Z\*]/.test(l.value);)e+=c,l=t.at(e);else if(l.value==="{"){if(n==="forward"){for(;l&&l.mode==="latex"&&l.value!=="}";)e+=c,l=t.at(e);return e}return e-1}else if(l.value==="}"){if(n==="backward"){for(;l&&l.mode==="latex"&&l.value!=="{";)e+=c,l=t.at(e);return e-1}return e}return e-1}if(l.mode==="math"){if(l.isDigit()){for(;(r=t.at(e+c))!=null&&r.isDigit();)e+=c;return n==="backward"?e-1:e}if(l.style.variant||l.style.variantStyle){let d=(i=t.at(e))==null?void 0:i.style;for(;d&&d.variant===l.style.variant&&d.variantStyle===l.style.variantStyle;)d=(o=t.at(e+c))==null?void 0:o.style,e+=c;return n==="backward"?e-1:e}return e}return e}Cr({selectGroup:t=>{let e=f2(t);return e||t.announce("plonk"),e},selectAll:t=>t.setSelection(0,t.lastOffset),extendSelectionForward:t=>wa(t,"forward",{extend:!0}),extendSelectionBackward:t=>wa(t,"backward",{extend:!0}),extendToNextWord:t=>Yc(t,"forward",{extend:!0}),extendToPreviousWord:t=>Yc(t,"backward",{extend:!0}),extendSelectionUpward:t=>wa(t,"upward",{extend:!0}),extendSelectionDownward:t=>wa(t,"downward",{extend:!0}),extendToNextBoundary:t=>Yc(t,"forward",{extend:!0}),extendToPreviousBoundary:t=>Yc(t,"backward",{extend:!0}),extendToGroupStart:t=>{let e=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).firstSibling));return e||t.announce("plonk"),e},extendToGroupEnd:t=>{let e=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).lastSibling));return e||t.announce("plonk"),e},extendToMathFieldStart:t=>{let e=t.setSelection(t.anchor,0);return e||t.announce("plonk"),e},extendToMathFieldEnd:t=>{let e=t.setSelection(t.anchor,t.lastOffset);return e||t.announce("plonk"),e}},{target:"model",changeSelection:!0});var Hl=null,tf=0,n1=class Ei{static start(e,n,r,i){var o;Ei.element=e,(o=Ei.controller)==null||o.abort(),Ei.controller=new AbortController;let l={signal:Ei.controller.signal};"PointerEvent"in window?(e.addEventListener("pointermove",r,l),e.addEventListener("pointerup",i,l),e.addEventListener("pointercancel",i,l),m2(n)&&(Ei.pointerId=n.pointerId,e.setPointerCapture(n.pointerId))):(window.addEventListener("mousemove",r,l),window.addEventListener("blur",i,l),window.addEventListener("mouseup",i,l))}static stop(){var e;(e=Ei.controller)==null||e.abort(),Ei.controller=void 0,typeof Ei.pointerId=="number"&&(Ei.element.releasePointerCapture(Ei.pointerId),Ei.pointerId=void 0)}};function m2(t){return t!==null&&globalThis.PointerEvent!==void 0&&t instanceof PointerEvent}function PE(t,e){var n;if(e.buttons>1)return;t.atomBoundsCache=new Map;let r=t,i,o=!1,l=!1,c="none",d=!1,f=!1,p=e.clientX,y=e.clientY,v=Date.now(),x=r.field,S=setInterval(()=>{d?x.scroll({top:0,left:x.scrollLeft-16}):f&&x.scroll({top:0,left:x.scrollLeft+16})},32);function R(){n1.stop(),o=!1,clearInterval(S),t.element.classList.remove("tracking"),e&&e.preventDefault()}function I(j){if(!r.hasFocus()){R();return}let z=j.clientX,G=j.clientY,ie=m2(j)&&j.pointerType==="touch"?20:5;if(Date.now()<v+500&&Math.abs(p-z)<ie&&Math.abs(y-G)<ie){j.preventDefault(),j.stopPropagation();return}let B=x.getBoundingClientRect();f=z>B.right,d=z<B.left;let M=i;m2(j)&&(j.isPrimary||(M=fg(r,j.clientX,j.clientY,{bias:0})));let A=fg(r,z,G,{bias:z<=p?z===p?0:-1:1});M>=0&&A>=0&&(r.model.extendSelectionTo(M,A),Qt(t)),l&&f2(r.model)}Hl&&Math.abs(Hl.x-p)<5&&Math.abs(Hl.y-y)<5&&Date.now()<Hl.time+500?(tf+=1,Hl.time=v):(Hl={x:p,y,time:v},tf=1);let L=x.getBoundingClientRect();if(p>=L.left&&p<=L.right&&y>=L.top&&y<=L.bottom){if(t.flushInlineShortcutBuffer(),i=fg(t,p,y,{bias:0}),i!==t.model.anchor&&(t.defaultStyle={},t.styleBias="left"),i>=0){if(t.element.classList.add("tracking"),e.shiftKey){let j=t.model.selectionIsCollapsed;t.model.extendSelectionTo(t.model.anchor,i),CE(t.model)||j?c="all":c="selection"}else t.model.at(i).type==="placeholder"?(t.model.setSelection(i-1,i),c="selection"):((n=t.model.at(i).rightSibling)==null?void 0:n.type)==="placeholder"?(t.model.setSelection(i,i+1),c="selection"):(t.model.position=i,CE(t.model)?c="all":c="selection");e.detail===3||tf>2?(R(),(e.detail===3||tf===3)&&(t.model.selection={ranges:[[0,t.model.lastOffset]]},c="all")):o||(o=!0,n1.start(x,e,I,R),(e.detail===2||tf===2)&&(l=!0,f2(t.model),c="all"))}t.hasFocus()||(c="none",t.focus({preventScroll:!0}))}else Hl=null;t.stopCoalescingUndo(),c!=="none"&&(t.model.selectionIsCollapsed&&(c="all"),Qt(t)),e.preventDefault()}function dj(t,e,n){if(t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom)return 0;let r=t-(n.left+n.right)/2,i=e-(n.top+n.bottom)/2;return r*r+i*i}function p2(t,e,n,r,i){if(!n.id)return[1/0,null];if(e.has(n.id))return e.get(n.id);let o=Lh(t,n);if(!o)return[1/0,null];let l=[1/0,null],c=t.model;if(n instanceof rt)for(let d of n.rows)for(let f of d){let p=[c.offsetOf(f[0]),c.offsetOf(f[f.length-1])],y=UK(t,p);if(i>=y.top&&i<=y.bottom)for(let v of f){let x=p2(t,e,v,r,i);x[0]<=l[0]&&(l=x)}}else if(n.hasChildren&&!n.captureSelection&&r>=o.left&&r<=o.right){let d=n.children;for(let f of d){let p=p2(t,e,f,r,i);p[0]<=l[0]&&(l=p)}}return l[1]||(l=[dj(r,i,o),n]),e.set(n.id,l),l}function fj(t,e,n){let[,r]=p2(t,new Map,t.model.root,e,n);return r}function fg(t,e,n,r){var i;let o=t.field.querySelector(".ML__latex").getBoundingClientRect();if(!o)return 0;if(e>o.right||n>o.bottom+8)return t.model.lastOffset;if(e<o.left||n<o.top-8)return 0;r=r??{},r.bias=(i=r.bias)!=null?i:0;let l=fj(t,e,n),c=[],d=l;for(;d;)c.unshift(d),d=d.parent;for(let p of c)if(p.captureSelection){l=p;break}let f=t.model.offsetOf(l);if(f<0)return-1;if(l.leftSibling)if(r.bias===0&&l.type!=="placeholder"){let p=Lh(t,l);p&&e<(p.left+p.right)/2&&(f=t.model.offsetOf(l.leftSibling))}else r.bias<0&&(f=t.model.offsetOf(l.leftSibling));return f}var mj=class extends Lt{constructor(){super("math")}onPaste(t,e){if(!e||!t.model.contentWillChange({data:typeof e=="string"?e:null,dataTransfer:typeof e=="string"?null:e,inputType:"insertFromPaste"}))return!1;let n="",r="auto",i=typeof e!="string"?e.getData("application/json+mathlive"):"";if(i)try{let o=JSON.parse(i);if(o&&Array.isArray(o)){t.snapshot();let l=$s(o),{model:c}=t;c.selectionIsCollapsed||c.deleteAtoms(Zn(c.selection));let d=c.at(c.position);if(d.parent instanceof rt){d.parentBranch;let f=[],p=[];l[0].type==="first"&&l.shift(),l[l.length-1].type==="first"&&l.pop();for(let S of l)S.type==="first"&&p.length>0?(f.push(p),p=[S]):p.push(S);p.length>0&&f.push(p);let y=Number(d.parentBranch[0]),v=Number(d.parentBranch[1]),x=d.parent.maxColumns;for(;d.parent.colCount-v<f.length&&d.parent.colCount<x;)d.parent.addColumn();d.parent.addChildrenAfter(f[0],d);for(let S=1;S<f.length;S++)v++,v>=x&&(v=0,d.parent.addRowAfter(y),y++),d.parent.setCell(y,v,f[S])}else d.parent.addChildrenAfter(l.filter(f=>f.type!=="first"),d);return c.position=c.offsetOf(l[l.length-1]),c.contentDidChange({inputType:"insertFromPaste"}),Qt(t),!0}}catch{}if(i=typeof e!="string"?e.getData("application/json"):"",i&&globalThis.MathfieldElement.computeEngine)try{let o=JSON.parse(i);if(typeof o=="object"&&"latex"in o&&o.latex&&(n=o.latex),!n){let l=globalThis.MathfieldElement.computeEngine.box(o);l&&!l.has("Error")&&(n=l.latex)}n||(r="latex")}catch{}if(!n&&typeof e!="string"&&(n=e.getData("application/x-latex"),n&&(r="latex")),n||(n=typeof e=="string"?e:e.getData("text/plain")),n){let o;return[o,n]=O3(n),r==="auto"&&o&&(r="latex"),t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,n,{format:r})&&(t.startRecording(),t.snapshot("paste"),Qt(t)),t.startRecording(),!0}return!1}insert(t,e,n){var r,i;let o=typeof e=="string"?e:(i=(r=globalThis.MathfieldElement.computeEngine)==null?void 0:r.box(e).latex)!=null?i:"";if(!n.silenceNotifications&&!t.contentWillChange({data:o,inputType:"insertText"}))return!1;n.insertionMode||(n.insertionMode="replaceSelection"),n.selectionMode||(n.selectionMode="placeholder"),n.format||(n.format="auto");let{silenceNotifications:l}=t;n.silenceNotifications&&(t.silenceNotifications=!0);let c=t.silenceNotifications;t.silenceNotifications=!0;let d={"?":"\\placeholder{}","@":"\\placeholder{}"};d[0]=n.insertionMode==="replaceAll"?"":t.getValue(t.selection,"latex-unstyled"),n.insertionMode==="replaceSelection"?t.deleteAtoms(Zn(t.selection)):n.insertionMode==="replaceAll"?t.deleteAtoms():n.insertionMode==="insertBefore"?t.collapseSelection("backward"):n.insertionMode==="insertAfter"&&t.collapseSelection("forward"),!t.at(t.position).isLastSibling&&t.at(t.position+1).type==="placeholder"?t.deleteAtoms([t.position,t.position+1]):t.at(t.position).type==="placeholder"&&t.deleteAtoms([t.position-1,t.position]);let f=-1;d[0]?d["@"]=d[0]:typeof e=="string"&&/(^|[^\\])#@/.test(e)&&(f=pj(t),f>=0&&(d["@"]=t.getValue(f,t.position,"latex"))),d[0]||(d[0]=d["?"]);let p=!1,y=I=>(p=!0,d[I]),[v,x]=zE(t,e,y,n);if(!x)return!1;let S=x.length===1&&x[0].type==="genfrac";if(S&&f>=0&&typeof t.mathfield.options.isImplicitFunction=="function"&&t.mathfield.options.isImplicitFunction(t.at(t.position).command)?(d["@"]=d["?"],p=!1,[v,x]=zE(t,e,y,n)):f>=0&&t.deleteAtoms([f,t.position]),x.length===1&&x[0].isRoot)t.root=x[0];else{let{parent:I}=t.at(t.position),L=I.hasEmptyBranch("body");if(S&&v!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&I instanceof nn&&I.leftDelim==="("&&L){let z=I.parent,G=I.parentBranch;z.removeChild(I),z.setChildren(x,G)}let j=t.at(t.position);j.parent.addChildrenAfter(x,j),v==="latex"&&typeof e=="string"&&I?.type==="root"&&L&&!p&&(I.verbatimLatex=e)}t.silenceNotifications=c;let R=x[x.length-1];if(n.selectionMode==="placeholder"){let I=x.flatMap(L=>[L,...L.children]).find(L=>L.type==="placeholder");if(I){let L=t.offsetOf(I);t.setSelection(L-1,L),t.announce("move")}else if(R){let L=R.body,j=R.hasEmptyBranch("body");L&&j?t.setSelection(t.offsetOf(L[0]),t.offsetOf(L[L.length-1])+1):t.position=t.offsetOf(R)}}else n.selectionMode==="before"||(n.selectionMode==="after"?R&&(t.position=t.offsetOf(R)):n.selectionMode==="item"&&t.setSelection(t.anchor,t.offsetOf(R)));return t.contentDidChange({data:o,inputType:"insertText"}),t.silenceNotifications=l,!0}};function zE(t,e,n,r){var i;let o,l=[];if(typeof e!="string"||r.format==="math-json"){let c=globalThis.MathfieldElement.computeEngine;if(!c)return["math-json",[]];[o,e]=["latex",c.box(e).latex],l=Mi(e,{context:t.mathfield.context})}else typeof e=="string"&&r.format==="ascii-math"?([o,e]=Z4(e,{format:"ascii-math",inlineShortcuts:t.mathfield.options.inlineShortcuts}),l=Mi(e,{context:t.mathfield.context}),o!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&(l=l.map(c=>r1(c)))):(r.format==="auto"||(i=r.format)!=null&&i.startsWith("latex"))&&(r.format==="auto"&&([o,e]=Z4(e,{format:"auto",inlineShortcuts:t.mathfield.options.inlineShortcuts})),r.format==="latex"&&([,e]=O3(e)),l=Mi(e,{context:t.mathfield.context,args:n}),r.format!=="latex"&&t.mathfield.options.removeExtraneousParentheses&&(l=l.map(c=>r1(c))));return V3(l,r.style),[o??"latex",l]}function r1(t){var e;if(t instanceof nn&&t.leftDelim!=="("&&t.rightDelim===")"){let n=(e=t.body)==null?void 0:e.filter(r=>r.type!=="first");if(n?.length===1&&n[0].type==="genfrac")return n[0]}for(let n of t.branches)t.hasEmptyBranch(n)||t.setChildren(t.branch(n).map(r=>r1(r)),n);return t instanceof rt&&t.forEachCell((n,r,i)=>{t.setCell(r,i,n.map(o=>r1(o)))}),t}function pj(t){let e=t.at(t.position);if(e.mode==="text"){for(;!e.isFirstSibling&&e.mode==="text";)e=e.leftSibling;return t.offsetOf(e)}let n=e,r=!1;if(e.type==="mclose"){let i=Hg[e.value];for(;!e.isFirstSibling&&!(e.type==="mopen"&&e.value===i);)e=e.leftSibling;e.isFirstSibling||(e=e.leftSibling),r=!0}else e.type==="leftright"&&(e=e.leftSibling,r=!0);if(r)for(;!e.isFirstSibling&&(e.isFunction||VE(e));)e=e.leftSibling;else{let i=[];for(;!e.isFirstSibling&&(VE(e)||i.length>0);)e.type==="mclose"&&i.unshift(e.value),e.type==="mopen"&&i.length>0&&e.value===Hg[i[0]]&&i.shift(),e=e.leftSibling}return n===e?-1:t.offsetOf(e)}function VE(t){return t.isDigit()?!0:t.type&&/^(mord|surd|subsup|leftright|mop|mclose)$/.test(t.type)?t.type!=="extensible-symbol":!1}new mj;var gj=class extends Lt{constructor(){super("text")}onPaste(t,e){if(!e)return!1;let n=typeof e=="string"?e:e.getData("text/plain");return n&&t.model.contentWillChange({inputType:"insertFromPaste",data:n})?(t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,n)&&(t.model.contentDidChange({inputType:"insertFromPaste"}),t.startRecording(),t.snapshot("paste"),Qt(t)),t.startRecording(),!0):!1}insert(t,e,n={}){if(!t.contentWillChange({data:e,inputType:"insertText"}))return!1;n.insertionMode||(n.insertionMode="replaceSelection"),n.selectionMode||(n.selectionMode="placeholder"),n.format||(n.format="auto");let{silenceNotifications:r}=t;n.silenceNotifications&&(t.silenceNotifications=!0);let i=t.silenceNotifications;t.silenceNotifications=!0,n.insertionMode==="replaceSelection"&&!t.selectionIsCollapsed?t.deleteAtoms(Zn(t.selection)):n.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):n.insertionMode==="insertBefore"?t.collapseSelection("backward"):n.insertionMode==="insertAfter"&&t.collapseSelection("forward");let o=yj(e,t.mathfield.context);if(V3(o,n.style),!o)return!1;let l=t.at(t.position),c=l.parent.addChildrenAfter(o,l);return t.silenceNotifications=i,n.selectionMode==="before"||(n.selectionMode==="item"?t.setSelection(t.anchor,t.offsetOf(c)):c&&(t.position=t.offsetOf(c))),t.contentDidChange({data:e,inputType:"insertText"}),t.silenceNotifications=r,!0}};function yj(t,e){return t=t.replace(/\\/g,"\\textbackslash "),t=t.replace(/#/g,"\\#"),t=t.replace(/\$/g,"\\$"),t=t.replace(/%/g,"\\%"),t=t.replace(/&/g,"\\&"),t=t.replace(/_/g,"\\_"),t=t.replace(/{/g,"\\textbraceleft "),t=t.replace(/}/g,"\\textbraceright "),t=t.replace(/lbrace/g,"\\textbraceleft "),t=t.replace(/rbrace/g,"\\textbraceright "),t=t.replace(/\^/g,"\\textasciicircum "),t=t.replace(/~/g,"\\textasciitilde "),t=t.replace(/£/g,"\\textsterling "),Mi(t,{context:e,parseMode:"text"})}new gj;function Ms(t){return{value:t.model.getValue(),selectionIsCollapsed:t.model.selectionIsCollapsed,canUndo:t.canUndo(),canRedo:t.canRedo(),style:bj(t.model),mode:t.model.mode}}function bj(t){var e;if(t.selectionIsCollapsed)return(e=t.at(t.position))==null?void 0:e.style;let n=t.getAtoms(t.selection);if(n.length===0)return{};let r=N({},n[0].style);for(let i of n)for(let[o,l]of Object.entries(i.style))r[o]!==l&&delete r[o];return r}var Ft=4,kr=20,un=2*(kr+Ft),P0=(t,e)=>`
  <line x1="${t+kr}" y1="${e+kr}" 
    x2="${t>e?t+kr:7*kr+10*Ft}" 
    y2="${t<e?e+kr:7*kr+10*Ft}"/>
  <svg id="plus" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.34-3.33,3.34h-6.67v6.66c0,1.84-1.49,3.34-3.33,3.34s-3.34-1.5-3.34-3.34v-6.66h-6.66c-1.84,0-3.34-1.5-3.34-3.34s1.5-3.33,3.34-3.33h6.66v-6.67c0-1.84,1.5-3.33,3.34-3.33s3.33,1.49,3.33,3.33v6.67h6.67c1.84,0,3.33,1.49,3.33,3.33Z"/>
  </svg>`,FE=(t,e)=>`
  <line x1="${t+kr}" y1="${e+kr}" 
    x2="${t>e?t+kr:7*kr+10*Ft}" 
    y2="${t<e?e+kr:7*kr+10*Ft}"/>
  <svg id="minus" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.33-3.33,3.33H10c-1.84,0-3.34-1.49-3.34-3.33s1.5-3.34,3.34-3.34h20c1.84,0,3.33,1.5,3.33,3.34Z"/>
  </svg>`,z0=(t,e,n)=>`
  <svg id="arrow" viewBox="0 0 40 40" x="${t}" y="${e}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <g transform="rotate(${n})" transform-origin="20 20">
      <path class="font" d="m17.7,7.23h4.6c.52,0,.94.42.94.94v13.82c0,.52.42.94.94.94h3.39c.83,0,1.25,1.01.66,1.6l-7.56,7.56c-.37.37-.96.37-1.32,0l-7.56-7.56c-.59-.59-.17-1.6.66-1.6h3.39c.52,0,.94-.42.94-.94v-13.82c0-.52.42-.94.94-.94Z"/>
    </g>  
  </svg>`,vj=`
<svg class="MLEP__array-buttons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
viewBox=
"-2 -2 ${8*kr+10*Ft+5} ${8*kr+10*Ft+5}">
  <rect 
      class="MLEP__array-insert-background rows"
      x="0" 
      y="${un+Ft}" 
      height="${3*un}" 
      width="${un}" 
      rx="${un/2}"/>
      <rect 
      class="MLEP__array-insert-background columns"
      x="${un+Ft}" 
      y="0" 
      height="${un}" 
      width="${3*un}" 
      rx="${un/2}"/>
  <g data-command='"moveDown"'>
  ${z0(2*(Ft+un),2*Ft+3*un,0)}
  </g>
  <g data-command='"moveUp"'>
  ${z0(2*(Ft+un),2*Ft+un,180)}
  </g>
  <g data-command='"moveToNextWord"'>
  ${z0(2*Ft+3*un,2*(Ft+un),-90)}
  </g>
  <g data-command='"moveToPreviousWord"'>
  ${z0(2*Ft+un,2*(Ft+un),90)}
  </g>
  <g>

  <g data-command='"addColumnBefore"'>
  ${P0(2*Ft+un,Ft)}
  </g>
  <g data-command='"removeColumn"'>
  ${FE(2*Ft+2*un,Ft)}
  </g>
  <g data-command='"addColumnAfter"'>
  ${P0(2*Ft+3*un,Ft)}
  </g>
  <g data-command='"addRowBefore"'>
  ${P0(Ft,2*Ft+un)}
  </g>
  <g data-command='"removeRow"'>
  ${FE(Ft,2*Ft+2*un)}
  </g>
  <g data-command='"addRowAfter"'>
    ${P0(Ft,2*Ft+3*un)}
  </g>
</svg>`,_j=t=>`
<svg id="matrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","matrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,xj=t=>`
<svg id="pmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
data-command='["setEnvironment","pmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-3.96,4.6-3.96,11.4,0,16"/>
  <path class="cls-2" d="m22,4c3.96,4.6,3.96,11.4,0,16"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,sT=t=>`
<svg id="Bmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","Bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <path class="cls-2" d="m22,4c1.1,0,2,.9,2,2v3c0,1.66.9,3,2,3-1.1,0-2,1.34-2,3v3c0,1.1-.9,2-2,2"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,wj=t=>`
<svg id="bmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4h-3v16h3"/>
  <path class="cls-2" d="m22,4h3v16h-3"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,Ej=t=>`
<svg id="vmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="4" y1="4" x2="4" y2="20"/>
  <line class="cls-2" x1="24" y1="4" x2="24" y2="20"/>
</svg>`,Sj=t=>`
<svg id="Vmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="-3.5 -3 35 30" 
  data-command='["setEnvironment","Vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="6" y1="4" x2="6" y2="20"/>
  <line class="cls-2" x1="22" y1="4" x2="22" y2="20"/>
  <line class="cls-2" x1="2" y1="4" x2="2" y2="20"/>
  <line class="cls-2" x1="26" y1="4" x2="26" y2="20"/>
</svg>`,kj=t=>`
<svg id="cases" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","cases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m10,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <circle cx="13" cy="8" r="1"/>
  <circle cx="13" cy="16" r="1"/>
  <circle cx="21" cy="8" r="1"/>
  <circle cx="21" cy="16" r="1"/>
</svg>`,Cj=t=>`
<svg id="rcases" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","rcases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m18,20c1.1,0,2-.9,2-2v-3c0-1.66.9-3,2-3-1.1,0-2-1.34-2-3v-3c0-1.1-.9-2-2-2"/>
  <circle cx="15" cy="8" r="1"/>
  <circle cx="15" cy="16" r="1"/>
  <circle cx="7" cy="8" r="1"/>
  <circle cx="7" cy="16" r="1"/>
</svg>`,Qv={matrix:_j,pmatrix:xj,bmatrix:wj,Bmatrix:sT,vmatrix:Ej,Vmatrix:Sj},Jv={cases:kj,rcases:Cj,Bmatrix:sT};function Mj(t){var e,n;let r=(e=t.model.parentEnvironment)==null?void 0:e.rows;if(!r)return;let i=0;r.forEach(x=>{(!i||x.length>i)&&(i=x.length)});let o=document.getElementById("mathlive-environment-popover");o||(o=F1("mathlive-environment-popover"),Js("environment-popover"),Js("core"),o.setAttribute("aria-hidden","true"));let l,c=o.querySelector(".MLEP__environment-controls");c?l=c:(l=document.createElement("div"),o.innerHTML="",o.appendChild(l)),l.className="MLEP__environment-controls",l.style.display="flex",l.style.width="100%",l.style.height="100%",l.style.boxSizing="border-box",l.innerHTML=vj;let d=[],f="",p=t.model.parentEnvironment.environmentName;if(tA(p)){let x=Tj(p);f=Qv[x]("active");let S=Qv,{[x]:R}=S,I=Ug(S,[_8(x)]);d=Object.values(I).map(L=>L("inactive"))}else if(u$(p)){let x=Dj(p);f=Jv[x]("active");let S=Jv,{[x]:R}=S,I=Ug(S,[_8(x)]);d=Object.values(I).map(L=>L("inactive"))}else c$(p)&&(f=Qv.matrix("active"),d=Object.values(Jv).map(x=>x("inactive")));let y=document.createElement("div");y.className="MLEP__environment-delimiter-controls",y.style.display="flex",y.style.flexDirection="column",y.innerHTML=`
  <div class='MLEP__array-delimiter-options'>
  ${f}
  ${d.join("")}
  </div>`,f&&l.appendChild(y),l.querySelectorAll("[data-command]").forEach(x=>{let S=x.dataset.command,R=S;try{R=JSON.parse(S)}catch{}x.addEventListener("mousedown",I=>I.preventDefault()),R&&x.addEventListener("click",()=>t.executeCommand(R))});let v=(n=t.field)==null?void 0:n.getBoundingClientRect();v&&(o.style.top=`${window.scrollY+(v.top-o.clientHeight-15)}px`,o.style.left=`${v.left+20}px`,o.classList.add("is-visible"))}function g2(){let t=document.getElementById("mathlive-environment-popover");t?.classList.remove("is-visible")}function Aj(){document.getElementById("mathlive-environment-popover")&&(dm("mathlive-environment-popover"),Zs("environment-popover"),Zs("core"))}function V0(t){if(!t.hasFocus())return;let e=!1;if(t.model.mode==="math"){let n=t.model.parentEnvironment;if(n!=null&&n.rows&&l$(n.environmentName)){let r=t.options.environmentPopoverPolicy;e=r==="auto"||r==="on"}}e?Mj(t):g2()}function Tj(t){return t.replace("*","")}function Dj(t){return t==="dcases"?"cases":t}function lT(t){let e=getComputedStyle(t).direction;return e==="ltr"||e==="rtl"?e:"ltr"}function UE(t,e,n){return e==="left"||e==="leading"&&n==="ltr"||e==="trailing"&&n==="rtl"?t.left:t.right}function Zv(t,e,n,r){return n==="middle"?t-e/2:n==="start"&&r==="rtl"||n==="end"&&r==="ltr"||n==="top"||n==="right"?Math.max(0,t-e):t}function Lj(t,e,n,r){return n==="middle"?t-e/2:n==="start"&&r==="ltr"||n==="end"&&r==="rtl"||n==="top"||n==="right"?t:t-e}function Rj(t,e){var n,r,i;let o=(n=lT(t))!=null?n:"ltr";t.style.position="fixed",t.style.left="",t.style.top="",t.style.right="",t.style.bottom="",t.style.height="",t.style.width="";let l=t.getBoundingClientRect(),c=Number.isFinite(e.maxHeight)?Math.min(e.maxHeight,window.innerHeight):window.innerHeight,d=Math.min(c,(r=e.height)!=null?r:l.height),f=Zv(e.location.y,d,e.verticalPos,o);f+d>window.innerHeight-8&&(e.alternateLocation?(f=Zv(e.alternateLocation.y,d,e.verticalPos,o),f+d>window.innerHeight-8&&(f=void 0)):f=void 0),Number.isFinite(f)||(f=Math.max(8,window.innerHeight-8-d),8+d>window.innerHeight-8&&(t.style.bottom="8px")),d=Math.min(f+d,window.innerHeight-8)-f;let p=Number.isFinite(e.maxWidth)?Math.min(e.maxWidth,window.innerWidth):window.innerWidth,y=Math.min(p,(i=e.width)!=null?i:l.width),v=Zv(e.location.x,y,e.horizontalPos,o);v+y>window.innerWidth-8&&(e.alternateLocation?(v=Lj(e.alternateLocation.x,y,e.verticalPos,o),v+y>window.innerWidth-8&&(v=void 0)):v=void 0),Number.isFinite(v)||(v=Math.max(8,window.innerWidth-8-y),8+y>window.innerWidth-8&&(t.style.right="8px")),y=Math.min(v+y,window.innerWidth-8)-v,o==="rtl"?t.style.right=`${Math.ceil(window.innerWidth-v-y).toString()}px`:t.style.left=`${Math.ceil(v).toString()}px`,t.style.top=`${Math.ceil(f).toString()}px`,d!==l.height&&(t.style.height=`${Math.ceil(d).toString()}px`),y!==l.width&&(t.style.width=`${Math.ceil(y).toString()}px`)}function Ij(t,e){return Math.hypot(e.x-t.x,e.y-t.y)}function Jc(t){return"submenu"in t}function mo(t){return"type"in t&&t.type==="command"||"onMenuSelect"in t||"id"in t}function y2(t){return"type"in t&&t.type==="divider"}function e4(t){return"type"in t&&t.type==="heading"}var KE={};function t4(t){let e=KE[t];if(!e){let n;switch(t){case"checkmark":n=`<span aria-hidden="true" class="ui-checkmark"><svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"></path></svg>
      </span>`;break;case"trailing-chevron":n='<span aria-hidden="true" class="ui-trailing-chevron"><svg focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></span>';break;case"mixedmark":n='<span aria-hidden="true" class="ui-mixedmark"><svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256c0-13.3 10.7-24 24-24H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24z"/></svg></span>'}if(n){let r=document.createElement("template");r.innerHTML=n,KE[t]=r,e=r}}if(e){if("content"in e)return e.content.cloneNode(!0);let n=document.createElement("svg");return n.innerHTML=e.innerHTML,n}}var $E=80,uT=class{constructor(t,e){this._className="",this._element=null;var n;this.parentMenu=e,this._declaration=t,Object.freeze(this._declaration),Jc(t)?(this.type="submenu",this.submenu=new cT(t.submenu,{parentMenu:e,submenuClass:t.submenuClass,columnCount:t.columnCount})):this.type=(n=t.type)!=null?n:"command",this.hasCheck=mo(t)&&t.checked!==void 0}get rootMenu(){return this.parentMenu.rootMenu}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}dispose(){var t,e;(t=this._abortController)==null||t.abort(),this._abortController=void 0,(e=this._element)==null||e.remove(),this._element=null,this.submenu&&this.submenu.dispose(),this.submenu=void 0}get menuItem(){return this._declaration}get label(){var t;return(t=this._label)!=null?t:""}set label(t){t===void 0&&(t=""),t!==this._label&&(this._label=t,this.dirty=!0)}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.dirty=!0)}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this.element&&(t?this.element.removeAttribute("aria-disabled"):this.element.setAttribute("aria-disabled","true")),this.dirty=!0}get checked(){return this._checked}set checked(t){this._checked=t,this.dirty=!0}get tooltip(){return this._tooltip}set tooltip(t){t!==this._tooltip&&(this._tooltip=t,this.dirty=!0)}get ariaLabel(){return this._ariaLabel}set ariaLabel(t){t!==this._ariaLabel&&(this._ariaLabel=t,this.dirty=!0)}get active(){var t,e;return(e=(t=this.element)==null?void 0:t.classList.contains("active"))!=null?e:!1}set active(t){this.element&&this.element.classList.toggle("active",t)}updateState(t){var e,n,r;let i=this._declaration;if(y2(i)){this.enabled=!1,this.checked=!1;return}e4(i)&&(this.enabled=!1,this.checked=!1,this.visible=!0),mo(i)&&(this.checked=(e=Gl(i.checked,t))!=null?e:!1),(mo(i)||Jc(i))&&(this.enabled=(n=Gl(i.enabled,t))!=null?n:!0,this.visible=(r=Gl(i.visible,t))!=null?r:!0,this.visible&&this.enabled&&this.submenu&&(this.submenu.updateState(t),this.submenu.visible||(this.visible=!1))),(mo(i)||e4(i)||Jc(i))&&(this.label=Gl(i.label,t),this._className=Gl(i.class,t),this.tooltip=Gl(i.tooltip,t),this.ariaLabel=Gl(i.ariaLabel,t)),this._element&&this.updateElement()}set dirty(t){t&&this.parentMenu&&(this.parentMenu.dirty=!0)}updateElement(){var t;if(!this.visible||!this.element)return;let e=this.element;e.textContent="",e.className="",e.className=(t=this._className)!=null?t:"",this.enabled?e.removeAttribute("aria-disabled"):e.setAttribute("aria-disabled","true"),this.checked===!0?(e.setAttribute("aria-checked","true"),e.append(t4("checkmark"))):this.checked==="mixed"?(e.setAttribute("aria-checked","mixed"),e.append(t4("mixedmark"))):e.removeAttribute("aria-checked"),this.ariaLabel&&e.setAttribute("aria-label",this.ariaLabel);let n=document.createElement("span");if(n.className=this.parentMenu.hasCheck?"label indent":"label",this.type==="heading"&&n.classList.add("heading"),n.innerHTML=this.label,e.append(n),this._tooltip&&e.setAttribute("data-tooltip",this._tooltip),mo(this._declaration)&&this._declaration.keyboardShortcut){let r=document.createElement("kbd");r.innerHTML=U3(this._declaration.keyboardShortcut),e.append(r)}this.type==="submenu"&&e.append(t4("trailing-chevron"))}get element(){if(this._element)return this._element;if(y2(this._declaration)){let n=document.createElement("li");return n.setAttribute("part","menu-divider"),n.setAttribute("role","divider"),this._element=n,n}let t=document.createElement("li");this._element=t,(mo(this._declaration)||e4(this._declaration)||Jc(this._declaration))&&t.setAttribute("part","menu-item"),t.setAttribute("tabindex","-1"),this.hasCheck?t.setAttribute("role","menuitemcheckbox"):t.setAttribute("role","menuitem"),this.type==="submenu"&&(t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded","false"));let e=this.abortController.signal;return t.addEventListener("pointerenter",this,{signal:e}),t.addEventListener("pointerleave",this,{signal:e}),t.addEventListener("pointerup",this,{signal:e}),t.addEventListener("click",this,{signal:e}),this._element}dispatchSelect(){var t;if(!mo(this._declaration))return;let e=new CustomEvent("menu-select",{cancelable:!0,bubbles:!0,detail:{modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data}});this.parentMenu.dispatchEvent(e)&&typeof this._declaration.onMenuSelect=="function"&&this._declaration.onMenuSelect({target:(t=this.parentMenu.host)!=null?t:void 0,modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data})}handleEvent(t){var e;if(!(!this.visible||!this.enabled)){if(t.type==="click"){this.rootMenu.state==="modal"&&this.select(),t.stopPropagation(),t.preventDefault();return}if(t.type==="pointerenter"){let n=t;this.rootMenu.cancelDelayedOperation(),this.parentMenu.isSubmenuOpen&&(e=this.parentMenu.activeMenuItem)!=null&&e.movingTowardSubmenu(n)?this.rootMenu.scheduleOperation(()=>{this.parentMenu.activeMenuItem=this,this.openSubmenu()}):(this.parentMenu.activeMenuItem=this,this.openSubmenu({withDelay:!0}));return}if(t.type==="pointerleave"){this.rootMenu.activeSubmenu===this.parentMenu&&(this.parentMenu.activeMenuItem=null);return}if(t.type==="pointerup"){this.rootMenu.state!=="modal"&&this.select(),t.stopPropagation(),t.preventDefault();return}}}select(){if(this.rootMenu.cancelDelayedOperation(),this.type==="submenu"){this.openSubmenu();return}this.active=!1,setTimeout(()=>{this.active=!0,setTimeout(()=>{this.active=!1,this.rootMenu.hide(),this.dispatchSelect()},$E)},$E)}openSubmenu(t){var e;if(this.type!=="submenu"||!this.element)return;if((e=t?.withDelay)!=null&&e){this.rootMenu.scheduleOperation(()=>this.openSubmenu());return}let n=this.element.getBoundingClientRect(),r=lT(this.element);this.submenu.show({container:this.rootMenu.element.parentNode,location:{x:UE(n,"trailing",r),y:n.top-4},alternateLocation:{x:UE(n,"leading",r),y:n.top-4}})}movingTowardSubmenu(t){if(!this.element||this.type!=="submenu")return!1;let e=this.rootMenu.lastMoveEvent;if(!e)return!1;let n=t.timeStamp-e.timeStamp;if(n>500)return!1;let r=t.clientX-e.clientX;if(Bj(r,e.clientY-t.clientY,n)<=.2)return!1;let i="right";if(this.submenu.element){let o=this.submenu.element.getBoundingClientRect(),l=this.element.getBoundingClientRect();o.left<l.left+l.width/2&&(i="left")}return i==="right"?r>0:r<0}};function Bj(t,e,n){return Math.hypot(t,e)/n}function Gl(t,e){return t===void 0||typeof t!="function"?t:(e!=null||(e={alt:!1,control:!1,shift:!1,meta:!1}),t(e))}var cT=class pf{constructor(e,n){this._element=null,this._activeMenuItem=null,this._dirty=!0;var r,i;this.parentMenu=(r=n?.parentMenu)!=null?r:null,this._submenuClass=n?.submenuClass,this.columnCount=(i=n?.columnCount)!=null?i:1,this.isSubmenuOpen=!1,this.menuItems=e}get children(){return Object.freeze([...this._menuItems])}set menuItems(e){let n=this.parentMenu;this.dispose(),this.parentMenu=n,e=[...e],this._menuItems=e.map(r=>r.onCreate?r.onCreate(r,this):new uT(r,this)),this.hasCheck=void 0,this.dirty=!0}dispose(){var e;this.hide(),this._element&&this._element.remove(),this._abortController&&this._abortController.abort(),(e=this._menuItems)==null||e.forEach(n=>n.dispose()),this._menuItems=[],this._activeMenuItem=null,this.parentMenu=null}handleEvent(e){if(e.type==="wheel"&&this._element){let n=e;this._element.scrollBy(0,n.deltaY),e.stopPropagation()}}dispatchEvent(e){return this.rootMenu.dispatchEvent(e)}get host(){return this.rootMenu.host}get rootMenu(){return this.parentMenu.rootMenu}updateState(e){var n,r,i;this._menuItems.forEach(f=>f.updateState(e));let o=this.hasCheck;this.hasCheck=this._menuItems.some(f=>f.visible&&f.hasCheck),this.hasCheck!==o&&this._menuItems.forEach(f=>f.updateState(e));let l,c=0;for(let f of this._menuItems)f.type==="heading"?(l&&c===0&&(l.visible=!1),l=f,c=0):f.type==="divider"&&l?(l.visible=c>0,l=void 0,c=0):l&&f.visible&&(c+=1);l&&(l.visible=c>0);let d=!0;for(let f of this._menuItems)f.type==="divider"?(f.visible=!d,d=!0):f.visible&&(d=!1);(n=this.activeMenuItem)!=null&&n.visible||(this.activeMenuItem=null),!((r=this.activeMenuItem)!=null&&r.enabled)&&((i=this.activeMenuItem)==null?void 0:i.type)==="submenu"&&this._activeMenuItem.submenu.hide(),this._dirty=!1}get enabled(){return this.updateIfDirty(),this._menuItems.some(e=>e.type!=="divider"&&e.visible&&e.enabled)}get visible(){return this.updateIfDirty(),this._menuItems.some(e=>e.type!=="divider"&&e.visible)}set dirty(e){this._dirty!==e&&e&&this.parentMenu&&(this._dirty=!0,this.parentMenu.dirty=!0)}updateIfDirty(){this._dirty&&this.updateState(this.rootMenu.modifiers)}updateElement(){var e;if(this._element){this._element.textContent="";for(let{element:n,visible:r}of this._menuItems)n&&r&&this._element.append(n);(e=this._element.querySelector("li:first-of-type"))==null||e.setAttribute("tabindex","0")}}get element(){if(this._element)return this._element;let e=document.createElement("menu");e.setAttribute("role","menu"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-orientation","vertical"),e.setAttribute("part","ui-menu-container"),this._submenuClass&&e.classList.add(this._submenuClass),e.classList.add("ui-menu-container"),this._abortController||(this._abortController=new AbortController);let n=this._abortController.signal;return e.addEventListener("focus",this,{signal:n}),e.addEventListener("wheel",this,{passive:!0,signal:n}),this._element=e,this.updateElement(),e}get activeMenuItem(){return this._activeMenuItem}set activeMenuItem(e){var n,r,i,o;if(this.rootMenu.cancelDelayedOperation(),e!==this._activeMenuItem){if(this.activeMenuItem){let l=this.activeMenuItem;l.active=!1,(n=l.submenu)==null||n.hide()}if(!((r=e?.visible)==null||r)){this._activeMenuItem=null;return}this._activeMenuItem=e,e&&(e.active=!0)}e?(i=e.element)==null||i.focus({preventScroll:!0}):(o=this._element)==null||o.focus({preventScroll:!0})}get firstMenuItem(){this.updateIfDirty();let e=0,n=!1,r=this._menuItems;for(;!n&&e<=r.length-1;){let i=r[e];n=i.type!=="divider"&&i.visible&&i.enabled,e+=1}return n?r[e-1]:null}get lastMenuItem(){this.updateIfDirty();let e=this._menuItems,n=e.length-1,r=!1;for(;!r&&n>=0;){let i=e[n];r=i.type!=="divider"&&i.visible&&i.enabled,n-=1}return r?e[n+1]:null}nextMenuItem(e){if(e===0)return this._activeMenuItem;if(!this._activeMenuItem)return e>0?this.firstMenuItem:this.lastMenuItem;if(!this.firstMenuItem||!this.lastMenuItem||!this._activeMenuItem)return null;this.updateIfDirty();let n=this._menuItems.indexOf(this.firstMenuItem),r=this._menuItems.indexOf(this.lastMenuItem),i=this._menuItems.indexOf(this._activeMenuItem),o=1;for(;i>=n&&i<=r;){i+=e>0?1:-1;let l=this._menuItems[i];if(!l)break;if(l.visible&&l.enabled){if(o===Math.abs(e))return this._menuItems[i];o+=1}}return e>0?this.lastMenuItem:this.firstMenuItem}getMenuItemColumn(e){this.updateIfDirty();let n=this._menuItems.filter(r=>r.visible&&r.enabled).indexOf(e);return n<0?-1:n%this.columnCount}static get collator(){return pf._collator||(pf._collator=new Intl.Collator(void 0,{usage:"search",sensitivity:"base"})),pf._collator}findMenuItem(e){var n;this.updateIfDirty();let r=this._menuItems.filter(c=>c.type!=="divider"&&c.visible&&c.enabled);if(r.length===0)return null;let i=Math.max(...r.map(c=>c.label.length))-e.length;if(i<0)return null;let o=null,l=0;for(;l<i&&!o;)o=(n=r.find(c=>pf.collator.compare(e,c.label.substring(l,e.length))===0))!=null?n:null,l++;return o}show(e){return!this.visible||!e.container?!1:(this.updateElement(),e.container.appendChild(this.element),x8()&&(this.element.popover="manual",this.element.showPopover()),e.location&&Rj(this.element,{location:e.location,alternateLocation:e.alternateLocation,verticalPos:"bottom",horizontalPos:"start"}),qE(),this.element.focus({preventScroll:!0}),jE(),this.parentMenu&&(this.parentMenu.openSubmenu=this),!0)}hide(){var e,n,r,i,o,l;this.openSubmenu=null,this.activeMenuItem=null,this.parentMenu&&(this.parentMenu.openSubmenu=null),!(!((e=this._element)!=null&&e.isConnected)||!this._element.parentElement)&&(x8()&&(n=this._element)!=null&&n.popover&&this._element.hidePopover(),qE(),(i=(r=this.parentMenu)==null?void 0:r.element)==null||i.focus(),(l=(o=this._element)==null?void 0:o.parentNode)==null||l.removeChild(this._element),jE())}set openSubmenu(e){var n,r,i,o;let l=e!==null;((n=this.activeMenuItem)==null?void 0:n.type)==="submenu"&&((r=this.activeMenuItem.element)==null||r.setAttribute("aria-expanded",l.toString())),(o=(i=this.activeMenuItem)==null?void 0:i.element)==null||o.classList.toggle("is-submenu-open",l),this.isSubmenuOpen=l}};function qE(){document.addEventListener("focusin",Ns,!0),document.addEventListener("focusout",Ns,!0),document.addEventListener("focus",Ns,!0),document.addEventListener("blur",Ns,!0)}function Ns(t){t.stopImmediatePropagation(),t.preventDefault()}function jE(){document.removeEventListener("focusin",Ns,!0),document.removeEventListener("focusout",Ns,!0),document.removeEventListener("focus",Ns,!0),document.removeEventListener("blur",Ns,!0)}var hT=class dT extends cT{constructor(e,n){var r;super(e),this.state="closed",this.typingBufferResetTimer=0,this.hysteresisTimer=0,this._updating=!1,this._host=(r=n?.host)!=null?r:null,this.isDynamic=e.some(fT),this._modifiers={shift:!1,control:!1,alt:!1,meta:!1},this.typingBuffer="",this.state="closed"}get modifiers(){return this._modifiers}set modifiers(e){Z$(this._modifiers,e)||(this._modifiers=e,this.dirty=!0)}get activeSubmenu(){let e=this;for(;e.isSubmenuOpen;)e=e.activeMenuItem.submenu;return e}set dirty(e){this._updating||this._dirty!==e&&(this._dirty=!0,e&&setTimeout(()=>{this.updateState(this.modifiers),this.updateElement()}))}updateState(e){this._updating=!0,this.modifiers=e??this.modifiers,super.updateState(this.modifiers),this._updating=!1}handleKeyupEvent(e){this.isDynamic&&(this.modifiers=su(e)),e.stopImmediatePropagation()}handleKeydownEvent(e){var n,r,i;if(e.key==="Tab"||e.key==="Escape"){this.hide();return}this.isDynamic&&(this.modifiers=su(e));let o=!0,l=this.activeSubmenu,c=l.activeMenuItem;switch(e.key){case" ":case"Space":case"Return":case"Enter":c?.select(su(e));break;case"ArrowRight":if(c?.type==="submenu")c.select(su(e)),this.activeSubmenu.activeMenuItem=this.activeSubmenu.firstMenuItem;else if(!c)l.activeMenuItem=l.firstMenuItem;else{let d=(n=l.getMenuItemColumn(c))!=null?n:-1;if(d>=0&&d<((r=l.columnCount)!=null?r:1)-1){let f=l.nextMenuItem(1);f&&(l.activeMenuItem=f)}}break;case"ArrowLeft":if(l===this.rootMenu)c||(l.activeMenuItem=l.firstMenuItem);else if((c&&(i=l.getMenuItemColumn(c))!=null?i:-1)<=0||!c){l.hide();let d=l.parentMenu.activeMenuItem;if(d){let{element:f}=d;f?.focus(),f?.classList.remove("is-submenu-open")}}else{let d=l.nextMenuItem(-1);d&&(l.activeMenuItem=d)}break;case"ArrowDown":l.activeMenuItem=l.nextMenuItem(l.columnCount);break;case"ArrowUp":l.activeMenuItem=l.nextMenuItem(-l.columnCount);break;case"Home":case"PageUp":l.activeMenuItem=l.firstMenuItem;break;case"End":case"PageDown":l.activeMenuItem=l.lastMenuItem;break;case"Backspace":if(this.typingBuffer&&(this.typingBuffer=this.typingBuffer.slice(0,-1),this.typingBuffer)){clearTimeout(this.typingBufferResetTimer);let d=l.findMenuItem(this.typingBuffer);d&&(l.activeMenuItem=d),this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer=""},500)}break;default:if(z1(e)){isFinite(this.typingBufferResetTimer)&&clearTimeout(this.typingBufferResetTimer),this.typingBuffer+=e.key;let d=l.findMenuItem(this.typingBuffer);d&&(l.activeMenuItem=d),this.typingBufferResetTimer=setTimeout(()=>{this.typingBuffer=""},500)}else o=!1}o&&(e.preventDefault(),e.stopPropagation())}handleEvent(e){if(e.type==="keydown")this.handleKeydownEvent(e);else if(e.type==="keyup")this.handleKeyupEvent(e);else if(e.type==="pointermove")this.lastMoveEvent=e;else if(e.type==="pointerup")Number.isFinite(this.rootMenu._openTimestamp)&&Date.now()-this.rootMenu._openTimestamp<120?this.state="modal":this.state==="modal"&&e.target===this.scrim&&this.hide();else if(e.type==="contextmenu"){e.preventDefault(),e.stopPropagation();return}super.handleEvent(e)}dispatchEvent(e){return this._host?this._host.dispatchEvent(e):!0}get host(){return this._host}get scrim(){return qi.element}connectScrim(e){let n=this.scrim;n.addEventListener("pointerup",this,!0),n.addEventListener("contextmenu",this),n.addEventListener("keydown",this),n.addEventListener("keyup",this),n.addEventListener("pointermove",this),qi.open({root:e,onDismiss:()=>this.hide()})}disconnectScrim(){let e=this.scrim;e.removeEventListener("pointerup",this,!0),e.removeEventListener("contextmenu",this),e.removeEventListener("keydown",this),e.removeEventListener("keyup",this),e.removeEventListener("pointermove",this),qi.state==="open"&&qi.scrim.close()}get rootMenu(){return this}show(e){return this._onDismiss=e?.onDismiss,e!=null&&e.modifiers&&(this.modifiers=e.modifiers),this.updateState(),this.connectScrim(e?.target),super.show(q(N({},e),{container:this.scrim}))?(this._openTimestamp=Date.now(),this.state="open",!0):(this.disconnectScrim(),!1)}hide(){this.cancelDelayedOperation(),this.state!==void 0&&(this.state!=="closed"&&(this.activeMenuItem=null,qi.element.parentElement.focus(),super.hide(),this.state="closed",this.disconnectScrim()),this._onDismiss&&(this._onDismiss(),this._onDismiss=void 0))}scheduleOperation(e){this.cancelDelayedOperation();let n=dT.SUBMENU_DELAY;if(n<=0){e();return}this.hysteresisTimer=setTimeout(()=>{this.hysteresisTimer=0,e()},n)}cancelDelayedOperation(){this.hysteresisTimer&&(clearTimeout(this.hysteresisTimer),this.hysteresisTimer=0)}};hT.SUBMENU_DELAY=120;var HE=hT;function fT(t){return y2(t)?!1:typeof t.label=="function"||typeof t.ariaLabel=="function"||typeof t.tooltip=="function"||(mo(t)||Jc(t))&&(typeof t.enabled=="function"||typeof t.visible=="function")||mo(t)&&typeof t.checked=="function"?!0:Jc(t)?t.submenu.some(fT):!1}var i1=class{};i1.DELAY=300,i1.MAX_DISTANCE=10;function Oj(t){return new Promise((e,n)=>{let r=Xg(t);r||e(!1);let i=r,o=setTimeout(()=>{l.abort(),e(Ij(i,r)<i1.MAX_DISTANCE)},i1.DELAY),l=new AbortController,c=l.signal;for(let d of["pointermove","pointerup","pointercancel"])window.addEventListener(d,f=>{if(f.type==="pointerup"||f.type==="pointercancel")clearTimeout(o),l.abort(),e(!1);else if(f.type==="pointermove"){let p=Xg(f);p&&(i=p)}},{passive:!0,signal:c})})}async function GE(t,e,n){if(t.defaultPrevented)return!1;if(t.type==="contextmenu"){let r=t;if(n.show({target:e,location:Xg(r),modifiers:su(r)}))return t.preventDefault(),t.stopPropagation(),!0}if(t.type==="keydown"){let r=t;if(r.code==="ContextMenu"||r.code==="F10"&&r.shiftKey){let i=e?.getBoundingClientRect();if(WE(e)&&i&&n.show({target:e,location:{x:Math.ceil(i.left+i.width/2),y:Math.ceil(i.top+i.height/2)},modifiers:su(r)}))return t.preventDefault(),t.stopPropagation(),!0}}if(t.type==="pointerdown"&&t.pointerType!=="mouse"&&t.button===0){let r=t.target;for(;r&&e!==r;)r=r.parentNode;if(!r||!n.visible)return!1;let i=Xg(t);if(await Oj(t))return n.state!=="closed"||!WE(e)?!1:(n.show({target:e,location:i}),!0)}return!1}function WE(t){return t.dispatchEvent(new Event("contextmenu",{cancelable:!0}))}var XE={acute:714,grave:715,dot:729,ddot:168,dddot:8411,ddddot:8412,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};oe(Object.keys(XE),"{body:auto}",{createAtom:t=>new I1(q(N({},t),{body:we(t.args[0]),accentChar:XE[t.command.slice(1)]}))});oe(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:t=>{let e=CM(we(t.args[0]));return new I1(q(N({},t),{body:we(t.args[0]),svgAccent:t.command.slice(1)+(e.length>5?"4":["1","1","2","2","3","3"][e.length])}))}});oe(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:t=>new I1(q(N({},t),{body:we(t.args[0]),svgAccent:"overarc"}))});oe(["underarc","underparen"],"{body:auto}",{createAtom:t=>new Li(q(N({},t),{body:we(t.args[0]),svgBelow:"underarc"}))});oe("utilde","{body:auto}",{createAtom:t=>{let e=we(t.args[0]),n=CM(e),r="widetilde"+(n.length>5?"4":["1","1","2","2","3","3"][n.length]);return new Li(q(N({},t),{body:e,svgBelow:r,boxType:sm(e)}))}});oe("^","{:string}",{createAtom:t=>{var e;return new re(q(N({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"â",e:"ê",i:"î",o:"ô",u:"û",A:"Â",E:"Ê",I:"Î",O:"Ô",U:"Û"}[t.args[0]])!=null?e:"^"}))}});oe("`","{:string}",{createAtom:t=>{var e;return new re(q(N({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"à",e:"è",i:"ì",o:"ò",u:"ù",A:"À",E:"È",I:"Ì",O:"Ò",U:"Ù"}[t.args[0]])!=null?e:"`"}))}});oe("'","{:string}",{createAtom:t=>{var e;return new re(q(N({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={a:"á",e:"é",i:"í",o:"ó",u:"ú",A:"Á",E:"É",I:"Í",O:"Ó",U:"Ú"}[t.args[0]])!=null?e:"'"}))}});oe('"',"{:string}",{createAtom:t=>{var e,n;return new re(q(N({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(n={a:"ä",e:"ë",i:"ï",o:"ö",u:"ü",A:"Ä",E:"Ë",I:"Ë",O:"Ö",U:"Ü"}[t.args[0]])!=null?n:'"'+t.args[0]:'"'}))}});oe(".","{:string}",{createAtom:t=>{var e,n;return new re(q(N({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(n={a:"ȧ",e:"ė",i:"̇i",o:"ȯ",u:"̇u",A:"Ȧ",E:"Ė",I:"İ",O:"Ȯ",U:"̇U"}[t.args[0]])!=null?n:"."+t.args[0]:"."}))}});oe("=","{:string}",{createAtom:t=>{var e,n;return new re(q(N({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:(e=t.args)!=null&&e[0]?(n={a:"ā",e:"ē",i:"ī",o:"ō",u:"ū",A:"Ā",E:"Ē",I:"Ī",O:"Ō",U:"Ū"}[t.args[0]])!=null?n:"="+t.args[0]:"="}))}});oe("~","{:string}",{createAtom:t=>{var e;return new re(q(N({type:"mord"},t),{isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={n:"ñ",N:"Ñ",a:"ã",o:"õ",A:"Ã",O:"Õ"}[t.args[0]])!=null?e:"´"}))}});oe("c","{:string}",{createAtom:t=>{var e;return new re(q(N({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&(e={c:"ç",C:"Ç"}[t.args[0]])!=null?e:""}))}});oe("enclose","{notation:string}[style:string]{body:auto}",{createAtom:t=>{var e,n;let r=t.args,i={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"none",svgStrokeStyle:void 0,borderStyle:void 0,style:(e=t.style)!=null?e:{}};if(r[1]){let l=r[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let c of l){let d=c.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(d)i.strokeWidth=d[1],i.strokeStyle=d[2],i.strokeColor=d[3];else{let f=c.match(/\s*([a-z]*)\s*=\s*"(.*)"/);f&&(f[1]==="mathbackground"?i.backgroundcolor=f[2]:f[1]==="mathcolor"?i.strokeColor=f[2]:f[1]==="padding"?i.padding=f[2]:f[1]==="shadow"&&(i.shadow=f[2]))}}i.strokeStyle==="dashed"?i.svgStrokeStyle="5,5":i.strokeStyle==="dotted"&&(i.svgStrokeStyle="1,5")}i.borderStyle=`${i.strokeWidth} ${i.strokeStyle} ${i.strokeColor}`;let o={};return((n=r[0])!=null?n:"").split(/[, ]/).filter(l=>l.length>0).forEach(l=>{o[l.toLowerCase()]=!0}),new lm(t.command,we(r[2]),o,i)}});oe("cancel","{body:auto}",{createAtom:t=>{var e;return new lm(t.command,we(t.args[0]),{updiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});oe("bcancel","{body:auto}",{createAtom:t=>{var e;return new lm(t.command,we(t.args[0]),{downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});oe("xcancel","{body:auto}",{createAtom:t=>{var e;return new lm(t.command,we(t.args[0]),{updiagonalstrike:!0,downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:(e=t.style)!=null?e:{}})}});oe(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:t=>{var e;return new Li(q(N({},t),{body:we((e=t.args)==null?void 0:e[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgAbove:t.command.slice(1)}))}});oe("overbrace","{:auto}",{createAtom:t=>new Li(q(N({},t),{body:we(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgAbove:t.command.slice(1)}))});oe(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:t=>new Li(q(N({},t),{body:we(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgBelow:t.command.slice(1)}))});oe(["underbrace"],"{:auto}",{createAtom:t=>new Li(q(N({},t),{body:we(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgBelow:t.command.slice(1)}))});oe(["xrightarrow","longrightarrow","xleftarrow","longleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","longleftrightarrow","xLeftrightarrow","xrightleftharpoons","longrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xleftrightarrows","longleftrightarrows","xRightleftharpoons","longRightleftharpoons","xLeftrightharpoons","longLeftrightharpoons"],"[:auto]{:auto}",{createAtom:t=>{var e,n,r,i,o;return new Li(q(N({},t),{svgBody:t.command.slice(1),above:((n=we((e=t.args)==null?void 0:e[1]))==null?void 0:n.length)===0?void 0:we((r=t.args)==null?void 0:r[1]),below:(o=we((i=t.args)==null?void 0:i[0]))!=null?o:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"rel"}))},serialize:(t,e)=>t.command+(t.hasEmptyBranch("below")?"":`[${t.belowToLatex(e)}]`)+`{${t.aboveToLatex(e)}}${t.supsubToLatex(e)}`});oe(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","deg","dim","exp","gcd","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,ifMode:"math",createAtom:t=>new Bu(t.command.slice(1),q(N({},t),{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up"}))});oe(["liminf","limsup"],"",{ifMode:"math",createAtom:t=>new Bu({"\\liminf":"lim inf","\\limsup":"lim sup"}[t.command],q(N({},t),{limits:"over-under",variant:"main"}))});oe(["lim","mod"],"",{ifMode:"math",createAtom:t=>new Bu(t.command.slice(1),q(N({},t),{limits:"over-under",variant:"main"}))});oe(["det","max","min"],"",{ifMode:"math",isFunction:!0,createAtom:t=>new Bu(t.command.slice(1),q(N({},t),{limits:"over-under",isFunction:!0,variant:"main"}))});oe("ang","{:math}",{ifMode:"math",createAtom:t=>new re(q(N({},t),{body:we(t.args[0])})),serialize:(t,e)=>`\\ang{${t.bodyToLatex(e)}}`,render:(t,e)=>{let n=t.createBox(e),r=n.caret;n.caret=void 0;let i=new be("°",{style:q(N({},t.style),{variant:"normal",variantStyle:"up"})});return new be([n,i],{type:"inner",isSelected:t.isSelected,caret:r})}});oe("sqrt","[index:auto]{radicand:expression}",{ifMode:"math",createAtom:t=>new IA(q(N({},t),{body:we(t.args[1]),index:t.args[0]?we(t.args[0]):void 0}))});oe(["frac","dfrac","tfrac","binom","dbinom","tbinom"],"{:expression}{:expression}",{ifMode:"math",createAtom:t=>{let e=N({},t),n=t.command,r=t.args;switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":e.hasBarLine=!0;break;case"\\atopfrac":e.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":e.hasBarLine=!1,e.leftDelim="(",e.rightDelim=")";break;case"\\cfrac":e.hasBarLine=!0,e.continuousFraction=!0;break}switch(n){case"\\dfrac":case"\\dbinom":e.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":e.mathstyleName="textstyle";break}return new Ru(r[0]?we(r[0]):[new Ia],r[1]?we(r[1]):[new Ia],e)},serialize:(t,e)=>{let n=t.aboveToLatex(e),r=t.belowToLatex(e);return/^[0-9]$/.test(n)&&/^[0-9]$/.test(r)?`${t.command}${n}${r}`:Bt(t.command,n,r)}});oe(["cfrac"],"[:string]{:expression}{:expression}",{ifMode:"math",createAtom:t=>{let e=N({},t),n=t.args;return e.hasBarLine=!0,e.continuousFraction=!0,n[0]==="r"&&(e.align="right"),n[0]==="l"&&(e.align="left"),new Ru(n[1]?we(n[1]):[new Ia],n[2]?we(n[2]):[new Ia],e)},serialize:(t,e)=>{let n=t.aboveToLatex(e),r=t.belowToLatex(e);return Bt(t.command,n,r)}});oe(["brace","brack"],"",{infix:!0,createAtom:t=>new Ru(we(t.args[0]),we(t.args[1]),q(N({},t),{hasBarLine:!1,leftDelim:t.command==="\\brace"?"\\lbrace":"\\lbrack",rightDelim:t.command==="\\brace"?"\\rbrace":"\\rbrack"})),serialize:(t,e)=>Ze([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});oe(["over","atop","choose"],"",{infix:!0,createAtom:t=>{let e,n,r=t.args;return t.command==="\\choose"&&(e="(",n=")"),new Ru(we(r[0]),we(r[1]),q(N({},t),{hasBarLine:t.command==="\\over",leftDelim:e,rightDelim:n}))},serialize:(t,e)=>Ze([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});oe(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:t=>{var e,n;let r=t.args;return new Ru(we(r[0]),we(r[1]),q(N({},t),{leftDelim:(e=r[2])!=null?e:".",rightDelim:(n=r[3])!=null?n:".",hasBarLine:!1}))},serialize:(t,e)=>`${t.aboveToLatex(e)} ${t.command}${t.leftDelim}${t.rightDelim}${t.belowToLatex(e)}`});oe("pdiff","{numerator}{denominator}",{ifMode:"math",createAtom:t=>new Ru(we(t.args[0]),we(t.args[1]),q(N({},t),{hasBarLine:!0,numerPrefix:"∂",denomPrefix:"∂"})),serialize:(t,e)=>Ze([t.aboveToLatex(e),t.command,t.belowToLatex(e)])});oe(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{ifMode:"math",createAtom:t=>new P3({coprod:"∐",bigvee:"⋁",bigwedge:"⋀",biguplus:"⨄",bigcap:"⋂",bigcup:"⋃",intop:"∫",prod:"∏",sum:"∑",bigotimes:"⨂",bigoplus:"⨁",bigodot:"⨀",bigsqcup:"⨆",smallint:"∫"}[t.command.slice(1)],q(N({},t),{limits:"auto",variant:"main"}))});oe("smallint","",{ifMode:"math",createAtom:t=>new Bu("∫",q(N({},t),{limits:"adjacent",variant:"main"}))});var YE={int:"∫",iint:"∬",iiint:"∭",oint:"∮",oiint:"∯",oiiint:"∰",intclockwise:"∱",varointclockwise:"∲",ointctrclockwise:"∳",intctrclockwise:"⨑",sqcup:"⊔",sqcap:"⊓",uplus:"⊎",wr:"≀",amalg:"⨿",Cap:"⋒",Cup:"⋓",doublecap:"⋒",doublecup:"⋓"};oe(Object.keys(YE),"",{ifMode:"math",createAtom:t=>{let e=t.command,n=YE[e.slice(1)];return new P3(n,q(N({},t),{limits:"adjacent",variant:{"⋒":"ams","⋓":"ams"}[n]}))}});oe(["Re","Im"],"",{ifMode:"math",createAtom:t=>new Bu({"\\Re":"ℜ","\\Im":"ℑ"}[t.command],q(N({},t),{limits:"adjacent",isFunction:!0,variant:"fraktur"}))});oe("middle","{:delim}",{ifMode:"math",createAtom:t=>{var e;return new _A(q(N({},t),{delim:(e=t.args[0])!=null?e:"|",size:1}))}});oe("the","{:value}",{createAtom:t=>new re(q(N({},t),{captureSelection:!0,verbatimLatex:null})),render:(t,e)=>{var n;let r=new lt({parent:e},t.style),i="";t.isSelected&&(i+=" ML__selected");let o=r.evaluate(t.args[0]);return new be(((n=Un(o))!=null?n:"").split("").map(l=>new be(l,{type:"ord",classes:i,mode:t.mode,isSelected:t.isSelected,style:N({variant:"main"},t.style)})),{type:"lift",style:t.style,caret:t.caret,isSelected:t.isSelected,classes:i}).wrap(r)},serialize:t=>{var e;return`\\the${(e=Un(t.args[0]))!=null?e:"\\relax"}`}});oe("mathtip","{:auto}{:math}",{createAtom:t=>new z3(q(N({},t),{body:we(t.args[0]),tooltip:we(t.args[1]),content:"math"})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\mathtip{${t.bodyToLatex(e)}}{${re.serialize([t.tooltip],q(N({},e),{defaultMode:"math"}))}}`});oe("texttip","{:auto}{:text}",{createAtom:t=>new z3(q(N({},t),{body:we(t.args[0]),tooltip:we(t.args[1]),content:"text"})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\texttip{${t.bodyToLatex(e)}}{${re.serialize([t.tooltip],q(N({},e),{defaultMode:"text"}))}}`});oe("error","{:math}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[0])})),serialize:(t,e)=>`\\error{${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__error"})});oe("ensuremath","{:math}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[0])})),serialize:(t,e)=>`${t.command}{${t.bodyToLatex(q(N({},e),{defaultMode:"math"}))}}`});oe("color","{:value}",{applyStyle:(t,e,n,r)=>{var i,o;return q(N({},t),{verbatimColor:(i=Un(n[0]))!=null?i:void 0,color:r.toColor((o=n[0])!=null?o:{string:"red"})})}});oe("textcolor","{:value}{content:auto*}",{applyStyle:(t,e,n,r)=>{var i,o;return q(N({},t),{verbatimColor:(i=Un(n[0]))!=null?i:void 0,color:r.toColor((o=n[0])!=null?o:{string:"red"})})}});oe("boxed","{content:math}",{createAtom:t=>new el(q(N({},t),{body:we(t.args[0]),framecolor:{string:"black"}}))});oe("colorbox","{:value}{:text*}",{applyStyle:(t,e,n,r)=>{var i,o;return q(N({},t),{verbatimBackgroundColor:(i=Un(n[0]))!=null?i:void 0,backgroundColor:r.toBackgroundColor((o=n[0])!=null?o:{string:"yellow"})})}});oe("fcolorbox","{frame-color:value}{background-color:value}{content:text}",{applyMode:"text",createAtom:t=>{var e,n;return new el(q(N({},t),{body:we(t.args[2]),framecolor:(e=t.args[0])!=null?e:{string:"blue"},backgroundcolor:(n=t.args[1])!=null?n:{string:"yellow"}}))},serialize:(t,e)=>{var n,r;return e.skipStyles?t.bodyToLatex(q(N({},e),{defaultMode:"text"})):Bt(t.command,(n=Un(t.framecolor))!=null?n:"",(r=Un(t.backgroundcolor))!=null?r:"",t.bodyToLatex(q(N({},e),{defaultMode:"text"})))}});oe("bbox","[:bbox]{body:auto}",{createAtom:t=>{var e;let n=t.args[0],r=we(t.args[1]);return n?new el(q(N({},t),{body:r,padding:n.padding,border:n.border,backgroundcolor:(e=n.backgroundcolor)!=null?e:void 0})):new el(q(N({},t),{body:r}))},serialize:(t,e)=>{var n,r;if(e.skipStyles)return t.bodyToLatex(e);let i=t.command;if(Number.isFinite(t.padding)||t.border!==void 0||t.backgroundcolor!==void 0){let o=[];t.padding&&o.push((n=Un(t.padding))!=null?n:""),t.border&&o.push(`border: ${t.border}`),t.backgroundcolor&&o.push((r=Un(t.backgroundcolor))!=null?r:""),i+=`[${o.join(",")}]`}return Bt(i,t.bodyToLatex(e))}});oe(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[0])})),render:(t,e)=>{let n=new lt({parent:e,mathstyle:t.command.slice(1)},t.style),r=re.createBox(n,t.body,{type:"lift"});return t.caret&&(r.caret=t.caret),t.bind(e,r)},serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`{${Ze([t.command,t.bodyToLatex(e)])}}`});oe(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(t,e)=>q(N({},t),{fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[e]})});oe("fontseries","{:string}",{ifMode:"text",applyStyle:(t,e,n)=>{var r;return q(N({},t),{fontSeries:(r=n[0])!=null?r:"auto"})}});oe("fontshape","{:string}",{ifMode:"text",applyStyle:(t,e,n)=>{var r;return q(N({},t),{fontShape:(r=n[0])!=null?r:"auto"})}});oe("fontfamily","{:string}",{ifMode:"text",applyStyle:(t,e,n)=>{var r;return q(N({},t),{fontFamily:(r=n[0])!=null?r:"roman"})}});oe("selectfont","",{ifMode:"text",applyStyle:t=>t});oe("bf","{:rest*}",{applyStyle:t=>q(N({},t),{fontSeries:"b",fontShape:"n",fontFamily:"roman"})});oe(["boldsymbol","bm","bold"],"{:math*}",{applyMode:"math",applyStyle:t=>q(N({},t),{variantStyle:"bold"})});oe("bfseries","{:rest*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontSeries:"b"})});oe("mdseries","{:rest*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontSeries:"m"})});oe("upshape","{:rest*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontShape:"n"})});oe("slshape","{:rest*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontShape:"sl"})});oe("scshape","{:rest*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontShape:"sc"})});oe("textbf","{:text*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontSeries:"b"})});oe("textmd","{:text*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontSeries:"m"})});oe("textup","{:text*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontShape:"n"})});oe("textnormal","{:text*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontShape:"n",fontSeries:"m"})});oe("textsl","{:text*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontShape:"sl"})});oe("textit","{:text*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontShape:"it"})});oe("textsc","{:text*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontShape:"sc"})});oe("textrm","{:text*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontFamily:"roman"})});oe("textsf","{:text*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontFamily:"sans-serif"})});oe("texttt","{:text*}",{applyMode:"text",applyStyle:t=>q(N({},t),{fontFamily:"monospace"})});oe("mathbf","{:math*}",{applyMode:"math",applyStyle:t=>q(N({},t),{variant:"normal",variantStyle:"bold"})});oe("mathit","{:math*}",{applyMode:"math",applyStyle:t=>q(N({},t),{variant:"main",variantStyle:"italic"})});oe("mathnormal","{:math*}",{applyMode:"math",applyStyle:t=>q(N({},t),{variant:"normal",variantStyle:"italic"})});oe("mathbfit","{:math*}",{applyMode:"math",applyStyle:t=>q(N({},t),{variant:"main",variantStyle:"bolditalic"})});oe("mathrm","{:math*}",{applyMode:"math",applyStyle:t=>q(N({},t),{variant:"normal",variantStyle:"up"})});oe("mathsf","{:math*}",{applyMode:"math",applyStyle:t=>q(N({},t),{variant:"sans-serif",variantStyle:"up"})});oe("mathtt","{:math*}",{applyMode:"math",applyStyle:t=>q(N({},t),{variant:"monospace",variantStyle:"up"})});oe("it","{:rest*}",{applyStyle:t=>q(N({},t),{fontSeries:"m",fontShape:"it",fontFamily:"roman",variantStyle:"italic"})});oe("rmfamily","{:rest*}",{applyStyle:t=>q(N({},t),{fontFamily:"roman"})});oe("sffamily","{:rest*}",{applyStyle:t=>q(N({},t),{fontFamily:"sans-serif"})});oe("ttfamily","{:rest*}",{applyStyle:t=>q(N({},t),{fontFamily:"monospace"})});oe(["Bbb","mathbb"],"{:math*}",{applyStyle:t=>q(N({},t),{variant:"double-struck",variantStyle:P1(t.variantStyle)})});oe(["frak","mathfrak"],"{:math*}",{applyStyle:t=>q(N({},t),{variant:"fraktur",variantStyle:P1(t.variantStyle)})});oe("mathcal","{:math*}",{applyStyle:t=>q(N({},t),{variant:"calligraphic",variantStyle:P1(t.variantStyle)})});oe("mathscr","{:math*}",{applyStyle:t=>q(N({},t),{variant:"script",variantStyle:P1(t.variantStyle)})});oe("mbox","{:text}",{ifMode:"math",createAtom:t=>new re(q(N({},t),{type:"mord",body:we(t.args[0]),mode:"math"})),serialize:(t,e)=>Bt("\\mbox",t.bodyToLatex(q(N({},e),{defaultMode:"text"})))});oe("text","{:text}",{ifMode:"math",applyMode:"text"});oe(["class","htmlClass"],"{name:string}{content:auto}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[1])})),serialize:(t,e)=>!t.args[0]||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`,render:(t,e)=>{var n;return t.createBox(e,{classes:(n=t.args[0])!=null?n:""})}});oe(["cssId","htmlId"],"{id:string}{content:auto}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[1])})),serialize:(t,e)=>{var n;return!((n=t.args)!=null&&n[0])||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var n;let r=t.createBox(e);return r.cssId=(n=t.args[0])!=null?n:"",r}});oe("htmlData","{data:string}{content:auto}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[1])})),serialize:(t,e)=>{var n;return!((n=t.args)!=null&&n[0])||e.skipStyles?t.bodyToLatex(e):`\\htmlData{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var n;let r=t.createBox(e);return r.htmlData=(n=t.args[0])!=null?n:"",r}});oe(["style","htmlStyle"],"{data:string}{content:auto}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[1])})),serialize:(t,e)=>{var n;return!((n=t.args)!=null&&n[0])||e.skipStyles?t.bodyToLatex(e):`${t.command}{${t.args[0]}}{${t.bodyToLatex(e)}}`},render:(t,e)=>{var n;let r=t.createBox(e);return r.htmlStyle=(n=t.args[0])!=null?n:"",r}});oe("href","{url:string}{content:auto}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[1])})),render:(t,e)=>{var n;let r=t.createBox(e),i=(n=t.args[0])!=null?n:"";return i&&(r.htmlData=`href=${i}`),r}});oe("em","{:rest}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[0])})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`{\\em ${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__emph",boxType:"lift"})});oe("emph","{:auto}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[1])})),serialize:(t,e)=>e.skipStyles?t.bodyToLatex(e):`\\emph{${t.bodyToLatex(e)}}`,render:(t,e)=>t.createBox(e,{classes:"ML__emph",boxType:"lift"})});var QE={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};oe(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:t=>{var e;return new wA(q(N({},t),{delim:(e=t.args[0])!=null?e:".",size:QE[t.command].size,delimType:QE[t.command].mclass}))}});oe(["hspace","hspace*"],"{width:value}",{createAtom:t=>{var e;return new um(q(N({},t),{width:(e=t.args[0])!=null?e:{dimension:0}}))}});oe(["mkern","kern","mskip","hskip","mspace"],"{width:value}",{createAtom:t=>{var e;return new um(q(N({},t),{width:(e=t.args[0])!=null?e:{dimension:0}}))}});oe("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:t=>new re(t),render:(t,e)=>{let n=0,r=e.mathstyle.id;(r===R1||r===eu)&&(n=1),(r===oh||r===Qr)&&(n=2),(r===ou||r===or)&&(n=3);let i=we(t.args[n]);return re.createBox(e,i)},serialize:(t,e)=>`\\mathchoice{${re.serialize(t.args[0],e)}}{${re.serialize(t.args[1],e)}}{${re.serialize(t.args[2],e)}}{${re.serialize(t.args[3],e)}}`});oe("mathop","{:auto}",{createAtom:t=>new re(q(N({},t),{type:"mop",body:we(t.args[0]),limits:"over-under",isFunction:!0,captureSelection:!0})),render:(t,e)=>{var n;let r=re.createBox(e,t.body);if(t.superscript||t.subscript){let i=(n=t.subsupPlacement)!=null?n:"auto";r=i==="over-under"||i==="auto"&&e.isDisplayStyle?t.attachLimits(e,{base:r}):t.attachSupsub(e,{base:r})}return t.caret&&(r.caret=t.caret),new be(t.bind(e,r),{type:"op",isSelected:t.isSelected,classes:"ML__op-group"})},serialize:(t,e)=>{let n=[Bt(t.command,t.bodyToLatex(e))];return t.explicitSubsupPlacement&&(t.subsupPlacement==="over-under"&&n.push("\\limits"),t.subsupPlacement==="adjacent"&&n.push("\\nolimits"),t.subsupPlacement==="auto"&&n.push("\\displaylimits")),n.push(t.supsubToLatex(e)),Ze(n)}});oe(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:t=>new re(q(N({},t),{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[t.command],body:we(t.args[0])}))});oe(["operatorname","operatorname*"],"{operator:math}",{createAtom:t=>{let e=we(t.args[0]).map(n=>{var r;return n.type!=="first"&&(n.type="mord",n.value=(r={"∗":"*","−":"-"}[n.value])!=null?r:n.value,n.isFunction=!1,!n.style.variant&&!n.style.variantStyle&&(n.style.variant="main",n.style.variantStyle="up")),n});return new re(q(N({},t),{type:"mop",body:e,isFunction:!0,limits:t.command==="\\operatorname"?"adjacent":"over-under"}))},render:(t,e)=>{var n;let r=re.createBox(e,t.body);if(t.superscript||t.subscript){let i=(n=t.subsupPlacement)!=null?n:"auto";r=i==="over-under"||i==="auto"&&e.isDisplayStyle?t.attachLimits(e,{base:r}):t.attachSupsub(e,{base:r})}return t.caret&&(r.caret=t.caret),new be(t.bind(e,r),{type:"op",isSelected:t.isSelected,classes:"ML__op-group"})},serialize:(t,e)=>{let n=[Bt(t.command,t.bodyToLatex(e))];return t.explicitSubsupPlacement&&(t.subsupPlacement==="over-under"&&n.push("\\limits"),t.subsupPlacement==="adjacent"&&n.push("\\nolimits"),t.subsupPlacement==="auto"&&n.push("\\displaylimits")),n.push(t.supsubToLatex(e)),Ze(n)}});oe(["char","unicode"],"{charcode:value}",{createAtom:t=>new re(q(N({},t),{type:t.mode==="text"?"text":"mord"})),serialize:t=>{var e;return`${t.command}${Un((e=t.args[0])!=null?e:{number:10067,base:"hexadecimal"})}`},render:(t,e)=>{let n=e.evaluate(t.args[0]);return(!n||!("number"in n))&&(n={number:10067,base:"hexadecimal"}),t.value=String.fromCodePoint(n.number),t.createBox(e)}});oe("rule","[raise:value]{width:value}{thickness:value}",{createAtom:t=>new re(t),render:(t,e)=>{var n,r,i;let o=new lt({parent:e,mathstyle:"textstyle"},t.style),l=o.toEm((n=t.args[0])!=null?n:{dimension:0}),c=o.toEm((r=t.args[1])!=null?r:{dimension:10}),d=o.toEm((i=t.args[2])!=null?i:{dimension:10}),f=new be(null,{classes:"ML__rule",type:"ord"});return f.width=c,f.height=d+l,f.depth=-l,f.setStyle("border-right-width",c,"em"),f.setStyle("border-top-width",d,"em"),f.setStyle("border-color",t.style.color),f.setStyle("vertical-align",l,"em"),t.isSelected&&f.setStyle("opacity","50%"),t.bind(o,f),t.caret&&(f.caret=t.caret),f.wrap(e)},serialize:t=>`\\rule${t.args[0]?`[${Un(t.args[0])}]`:""}{${Un(t.args[1])}}{${Un(t.args[2])}}`});oe(["overline","underline"],"{:auto}",{createAtom:t=>new re(q(N({},t),{body:we(t.args[0])})),render:(t,e)=>{let n=t.command.substring(1),r=new lt({parent:e,mathstyle:"cramp"},t.style),i=re.createBox(r,t.body);if(!i)return null;let o=r.metrics.defaultRuleThickness/r.scalingFactor,l=new be(null,{classes:n+"-line"});l.height=o,l.maxFontSize=o*1.125*r.scalingFactor;let c;return n==="overline"?c=new mn({shift:0,children:[{box:i},3*o,{box:l},o]}):c=new mn({top:i.height,children:[o,{box:l},3*o,{box:i}]}),t.caret&&(c.caret=t.caret),new be(c,{classes:n,type:"ignore"})}});oe("overset","{:auto}{base:auto}",{createAtom:t=>{let e=we(t.args[1]);return new Li(q(N({},t),{above:we(t.args[0]),body:e,skipBoundary:!1,boxType:sm(e)}))},serialize:(t,e)=>Bt(t.command,t.aboveToLatex(e),t.bodyToLatex(e))});oe("underset","{:auto}{base:auto}",{createAtom:t=>{let e=we(t.args[1]);return new Li(q(N({},t),{below:we(t.args[0]),body:e,skipBoundary:!1,boxType:sm(e)}))},serialize:(t,e)=>Bt(t.command,t.belowToLatex(e),t.bodyToLatex(e))});oe("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:t=>{let e=we(t.args[2]);return new Li(q(N({},t),{above:we(t.args[0]),below:we(t.args[1]),body:e,skipBoundary:!1,boxType:sm(e)}))},serialize:(t,e)=>Bt(t.command,t.belowToLatex(e),t.bodyToLatex(e))});oe(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:t=>new Li(q(N({},t),{body:we(t.args[2]),above:we(t.args[1]),below:we(t.args[0]),skipBoundary:!1,boxType:t.command==="\\stackrel"?"rel":"bin"})),serialize:(t,e)=>Bt(t.command,t.aboveToLatex(e),t.bodyToLatex(e))});oe("smash","[:string]{:auto}",{createAtom:t=>{var e,n,r,i;return new Rh(q(N({},t),{body:we(t.args[1]),smashHeight:(n=(e=t.args[0])==null?void 0:e.includes("t"))!=null?n:!0,smashDepth:(i=(r=t.args[0])==null?void 0:r.includes("b"))!=null?i:!0}))}});oe("vphantom","{:auto}",{createAtom:t=>new Rh(q(N({},t),{body:we(t.args[0]),isInvisible:!0,smashWidth:!0}))});oe("hphantom","{:auto}",{createAtom:t=>new Rh(q(N({},t),{body:we(t.args[0]),isInvisible:!0,smashHeight:!0,smashDepth:!0}))});oe("phantom","{:auto}",{createAtom:t=>new Rh(q(N({},t),{body:we(t.args[0]),isInvisible:!0}))});oe("mathstrut","",{createAtom:t=>new Rh(q(N({},t),{body:[new re({value:"("})],isInvisible:!0}))});oe("not","{:math}",{createAtom:t=>{let e=we(t.args[0]);return e.length===0?new re(q(N({},t),{type:"mrel",value:""})):new re(q(N({},t),{body:[new Iu(q(N({},t),{body:"",align:"right"})),...e],captureSelection:!0}))},serialize:(t,e)=>{let n=t.args[0],r=n&&typeof n=="object"&&"group"in n;return t.value!==""?r?`\\not{${re.serialize(n.group,e)}}`:`\\not${re.serialize(n,e)}`:r?"\\not{}":"\\not"},render:(t,e)=>{if(t.value)return t.createBox(e);let n=t.args[0]&&typeof t.args[0]=="object"&&"group"in t.args[0]?"ord":sm(we(t.args[0])),r=re.createBox(e,t.body,{type:n});return t.caret&&(r.caret=t.caret),t.bind(e,r)}});oe(["ne","neq"],"",{createAtom:t=>new re(q(N({},t),{type:"mrel",body:[new Iu(q(N({},t),{body:"",align:"right",boxType:"rel"})),new re(q(N({},t),{value:"="}))],captureSelection:!0})),serialize:t=>t.command});oe("rlap","{:auto}",{createAtom:t=>new Iu(q(N({},t),{body:we(t.args[0]),align:"right"}))});oe("llap","{:auto}",{createAtom:t=>new Iu(q(N({},t),{body:we(t.args[0]),align:"left"}))});oe("mathrlap","{:math}",{createAtom:t=>new Iu(q(N({},t),{body:we(t.args[0]),align:"right"}))});oe("mathllap","{:math}",{createAtom:t=>new Iu(q(N({},t),{body:we(t.args[0]),align:"left"}))});oe("raisebox","{:value}{:text}",{createAtom:t=>{var e;return new el(q(N({},t),{body:we(t.args[1]),padding:{dimension:0},offset:(e=t.args[0])!=null?e:{dimension:0}}))},serialize:(t,e)=>{var n;return Bt("\\raisebox",(n=Un(t.offset))!=null?n:"0pt",t.bodyToLatex(e))}});oe("raise","{:value}{:auto}",{createAtom:t=>{var e;return new el(q(N({},t),{body:we(t.args[1]),padding:{dimension:0},offset:(e=t.args[0])!=null?e:{dimension:0}}))},serialize:(t,e)=>{var n;return Bt("\\raise",(n=Un(t.offset))!=null?n:"0pt",t.bodyToLatex(e))}});oe("lower","{:value}{:auto}",{createAtom:t=>{var e;return new el(q(N({},t),{body:we(t.args[1]),padding:{dimension:0},offset:(e=ba(t.args[0],-1))!=null?e:{dimension:0}}))},serialize:(t,e)=>{var n,r;return Bt("\\lower",(r=Un(ba((n=t.offset)!=null?n:{dimension:0},-1)))!=null?r:"0pt",t.bodyToLatex(e))}});In("0123456789/@.?!");kM(65,90);kM(97,122);In([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]);In([["\\#",35],["\\&",38],["\\parallelogram",9649],["\\spadesuit",9824],["\\heartsuit",9825],["\\diamondsuit",9826],["\\clubsuit",9827],["\\flat",9837],["\\natural",9838],["\\sharp",9839]]);In([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\pounds",163],["\\euro",8364]]);In([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel");In([["\\mapsfrom",8612,"mrel"],["\\Mapsfrom",10502,"mrel"],["\\MapsTo",10503,"mrel"],["\\Yup",8516,"mord"],["\\lightning",8623,"mrel"],["\\leftarrowtriangle",8701,"mrel"],["\\rightarrowtriangle",8702,"mrel"],["\\leftrightarrowtriangle",8703,"mrel"],["\\boxdot",8865,"mbin"],["\\bigtriangleup",9651,"mbin"],["\\bigtriangledown",9661,"mbin"],["\\boxbar",9707,"mbin"],["\\Lbag",10181,"mopen"],["\\Rbag",10182,"mclose"],["\\llbracket",10214,"mopen"],["\\rrbracket",10215,"mclose"],["\\longmapsfrom",10235,"mrel"],["\\Longmapsfrom",10237,"mrel"],["\\Longmapsto",10238,"mrel"],["\\boxslash",10692,"mbin"],["\\boxbslash",10693,"mbin"],["\\boxast",10694,"mbin"],["\\boxcircle",10695,"mbin"],["\\boxbox",10696,"mbin"],["\\fatsemi",10783,"mop"],["\\leftslice",10918,"mrel"],["\\rightslice",10919,"mrel"],["\\interleave",10996,"mbin"],["\\biginterleave",11004,"mop"],["\\sslash",11005,"mbin"],["\\talloblong",11006,"mbin"]]);In([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]);In([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\twoheadrightarrowtail",10518],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nleftarrow",8602],["\\nrightarrow",8603],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\nvrightarrow",8696],["\\nvtwoheadrightarrow",10496],["\\nvrightarrowtail",10516],["\\nvtwoheadrightarrowtail",10519],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams");In([["+",43],["-",8722],["−",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin");In([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams");In([["\\surd",8730],["\\S",167],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\varkappa",1008,"mord","ams"],["\\coppa",985,"mord","ams"],["\\koppa",985,"mord","ams"],["\\Coppa",984,"mord","ams"],["\\Koppa",984,"mord","ams"],["\\sampi",993,"mord","ams"],["\\Sampi",992,"mord","ams"],["\\emptyset",8709]]);In([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\coloneqq",8788],["\\colonequals",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",10178],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel");In([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams");In([["\\wp",8472],["\\aleph",8501]]);In([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams");In([["\\ ",160],["~",160]],"space");oe(["!",",",":",";",">","enskip","enspace","quad","qquad"],"",{createAtom:t=>new um(t)});oe("space","",{createAtom:t=>new um(t)});In([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct");In([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner");In([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var mT="<mo>&#x2061;</mo>",a1="<mo>&#8290;</mo>";function mg(t){return t.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Tt(t,e){return!t||!e.generateID?"":` extid="${t}"`}function Nj(t,e,n){var r,i,o,l,c,d,f,p;let y=!1;e=e??t.atoms.length;let v="",x="",S=t.atoms[t.index],R=(r=S.style)==null?void 0:r.variant,I=(i=S.style)==null?void 0:i.variantStyle,L="";if(S.value&&(R||I)){let z=(o=K4(S.value,R,I))!=null?o:S.value;if(z!==S.value)return t.index+=1,v=`<mi${Tt(S.id,n)}>${z}</mi>`,Ea(v,t,n)||(t.mathML+=v,t.lastType="mi"),!0;L=(l={upnormal:"normal",boldnormal:"bold",italicmain:"italic",bolditalicmain:"bold-italic","updouble-struck":"double-struck","double-struck":"double-struck",boldfraktur:"bold-fraktur",calligraphic:"script",upcalligraphic:"script",script:"script",boldscript:"bold-script",boldcalligraphic:"bold-script",fraktur:"fraktur","upsans-serif":"sans-serif","boldsans-serif":"bold-sans-serif","italicsans-serif":"sans-serif-italic","bolditalicsans-serif":"sans-serif-bold-italic",monospace:"monospace"}[(I??"")+(R??"")])!=null?l:"",L&&(L=` mathvariant="${L}"`)}let j={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"ℏ","\\cdotp":"⋅","\\ldots":"…","\\cdots":"⋯","\\ddots":"⋱","\\vdots":"⋮","\\ldotp":"."};if(S.command==="!")return t.index+=1,v="<mo>!</mo>",Ea(v,t,n)||(t.mathML+=v,t.lastType="mo"),!0;if(j[S.command]){t.index+=1;let z=`<mi${Tt(S.id,n)}${L}>${j[S.command]}</mi>`;return(t.lastType==="mi"||t.lastType==="mn"||t.lastType==="mtext"||t.lastType==="fence")&&(z=a1+z),Ea(z,t,n)||(t.mathML+=z,t.lastType="mi"),!0}if(S.command==="\\operatorname")x=uh(S.body),t.index+=1;else if(R||I)for(;t.index<e&&(S.type==="mord"||S.type==="macro")&&!S.isDigit()&&R===((d=(c=S.style)==null?void 0:c.variant)!=null?d:"")&&I===((p=(f=S.style)==null?void 0:f.variantStyle)!=null?p:"");)x+=uh([S]),t.index+=1,S=t.atoms[t.index];else(S.type==="mord"||S.type==="macro")&&!S.isDigit()&&(x+=uh([S]),t.index+=1);if(x.length>0){y=!0,v=`<mi${L}>${x}</mi>`;let z=t.lastType;v.endsWith(">f</mi>")||v.endsWith(">g</mi>")?(v+=mT,t.lastType="applyfunction"):t.lastType=/^<mo>(.*)<\/mo>$/.test(v)?"mo":"mi",Ea(v,t,n)||((z==="mi"||z==="mn"||z==="mtext"||z==="fence")&&(v=a1+v),t.mathML+=v)}return y}function pT(t){return t.index<t.atoms.length&&t.atoms[t.index].superscript&&t.atoms[t.index].type==="subsup"}function gT(t){let e=-1,n=t.index,r=!1,i=!1;for(;n<t.atoms.length&&!r&&!i;){let o=t.atoms[n];r=!o.isDigit(),i=!r&&o.superscript!==void 0,n++}return i&&(e=n-1),e}function Ea(t,e,n){var r;let i=e.atoms[e.index-1];if(!i)return!1;if(!i.superscript&&!i.subscript)if(((r=e.atoms[e.index])==null?void 0:r.type)==="subsup")i=e.atoms[e.index],e.index+=1;else return!1;let o=e.lastType;e.lastType="";let l=gt(i.superscript,n);e.lastType="";let c=gt(i.subscript,n);if(e.lastType=o,!l&&!c)return!1;let d="";return l&&c?d=`<msubsup>${t}${c}${l}</msubsup>`:l?d=`<msup>${t}${l}</msup>`:c&&(d=`<msub>${t}${c}</msub>`),e.mathML+=d,e.lastType="",!0}function Pj(t,e,n){e=e??t.atoms.length;let r=t.index,i="",o=gT(t);for(o>=0&&o<e&&(e=o);t.index<e&&t.atoms[t.index].mode==="text";)i+=t.atoms[t.index].value?t.atoms[t.index].value:" ",t.index+=1;return i.length>0?(i=`<mtext ${Tt(t.atoms[r].id,n)}>${i}</mtext>`,o<0&&pT(t)&&(o=t.index,t.index+=1),Ea(i,t,n)||(t.mathML+=i,t.lastType="mtext"),!0):!1}function zj(t,e,n){e=e??t.atoms.length;let r=t.index,i="",o=gT(t);for(o>=0&&o<e&&(e=o);t.index<e&&t.atoms[t.index].isDigit();)i+=t.atoms[t.index].asDigit(),t.index+=1;return i.length<=0?!1:(i="<mn"+Tt(t.atoms[r].id,n)+">"+i+"</mn>",o<0&&pT(t)&&(o=t.index,t.index+=1),Ea(i,t,n)||(t.mathML+=i,t.lastType="mn"),!0)}function Vj(t,e,n){let r=!1;e=e??t.atoms.length;let i="",o="";if(t.index<e&&t.atoms[t.index].type==="mopen"){let l=!1,c=0,d=t.index,f=-1,p=d+1;for(;p<e&&!l;)t.atoms[p].type==="mopen"?c+=1:t.atoms[p].type==="mclose"&&(c-=1),c===-1&&(l=!0,f=p),p+=1;l&&(i="<mrow>",i+=mu(t.atoms[d],n),i+=gt(t.atoms,n,d+1,f),i+=mu(t.atoms[f],n),i+="</mrow>",t.index=f+1,(t.lastType==="mi"||t.lastType==="mn"||t.lastType==="mfrac"||t.lastType==="fence")&&(t.mathML+=a1),Ea(i,t,n)&&(r=!0,t.lastType="",i=""),o="fence")}return i.length>0&&(r=!0,t.mathML+=i,t.lastType=o),r}function Fj(t,e,n){let r=!1;e=e??t.atoms.length;let i="",o="",l=t.atoms[t.index];if(!l)return!1;let c={"\\ne":"&ne;","\\neq":"&ne;","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"∥","\\mid":"∣","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lbrack":"[","\\rbrack":"]","\\lparen":"(","\\rparen":")","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉"};if(c[l.command]){t.index+=1;let d=`<mo${Tt(l.id,n)}>${c[l.command]}</mo>`;return Ea(d,t,n)||(t.mathML+=d,t.lastType="mo"),!0}if(t.index<e&&(l.type==="mbin"||l.type==="mrel"))i+=b2(t.atoms[t.index],n),t.index+=1,o="mo";else if(t.index<e&&(l.type==="mop"||l.type==="operator"||l.type==="extensible-symbol")){if(l.subsupPlacement==="over-under"&&(l.superscript||l.subscript)){let d=mu(l,n);return l.superscript&&l.subscript?(i+="<munderover>"+d,i+=gt(l.subscript,n),i+=gt(l.superscript,n),i+="</munderover>"):l.superscript?(i+="<mover>"+d,i+=gt(l.superscript,n),i+="</mover>"):l.subscript&&(i+="<munder>"+d,i+=gt(l.subscript,n),i+="</munder>"),t.mathML+=i,t.lastType="mo",t.index+=1,!0}{let d=t.atoms[t.index],f=d.value==="\\operatorname",p=f?'<mi class="MathML-Unit"'+Tt(d.id,n)+">"+uh(d.value)+"</mi>":mu(d,n);i+=p,!f&&!/^<mo>(.*)<\/mo>$/.test(p)?(i+=mT,o="applyfunction"):o=f?"mi":"mo"}(t.lastType==="mi"||t.lastType==="mn")&&!/^<mo>(.*)<\/mo>$/.test(i)&&(i=a1+i),t.index+=1}return i.length>0&&(r=!0,Ea(i,t,n)||(t.mathML+=i,t.lastType=o)),r}function gt(t,e,n,r){e!=null||(e={});let i={atoms:[],index:n??0,mathML:"",lastType:""};if(typeof t=="number"||typeof t=="boolean")i.mathML=t.toString();else if(typeof t=="string")i.mathML=t;else if(t instanceof re)i.mathML=b2(t,e);else if(Array.isArray(t)){i.atoms=t;let o=0;for(r=r||(t?t.length:0);i.index<r;)if(Pj(i,r,e)||zj(i,r,e)||Nj(i,r,e)||Fj(i,r,e)||Vj(i,r,e))o+=1;else if(i.index<r){let l=b2(i.atoms[i.index],e);i.lastType==="mn"&&l.length>0&&i.atoms[i.index].type==="genfrac"&&(l="<mo>&#x2064;</mo>"+l),i.atoms[i.index].type==="genfrac"?i.lastType="mfrac":i.lastType="",i.index+=1,Ea(l,i,e)?o+=1:l.length>0&&(i.mathML+=l,o+=1)}o>1&&(i.mathML="<mrow>"+i.mathML+"</mrow>")}return i.mathML}function mu(t,e){let n="",r=uh(t.value);return r&&(n="<mo"+Tt(t.id,e)+">"+r+"</mo>"),n}function uh(t){if(!t)return"";if(typeof t=="string")return mg(t);if(!Array.isArray(t)&&typeof t.body=="string")return mg(t.body);let e="";for(let n of t)typeof n.value=="string"&&(e+=n.value);return mg(e)}function b2(t,e){var n,r,i,o,l,c,d,f,p,y,v,x,S,R,I,L,j,z,G,ie,B,M,A;if(t.mode==="text")return`<mi${Tt(t.id,e)}>${t.value}</mi>`;let C={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",longleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",longrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",longrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xleftrightarrows:"⇄",xRightleftharpoons:"⇌",longRightleftharpoons:"⇌",xLeftrightharpoons:"⇋",longLeftrightharpoons:"⇋"},P={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\>":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5},D="",U="",O,ke,Ke,W,ue,ve,{command:De}=t;if(t.command==="\\error")return`<merror${Tt(t.id,e)}>${gt(t.body,e)}</merror>`;let V={"\\vert":"|","\\Vert":"∥","\\mid":"∣","\\lbrack":"[","\\rbrack":"]","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉"},se={"\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};switch(t.type){case"first":break;case"group":case"root":D=gt(t.body,e);break;case"array":let de=t;if((de.leftDelim&&de.leftDelim!=="."||de.rightDelim&&de.rightDelim!==".")&&(D+="<mrow>",de.leftDelim&&de.leftDelim!=="."&&(D+=`<mo>${V[de.leftDelim]||de.leftDelim}</mo>`)),D+="<mtable",de.colFormat){for(D+=' columnalign="',Ke=0;Ke<de.colFormat.length;Ke++){let Nt=de.colFormat[Ke];"align"in Nt&&(D+={l:"left",c:"center",r:"right"}[Nt.align]+" ")}D+='"'}for(D+=">",ke=0;ke<de.rows.length;ke++){for(D+="<mtr>",O=0;O<de.rows[ke].length;O++)D+="<mtd>"+gt(de.rows[ke][O],e)+"</mtd>";D+="</mtr>"}D+="</mtable>",(de.leftDelim&&de.leftDelim!=="."||de.rightDelim&&de.rightDelim!==".")&&(de.rightDelim&&de.rightDelim!=="."&&(D+=`'<mo>${V[de.rightDelim]||de.rightDelim}</mo>`),D+="</mrow>");break;case"genfrac":let ce=t;(ce.leftDelim||ce.rightDelim)&&(D+="<mrow>"),ce.leftDelim&&ce.leftDelim!=="."&&(D+="<mo"+Tt(t.id,e)+">"+(V[ce.leftDelim]||ce.leftDelim)+"</mo>"),ce.hasBarLine?(D+="<mfrac>",D+=gt(t.above,e)||"<mi>&nbsp;</mi>",D+=gt(t.below,e)||"<mi>&nbsp;</mi>",D+="</mfrac>"):(D+="<mtable"+Tt(t.id,e)+">",D+="<mtr>"+gt(t.above,e)+"</mtr>",D+="<mtr>"+gt(t.below,e)+"</mtr>",D+="</mtable>"),ce.rightDelim&&ce.rightDelim!=="."&&(D+="<mo"+Tt(t.id,e)+">"+(V[ce.rightDelim]||ce.rightDelim)+"</mo>"),(ce.leftDelim||ce.rightDelim)&&(D+="</mrow>");break;case"surd":t.hasEmptyBranch("above")?(D+="<msqrt"+Tt(t.id,e)+">",D+=gt(t.body,e),D+="</msqrt>"):(D+="<mroot"+Tt(t.id,e)+">",D+=gt(t.body,e),D+=gt(t.above,e),D+="</mroot>");break;case"leftright":let Ae=t,Ue=Ae.leftDelim;D="<mrow>",Ue&&Ue!=="."&&(D+=`<mo${Tt(t.id,e)}>${(n=V[Ue])!=null?n:Ue}</mo>`),t.body&&(D+=gt(t.body,e));let Pe=Ae.matchingRightDelim();Pe&&Pe!=="."&&(D+=`<mo${Tt(t.id,e)}>${(r=V[Pe])!=null?r:Pe}</mo>`),D+="</mrow>";break;case"sizeddelim":case"delim":D+=`<mo${Tt(t.id,e)}>${V[t.value]||t.value}</mo>`;break;case"accent":let on=t;D+='<mover accent="true"'+Tt(t.id,e)+">",D+=gt(t.body,e),D+="<mo>"+(se[De]||on.accent)+"</mo>",D+="</mover>";break;case"line":case"overlap":break;case"overunder":let it=t;ue=t.above,W=t.below,(it.svgAbove||ue)&&(it.svgBelow||W)?ve=t.body:ue&&ue.length>0?(ve=t.body,(o=(i=t.body)==null?void 0:i[0])!=null&&o.below?(W=t.body[0].below,ve=t.body[0].body):((c=(l=t.body)==null?void 0:l[0])==null?void 0:c.type)==="first"&&(f=(d=t.body)==null?void 0:d[1])!=null&&f.below&&(W=t.body[1].below,ve=t.body[1].body)):W&&W.length>0&&(ve=t.body,(y=(p=t.body)==null?void 0:p[0])!=null&&y.above?(ue=t.body[0].above,ve=t.body[0].body):((x=(v=t.body)==null?void 0:v[0])==null?void 0:x.type)==="first"&&(R=(S=t.body)==null?void 0:S[1])!=null&&R.above&&(ue=t.body[1].above,ve=t.body[1].body)),(it.svgAbove||ue)&&(it.svgBelow||W)?(D+=`<munderover ${Tt(t.id,e)}>`,D+=(I=C[it.svgBody])!=null?I:gt(ve,e),D+=(L=C[it.svgBelow])!=null?L:gt(W,e),D+=(j=C[it.svgAbove])!=null?j:gt(ue,e),D+="</munderover>"):it.svgAbove||ue?(D+=`<mover ${Tt(t.id,e)}>`+((z=C[it.svgBody])!=null?z:gt(ve,e)),D+=(G=C[it.svgAbove])!=null?G:gt(ue,e),D+="</mover>"):(it.svgBelow||W)&&(D+=`<munder ${Tt(t.id,e)}>`+((ie=C[it.svgBody])!=null?ie:gt(ve,e)),D+=(B=C[it.svgBelow])!=null?B:gt(W,e),D+="</munder>");break;case"placeholder":D+="?";break;case"mord":{if(D=typeof t.value=="string"?t.value:De,D.length>0&&D.startsWith("\\"))typeof t.value=="string"&&t.value.charCodeAt(0)>255?D="&#x"+("000000"+t.value.charCodeAt(0).toString(16)).slice(-4)+";":typeof t.value=="string"&&(D=t.value.charAt(0));else if(t.command==="\\char"){let Mr=(M=t.args)==null?void 0:M[0];if(Mr!==void 0&&"number"in Mr){let ni=Mr.number;typeof ni=="number"&&(D="&#x"+("000000"+ni.toString(16)).slice(-4)+";")}}else typeof t.value=="string"?D=t.value:(console.error("Did not expect this"),D="");let Nt=/\d/.test(D)?"mn":"mi";D=`<${Nt}${Tt(t.id,e)}>${mg(D)}</${Nt}>`;break}case"mbin":case"mrel":case"minner":D=mu(t,e);break;case"mpunct":D='<mo separator="true"'+Tt(t.id,e)+">"+De+"</mo>";break;case"mop":case"operator":case"extensible-symbol":t.value!=="​"&&(D="<mo"+Tt(t.id,e)+">",D+=De==="\\operatorname"?t.body:De||t.body,D+="</mo>");break;case"box":let dr=t;D='<menclose notation="box"',dr.backgroundcolor&&(D+=' mathbackground="'+dr.backgroundcolor+'"'),D+=Tt(t.id,e)+">"+gt(t.body,e)+"</menclose>";break;case"spacing":D+='<mspace width="'+((A=P[De])!=null?A:0)+'em"/>';break;case"enclose":let Ot=t;D='<menclose notation="';for(let Nt in Ot.notation)Object.prototype.hasOwnProperty.call(Ot.notation,Nt)&&Ot.notation[Nt]&&(D+=U+Nt,U=" ");D+=Tt(t.id,e)+'">'+gt(t.body,e)+"</menclose>";break;case"prompt":D='<menclose notation="roundexbox""">'+gt(t.body,e)+"</menclose>";break;case"space":D+="&nbsp;";break;case"subsup":break;case"phantom":break;case"composition":break;case"rule":break;case"chem":break;case"mopen":D+=mu(t,e);break;case"mclose":D+=mu(t,e);break;case"macro":{let Nt=t.command+uh(t.macroArgs);Nt&&(D+=`<mo ${Tt(t.id,e)}>${Nt}</mo>`)}break;case"latexgroup":D+=gt(t.body,e);break;case"latex":D+="<mtext"+Tt(t.id,e)+">"+t.value+"</mtext>";break;case"tooltip":D+=gt(t.body,e);break;case"text":D+=`<mtext ${Tt(t.id,e)}x>${t.value}</mtext>`;break;default:if(t.command==="\\displaystyle")return`<mrow ${Tt(t.id,e)} displaystyle="true">${gt(t.body,e)}</mrow>`;if(t.command==="\\textstyle")return`<mrow ${Tt(t.id,e)} displaystyle="false">${gt(t.body,e)}</mrow>`;console.info("Unexpected element in conversion to MathML:",t)}return D}var Oc={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"imaginary eye ","\\imaginaryJ":"imaginary jay ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\pm":"plus or minus","\\mp":"minus or plus","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","\\ne":"is not equal to ","\\neq":"is not equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","​":"","−":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},n4={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function Uj(t){let e="";return t.startsWith("\\")&&(e=" "+t.replace("\\","")+" "),e}function nf(t){let e=0;if(Rn(t))for(let n of t)n.type!=="first"&&(e+=1);return e===1}function Kj(t){if(Rn(t)){for(let e of t)if(e.type!=="first"&&e.id)return e.id.toString()}return""}function JE(t){let e="";if(Rn(t))for(let n of t)n.type!=="first"&&typeof n.value=="string"&&(e+=n.value);return e}function $j(t){return t?t.map(e=>e.value).join(""):""}function F0(t){if(t&&!t.some(e=>e.type!=="first"&&e.value===void 0))return t.map(e=>e.value).join("")}function v2(t){return`<emphasis>${t}</emphasis>`}function qj(t,e){var n;let r="",i=!1,o=!1;for(let l=0;l<e.length;l++)e[l].type!=="first"&&(e[l].mode!=="text"&&(o=!1),l<e.length-2&&e[l].type==="mopen"&&e[l+2].type==="mclose"&&e[l+1].type==="mord"?(r+=" of ",r+=v2(Ye(t,e[l+1])),l+=2):e[l].mode==="text"?o?r+=(n=e[l].value)!=null?n:" ":(o=!0,r+=Ye("text",e[l])):e[l].isDigit()?i?r+=e[l].asDigit():(i=!0,r+=Ye(t,e[l])):(i=!1,r+=Ye(t,e[l])));return r}function Ye(t,e){var n,r,i,o,l,c,d,f;function p(L){return globalThis.MathfieldElement.textToSpeechMarkup?/[a-z]/.test(L)?` <say-as interpret-as="character">${L}</say-as>`:/[A-Z]/.test(L)?`capital <say-as interpret-as="character">${L.toLowerCase()}</say-as>`:L:/[a-z]/.test(L)?" '"+L.toUpperCase()+"'":/[A-Z]/.test(L)?" 'capital "+L.toUpperCase()+"'":L}if(!e)return"";if(Rn(e))return qj(t,e);let y="";if(e.id&&t==="math"&&(y+='<mark name="'+e.id.toString()+'"/>'),e.mode==="text")return y+e.value;let v="",x="",S="",R=!1,{command:I}=e;switch(I){case"\\vec":return"vector "+Ye(t,e.body);case"\\acute":return Ye(t,e.body)+" acute";case"\\grave":return Ye(t,e.body)+" grave";case"\\dot":return"dot over"+Ye(t,e.body);case"\\ddot":return"double dot over"+Ye(t,e.body);case"\\mathring":return"ring over"+Ye(t,e.body);case"\\tilde":case"\\widetilde":return"tilde over"+Ye(t,e.body);case"\\bar":return Ye(t,e.body)+" bar";case"\\breve":return Ye(t,e.body)+" breve";case"\\check":case"\\widecheck":return"check over "+Ye(t,e.body);case"\\hat":case"\\widehat":return"hat over"+Ye(t,e.body);case"\\overarc":case"\\overparen":case"\\wideparen":return"arc over "+Ye(t,e.body);case"\\underarc":case"\\underparen":return"arc under "+Ye(t,e.body);case"\\mathop":return(n=F0(e.body))!=null?n:Ye(t,e.body);case"\\mathit":return(r=F0(e.body))!=null?r:Ye(t,e.body);case"\\mathrm":return(i=F0(e.body))!=null?i:Ye(t,e.body);case"\\mathbb":return"blackboard"+((o=F0(e.body))!=null?o:Ye(t,e.body))}switch(e.type){case"prompt":let L=e.body.length>1?'start input . <break time="500ms"/> '+Ye(t,e.body)+'. <break time="500ms"/> end input':"blank";y+=' <break time="300ms"/> '+L+'. <break time="700ms"/>'+((l=e.correctness)!=null?l:"")+' . <break time="700ms"/> ';break;case"array":let j=e.rows,z=e.environmentName;if(Object.keys(n4).includes(z)){y+=` begin ${n4[z]} `;for(let B=0;B<j.length;B++){B>0&&(y+=","),y+=` row ${B+1} `;for(let M=0;M<j[B].length;M++)M>0&&(y+=","),y+=` column ${M+1}: `,y+=Ye("math",j[B][M])}y+=` end ${n4[z]} `}break;case"group":I==="\\ne"?y+=" not equal ":(I==="\\not"&&(y+=" not "),y+=Ye("math",e.body));break;case"root":y+=Ye("math",e.body);break;case"genfrac":if(v=Ye("math",e.above),x=Ye("math",e.below),nf(e.above)&&nf(e.below)){let B={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[JE(e.above)+"/"+JE(e.below)];B?y=B:y+=v+" over "+x}else y+=' the fraction <break time="150ms"/>'+v+' over <break time="150ms"/>'+x+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(S=Ye("math",e.body),e.hasEmptyBranch("above"))y+=nf(e.body)?" the square root of "+S+" , ":' the square root of <break time="200ms"/>'+S+'. <break time="200ms"/> End square root';else{let B=Ye("math",e.above);B=B.trim();let M=B.replace(/<mark([^/]*)\/>/g,"");M==="3"?y+=' the cube root of <break time="200ms"/>'+S+'. <break time="200ms"/> End cube root':M==="n"?y+=' the nth root of <break time="200ms"/>'+S+'. <break time="200ms"/> End root':y+=' the root with index: <break time="200ms"/>'+B+', of <break time="200ms"/>'+S+'. <break time="200ms"/> End root'}break;case"leftright":{let B=e;y+=(c=B.leftDelim?Oc[B.leftDelim]:void 0)!=null?c:B.leftDelim,y+=Ye("math",e.body),y+=(d=B.rightDelim?Oc[B.rightDelim]:void 0)!=null?d:B.rightDelim}break;case"rule":break;case"overunder":break;case"overlap":break;case"macro":let G=I.replace(/^\\/g,""),ie=L3()[G];ie&&(ie!=null&&ie.expand?y+=Ye("math",e.body):y+=`${G} `);break;case"placeholder":y+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if(I==="\\mathbin"||I==="\\mathrel"||I==="\\mathopen"||I==="\\mathclose"||I==="\\mathpunct"||I==="\\mathord"||I==="\\mathinner"){y=Ye(t,e.body);break}let B=e.isDigit()?e.asDigit():e.value,M=e.command;if((e.type==="delim"||e.type==="sizeddelim")&&(M=e.value,B=M),t==="text")y+=B;else{if(e.type==="mbin"&&(y+='<break time="150ms"/>'),B){let A=Oc[B]||(M?Oc[M.trim()]:"");if(A)y+=" "+A;else{let C=M?Uj(M.trim()):"";y+=C||p(B)}}else y+=Ye("math",e.body);e.type==="mbin"&&(y+='<break time="150ms"/>')}break}case"mop":case"operator":case"extensible-symbol":if(e.value!=="​"){let B=e.command;if(B==="\\sum")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let M=Ye("math",e.superscript);M=M.trim();let A=Ye("math",e.subscript);A=A.trim(),y+=' the summation from <break time="200ms"/>'+A+'<break time="200ms"/> to  <break time="200ms"/>'+M+'<break time="200ms"/> of <break time="150ms"/>',R=!0}else if(e.hasEmptyBranch("subscript"))y+=" the summation of";else{let M=Ye("math",e.subscript);M=M.trim(),y+=' the summation from <break time="200ms"/>'+M+'<break time="200ms"/> of <break time="150ms"/>',R=!0}else if(B==="\\prod")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let M=Ye("math",e.superscript);M=M.trim();let A=Ye("math",e.subscript);A=A.trim(),y+=' the product from <break time="200ms"/>'+A+'<break time="200ms"/> to <break time="200ms"/>'+M+'<break time="200ms"/> of <break time="150ms"/>',R=!0}else if(e.hasEmptyBranch("subscript"))y+=" the product  of ";else{let M=Ye("math",e.subscript);M=M.trim(),y+=' the product from <break time="200ms"/>'+M+'<break time="200ms"/> of <break time="150ms"/>',R=!0}else if(B==="\\int")if(!e.hasEmptyBranch("superscript")&&!e.hasEmptyBranch("subscript")){let M=Ye("math",e.superscript);M=M.trim();let A=Ye("math",e.subscript);A=A.trim(),y+=' the integral from <break time="200ms"/>'+v2(A)+'<break time="200ms"/> to <break time="200ms"/>'+v2(M)+' <break time="200ms"/> of ',R=!0}else y+=' the integral of <break time="200ms"/> ';else if(B==="\\operatorname"||B==="\\operatorname*")y+=$j(e.body)+" ";else if(typeof e.value=="string"){let M=(f=Oc[e.value])!=null?f:e.command?Oc[e.command]:void 0;y+=M||" "+e.value}else e.command&&(e.command==="\\mathop"?y+=Ye("math",e.body):y+=e.command.startsWith("\\")?" "+e.command.slice(1):" "+e.command)}break;case"enclose":S=Ye("math",e.body),y+=" crossed out "+S+". End crossed out.";break}if(!R&&!e.hasEmptyBranch("superscript")){let L=Ye(t,e.superscript);L=L.trim();let j=L.replace(/<[^>]*>/g,"");if(nf(e.superscript)){if(t==="math"){let z=Kj(e.superscript);z&&(y+='<mark name="'+z+'"/>')}j==="′"?y+=" prime ":j==="2"?y+=" squared ":j==="3"?y+=" cubed ":Number.isNaN(Number.parseInt(j))?y+=" to the "+L+"; ":y+=' to the <say-as interpret-as="ordinal">'+j+"</say-as> power; "}else Number.isNaN(Number.parseInt(j))?y+=" raised to the "+L+"; ":y+=' raised to the <say-as interpret-as="ordinal">'+j+"</say-as> power; "}if(!R&&!e.hasEmptyBranch("subscript")){let L=Ye("math",e.subscript);L=L.trim(),y+=nf(e.subscript)?" sub "+L:" subscript "+L+". End subscript. "}return y}function ch(t){var e,n;let r=globalThis.MathfieldElement;if(r.textToSpeechRules==="sre"&&("sre"in window||"SRE"in window)){let o=gt(t);if(o){r.textToSpeechMarkup&&(r.textToSpeechRulesOptions=(e=r.textToSpeechRulesOptions)!=null?e:{},r.textToSpeechRulesOptions=q(N({},r.textToSpeechRulesOptions),{markup:r.textToSpeechMarkup}),r.textToSpeechRulesOptions.markup==="ssml"&&(r.textToSpeechRulesOptions=q(N({},r.textToSpeechRulesOptions),{markup:"ssml_step"})),r.textToSpeechRulesOptions=q(N({},r.textToSpeechRulesOptions),{rate:r.speechEngineRate}));let l=(n=window.SRE)!=null?n:globalThis.sre.System.getInstance();r.textToSpeechRulesOptions&&l.setupEngine(r.textToSpeechRulesOptions);let c="";try{c=l.toSpeech(o)}catch(d){console.error("MathLive 0.106.0: `SRE.toSpeech()` runtime error",d)}return c}return""}let i=Ye("math",t);if(r.textToSpeechMarkup==="ssml"){let o="";r.speechEngineRate&&(o='<prosody rate="'+r.speechEngineRate+'">'),i='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+o+"<p><s>"+i+"</s></p>"+(o?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else r.textToSpeechMarkup==="mac"&&Th()==="macos"?i=i.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):i=i.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return i}var ya={"\\ne":"≠","\\neq":"≠","−":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\>":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" ","\\infty":"oo","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"O/","\\varnothing":"O/","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega"},rf={"\\pm":"+-","\\colon":" : ","\\sum":" sum ","\\prod":" prod ","\\bigcap":" nnn ","\\bigcup":" uuu ","\\int":" int ","\\oint":" oint ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" AA ","\\exists":" EE ","\\in":" in ","\\notin":" !in ","\\mapsto":"|->","\\implies":"=>","\\iff":"<=>","\\cdot":" * ","\\ast":" ** ","\\star":" *** ","\\times":" * ","\\div":" -: ","\\ltimes":" |>< ","\\rtimes":" ><| ","\\bowtie":" |><| ","\\circ":"@"},U0={"\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrack":"[","\\rbrack":"]","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function jj(t){let e="";for(let n of t){let r=e[e.length-1];r!==void 0&&(/\d$/.test(r)&&/^\d/.test(n)||/[a-zA-Z]$/.test(r)&&/^[a-zA-Z]/.test(n))&&(e+=" "),e+=n}return e}function Yt(t,e){var n,r,i,o,l,c,d,f,p,y,v,x,S,R,I,L,j;if(!t)return"";if(Rn(t)){if(t.length===0)return"";if(t[0].mode==="latex")return t.map(C=>Yt(C)).join("");if(t[0].mode==="text"){let C=0,P="";for(;((n=t[C])==null?void 0:n.mode)==="text";)P+=t[C].body?Yt(t[C].body,e):t[C].value,C++;return e!=null&&e.plain?P+Yt(t.slice(C),e):`"${P}" ${Yt(t.slice(C))}`}let M=0,A=[];for(;t[M]&&t[M].mode==="math";){let C="";for(;t[M]&&t[M].type==="mord"&&/\d/.test(t[M].value);)C+=t[M++].value;C?A.push(C):A.push(Yt(t[M++],e))}return A.push(Yt(t.slice(M),e)),jj(A)}if(t.mode==="text")return e!=null&&e.plain?t.value:`"${t.value}"`;let z="",{command:G}=t,ie;if(G==="\\placeholder")return`(${Yt(t.body,e)})`;let B=re.serialize([t],{expandMacro:!1,defaultMode:"math"});switch(t.type){case"accent":let M={"\\vec":"vec","\\dot":"dot","\\ddot":"ddot","\\bar":"bar","\\hat":"hat","\\acute":"acute;","\\grave":"grave","\\tilde":"tilde","\\breve":"breave","\\check":"check"}[G];z=`${M??""} ${Yt(t.body,e)} `;break;case"first":return"";case"latexgroup":return t.body.map(C=>C.value).join("");case"group":case"root":z=(r=ya[G])!=null?r:Yt(t.body,e);break;case"genfrac":{let C=t;(C.leftDelim||C.rightDelim)&&(z=C.leftDelim==="."||!C.leftDelim?"{:":C.leftDelim),C.hasBarLine?(z+="(",z+=Yt(C.above,e),z+=")/(",z+=Yt(C.below,e),z+=")"):(z+="((",z+=Yt(C.above,e),z+=") choose (",z+=Yt(C.below,e),z+="))"),(C.leftDelim||C.rightDelim)&&(z+=C.rightDelim==="."||!C.rightDelim?"{:":C.rightDelim)}break;case"surd":t.hasEmptyBranch("above")?z+=`sqrt(${Yt(t.body,e)})`:z+=`root(${Yt(t.above,e)})(${Yt(t.body,e)})`;break;case"latex":z=t.value;break;case"leftright":{let C=t,P=C.leftDelim;P&&U0[P]&&(P=U0[P]),z+=P==="."||!P?"{:":P,z+=Yt(C.body,e);let D=C.matchingRightDelim();D&&U0[D]&&(D=U0[D]),z+=D==="."||!D?":}":D}break;case"sizeddelim":case"delim":z=t.value;break;case"overlap":break;case"overunder":break;case"mord":if(ya[B])return ya[B];z=(l=(o=(i=ya[G])!=null?i:G)!=null?o:G)!=null?l:typeof t.value=="string"?t.value:"",z.startsWith("\\")&&(z+=" "),ie=G?G.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,ie?z=String.fromCodePoint(Number.parseInt("0x"+ie[1])):z.length>0&&z.startsWith("\\")&&(z=typeof t.value=="string"?t.value.charAt(0):t.command),z=Hj(z,t.style);break;case"mbin":case"mrel":case"minner":z=(f=(d=(c=ya[B])!=null?c:ya[G])!=null?d:rf[G])!=null?f:t.value;break;case"mopen":case"mclose":z=t.value;break;case"mpunct":z=(p=rf[G])!=null?p:G;break;case"mop":case"operator":case"extensible-symbol":t.value!=="​"&&(rf[G]?z=rf[G]:z=G==="\\operatorname"?Yt(t.body,e):(y=t.value)!=null?y:G,z+=" ");break;case"array":let A=t.environmentName;if(t.isMultiline)z=t.rows.map(C=>C.map(P=>Yt(P,e)).join("")).join(`
`);else{let C=(v={bmatrix:["[","]"],"bmatrix*":["[","]"]}[A])!=null?v:["(",")"],P=[],D=t.rows;for(let O of D){let ke=[];for(let Ke of O)ke.push(Yt(Ke,e));P.push(C[0]+ke.join(",")+C[1])}let U=(x={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[A])!=null?x:["(",")"];z=U[0]+P.join(",")+U[1]}break;case"box":break;case"spacing":z=(R=(S=ya[B])!=null?S:ya[G])!=null?R:" ";break;case"enclose":z="("+Yt(t.body,e)+")";break;case"space":z=" ";break;case"subsup":z="";break;case"macro":z=(j=(L=(I=ya[B])!=null?I:ya[G])!=null?L:rf[G])!=null?j:Yt(t.body,e);break}if(!t.hasEmptyBranch("subscript")){z+="_";let M=Yt(t.subscript,e);z+=M.length!==1?`(${M})`:M}if(!t.hasEmptyBranch("superscript")){z+="^";let M=Yt(t.superscript,e);z+=M.length!==1?`(${M})`:M}return z}function Hj(t,e){if(!e)return t;let n=t;return e.variant==="double-struck"&&(n=`bbb "${n}"`),e.variant==="script"&&(n=`cc "${n}"`),e.variant==="fraktur"&&(n=`fr "${n}"`),e.variant==="sans-serif"&&(n=`sf "${n}"`),e.variant==="monospace"&&(n=`tt "${n}"`),e.variantStyle==="bold"&&(n=`bb "${n}"`),e.color?`color({${e.color}})(${n})`:n}function xn(t,e){var n;let r=q(N({},NM()),{renderPlaceholder:()=>new be(160,{maxFontSize:1})}),i=(n=void 0)!=null?n:"math",o="math",l="displaystyle";i==="inline-math"?l="textstyle":i==="math"?l="displaystyle":i==="text"&&(l="textstyle",o="text");let c=new lt({from:r}),d=new re({type:"root",mode:o,body:Mi(t,{context:c,parseMode:o,mathstyle:l})}).render(c);return d?(D1(cm(d,c)),L1(d,{classes:"ML__latex"}).toMarkup()):""}function _2(t){if(typeof t=="string"){let e=Gj(t);if(!e)throw new Error(`Invalid color: ${t}`);return e}return"C"in t?Xj(t):"a"in t?yT(t):t}function hh(t){return t<0?0:t>255?255:Math.round(t)}function Gj(t){if(!t||t[0]!=="#")return;t=t.slice(1);let e;return t.length<=4?(e={r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)},t.length===4&&(e.a=parseInt(t[3]+t[3],16)/255)):(e={r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)},t.length===8&&(e.a=parseInt(t[6]+t[7],16)/255)),e&&typeof e.a>"u"&&(e.a=1),e}function x2(t){let[e,n,r]=[t.L,t.C,t.H],i=r*Math.PI/180,o={L:e,a:n*Math.cos(i),b:n*Math.sin(i)};return t.alpha!==void 0&&(o.alpha=t.alpha),o}function Wj(t){let[e,n,r]=[t.L,t.a,t.b],i=Math.sqrt(n*n+r*r),o=Math.atan2(r,n)*180/Math.PI,l={L:e,C:i,H:o};return t.alpha!==void 0&&(l.alpha=t.alpha),l}function r4(t){let[e,n,r]=[t.L,t.a,t.b],i=Math.pow(.9999999984505198*e+.39633779217376786*n+.2158037580607588*r,3),o=Math.pow(1.00000000888176*e-.10556134232365635*n-.0638541747717059*r,3),l=Math.pow(e*1.000000054672411-.0894841820949657*n-1.2914855378640917*r,3),c=4.076741661347994*i-3.307711590408193*o+.230969928729428*l,d=-1.2684380040921763*i+2.6097574006633715*o-.3413193963102197*l,f=-.004196086541837188*i-.7034186144594493*o+1.7076147009309444*l,p=y=>{let v=Math.abs(y);return v<=.0031308?y*12.92:(Math.sign(y)||1)*(1.055*Math.pow(v,1/2.4)-.055)};return[p(c),p(d),p(f)]}function i4(t){let[e,n,r]=t;return e>=0&&e<=1&&n>=0&&n<=1&&r>=0&&r<=1}function a4(t,e){let[n,r,i]=t;return n=hh(n*255),r=hh(r*255),i=hh(i*255),e!==void 0?{r:n,g:r,b:i,alpha:e}:{r:n,g:r,b:i}}function yT(t){let[e,n,r]=r4(t);if(i4([e,n,r]))return a4([e,n,r],t.alpha);let i=Wj(t);if(i.C=0,[e,n,r]=r4(x2(i)),!i4([e,n,r]))return a4([e,n,r],t.alpha);let o=0,l=t.L,c=(o+l)/2;i.C=c;let d=.36/Math.pow(2,12);for(;l-o>d;)c=(o+l)/2,i.C=c,[e,n,r]=r4(x2(i)),i4([e,n,r])?o=c:l=c;return a4([e,n,r],t.alpha)}function Xj(t){return yT(x2(t))}function ZE(t,e){let n=_2(t),r=_2(e),i=.56,o=.57,l=.62,c=.65,d=.022,f=1.414,p=.1,y=5e-4,v=1.14,x=.027,S=1.14,R=.027;function I(M){return M>=d?M:M+(d-M)**f}function L(M){return(M<0?-1:1)*Math.pow(Math.abs(M),2.4)}let j=I(L(r.r/255)*.2126729+L(r.g/255)*.7151522+L(r.b/255)*.072175),z=I(L(n.r/255)*.2126729+L(n.g/255)*.7151522+L(n.b/255)*.072175),G,ie,B;return Math.abs(z-j)<y?ie=0:z>j?(G=z**i-j**o,ie=G*v):(G=z**c-j**l,ie=G*S),Math.abs(ie)<p?B=0:ie>0?B=ie-R:B=ie+x,B*100}function bT(t,e,n){n!=null||(n="#fff"),e!=null||(e="#000");let r=ZE(t,n),i=ZE(t,e);return Math.abs(r)>Math.abs(i)?n:e}function Yj(t){let e=_2(t),n=((1<<24)+(hh(e.r)<<16)+(hh(e.g)<<8)+hh(e.b)).toString(16).slice(1);return e.alpha!==void 0&&e.alpha<1&&(n+=("00"+Math.round(e.alpha*255).toString(16)).slice(-2)),n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&n[6]===n[7]&&(n=n[0]+n[2]+n[4]+(e.alpha!==void 0&&e.alpha<1?n[6]:"")),"#"+n}function Dt(t){let e=vT(t),n="";for(let r of e){if(typeof r.value!="string")return"";n+=r.value}return n}function vT(t){let e=t.model.selection.ranges;if(e.length!==1)return[];let n=t.model.getAtoms(e[0]);return n.length===1&&n[0].isRoot&&(n=n[0].children),n.filter(r=>r.type!=="first")}function Qj(t,e){let n=vT(t);if(n.length!==1)return!1;let r=n2[e];return r?!!r.test(n[0].value):!1}function Jj(t){return Dt(t).length>0}function Zj(t){return[s4(t,"double-struck","mathbb","tooltip.blackboard"),s4(t,"fraktur","mathfrak","tooltip.fraktur"),s4(t,"calligraphic","mathcal","tooltip.caligraphic"),l4(t,"up","mathrm","tooltip.roman-upright"),l4(t,"bold","bm","tooltip.bold"),l4(t,"italic","mathit","tooltip.italic")]}function eH(t){return[{id:"accent-vec",class:"ML__center-menu",label:()=>xn(`\\vec{${Dt(t)}}`),visible:()=>Dt(t).length===1,onMenuSelect:()=>t.insert("\\vec{#@}",{selectionMode:"item"})},{id:"accent-overrightarrow",class:"ML__center-menu",label:()=>xn(`\\overrightarrow{${Dt(t)}}`),visible:()=>Dt(t).length>0,onMenuSelect:()=>t.insert("\\overrightarrow{#@}",{selectionMode:"item"})},{id:"accent-overleftarrow",class:"ML__center-menu",label:()=>xn(`\\overleftarrow{${Dt(t)}}`),visible:()=>Dt(t).length>0,onMenuSelect:()=>t.insert("\\overleftarrow{#@}",{selectionMode:"item"})},{id:"accent-dot",class:"ML__center-menu",label:()=>xn(`\\dot{${Dt(t)}}`),visible:()=>Dt(t).length===1,onMenuSelect:()=>t.insert("\\dot{#@}",{selectionMode:"item"})},{id:"accent-ddot",class:"ML__center-menu",label:()=>xn(`\\ddot{${Dt(t)}}`),visible:()=>Dt(t).length===1,onMenuSelect:()=>t.insert("\\ddot{#@}",{selectionMode:"item"})},{id:"accent-bar",class:"ML__center-menu",label:()=>xn(`\\bar{${Dt(t)}}`),visible:()=>Dt(t).length===1,onMenuSelect:()=>t.insert("\\bar{#@}",{selectionMode:"item"})},{id:"accent-overline",class:"ML__center-menu",label:()=>xn(`\\overline{${Dt(t)}}`),visible:()=>Dt(t).length>0,onMenuSelect:()=>t.insert("\\overline{#@}",{selectionMode:"item"})},{id:"accent-overgroup",class:"ML__center-menu",label:()=>xn(`\\overgroup{${Dt(t)}}`),visible:()=>Dt(t).length>0,onMenuSelect:()=>t.insert("\\overgroup{#@}",{selectionMode:"item"})},{id:"accent-overbrace",class:"ML__center-menu",label:()=>xn(`\\overbrace{${Dt(t)}}`),visible:()=>Dt(t).length>0,onMenuSelect:()=>t.insert("\\overbrace{#@}",{selectionMode:"item"})},{id:"accent-underline",class:"ML__center-menu",label:()=>xn(`\\underline{${Dt(t)}}`),visible:()=>Dt(t).length>0,onMenuSelect:()=>t.insert("\\underline{#@}",{selectionMode:"item"})},{id:"accent-undergroup",class:"ML__center-menu",label:()=>xn(`\\undergroup{${Dt(t)}}`),visible:()=>Dt(t).length>0,onMenuSelect:()=>t.insert("\\undergroup{#@}",{selectionMode:"item"})},{id:"accent-underbrace",class:"ML__center-menu",label:()=>xn(`\\underbrace{${Dt(t)}}`),visible:()=>Dt(t).length>0,onMenuSelect:()=>t.insert("\\underbrace{#@}",{selectionMode:"item"})}]}function tH(t){return[{id:"decoration-boxed",label:()=>xn(`\\boxed{${t.getValue(t.model.selection)}}}`),onMenuSelect:()=>t.insert("\\boxed{#@}",{selectionMode:"item"})},{id:"decoration-red-box",label:()=>xn(`\\bbox[5px, border: 2px solid red]{${t.getValue(t.model.selection)}}`),onMenuSelect:()=>t.insert("\\bbox[5px, border: 2px solid red]{#@}",{selectionMode:"item"})},{id:"decoration-dashed-black-box",label:()=>xn(`\\bbox[5px, border: 2px dashed black]{${t.getValue(t.model.selection)}}`),onMenuSelect:()=>t.insert("\\bbox[5px, border: 2px dashed black]{#@}",{selectionMode:"item"})}]}function nH(t){let e=[];for(let n of Object.keys(hu))e.push({id:`background-color-${n}`,class:(Yj(bT(hu[n]))==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${hu[n]} "></span>`,ariaLabel:()=>{var r;return(r=qe(n))!=null?r:n},checked:()=>{var r;return(r={some:"mixed",all:!0}[t.queryStyle({backgroundColor:n})])!=null?r:!1},onMenuSelect:()=>t.applyStyle({backgroundColor:n},{operation:"toggle"})});return e}function rH(t){let e=[];for(let n of Object.keys(du))e.push({id:`color-${n}`,class:(bT(du[n])==="#000"?"dark-contrast":"light-contrast")+" menu-swatch",label:`<span style="background:${du[n]} "></span>`,ariaLabel:()=>{var r;return(r=qe(n))!=null?r:n},checked:()=>{var r;return(r={some:"mixed",all:!0}[t.queryStyle({color:n})])!=null?r:!1},onMenuSelect:()=>t.applyStyle({color:n},{operation:"toggle"})});return e}var iH=class extends uT{constructor(t,e,n,r){super(t,e),this.row=n,this.col=r}set active(t){let e=this.parentMenu.children;if(t)for(let n of e)n.element.classList.toggle("active",n.row<=this.row&&n.col<=this.col);else for(let n of e)n.element.classList.remove("active")}};function aH(t){let e=[];for(let n=1;n<=5;n++)for(let r=1;r<=5;r++)e.push({id:`insert-matrix-${n}x${r}`,onCreate:(i,o)=>new iH(i,o,n,r),label:"☐",tooltip:()=>qe("tooltip.row-by-col",n,r),data:{row:n,col:r},onMenuSelect:()=>{t.insert(`\\begin{pmatrix}${Array(n).fill(Array(r).fill("#?").join(" & ")).join("\\\\")}\\end{pmatrix}`,{selectionMode:"item"})}});return e}function oH(t){return[{label:()=>qe("menu.array.add row above"),id:"add-row-above",onMenuSelect:()=>t.executeCommand("addRowBefore"),keyboardShortcut:"shift+alt+[Return]",visible:()=>{if(!t.isSelectionEditable||!Wl(t))return!1;let[e,n]=Ss(t),[r,i]=Nc(t);return e!==r}},{label:()=>qe("menu.array.add row below"),id:"add-row-below",onMenuSelect:()=>t.executeCommand("addRowAfter"),keyboardShortcut:"alt+[Return]",visible:()=>{if(!t.isSelectionEditable||!Wl(t))return!1;let[e,n]=Ss(t),[r,i]=Nc(t);return e!==r}},{label:()=>qe("menu.array.add column before"),id:"add-column-before",onMenuSelect:()=>t.executeCommand("addColumnBefore"),visible:()=>{if(!t.isSelectionEditable||!Wl(t))return!1;let[e,n]=Ss(t),[r,i]=Nc(t);return n!==i},keyboardShortcut:"shift+alt+[Tab]",enabled:()=>{let e=t.model.parentEnvironment;if(!e)return!1;let[n,r]=o4(t);return n<e.maxColumns}},{label:()=>qe("menu.array.add column after"),id:"add-column-after",onMenuSelect:()=>t.executeCommand("addColumnAfter"),keyboardShortcut:"alt+[Tab]",visible:()=>{if(!t.isSelectionEditable||!Wl(t))return!1;let[e,n]=Ss(t),[r,i]=Nc(t);return n!==i}},{type:"divider"},{label:()=>qe("menu.array.delete row"),id:"delete-row",onMenuSelect:()=>t.executeCommand("removeRow"),enabled:()=>{let[e,n]=Ss(t),[r,i]=o4(t);return r>e},visible:()=>{if(!t.isSelectionEditable||!Wl(t))return!1;let[e,n]=Ss(t),[r,i]=Nc(t);return e!==r}},{label:()=>qe("menu.array.delete column"),id:"delete-column",onMenuSelect:()=>t.executeCommand("removeColumn"),enabled:()=>{let[e,n]=Ss(t),[r,i]=o4(t);return i>n},visible:()=>{if(!t.isSelectionEditable||!Wl(t))return!1;let[e,n]=Ss(t),[r,i]=Nc(t);return n!==i}},{type:"divider"},{label:()=>qe("menu.borders"),visible:()=>(sH(t)||Wl(t))&&t.isSelectionEditable,submenu:[{label:" ⋱ ",id:"environment-no-border",onMenuSelect:()=>af(t,"matrix")},{label:"(⋱)",id:"environment-parentheses",onMenuSelect:()=>af(t,"pmatrix")},{label:"[⋱]",id:"environment-brackets",onMenuSelect:()=>af(t,"bmatrix")},{label:"|⋱|",id:"environment-bar",onMenuSelect:()=>af(t,"vmatrix")},{label:"{⋱}",id:"environment-braces",onMenuSelect:()=>af(t,"Bmatrix")}],submenuClass:"border-submenu"},{type:"divider"},{label:()=>qe("menu.insert matrix"),id:"insert-matrix",visible:()=>t.isSelectionEditable,submenu:aH(t),submenuClass:"insert-matrix-submenu",columnCount:5},{type:"divider"},{label:()=>qe("menu.insert"),id:"insert",submenu:uH(t)},{type:"divider"},{label:()=>qe("menu.mode"),id:"mode",visible:()=>t.isSelectionEditable&&t.model.selectionIsCollapsed,submenu:[{label:()=>qe("menu.mode-math"),id:"mode-math",onMenuSelect:()=>{xh(t,"accept-all"),t.executeCommand(["switchMode","math"])},checked:()=>t.model.mode==="math"},{label:()=>qe("menu.mode-text"),id:"mode-text",onMenuSelect:()=>{xh(t,"accept-all"),t.executeCommand(["switchMode","text"])},checked:()=>t.model.mode==="text"},{label:()=>qe("menu.mode-latex"),id:"mode-latex",onMenuSelect:()=>t.executeCommand(["switchMode","latex"]),checked:()=>t.model.mode==="latex"}]},{type:"divider"},{label:()=>qe("menu.font-style"),id:"variant",visible:()=>t.isSelectionEditable,submenu:Zj(t),submenuClass:"variant-submenu"},{label:()=>qe("menu.color"),id:"color",visible:()=>t.isSelectionEditable,submenu:rH(t),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>qe("menu.background-color"),id:"background-color",visible:()=>t.isSelectionEditable,submenu:nH(t),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>qe("menu.accent"),id:"accent",visible:()=>t.isSelectionEditable,submenu:eH(t),submenuClass:"variant-submenu"},{label:()=>qe("menu.decoration"),id:"decoration",visible:()=>t.isSelectionEditable&&Dt(t).length>0,submenu:tH(t),submenuClass:"variant-submenu"},{type:"divider"},{label:()=>qe("menu.evaluate"),id:"ce-evaluate",visible:()=>t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{let e=lH(t);if(!e){t.model.announce("plonk");return}t.model.selectionIsCollapsed?(t.model.position=t.model.lastOffset,t.insert(`=${e}`,{insertionMode:"insertAfter",selectionMode:"item"})):t.insert(e,{insertionMode:"replaceSelection",selectionMode:"item"})}},{label:()=>qe("menu.simplify"),id:"ce-simplify",visible:()=>t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null,onMenuSelect:()=>{var e,n;if(t.model.selectionIsCollapsed){let r=(e=t.expression)==null?void 0:e.simplify();if(t.model.position=t.model.lastOffset,!r){t.model.announce("plonk");return}t.insert(`=${r.latex}`,{insertionMode:"insertAfter",selectionMode:"item"})}else{let r=(n=globalThis.MathfieldElement.computeEngine)==null?void 0:n.parse(t.getValue(t.model.selection)).simplify();if(!r){t.model.announce("plonk");return}t.insert(r.latex,{insertionMode:"replaceSelection",selectionMode:"item"})}}},{label:()=>{var e;let n=globalThis.MathfieldElement.computeEngine;if(n===null)return"";let r=(e=t.expression)==null?void 0:e.unknowns[0];if(r){let i=n.box(r).latex;return qe("menu.solve-for",xn(i))}return qe("menu.solve")},id:"ce-solve",visible:()=>{var e;return t.isSelectionEditable&&globalThis.MathfieldElement.computeEngine!==null&&((e=t.expression)==null?void 0:e.unknowns.length)===1&&t.expression.unknowns[0]!=="Nothing"},onMenuSelect:()=>{var e;let n=t.expression,r=n?.unknowns[0],i=(e=n.solve(r))==null?void 0:e.map(o=>{var l;return(l=o.simplify().latex)!=null?l:""});if(!i){t.model.announce("plonk");return}t.insert(`${r}=${i.length===1?i[0]:"\\left\\lbrace"+i?.join(", ")+"\\right\\rbrace"}`,{insertionMode:"replaceAll",selectionMode:"item"})}},{type:"divider"},{label:()=>qe("menu.cut"),id:"cut",onMenuSelect:()=>t.executeCommand("cutToClipboard"),visible:()=>!t.options.readOnly&&t.isSelectionEditable,keyboardShortcut:"meta+X"},{label:()=>qe("menu.copy"),id:"copy",submenu:[{label:()=>qe("menu.copy-as-latex"),id:"copy-latex",onMenuSelect:()=>Lt.copyToClipboard(t,"latex"),keyboardShortcut:"meta+C"},{label:()=>qe("menu.copy-as-typst"),id:"copy-latex",onMenuSelect:()=>Lt.copyToClipboard(t,"typst")},{label:()=>qe("menu.copy-as-ascii-math"),id:"copy-ascii-math",onMenuSelect:()=>Lt.copyToClipboard(t,"ascii-math")},{label:()=>qe("menu.copy-as-mathml"),id:"copy-math-ml",onMenuSelect:()=>Lt.copyToClipboard(t,"math-ml")}]},{label:()=>qe("menu.paste"),id:"paste",onMenuSelect:()=>t.executeCommand("pasteFromClipboard"),visible:()=>t.hasEditableContent,keyboardShortcut:"meta+V"},{label:()=>qe("menu.select-all"),id:"select-all",keyboardShortcut:"meta+A",onMenuSelect:()=>t.executeCommand("selectAll")}]}function Wl(t){var e,n;let r=(n=(e=t.model.parentEnvironment)==null?void 0:e.environmentName)!=null?n:"";return["array","matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(r)}function sH(t){let e=t.model.at(t.model.position);if(e.type!=="array")return!1;let n=e.environmentName;return["matrix","pmatrix","bmatrix","vmatrix","Bmatrix"].includes(n)}function o4(t){var e;let n=(e=t.model.parentEnvironment)==null?void 0:e.rows;return n?[n.length,n.reduce((r,i)=>Math.max(r,i.length),0)]:[0,0]}function Ss(t){let e=t.model.parentEnvironment;return e?[e.minRows,e.minColumns]:[0,0]}function Nc(t){let e=t.model.parentEnvironment;return e?[e.maxRows,e.maxColumns]:[0,0]}function af(t,e){V1(t),t.flushInlineShortcutBuffer(),ZA(t.model,e),Qt(t)}function lH(t){var e,n;let r;if(t.model.selectionIsCollapsed?r=(e=globalThis.MathfieldElement.computeEngine)==null?void 0:e.parse(t.getValue(),{canonical:!1}):r=(n=globalThis.MathfieldElement.computeEngine)==null?void 0:n.parse(t.getValue(t.model.selection),{canonical:!1}),!r)return"";let i=r.evaluate();return i.isSame(r)&&(i=r.N()),i.latex}function s4(t,e,n,r){return{id:`variant-${e}`,label:()=>{var i;return Dt(t).length<12?xn(`\\${n}{${Dt(t)}}`):(i=qe(r))!=null?i:r},class:"ML__xl",tooltip:()=>{var i;return(i=qe(r))!=null?i:r},visible:()=>Qj(t,e),checked:()=>{var i;return(i={some:"mixed",all:!0}[t.queryStyle({variant:e})])!=null?i:!1},onMenuSelect:()=>t.applyStyle({variant:e},{operation:"toggle"})}}function l4(t,e,n,r){return{id:`variant-style-${e}`,label:()=>{var i;let o=Dt(t);return o.length>0&&o.length<12?xn(`\\${n}{${Dt(t)}}`):(i=qe(r))!=null?i:r},class:()=>{let i=Dt(t);return i.length>0&&i.length<12?"ML__xl":""},tooltip:()=>{var i;return(i=qe(r))!=null?i:r},visible:e==="bold"?!0:()=>Jj(t),checked:()=>{var i;return(i={some:"mixed",all:!0}[t.queryStyle({variantStyle:e})])!=null?i:!1},onMenuSelect:()=>t.applyStyle({variantStyle:e},{operation:"toggle"})}}function uH(t){return[{label:()=>Xr("abs"),id:"insert-abs",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("|#?|")},{label:()=>Xr("nth-root"),id:"insert-nth-root",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\sqrt[#?]{#?}")},{label:()=>Xr("log-base"),id:"insert-log-base",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\log_{#?}{#?}")},{type:"heading",label:()=>qe("menu.insert.heading-calculus")},{label:()=>Xr("derivative"),id:"insert-derivative",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\dfrac{\\mathrm{d}}{\\mathrm{d}x}#?\\bigm|_{x=#?}")},{label:()=>Xr("nth-derivative"),id:"insert-nth-derivative",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\dfrac{\\mathrm{d}^#?}{\\mathrm{d}x^#?}#?\\bigm|_{x=#?}")},{label:()=>Xr("integral"),id:"insert-integral",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\int_#?^#?#?\\,\\mathrm{d}#?")},{label:()=>Xr("sum"),id:"insert-sum",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\sum_#?^#?#?")},{label:()=>Xr("product"),id:"insert-product",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\prod_#?^#?#?")},{type:"heading",label:()=>qe("menu.insert.heading-complex-numbers")},{label:()=>Xr("modulus"),id:"insert-modulus",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\lvert#?\\rvert")},{label:()=>Xr("argument"),id:"insert-argument",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\arg(#?)")},{label:()=>Xr("real-part"),id:"insert-real-part",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\Re(#?)")},{label:()=>Xr("imaginary-part"),id:"insert-imaginary-part",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\Im(#?)")},{label:()=>Xr("conjugate"),id:"insert-conjugate",visible:()=>t.isSelectionEditable,onMenuSelect:()=>t.insert("\\overline{#?}")}]}function Xr(t){return`<span class='ML__insert-template'> ${xn(qe(`menu.insert.${t}-template`))}</span><span class="ML__insert-label">${qe(`menu.insert.${t}`)}</span>`}var Sr={"\\ne":"!=","\\neq":"!=","−":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon.alt","\\varepsilon":"epsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta.alt","\\vartheta":"theta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi.alt","\\varphi":"phi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" #h(-1em/6) ","\\,":" thin ","\\:":" med ","\\>":" med ","\\;":" thick ","\\enskip":"space.en","\\enspace":"space.en","\\qquad":"space.quad space.quad","\\quad":"space.quad","\\infty":"infinity","\\R":"RR","\\mathbb{R}":"RR","\\N":"NN","\\mathbb{N}":"NN","\\Z":"ZZ","\\mathbb{Z}":"ZZ","\\Q":"QQ","\\mathbb{Q}":"QQ","\\C":"CC","\\mathbb{C}":"CC","\\emptyset":"emptyset","\\varnothing":"nothing","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega","\\vert":" | ","\\Vert":" || ","\\mid":" divides ","\\lbrack":" bracket.l ","\\rbrack":" bracket.r ","\\lbrace":" brace.l ","\\rbrace":" brace.r ","\\lparen":" paren.l ","\\rparen":" paren.r ","\\langle":" angle.l ","\\rangle":" angle.r ","\\differentialD":" dif ","\\diamond":" diamond.stroked.small ","\\square":" square.stroked.small ","\\lceil":" ceil.l ","\\rceil":" ceil.r ","\\lfloor":" floor.l ","\\rfloor":" floor.r ","\\aleph":" aleph ","\\bet":" bet ","\\gimel":" gimel ","\\dalet":" dalet ","\\mod":" mod ","\\equiv":" equiv ","\\subset":" subset ","\\supset":" supset ","\\subseteq":" subset.eq ","\\supseteq":" supset.eq ","\\subsetneq":" subset.neq ","\\supsetneq":" supset.neq ","\\supsetneqq":" supset.neq ","\\nsubset":" subset.not ","\\nsupset":" supset.not ","\\nsubseteq":" subset.eq.not ","\\nsupseteq":" supset.eq.not ","\\approx":" approx ","\\uparrow":" arrow.t ","\\downarrow":" arrow.b ","\\rightarrow":" arrow.r ","\\leftarrow":" arrow.l ","\\longmapsto":" mapsto.long ","\\longmapsfrom":" arrow.l.bar.long ","/":"\\/","&":"&"},eS={"[":" bracket.l ","]":" bracket.r ","{":" brace.l ","}":" brace.r ","(":" paren.l ",")":" paren.r ","<":" angle.l ",">":" angle.r ",".":""},tS={" bracket.l ":"["," bracket.r ":"]"," brace.l ":"{"," brace.r ":"}"," paren.l ":"("," paren.r ":")"," angle.l ":" angle.l "," angle.r ":" angle.r "},of={"\\pm":"plus.minus","\\colon":" : ","\\sum":" sum ","\\prod":" product ","\\bigcap":" inter.big ","\\bigcup":" union.big ","\\int":" integral ","\\iint":" integral.double ","\\iiint":" integral.triple ","\\intop":" integral ","\\oint":" integral.cont ","\\oiint":" integral.surf ","\\oiiint":" integral.vol ","\\setminus":" without ","\\vdots":" without ","\\ddots":" dots.down ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" forall ","\\exists":" exists ","\\in":" in ","\\notin":" in.not ","\\mapsto":"|->","\\implies":"==>","\\iff":"<==>","\\cdot":" dot.op ","\\ast":" * ","\\star":" star.op ","\\times":" times ","\\div":" div ","\\ltimes":" times.l ","\\rtimes":" times.r ","\\bowtie":" ⋈ ","\\circ":" circle.stroked.small "},cH={underarc:"underparen",underparen:"underparen",underbrace:"underbrace",underline:"underline",overarc:"overparen",overparen:"overparen",overbrace:"overbrace",overline:"overline",cancel:"cancel",displaystyle:"display",textstyle:"inline"},hH={longrightarrow:t=>`arrow.r.long^(${Vt(t.above)})`,longleftarrow:t=>`arrow.l.long^(${Vt(t.above)})`};function dH(t){let e="";for(let n of t){let r=e[e.length-1];r!==void 0&&(/\d$/.test(r)&&/^\d/.test(n)||/[a-zA-Z]$/.test(r)&&/^[a-zA-Z]/.test(n))&&(e+=" "),e+=n}return e}function Vt(t){var e,n,r,i,o,l,c,d,f,p,y,v,x,S,R,I,L,j,z,G,ie;if(!t)return"";if(Rn(t)){if(t.length===0)return"";if(t[0].mode==="latex")return t.map(U=>Vt(U)).join("");if(t[0].mode==="text"){let U=0,O="";for(;((e=t[U])==null?void 0:e.mode)==="text";)O+=t[U].body?Vt(t[U].body):t[U].value,U++;return` "${O}" ${Vt(t.slice(U))}`}let P=0,D=[];for(;t[P]&&t[P].mode==="math";){let U="";for(;t[P]&&t[P].type==="mord"&&/\d/.test(t[P].value);)U+=t[P++].value;U?D.push(U):D.push(Vt(t[P++]))}return D.push(Vt(t.slice(P))),dH(D)}if(t.mode==="text")return`"${t.value}"`;let B="",{command:M}=t,A;if(M==="\\placeholder")return`"${Vt(t.body)}"`;let C=re.serialize([t],{expandMacro:!0,defaultMode:"math"});switch(t.type){case"accent":let P={"\\vec":"arrow","\\dot":"dot","\\ddot":"dot.double","\\bar":"overline","\\hat":"hat","\\acute":"acute","\\grave":"grave","\\tilde":"tilde","\\breve":"breve","\\check":"caron"}[M];B=`${P??""}(${Vt(t.body)}) `;break;case"first":return"";case"latexgroup":return t.body.map(U=>U.value).join("");case"group":case"root":B=(n=Sr[M])!=null?n:Vt(t.body);break;case"genfrac":{let U=t;U.hasBarLine?(B+="(",B+=Vt(U.above),B+=")/(",B+=Vt(U.below),B+=")"):B+=`binom(${Vt(U.above)}, ${Vt(U.below)})`}break;case"surd":t.hasEmptyBranch("above")?B+=`sqrt(${Vt(t.body)})`:B+=`root(${Vt(t.above)}, ${Vt(t.body)})`;break;case"latex":B=t.value;break;case"leftright":{let U=t,O=U.leftDelim;O&&Sr[O]&&(O=Sr[O]);let ke=U.matchingRightDelim();ke&&Sr[ke]&&(ke=Sr[ke]),O&&(O=(r=eS[O])!=null?r:O),ke&&(ke=(i=eS[ke])!=null?i:ke),O&&ke?B=`lr(${(o=tS[O])!=null?o:O}${Vt(U.body)}${(l=tS[ke])!=null?l:ke})`:B=`lr(${O}${Vt(U.body)}${ke})`}break;case"sizeddelim":case"delim":B=t.value;break;case"overlap":break;case"mord":if(Sr[C])return Sr[C];B=(f=(d=(c=Sr[M])!=null?c:M)!=null?d:M)!=null?f:typeof t.value=="string"?t.value:"",B.startsWith("\\")&&(B+=" "),A=M?M.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,A?B=String.fromCodePoint(Number.parseInt("0x"+A[1])):B.length>0&&B.startsWith("\\")&&(B=typeof t.value=="string"?t.value.charAt(0):t.command),B=fH(B,t.style),B=` ${B} `;break;case"mbin":case"mrel":case"minner":B=(v=(y=(p=Sr[C])!=null?p:Sr[M])!=null?y:of[M])!=null?v:t.value;break;case"mopen":case"mclose":B=(x=Sr[C])!=null?x:t.value;break;case"mpunct":B=(S=of[M])!=null?S:M;break;case"mop":case"operator":case"extensible-symbol":t.value!=="​"&&(of[M]?B=of[M]:B=M==="\\operatorname"?Vt(t.body):(R=t.value)!=null?R:M,B+=" ");break;case"array":let D=t.environmentName;if(t.isMultiline)B=t.rows.map(U=>U.map(O=>Vt(O)).join("")).join(`
`);else{let U=t.rows,O=U.map(Ke=>Ke.map(Vt).join(", ")),ke={pmatrix:'"("',bmatrix:'"["',"bmatrix*":'"["',Bmatrix:'"{"',vmatrix:'"|"',matrix:"#none"}[D];ke?B=`mat(delim: ${ke}, ${O.join(" ; ")})`:D==="cases"||D==="rcases"?B=`cases(reverse: #${D==="rcases"}, ${O.join(", ")})`:D==="aligned"?B=U.map(Ke=>Ke.map(Vt).join(" & ")).join(" \\ "):B=U.map(Ke=>Ke.map(Vt).join("")).join("")}break;case"box":break;case"spacing":B=(L=(I=Sr[C])!=null?I:Sr[M])!=null?L:" ";break;case"space":B=" ";break;case"subsup":B=(j=t.leftSibling)!=null&&j.value?"":'""';break;case"macro":B=(ie=(G=(z=Sr[C])!=null?z:Sr[M])!=null?G:of[M])!=null?ie:Vt(t.body);break}if(!B){let P=cH[t.command.slice(1)];P&&(B=`${P}(${Vt(t.body)})`)}if(!B){let P=hH[t.command.slice(1)];P&&(B=P(t))}if(!t.hasEmptyBranch("subscript")){B+="_";let P=Vt(t.subscript);B+=P.length!==1?`(${P})`:P}if(!t.hasEmptyBranch("superscript")){B+="^";let P=Vt(t.superscript);B+=P.length!==1?`(${P})`:P}return B}function fH(t,e){if(!e)return t;let n=t;return e.variant==="double-struck"&&(n=`bb(${n})`),e.variant==="script"&&(n=`cal(${n})`),e.variant==="fraktur"&&(n=`frak(${n})`),e.variant==="sans-serif"&&(n=`sans(${n})`),e.variant==="monospace"&&(n=`mono(${n})`),e.variantStyle==="bold"&&(n=`bold(${n})`),n}function Ps(t,e){return typeof t=="string"?t+ch(e):ch(t)}function w2(t){var e;let n;if(t.parent.type==="prompt")t.parentBranch==="body"&&(n="prompt");else if(t.parentBranch==="body"){if(t.type==="first"&&(t.parent.type==="root"?n="mathfield":t.parent.type==="surd"?n="radicand":t.parent.type==="genfrac"?n="fraction":t.parent.type==="sizeddelim"&&(n="delimiter"),n))return n;t.type==="subsup"?t.superscript&&t.subscript?n="superscript and subscript":t.superscript?n="superscript":t.subscript&&(n="subscript"):t.type&&(n=(e={accent:"accented",array:"array",box:"box",chem:"chemical formula",delim:"delimiter",enclose:"cross out","extensible-symbol":"extensible symbol",error:"error",first:"first",genfrac:"fraction",group:"group",latex:"LaTeX",leftright:"delimiter",line:"line",subsup:"subscript-superscript",operator:"operator",overunder:"over-under",placeholder:"placeholder",rule:"rule",sizeddelim:"delimiter",space:"space",spacing:"spacing",surd:"square root",text:"text",prompt:"prompt",root:"math field",mop:"operator"}[t.type])!=null?e:"parent")}else if(t.parent.type==="genfrac"){if(t.parentBranch==="above")return"numerator";if(t.parentBranch==="below")return"denominator"}else t.parent.type==="surd"?t.parentBranch==="above"&&(n="index"):t.parentBranch==="superscript"?n="superscript":t.parentBranch==="subscript"&&(n="subscript");return n??"parent"}function mH(t,e,n,r){let i="";if(e==="plonk"){globalThis.MathfieldElement.playSound("plonk"),t.flushInlineShortcutBuffer();return}if(e==="delete")i=Ps("deleted: ",r);else if(e==="focus"||e.includes("move"))i=pH(t.model,n),i+=gH(t.model);else if(e==="replacement")i=Ps(t.model.at(t.model.position));else if(e==="line"){let o=Ps(t.model.root);t.keyboardDelegate.setAriaLabel(o)}else i=r?Ps(e+" ",r):e;if(i){let o=t.ariaLiveText.textContent.includes(" ")?"   ":"   ";t.ariaLiveText.textContent=i+o}}function pH(t,e){if(Number.isNaN(e))return"";let n=t.at(e);if(!n||n.treeDepth<=t.at(t.position).treeDepth)return"";let r="",i=n.parent,o=t.at(t.position).parent;for(;i!==t.root&&i!==o;)r+=`out of ${w2(i)};`,i=i.parent;return r}function gH(t){if(!t.selectionIsCollapsed)return`selected: ${Ps(t.getAtoms(t.selection))}`;let e="",n=t.at(t.position);if(n.isFirstSibling&&(e=`start of ${w2(n)}: `),n.isLastSibling){if(!n.isFirstSibling){if(!n.parent.parent)return`${Ps(n)}; end of mathfield`;e=`${Ps(n)}; end of ${w2(n)}`}}else e+=Ps(n);return e}var yH=class{constructor(t,e,n){this.mathfield=t,this.mode=e,this.silenceNotifications=!1,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.root=n}dispose(){this.mathfield=void 0}getState(){let t={ranges:[...this._selection.ranges]};return this.selection.direction&&this.selection.direction!=="none"&&(t.direction=this.selection.direction),{content:this.root.toJson(),selection:t,mode:this.mode}}setState(t,e){var n;let r=this.silenceNotifications;this.silenceNotifications=(n=e?.silenceNotifications)!=null?n:!0;let i={};if(e?.type==="undo"&&(i={inputType:"historyUndo"}),e?.type==="redo"&&(i={inputType:"historyRedo"}),this.contentWillChange(i)){let o=this.silenceNotifications;this.silenceNotifications=!0,this.mode=t.mode,this.root=$s(t.content),this.selection=t.selection,this.silenceNotifications=o,this.contentDidChange(i),this.selectionDidChange()}this.silenceNotifications=r}get atoms(){return this.root.children}get selection(){return this._selection}set selection(t){this.setSelection(t)}setSelection(t,e){return!this.mathfield.contentEditable&&this.mathfield.userSelect==="none"?!1:this.deferNotifications({selection:!0,content:!0},()=>{var n,r,i;let o=this.normalizeSelection(t,e);if(o===void 0)throw new TypeError("Invalid selection");if(o.ranges.length===1&&o.ranges[0][0]===o.ranges[0][1]){let p=o.ranges[0][0];if(!this.mathfield.dirty&&!((n=this.at(p))!=null&&n.parentPrompt)&&this.mathfield.hasEditablePrompts){if((r=this.at(p-1))!=null&&r.parentPrompt){this._anchor=this.normalizeOffset(p-1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor);return}if((i=this.at(p+1))!=null&&i.parentPrompt){this._anchor=this.normalizeOffset(p+1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor);return}this._anchor=0,this._position=0,this._selection={ranges:[[0,0]]};return}this._anchor=p,this._position=p,this._selection=o;return}let l=Zn(o);o.direction==="backward"?[this._position,this._anchor]=l:[this._anchor,this._position]=l;let c=this.at(l[0]+1),d=this.at(l[1]),f=re.commonAncestor(c,d);f?.type==="array"&&c.parent===f&&d.parent===f?this._selection={ranges:[l],direction:o.direction}:this._selection={ranges:[l],direction:o.direction},this._position>=0&&this._position<=this.lastOffset})}setPositionHandlingPlaceholder(t){var e;let n=this.at(t);n?.type==="placeholder"?this.setSelection(t-1,t):((e=n?.rightSibling)==null?void 0:e.type)==="placeholder"?this.setSelection(t,t+1):this.position=t,n instanceof An&&n.isSuggestion&&(n.isSuggestion=!1),this.mathfield.stopCoalescingUndo()}get position(){return this._position}set position(t){this.setSelection(t,t)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return Math.abs(this._anchor-this._position)===1?this.at(Math.max(this._anchor,this._position)).type==="placeholder":!1}collapseSelection(t="forward"){return this._anchor===this._position?!1:(t==="backward"?this.position=Math.min(this._anchor,this._position):this.position=Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(t){return this.atoms[t]}offsetOf(t){return this.atoms.indexOf(t)}getSiblingsRange(t){let e=this.at(t),{parent:n}=e;if(!n)return[0,this.lastOffset];let r=e.parent.branch(e.parentBranch);return[this.offsetOf(r[0]),this.offsetOf(r[r.length-1])]}getBranchRange(t,e){let n=this.at(t).branch(e);return[this.offsetOf(n[0]),this.offsetOf(n[n.length-1])]}getCellRange(t){var e;this.getParentCell(t);let n=this.at(t);if(n){for(;n&&((e=n.parent)==null?void 0:e.type)!=="array";)n=n.parent;if(!(!(n!=null&&n.parent)||n.parent.type!=="array"))return[this.offsetOf(n.firstSibling),this.offsetOf(n.lastSibling)]}}getAtoms(t,e,n){let r=n??{};if(ag(t)){if(r=e??{},t.ranges.length>1)return t.ranges.reduce((f,p)=>[...f,...this.getAtoms(p,r)],[]);t=t.ranges[0]}let i,o;if(Ds(t)){if(i=t,!Ds(e))return[];o=e}else[i,o]=t,r=e??{};if(!Number.isFinite(i))return[];r.includeChildren===void 0&&(r.includeChildren=!1),i<0&&(i=this.lastOffset-i+1),o<0&&(o=this.lastOffset+o+1);let l=Math.min(i,o)+1,c=Math.max(i,o);if(!r.includeChildren&&l===1&&c===this.lastOffset)return[this.root];let d=[];for(let f=l;f<=c;f++){let p=this.atoms[f];nS(this,p,l,c)&&d.push(p)}return r.includeChildren||(d=d.filter(f=>{let p=!1,{parent:y}=f;for(;y&&!p;)p=nS(this,y,l,c),y=y.parent;return!p})),d}findAtom(t,e=0,n="forward"){let r,i=this.lastOffset;if(n==="forward"){for(let o=e;o<=i;o++)if(r=this.atoms[o],t(r))return r;for(let o=0;o<e;o++)if(r=this.atoms[o],t(r))return r;return}for(let o=e;o>=0;o--)if(r=this.atoms[o],t(r))return r;for(let o=i;o>e;o--)if(r=this.atoms[o],t(r))return r}extractAtoms(t){var e;let n=this.getAtoms(t);n.length===1&&!n[0].parent&&n[0].isRoot&&(n[0]instanceof rt?n=n[0].rows.flatMap(r=>r.flatMap(i=>i)):n=[...(e=n[0].body)!=null?e:n[0].children],n=n.filter(r=>r.type!=="first"));for(let r of n)r.parent.removeChild(r);return n}deleteAtoms(t){t!=null||(t=[0,-1]),this.extractAtoms(t),this.position=t[0]}atomToString(t,e){let n=e??"latex";if(n.startsWith("latex"))return re.serialize([t],{expandMacro:n==="latex-expanded",skipStyles:n==="latex-unstyled",skipPlaceholders:n==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode});if(n==="math-ml")return gt(t);if(n==="spoken")return ch(t);if(n==="spoken-text"){let r=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="";let i=ch(t);return globalThis.MathfieldElement.textToSpeechMarkup=r,i}if(n==="spoken-ssml"||n==="spoken-ssml-with-highlighting"){let r=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="ssml";let i=ch(t);return globalThis.MathfieldElement.textToSpeechMarkup=r,i}return n==="typst"?Vt(t):n==="plain-text"?Yt(t,{plain:!0}):n==="ascii-math"?Yt(t):(console.error(`MathLive 0.106.0: Unexpected format "${n}`),"")}getValue(t,e,n){if(t===void 0)return this.atomToString(this.root,"latex");if(typeof t=="string"&&t!=="math-json")return this.atomToString(this.root,t);let r,i;if(Ds(t)&&Ds(e)?(r=[this.normalizeRange([t,e])],i=n):jg(t)?(r=[this.normalizeRange(t)],i=e):ag(t)?(r=t.ranges,i=e):(r=[this.normalizeRange([0,-1])],i=t),i!=null||(i="latex"),i==="math-json"){if(!globalThis.MathfieldElement.computeEngine)return window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`The CortexJS Compute Engine library is not available.
Load the library, for example with:
import "https://esm.run/@cortex-js/compute-engine"`),'["Error", "compute-engine-not-available"]';let o=this.getValue({ranges:r},"latex-unstyled");try{let l=globalThis.MathfieldElement.computeEngine.parse(o);return JSON.stringify(l.json)}catch(l){return JSON.stringify(["Error",`'${l.toString()}'`])}}if(i.startsWith("latex")){let o={expandMacro:i==="latex-expanded",skipStyles:i==="latex-unstyled",skipPlaceholders:i==="latex-without-placeholders",defaultMode:this.mathfield.options.defaultMode};return Ze(r.map(l=>re.serialize(this.getAtoms(l),o)))}return r.map(o=>this.getAtoms(o).map(l=>this.atomToString(l,i)).join("")).join("")}extendSelectionTo(t,e){return!this.mathfield.contentEditable&&this.mathfield.userSelect==="none"?!1:this.deferNotifications({selection:!0},()=>{let n=this.normalizeRange([t,e]),[r,i]=n,{parent:o}=this.at(i);if(o&&(o.type==="genfrac"||o.type==="subsup"))for(;o!==this.root&&u4(this,o,[r,i]);)i=this.offsetOf(o),o=o.parent;for(o=this.at(r).parent;o!==this.root&&u4(this,o,[r,i]);)r=this.offsetOf(o.leftSibling),o=o.parent;if(o=this.at(i).parent,o?.type==="genfrac")for(;o!==this.root&&u4(this,o,[r,i]);)i=this.offsetOf(o),o=o.parent;this._position=this.normalizeOffset(e),this._selection={ranges:[[r,i]],direction:"none"}})}announce(t,e,n=[]){var r,i;((i=(r=this.mathfield.host)==null?void 0:r.dispatchEvent(new CustomEvent("announce",{detail:{command:t,previousPosition:e,atoms:n},cancelable:!0,bubbles:!0,composed:!0})))==null||i)&&mH(this.mathfield,t,e,n)}deferNotifications(t,e){let n=this._selection,r=this._anchor,i=this._position,o=this.silenceNotifications;this.silenceNotifications=!0;let l=this.root.changeCounter;e(),this.silenceNotifications=o;let c=r!==this._anchor||i!==this._position||TK(this._selection,n)==="different";t.selection&&c&&this.selectionDidChange();let d=this.root.changeCounter!==l;return t.content&&d&&this.contentDidChange({inputType:t.type}),d||c}normalizeOffset(t){return t>0?t=Math.min(t,this.lastOffset):t<0&&(t=this.lastOffset+t+1),t}normalizeRange(t){let[e,n]=t;return e=this.normalizeOffset(e),n=this.normalizeOffset(n),e<n?[e,n]:[n,e]}normalizeSelection(t,e){var n;let r;if(Ds(t)){let i=this.normalizeOffset(t);if(Ds(e)){let o=this.normalizeOffset(e);r=i<=o?{ranges:[[i,o]],direction:"none"}:{ranges:[[o,i]],direction:"backward"}}else r={ranges:[[i,i]],direction:"none"}}else if(jg(t)){let i=this.normalizeOffset(t[0]),o=this.normalizeOffset(t[1]);r=i<=o?{ranges:[[i,o]],direction:"none"}:{ranges:[[o,i]],direction:"backward"}}else ag(t)&&(r={ranges:t.ranges.map(i=>this.normalizeRange(i)),direction:(n=t.direction)!=null?n:"none"});return r}get parentEnvironment(){let t=this.at(this.position).parent;if(t){for(;t.parent&&t.type!=="array";)t=t.parent;if(t.type==="array")return t}}get parentCell(){return this.getParentCell(this.position)}getParentCell(t){var e;let n=this.at(t);if(n){for(;n&&((e=n.parent)==null?void 0:e.type)!=="array";)n=n.parent;if(!(!(n!=null&&n.parent)||n.parent.type!=="array"))return n.parentBranch}}contentWillChange(t={}){if(this.silenceNotifications||!this.mathfield)return!0;let e=this.silenceNotifications;this.silenceNotifications=!0;let n=this.mathfield.onContentWillChange(t);return this.silenceNotifications=e,n}contentDidChange(t){if(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Ms(this.mathfield)),this.silenceNotifications||!this.mathfield||!this.mathfield.host)return;let e=this.silenceNotifications;this.silenceNotifications=!0,setTimeout(()=>{var n;!this.mathfield||!po(this.mathfield)||!this.mathfield.host||this.mathfield.host.dispatchEvent(new InputEvent("input",q(N({},t),{data:t.data?t.data:(n=t.inputType)!=null?n:"",bubbles:!0,composed:!0})))},0),this.silenceNotifications=e}selectionDidChange(){if(!this.mathfield)return;let t=this.silenceNotifications;t||(this.silenceNotifications=!0,this.mathfield.onSelectionDidChange()),this.silenceNotifications=t}};function nS(t,e,n,r){let i=t.offsetOf(e);if(i<n||i>r)return!1;if(!e.hasChildren)return!0;let o=t.offsetOf(e.firstChild);if(o>=n&&o<=r){let l=t.offsetOf(e.lastChild);if(l>=n&&l<=r)return!0}return!1}function u4(t,e,n){if(!(e!=null&&e.hasChildren))return!1;let[r,i]=n,o=t.offsetOf(e.firstChild),l=t.offsetOf(e.lastChild);return o>=r&&o<=i&&l>=o&&l<=i}function Mf(t,e,n,r){var i,o,l,c,d,f;let p=n.parent;if(Ao(r)&&n instanceof rt&&n.isMultiline&&_H(t,n,r[0],e))return!0;if(p&&n instanceof nn){let y=!r&&e==="forward"||r==="body"&&e==="backward",v=y?t.offsetOf(n.firstChild):t.offsetOf(n.lastChild);return y?n.rightDelim!=="?"&&n.rightDelim!=="."?(n.leftDelim=".",n.isDirty=!0):(p.addChildrenAfter(n.removeBranch("body"),n),p.removeChild(n),v--):n.leftDelim!=="?"&&n.leftDelim!=="."?(n.rightDelim=".",n.isDirty=!0):(p.addChildrenAfter(n.removeBranch("body"),n),p.removeChild(n),v--),t.position=v,!0}if(p&&n.type==="surd"){if(e==="forward"&&!r||e==="backward"&&r==="body"){let y=n.leftSibling;n.hasChildren&&p.addChildrenAfter(n.removeBranch("body"),n),p.removeChild(n),t.position=t.offsetOf(y)}else e==="forward"&&r==="body"?t.position=t.offsetOf(n):!r&&e==="backward"?n.hasChildren?t.position=t.offsetOf(n.lastChild):(t.position=Math.max(0,t.offsetOf(n)-1),p.removeChild(n)):r==="above"&&(n.hasEmptyBranch("above")&&n.removeBranch("above"),e==="backward"?t.position=t.offsetOf(n.leftSibling):t.position=t.offsetOf(n.body[0]));return!0}if(p&&(n.type==="box"||n.type==="enclose")){let y=r&&e==="backward"||!r&&e==="forward"?n.leftSibling:n.lastChild;return p.addChildrenAfter(n.removeBranch("body"),n),p.removeChild(n),t.position=t.offsetOf(y),!0}if(n.type==="genfrac"||n.type==="overunder"){if(!r)return n.type==="overunder"&&n.hasEmptyBranch("body")||n.type==="genfrac"&&n.hasEmptyBranch("below")&&n.hasEmptyBranch("above")?!1:(t.position=t.offsetOf(e==="forward"?n.firstChild:n.lastChild),!0);let y=Su.fractionNavigationOrder==="numerator-denominator"?"above":"below",v=y==="above"?"below":"above";if(p&&(e==="forward"&&r===y||e==="backward"&&r===v)){let x=n.removeBranch(y),S=n.removeBranch(v);return p.addChildrenAfter([...x,...S],n),p.removeChild(n),t.position=t.offsetOf(x.length>0?x[x.length-1]:S[0]),!0}return e==="backward"?t.position=t.offsetOf(n.leftSibling):t.position=t.offsetOf(n),!0}if(n.type==="extensible-symbol"||n.type==="subsup"){if(!r&&e==="forward")return!1;if(!r){if(n.subscript||n.superscript){let y=e==="forward"?(l=(i=n.superscript)==null?void 0:i[0])!=null?l:(o=n.subscript)==null?void 0:o[0]:(f=(c=n.subscript)==null?void 0:c[0].lastSibling)!=null?f:(d=n.superscript)==null?void 0:d[0].lastSibling;return y&&(t.position=t.offsetOf(y)),!0}return!1}if(!n.hasChildren&&n.type==="subsup"){let y=e==="forward"?t.offsetOf(n):Math.max(0,t.offsetOf(n)-1);return n.parent.removeChild(n),t.position=y,!0}if(r==="superscript")if(e==="backward"){let y=t.offsetOf(n.firstChild)-1;t.position=y}else n.subscript?t.position=t.offsetOf(n.subscript[0]):t.position=t.offsetOf(n);else r==="subscript"&&(e==="backward"&&n.superscript?t.position=t.offsetOf(n.superscript[0].lastSibling):e==="backward"?t.position=t.offsetOf(n.firstChild)-1:t.position=t.offsetOf(n));if(r&&n.hasEmptyBranch(r)&&(n.removeBranch(r),n.type==="subsup"&&!n.subscript&&!n.superscript)){let y=e==="forward"?t.offsetOf(n):Math.max(0,t.offsetOf(n)-1);n.parent.removeChild(n),t.position=y}return!0}if(p?.type==="genfrac"&&!r&&n.type!=="first"){let y=t.offsetOf(n.leftSibling);return p.removeChild(n),p.hasEmptyBranch("above")&&p.hasEmptyBranch("below")?(y=t.offsetOf(p.leftSibling),p.parent.removeChild(p),t.announce("delete",void 0,[p]),t.position=y,!0):(t.announce("delete",void 0,[n]),t.position=y,!0)}if(e==="backward"&&(p?.command==="\\ln"||p?.command==="\\log")&&n.parentBranch!=="body"){let y=t.offsetOf(p.leftSibling);return p.parent.removeChild(p),t.announce("delete",void 0,[p]),t.position=y,!0}return!1}function bH(t){return!t.mathfield.isSelectionEditable||!t.contentWillChange({inputType:"deleteContentBackward"})?!1:t.selectionIsCollapsed?t.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let e=t.at(t.position);if(!(e&&Mf(t,"backward",e))){if(e!=null&&e.isFirstSibling){if(Mf(t,"backward",e.parent,e.parentBranch))return;e=null}if(!e){t.announce("plonk");return}t.position=t.offsetOf(e.leftSibling),e.parent.removeChild(e),t.announce("delete",void 0,[e])}}):$i(t,Zn(t.selection),"deleteContentBackward")}function vH(t){return!t.mathfield.isSelectionEditable||!t.contentWillChange({inputType:"deleteContentForward"})?!1:t.selectionIsCollapsed?t.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var e,n;let r=t.at(t.position).rightSibling;if(r&&Mf(t,"forward",r))return;if(r){if(t.at(t.position).isLastSibling&&Mf(t,"forward",r.parent,r.parentBranch))return}else{if(r=t.at(t.position),r.isLastSibling&&Mf(t,"forward",r.parent,r.parentBranch))return;r=void 0}if(t.position===t.lastOffset||!r){t.announce("plonk");return}r.parent.removeChild(r);let i=(e=t.at(t.position))==null?void 0:e.rightSibling;for(;i?.type==="subsup";)i.parent.removeChild(i),i=(n=t.at(t.position))==null?void 0:n.rightSibling;t.announce("delete",void 0,[r])}):$i(t,Zn(t.selection),"deleteContentForward")}function $i(t,e,n){let r=t.getAtoms(e);if(r.length>0&&r[0].parent){let i=r[0];for(;i&&!(i instanceof rt);)i=i.parent;let o=r[r.length-1];for(;o&&!(o instanceof rt);)o=o.parent;if(i&&i instanceof rt){let p=i;if(p&&o===p&&p.isMultiline){let[y,v]=[Math.min(t.position,t.anchor),Math.max(t.position,t.anchor)],[x,S]=t.at(y).parentBranch,[R,I]=t.at(v).parentBranch;if(R-x+1>2){t.extractAtoms([y,v]);for(let j=x+1;j<R;j++)p.removeRow(j);return t.position=y,!0}}}let l=r[0].parent.firstChild;l.type==="first"&&(l=l.rightSibling);let c=r[r.length-1].parent.lastChild,d=r[0];d.type==="first"&&(d=d.rightSibling);let f=r[r.length-1];if(d===l&&f===c){let p=r[0].parent;p.parent&&p.type!=="prompt"&&(e=[t.offsetOf(p.leftSibling),t.offsetOf(p)])}if(r.length===1&&r[0].type==="placeholder"&&r[0].parent.type==="genfrac"){let p=r[0].parent,y=r[0].parentBranch==="below"?"above":"below",v=t.offsetOf(p.leftSibling);return t.deferNotifications({content:!0,selection:!0,type:n},()=>{var x,S;let R=p.removeBranch(y);if(R.length===1&&R[0].type==="placeholder")(S=p.parent)==null||S.removeChild(p),t.position=Math.max(0,v);else{let I=p.parent.addChildrenAfter(R,p);(x=p.parent)==null||x.removeChild(p),t.position=t.offsetOf(I)}})}}return t.deferNotifications({content:!0,selection:!0,type:n},()=>t.deleteAtoms(e))}function _H(t,e,n,r){if(!(e instanceof rt)||!e.isMultiline||e.rows.length===1||e.rows[n].length>1)return!1;let i=e.getCell(n,0);if(e.removeRow(n),r==="backward"){let o=e.getCell(n-1,0);t.position=t.offsetOf(o[o.length-1]),e.setCell(n-1,0,[...o,...i])}else{let o=e.getCell(n,0);t.position=t.offsetOf(o[0]),e.setCell(n,0,[...i,...o])}return!0}Cr({deleteAll:t=>t.contentWillChange({inputType:"deleteContent"})&&$i(t,[0,-1],"deleteContent"),deleteForward:t=>vH(t),deleteBackward:t=>bH(t),deleteNextWord:t=>t.contentWillChange({inputType:"deleteWordForward"})&&$i(t,[t.anchor,u2(t,t.position,"forward")],"deleteWordForward"),deletePreviousWord:t=>t.contentWillChange({inputType:"deleteWordBackward"})&&$i(t,[t.anchor,u2(t,t.position,"backward")],"deleteWordBackward"),deleteToGroupStart:t=>t.contentWillChange({inputType:"deleteSoftLineBackward"})&&$i(t,[t.anchor,t.offsetOf(t.at(t.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:t=>t.contentWillChange({inputType:"deleteSoftLineForward"})&&$i(t,[t.anchor,t.offsetOf(t.at(t.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:t=>t.contentWillChange({inputType:"deleteHardLineBackward"})&&$i(t,[t.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:t=>t.contentWillChange({inputType:"deleteHardLineForward"})&&$i(t,[t.anchor,-1],"deleteHardLineForward")},{target:"model",audioFeedback:"delete",canUndo:!0,changeContent:!0,changeSelection:!0});var xH=`<svg xmlns="http://www.w3.org/2000/svg" style="width: 21px;"  viewBox="0 0 576 512" role="img" aria-label="${qe("tooltip.toggle virtual keyboard")}"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg>`,wH=`<svg xmlns="http://www.w3.org/2000/svg" style="height: 18px;" viewBox="0 0 448 512" role="img" aria-label="${qe("tooltip.menu")}"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>`,EH=class{constructor(t,e){this.focusBlurInProgress=!1,this.connectedToVirtualKeyboard=!1;var n,r,i;this.options=N(q(N({},hg()),{macros:L3(),registers:OM()}),e1(e)),this.eventController=new AbortController;let o=this.eventController.signal;e.eventSink&&(this.host=e.eventSink),this.element=t,t.mathfield=this,this.blurred=!0,this.keystrokeCaptionVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.defaultStyle={},this.styleBias="left",this.options.defaultMode==="inline-math"?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline"),this.dirty=!1;let l=(r=(n=e.value)!=null?n:this.element.textContent)!=null?r:"";l=l.trim();let c=LE(this.options),d=Mi(l,{context:this.context}),f;d.length===1&&d[0].isRoot?f=d[0]:f=new re({type:"root",mode:c,body:d}),this.model=new yH(this,c,f),this.undoManager=new Qq(this.model);let p=[];if(p.push("<span contenteditable=true role=textbox aria-autocomplete=none aria-multiline=false part=keyboard-sink class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=0></span>"),p.push('<span part=container class=ML__container  style="visibility:hidden">'),p.push("<span part=content class=ML__content>"),p.push(qA(this)),p.push("</span>"),window.mathVirtualKeyboard&&(p.push(`<div part=virtual-keyboard-toggle class=ML__virtual-keyboard-toggle role=button ${this.hasEditableContent?"":'style="display:none;"'} data-l10n-tooltip="tooltip.toggle virtual keyboard">`),p.push(xH),p.push("</div>")),p.push('<div part=menu-toggle class=ML__menu-toggle role=button data-l10n-tooltip="tooltip.menu">'),p.push(wH),p.push("</div>"),p.push("</span>"),p.push("<span class=ML__sr-only>"),p.push("<span role=status aria-live=assertive aria-atomic=true></span>"),p.push("</span>"),this.element.innerHTML=globalThis.MathfieldElement.createHTML(p.join("")),!this.element.children){console.error("%cMathLive 0.106.0: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include `runtimeCompiler: true` in your Vue configuration. There may a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");return}this._l10Subscription=Qe.subscribe(()=>Qe.update(this.element)),Qe.update(this.element),this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",v=>v.stopImmediatePropagation(),{capture:!1,signal:o}),this.field.addEventListener("wheel",this,{passive:!1,signal:o}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this,{signal:o}):this.field.addEventListener("mousedown",this,{signal:o}),(i=this.element.querySelector("[part=virtual-keyboard-toggle]"))==null||i.addEventListener("click",()=>{window.mathVirtualKeyboard.visible?window.mathVirtualKeyboard.hide():(window.mathVirtualKeyboard.show({animate:!0}),window.mathVirtualKeyboard.update(Ms(this)))},{signal:o}),this.field.addEventListener("contextmenu",this,{signal:o});let y=this.element.querySelector("[part=menu-toggle]");y?.addEventListener("pointerdown",v=>{if(v.currentTarget!==y)return;let x=this.menu;if(x.state!=="closed")return;this.element.classList.add("tracking");let S=y.getBoundingClientRect();x.modifiers=su(v),x.show({target:y,location:{x:S.left,y:S.bottom},onDismiss:()=>this.element.classList.remove("tracking")}),v.preventDefault(),v.stopPropagation()},{signal:o}),(this.model.atoms.length<=1||this.disabled||this.readOnly&&!this.hasEditableContent||this.userSelect==="none")&&(y.style.display="none"),this.ariaLiveText=this.element.querySelector("[role=status]"),this.keyboardDelegate=tq(this.element.querySelector(".ML__keyboard-sink"),this.element,this),window.addEventListener("resize",this,{signal:o}),document.addEventListener("scroll",this,{signal:o}),this.resizeObserver=new ResizeObserver(v=>{if(this.resizeObserverStarted){this.resizeObserverStarted=!1;return}Qt(this)}),this.resizeObserverStarted=!0,this.resizeObserver.observe(this.field),window.mathVirtualKeyboard.addEventListener("virtual-keyboard-toggle",this,{signal:o}),Jr!=="ready"&&document.fonts.ready.then(()=>Jg(this)),t.querySelector("[part=container]").style.removeProperty("visibility"),this.undoManager.startRecording(),this.undoManager.snapshot("set-value"),Qt(this)}connectToVirtualKeyboard(){this.connectedToVirtualKeyboard||(this.connectedToVirtualKeyboard=!0,window.addEventListener("message",this,{signal:this.eventController.signal}),window.mathVirtualKeyboard.connect(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Ms(this)),V0(this))}disconnectFromVirtualKeyboard(){this.connectedToVirtualKeyboard&&(window.removeEventListener("message",this),window.mathVirtualKeyboard.disconnect(),this.connectedToVirtualKeyboard=!1,g2())}showMenu(t){var e,n;let r=(n=(e=t?.location)!=null?e:sg(this.field))!=null?n:void 0,i=t?.modifiers,o=this.element.querySelector("[part=container]");return this._menu.show({target:o,location:r,modifiers:i})}get colorMap(){return t=>{var e,n,r;return(r=(n=(e=this.options).colorMap)==null?void 0:n.call(e,t))!=null?r:T1(t)}}get backgroundColorMap(){return t=>{var e,n,r,i,o,l;return(l=(o=(n=(e=this.options).backgroundColorMap)==null?void 0:n.call(e,t))!=null?o:(i=(r=this.options).colorMap)==null?void 0:i.call(r,t))!=null?l:A3(t)}}get smartFence(){var t;return(t=this.options.smartFence)!=null?t:!1}get readOnly(){var t;return(t=this.options.readOnly)!=null?t:!1}get disabled(){var t,e;return(e=(t=this.host)==null?void 0:t.disabled)!=null?e:!1}get contentEditable(){return this.host?this.host.getAttribute("contenteditable")!=="false":!1}get userSelect(){if(!this.host)return"";let t=getComputedStyle(this.host);return t.getPropertyValue("user-select")||t.getPropertyValue("-webkit-user-select")}get hasEditableContent(){return this.disabled||!this.contentEditable?!1:!this.readOnly||this.hasEditablePrompts}get hasEditablePrompts(){return this.readOnly&&!this.disabled&&this.contentEditable&&this.model.findAtom(t=>t.type==="prompt"&&!t.locked)!==void 0}get isSelectionEditable(){if(this.disabled||!this.contentEditable)return!1;if(!this.readOnly)return!0;let t=this.model.at(this.model.anchor),e=this.model.at(this.model.position),n=re.commonAncestor(t,e);return!!(n?.type==="prompt"||n!=null&&n.parentPrompt)}get letterShapeStyle(){var t;return(t=this.options.letterShapeStyle)!=null?t:"tex"}get minFontScale(){return this.options.minFontScale}get maxMatrixCols(){return this.options.maxMatrixCols}queryStyle(t){let e=a2(this,t);"verbatimColor"in e&&delete e.verbatimColor,"verbatimBackgroundColor"in e&&delete e.verbatimBackgroundColor;let n=Object.keys(e).length;if(n===0)return"all";if(n>1){for(let d of Object.keys(e)){let f=this.queryStyle({[d]:e[d]});if(f==="none")return"none";if(f==="some")return"some"}return"all"}let r=Object.keys(e)[0],i=e[r];if(this.model.selectionIsCollapsed)return _h(this)[r]===i?"all":"none";let o=this.model.getAtoms(this.model.selection,{includeChildren:!0}),l=o.length;if(l===0)return"none";let c=0;for(let d of o){if(d.type==="first"){l-=1;continue}d.style[r]===i&&(c+=1)}return c===0?"none":c===l?"all":"some"}get keybindings(){var t,e;if(this._keybindings)return this._keybindings;let[n,r]=oq(this.options.keybindings,(t=qf())!=null?t:J$());return((e=qf())==null?void 0:e.score)>0&&(this._keybindings=n,r.length>0&&console.error("MathLive 0.106.0: Invalid keybindings for current keyboard layout",r)),n}get menu(){return this._menu!=null||(this._menu=new HE(oH(this),{host:this.host})),this._menu}set menuItems(t){this._menu?this._menu.menuItems=t:this._menu=new HE(t,{host:this.host})}setOptions(t){var e;this.options=N(N({},this.options),e1(t)),this._keybindings=void 0,this.options.defaultMode==="inline-math"?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline");let n=this.options.defaultMode;n==="inline-math"&&(n="math"),((e=this.model.root.firstChild)==null?void 0:e.mode)!==n&&(this.model.root.firstChild.mode=n),this.options.readOnly&&this.hasFocus()&&window.mathVirtualKeyboard.visible&&this.executeCommand("hideVirtualKeyboard");let r=re.serialize([this.model.root],{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in t||this.model.getValue()!==r)&&jA(this),("value"in t||"registers"in t||"colorMap"in t||"backgroundColorMap"in t||"letterShapeStyle"in t||"minFontScale"in t||"maxMatrixCols"in t||"readOnly"in t||"placeholderContent"in t||"placeholderSymbol"in t)&&Qt(this)}getOptions(t){return nu(this.options,t)}getOption(t){return nu(this.options,t)}async handleEvent(t){var e;if(po(this)){if(H3(t)){if(!N3(t.origin,(e=this.options.originValidator)!=null?e:"none"))throw new DOMException(`Message from unknown origin (${t.origin}) cannot be handled`,"SecurityError");let{action:n}=t.data;if(n==="execute-command"){let r=jf(t.data.command);if(!r||sh(r)==="virtual-keyboard")return;this.executeCommand(r)}else n==="update-state"||(n==="focus"?this.focus({preventScroll:!0}):n==="blur"&&this.blur());return}switch(t.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":this.userSelect!=="none"&&PE(this,t);break;case"pointerdown":!t.defaultPrevented&&this.userSelect!=="none"&&(PE(this,t),t.shiftKey===!1&&await GE(t,this.element.querySelector("[part=container]"),this.menu)&&n1.stop());break;case"contextmenu":this.userSelect!=="none"&&t.shiftKey===!1&&await GE(t,this.element.querySelector("[part=container]"),this.menu)&&n1.stop();break;case"virtual-keyboard-toggle":this.hasFocus()&&V0(this),this.hasFocus()&&(this.keyboardDelegate.blur(),this.keyboardDelegate.focus());break;case"resize":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>po(this)&&this.onGeometryChange());break;case"scroll":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>po(this)&&this.onGeometryChange());break;case"wheel":this.onWheel(t);break;case"message":break;default:console.warn("Unexpected event type",t.type)}}}dispose(){if(!po(this))return;Qe.unsubscribe(this._l10Subscription),this.keyboardDelegate.dispose(),this.keyboardDelegate=void 0,this.eventController.abort(),this.eventController=void 0,this.resizeObserver.disconnect(),window.mathVirtualKeyboard.removeEventListener("virtual-keyboard-toggle",this),this.disconnectFromVirtualKeyboard(),this.model.dispose();let t=this.element;delete t.mathfield,this.element=void 0,this.host=void 0,this.field=void 0,this.ariaLiveText=void 0,lj(),dq(),Aj()}flushInlineShortcutBuffer(t){if(t!=null||(t={defer:!1}),!t.defer){this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=0;return}this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(t){return sh(t)==="virtual-keyboard"?(this.focus({preventScroll:!0}),window.mathVirtualKeyboard.executeCommand(t),requestAnimationFrame(()=>window.mathVirtualKeyboard.update(Ms(this))),!1):vq(this,t)}get errors(){return g$(this.model.getValue(),{context:this.context})}getValue(t,e,n){return this.model.getValue(t,e,n)}setValue(t,e){var n;e=e??{mode:"math"},e.insertionMode===void 0&&(e.insertionMode="replaceAll"),(e.format===void 0||e.format==="auto")&&(e.format="latex"),(e.mode===void 0||e.mode==="auto")&&(e.mode=(n=LK(this.model,this.model.position))!=null?n:"math");let r=this.undoManager.canUndo();Lt.insert(this.model,t,e)&&(Qt(this),r||this.undoManager.reset(),this.undoManager.snapshot("set-value"))}get expression(){let t=globalThis.MathfieldElement.computeEngine;return t?t.box(t.parse(this.model.getValue("latex-unstyled"))):(console.error("MathLive 0.106.0:  no compute engine available. Make sure the Compute Engine library is loaded."),null)}scrollIntoView(){var t;if(!this.element)return;if(this.host){if(this.options.onScrollIntoView)this.options.onScrollIntoView(this);else if(this.host.scrollIntoView({block:"nearest",inline:"nearest"}),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.container===window.document.body){let r=window.mathVirtualKeyboard.boundingRect,i=this.host.getBoundingClientRect();i.bottom>r.top&&((t=window.document.scrollingElement)==null||t.scrollBy(0,i.bottom-r.top+8))}}this.dirty&&fu(this,{interactive:!0});let e=this.field.getBoundingClientRect(),n=null;if(this.model.selectionIsCollapsed)n=sg(this.field);else{let r=qM(this);if(r.length>0){let i=-1/0,o=-1/0;for(let l of r)l.right>i&&(i=l.right),l.top<o&&(o=l.top);n={x:i+e.left-this.field.scrollLeft,y:o+e.top-this.field.scrollTop,height:0}}}if(this.host&&n){let r=this.host.getBoundingClientRect(),i=n.y,o=this.host.scrollTop;i<r.top?o=i-r.top+this.host.scrollTop:i>r.bottom&&(o=i-r.bottom+this.host.scrollTop+n.height),this.host.scroll({top:o,left:0})}if(n){let r=n.x-window.scrollX,i=this.field.scrollLeft;r<e.left?i=r-e.left+this.field.scrollLeft-20:r>e.right&&(i=r-e.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:i})}}insert(t,e){if(typeof t!="string"||t.length===0&&(e?.insertionMode==="insertBefore"||e?.insertionMode==="insertAfter")||t.length===0&&this.model.selectionIsCollapsed)return!1;if(this.flushInlineShortcutBuffer(),e=e??{mode:"math"},e.focus&&this.focus(),e.feedback&&(globalThis.MathfieldElement.keypressVibration&&xM()&&navigator.vibrate(HA),globalThis.MathfieldElement.playSound("keypress")),t==="\\\\")QA(this.model);else if(t==="&")JA(this.model);else if(this.model.selectionIsCollapsed){let n=N({},_h(this));!/^[a-zA-Z0-9]$/.test(t)&&this.styleBias!=="none"&&(n.variant="normal",n.variantStyle=void 0),Lt.insert(this.model,t,N({style:n},e))}else Lt.insert(this.model,t,e);return this.snapshot(`insert-${this.model.at(this.model.position).type}`),Qt(this),e.scrollIntoView&&this.scrollIntoView(),!0}switchMode(t,e="",n=""){if(this.model.mode===t||!this.hasEditableContent||!this.contentEditable||this.disabled)return;let{model:r}=this,i=r.mode;if(r.mode=t,this.host&&!this.host.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))){r.mode=i;return}r.mode=i,r.deferNotifications({content:!!n||!!e,selection:!0,type:"insertText"},()=>{let o=r.at(r.position),l=(p,y)=>{if(!p)return;let v=r.mode==="math"?Mi(Z4(p,{format:"ascii-math"})[1],{context:this.context}):[...p].map(x=>new Dh(x,x,{}));if(y.select){let x=o.parent.addChildrenAfter(v,o);r.setSelection(r.offsetOf(v[0].leftSibling),r.offsetOf(x))}else r.position=r.offsetOf(o.parent.addChildrenAfter(v,o));f=!0},c=(p,y)=>{let v=new wf(p);o.parent.addChildAfter(v,o),y.select?r.setSelection(r.offsetOf(v.firstChild),r.offsetOf(v.lastChild)):r.position=r.offsetOf(v.lastChild),f=!0},d=()=>{let p=t==="latex"?"latex":t==="math"?"plain-text":"ascii-math",y=Zn(r.selection),v=this.model.getValue(y,p),x=this.model.extractAtoms(y);return x.length===1&&x[0].type==="placeholder"&&(v=n),o=r.at(y[0]),v},f=!1;if(this.flushInlineShortcutBuffer(),this.stopCoalescingUndo(),xh(this,"accept"),r.selectionIsCollapsed)l(e,{select:!1}),r.mode=t,t==="latex"?c(n,{select:!1}):l(n,{select:!1});else{let p=d();r.mode=t,t==="latex"?c(p,{select:!0}):l(p,{select:!0})}return Qt(this),this.undoManager.snapshot(t==="latex"?"insert-latex":"insert"),f}),r.mode=t,window.mathVirtualKeyboard.update(Ms(this))}hasFocus(){return!this.blurred}focus(t){var e;this.focusBlurInProgress||(this.hasFocus()||(this.onFocus(),this.model.announce("line")),(e=t?.preventScroll)!=null&&e||this.scrollIntoView())}blur(){this.disconnectFromVirtualKeyboard(),this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]},this.focus()}applyStyle(t,e={}){var n;let r,i="set",o=!1;jg(e)?r=e:(e.operation==="toggle"&&(i="toggle"),r=e.range,o=(n=e.silenceNotifications)!=null?n:!1),r&&(r=this.model.normalizeRange(r)),r&&r[0]===r[1]&&(r=void 0);let l=a2(this,t);if(r===void 0&&this.model.selectionIsCollapsed){if(i==="set"){let d=N({},this.defaultStyle);"color"in l&&delete d.verbatimColor,"backgroundColor"in l&&delete d.verbatimBackgroundColor,this.defaultStyle=N(N({},d),l),this.styleBias="none";return}let c=N({},this.defaultStyle);for(let d of Object.keys(l))c[d]===l[d]?(d==="color"&&delete c.verbatimColor,d==="backgroundColor"&&delete c.verbatimBackgroundColor,delete c[d]):c[d]=l[d];this.defaultStyle=c,this.styleBias="none";return}this.model.deferNotifications({content:!o,type:"insertText"},()=>{if(r===void 0)for(let c of this.model.selection.ranges)t2(this.model,c,l,{operation:i});else t2(this.model,r,l,{operation:i})}),Qt(this)}toggleContextMenu(){var t;let e=this.menu;if(!e.visible)return!1;if(e.state==="open")return e.hide(),!0;let n=(t=HM(this,this.model.position))==null?void 0:t.bounds;if(!n)return!1;let r={x:n.right,y:n.bottom};return e.show({target:this.element.querySelector("[part=container]"),location:r,onDismiss:()=>{var i;return(i=this.element)==null?void 0:i.focus()}}),!0}getPrompt(t){return this.model.findAtom(n=>n.type==="prompt"&&n.placeholderId===t)}getPromptValue(t,e){let n=this.getPrompt(t);if(!n)return"";let r=this.model.offsetOf(n.firstChild),i=this.model.offsetOf(n.lastChild);return this.model.getValue(r,i,e)}getPrompts(t){return this.model.atoms.filter(e=>e.type!=="prompt"?!1:t?!(t.id&&e.placeholderId!==t.id||t.locked&&e.locked!==t.locked||t.correctness==="undefined"&&e.correctness||t.correctness&&e.correctness!==t.correctness):!0).map(e=>e.placeholderId)}setPromptValue(t,e,n){if(e!==void 0){let r=this.getPrompt(t);if(!r){console.error(`MathLive 0.106.0: unknown prompt ${t}`);return}let i=this.model.getBranchRange(this.model.offsetOf(r),"body");this.model.setSelection(i),this.insert(e,q(N({},n),{insertionMode:"replaceSelection"}))}n!=null&&n.silenceNotifications&&(this.valueOnFocus=this.getValue()),Qt(this)}setPromptState(t,e,n){let r=this.getPrompt(t);if(!r){console.error(`MathLive 0.106.0: unknown prompt ${t}`);return}e==="undefined"?r.correctness=void 0:typeof e=="string"&&(r.correctness=e),typeof n=="boolean"&&(r.locked=n,r.captureSelection=n),Qt(this)}getPromptState(t){let e=this.getPrompt(t);return e?[e.correctness,e.locked]:(console.error(`MathLive 0.106.0: unknown prompt ${t}`),[void 0,!0])}getPromptRange(t){let e=this.getPrompt(t);return e?this.model.getBranchRange(this.model.offsetOf(e),"body"):(console.error(`MathLive 0.106.0: unknown prompt ${t}`),[0,0])}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Ms(this))}snapshot(t){var e;this.undoManager.snapshot(t)&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Ms(this)),(e=this.host)==null||e.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}stopCoalescingUndo(){this.undoManager.stopCoalescing(this.model.selection)}stopRecording(){this.undoManager.stopRecording()}startRecording(){this.undoManager.startRecording()}undo(){var t;this.undoManager.undo()&&((t=this.host)==null||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var t;this.undoManager.redo()&&((t=this.host)==null||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"redo"}})))}resetUndo(){var t;(t=this.undoManager)==null||t.reset()}onSelectionDidChange(){var t,e;let n=this.model;if(this.keyboardDelegate.setValue(n.getValue(n.selection,"latex-expanded")),n.selectionIsCollapsed){let r=K3(n),i=n.position,o=n.at(i),l=(t=o.mode)!=null?t:LE(this.options);if(r&&(i<n.offsetOf(r.firstChild)-1||i>n.offsetOf(r.lastChild)+1))xh(this,"accept",{mode:l}),n.position=n.offsetOf(o);else{let c=n.at(i+1);c?.type==="first"&&c.mode==="latex"?n.position=i+1:r&&c?.mode!=="latex"?n.position=i-1:this.switchMode(l)}}(e=this.host)==null||e.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0})),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(Ms(this)),V0(this)}onContentWillChange(t){var e,n,r;return(r=(n=this.host)==null?void 0:n.dispatchEvent(new InputEvent("beforeinput",q(N({},t),{data:t.data?t.data:(e=t.inputType)!=null?e:"",cancelable:!0,bubbles:!0,composed:!0}))))!=null?r:!0}onFocus(){this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.stopCoalescingUndo(),this.valueOnFocus=this.model.getValue(),this.hasEditablePrompts&&!this.model.at(this.model.anchor).parentPrompt&&this.executeCommand("moveToNextPlaceholder"),fu(this,{interactive:!0}),setTimeout(()=>{var t;if(!po(this))return;let e=new AbortController,n=e.signal;for(let r of["focus","blur","focusin","focusout"])(t=this.host)==null||t.addEventListener(r,i=>{i.preventDefault(),i.stopPropagation()},{once:!0,capture:!0,signal:n});this.keyboardDelegate.blur(),this.keyboardDelegate.focus(),this.connectToVirtualKeyboard(),this.focusBlurInProgress=!1,e.abort()},60))}onBlur(){var t,e,n;if(!(this.focusBlurInProgress||this.blurred)&&(this.focusBlurInProgress=!0,this.stopCoalescingUndo(),this.blurred=!0,this.ariaLiveText.textContent="",wh(this),this.model.getValue()!==this.valueOnFocus&&((t=this.host)==null||t.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),this.disconnectFromVirtualKeyboard(),(e=this.host)==null||e.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),(n=this.host)==null||n.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),Qt(this),this.focusBlurInProgress=!1,g2(),X3.restoreFocusWhenDocumentFocused)){let r=new AbortController,i=r.signal;window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{po(this)&&this.focus({preventScroll:!0})},{once:!0,signal:i})},{once:!0,signal:i}),document.addEventListener("focusin",()=>r.abort(),{once:!0}),document.addEventListener("click",()=>r.abort(),{once:!0})}}onInput(t){h2(this,t)}onKeystroke(t){return oT(this,t)}onCompositionStart(t){$i(this.model,Zn(this.model.selection),"insertText");let e=sg(this.field);e&&requestAnimationFrame(()=>{fu(this),this.keyboardDelegate.moveTo(e.x,e.y-e.height)})}onCompositionUpdate(t){Kq(this.model,t),Qt(this)}onCompositionEnd(t){$q(this.model),h2(this,t,{simulateKeystroke:!0})}onCut(t){if(!this.isSelectionEditable){this.model.announce("plonk");return}this.model.contentWillChange({inputType:"deleteByCut"})&&(this.stopCoalescingUndo(),t.clipboardData?Lt.onCopy(this,t):Lt.copyToClipboard(this,"latex"),$i(this.model,Zn(this.model.selection),"deleteByCut"),this.snapshot("cut"),Qt(this))}onCopy(t){t.clipboardData?Lt.onCopy(this,t):Lt.copyToClipboard(this,"latex")}onPaste(t){let e=this.isSelectionEditable;return e&&(e=Lt.onPaste(this.model.at(this.model.position).mode,this,t.clipboardData)),e||this.model.announce("plonk"),t.preventDefault(),t.stopPropagation(),e}onGeometryChange(){var t;(t=this._menu)==null||t.hide(),U1(this),V0(this)}onWheel(t){let e=5*t.deltaX;if(!Number.isFinite(e)||e===0)return;let n=this.field;e<0&&n.scrollLeft===0||e>0&&n.offsetWidth+n.scrollLeft>=n.scrollWidth||(n.scrollBy({top:0,left:e}),t.preventDefault(),t.stopPropagation())}getHTMLElement(t){let e=t;for(;!e.id&&e.hasChildren;)e=t.children[0];return this.field.querySelector(`[data-atom-id="${e.id}"]`)}get context(){var t,e;return{registers:(t=this.options.registers)!=null?t:{},smartFence:this.smartFence,letterShapeStyle:this.letterShapeStyle,minFontScale:this.minFontScale,maxMatrixCols:this.maxMatrixCols,placeholderSymbol:(e=this.options.placeholderSymbol)!=null?e:"▢",colorMap:n=>this.colorMap(n),backgroundColorMap:n=>this.backgroundColorMap(n),getMacro:n=>MM(n,this.options.macros),atomIdsSettings:{seed:"random",groupNumbers:!1}}}};Cr({speak:(t,e,n)=>SH(t,e,n)},{target:"mathfield"});function SH(t,e,n){var r;n=n??{withHighlighting:!1};let{model:i}=t;function o(p){let y=null;switch(p){case"all":y=i.root;break;case"selection":y=i.getAtoms(i.selection);break;case"left":{y=i.getAtoms(i.offsetOf(i.at(i.position).leftSibling),i.position);break}case"right":{y=i.getAtoms(i.position,i.offsetOf(i.at(i.position).rightSibling));break}case"group":y=i.getAtoms(i.getSiblingsRange(i.position));break;case"parent":{let{parent:v}=i.at(i.position);v!=null&&v.parent?y=v:y=i.root;break}default:y=i.root}return y}function l(p){let y="";switch(p){case"all":console.error("Internal failure: speak all failed");break;case"selection":y="no selection";break;case"left":y="at start";break;case"right":y="at end";break;case"group":console.error("Internal failure: speak group failed");break;case"parent":y="no parent";break;default:console.error('unknown speak_ param value: "'+p+'"');break}return y}let c=globalThis.MathfieldElement,d=o(e);if(d===null)return(r=c.speakHook)==null||r.call(c,l(e)),!1;(n.withHighlighting||c.speechEngine==="amazon")&&(c.textToSpeechMarkup=globalThis.sre&&c.textToSpeechRules==="sre"?"ssml_step":"ssml");let f=ch(d);return Di()&&n.withHighlighting?(Ts().readAloudMathfield=t,fu(t,{forHighlighting:!0}),c.readAloudHook&&c.readAloudHook(t.field,f)):c.speakHook&&c.speakHook(f),!1}function kH(t){var e,n;if(!Di())return;let r=globalThis.MathfieldElement;if(!r.speechEngine||r.speechEngine==="local"){let i=new SpeechSynthesisUtterance(t);globalThis.speechSynthesis.speak(i)}else if(r.speechEngine==="amazon")if(!("AWS"in window))console.error("MathLive 0.106.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");else{let i=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),o={OutputFormat:"mp3",VoiceId:(e=r.speechEngineVoice)!=null?e:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes((n=r.speechEngineVoice)!=null?n:"Joanna")?"neural":"standard",Text:t,TextType:"ssml"};i.synthesizeSpeech(o,(l,c)=>{if(l)console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech()\` error: ${l}`);else if(c!=null&&c.AudioStream){let d=new Uint8Array(c.AudioStream),f=new Blob([d.buffer],{type:"audio/mpeg"}),p=URL.createObjectURL(f);new Audio(p).play().catch(y=>console.error(y))}})}else r.speechEngine==="google"&&console.error("MathLive 0.106.0: The Google speech engine is not supported yet. Please come again.")}function _T(t){if(t&&(t.classList.remove("ML__highlight"),t.children))for(let e of t.children)_T(e)}function E2(t,e){var n;t&&(!e||((n=t.dataset)==null?void 0:n.atomId)===e?(t.classList.add("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(r=>{r instanceof HTMLElement&&E2(r)})):(t.classList.remove("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(r=>{r instanceof HTMLElement&&E2(r,e)})))}function CH(t,e){var n;if(!Di())return;if(globalThis.MathfieldElement.speechEngine!=="amazon"){console.error("MathLive 0.106.0: Use Amazon TTS Engine for synchronized highlighting"),typeof globalThis.MathfieldElement.speakHook=="function"&&globalThis.MathfieldElement.speakHook(e);return}if(!globalThis.AWS){console.error("MathLive 0.106.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");return}let r=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),i={OutputFormat:"json",VoiceId:(n=globalThis.MathfieldElement.speechEngineVoice)!=null?n:"Joanna",Engine:"standard",Text:e,TextType:"ssml",SpeechMarkTypes:["ssml"]};Ts().readAloudElement=t,r.synthesizeSpeech(i,(o,l)=>{if(o){console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech()\` error: ${o}`);return}if(!(l!=null&&l.AudioStream))return;let c=new TextDecoder("utf-8").decode(new Uint8Array(l.AudioStream));Ts().readAloudMarks=c.split(`
`).map(d=>d?JSON.parse(d):{}),Ts().readAloudTokens=[];for(let d of Ts().readAloudMarks)d.value&&Ts().readAloudTokens.push(d.value);Ts().readAloudCurrentMark="",i.OutputFormat="mp3",i.SpeechMarkTypes=[],r.synthesizeSpeech(i,(d,f)=>{if(d){console.trace(`MathLive 0.106.0: \`polly.synthesizeSpeech("${e}") error:${d}`);return}if(!(f!=null&&f.AudioStream))return;let p=new Uint8Array(f.AudioStream),y=new Blob([p.buffer],{type:"audio/mpeg"}),v=URL.createObjectURL(y),x=Ts();x.readAloudAudio?x.readAloudAudio.pause():(x.readAloudAudio=new Audio,x.readAloudAudio.addEventListener("ended",()=>{let S=x.readAloudMathfield;x.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),S?(fu(S),x.readAloudElement=null,x.readAloudMathfield=null,x.readAloudTokens=[],x.readAloudMarks=[],x.readAloudCurrentMark=""):_T(x.readAloudElement)}),x.readAloudAudio.addEventListener("timeupdate",()=>{let S="",R=x.readAloudAudio.currentTime*1e3+100;for(let I of x.readAloudMarks)I.time<R&&(S=I.value);x.readAloudCurrentMark!==S&&(x.readAloudCurrentToken=S,S&&S===x.readAloudFinalToken?x.readAloudAudio.pause():(x.readAloudCurrentMark=S,E2(x.readAloudElement,x.readAloudCurrentMark)))})),x.readAloudAudio.src=v,x.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),x.readAloudAudio.play()})})}Di()||console.error('MathLive 0.106.0: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var Et=new WeakMap,MH=.5,ks={letterShapeStyle:"mf.letterShapeStyle = ...",horizontalSpacingScale:'Removed. Use `"thinmuskip"`, `"medmuskip"`, and `"thickmuskip"` registers ',macros:"mf.macros = ...",registers:"mf.registers = ...",backgroundColorMap:"mf.backgroundColorMap = ...",colorMap:"mf.colorMap = ...",enablePopover:"mf.popoverPolicy = ...",mathModeSpace:"mf.mathModeSpace = ...",placeholderSymbol:"mf.placeholderSymbol = ...",readOnly:"mf.readOnly = ...",removeExtraneousParentheses:"mf.removeExtraneousParentheses = ...",scriptDepth:"mf.scriptDepth = ...",smartFence:"mf.smartFence = ...",smartMode:"mf.smartMode = ...",smartSuperscript:"mf.smartSuperscript = ...",inlineShortcutTimeout:"mf.inlineShortcutTimeout = ...",inlineShortcuts:"mf.inlineShortcuts = ...",keybindings:"mf.keybindings = ...",virtualKeyboardMode:"mf.mathVirtualKeyboardPolicy = ...",customVirtualKeyboardLayers:"mathVirtualKeyboard.layers = ...",customVirtualKeyboards:"mathVirtualKeyboard.layouts = ...",keypressSound:"mathVirtualKeyboard.keypressSound = ...",keypressVibration:"mathVirtualKeyboard.keypressVibration = ...",plonkSound:"mathVirtualKeyboard.plonkSound = ...",virtualKeyboardContainer:"mathVirtualKeyboard.container = ...",virtualKeyboardLayout:"mathVirtualKeyboard.alphabeticLayout = ...",virtualKeyboardTheme:"No longer supported",virtualKeyboardToggleGlyph:"No longer supported",virtualKeyboardToolbar:"mathVirtualKeyboard.editToolbar = ...",virtualKeyboards:"Use `mathVirtualKeyboard.layouts`",speechEngine:"`MathfieldElement.speechEngine`",speechEngineRate:"`MathfieldElement.speechEngineRate`",speechEngineVoice:"`MathfieldElement.speechEngineVoice`",textToSpeechMarkup:"`MathfieldElement.textToSpeechMarkup`",textToSpeechRules:"`MathfieldElement.textToSpeechRules`",textToSpeechRulesOptions:"`MathfieldElement.textToSpeechRulesOptions`",readAloudHook:"`MathfieldElement.readAloudHook`",speakHook:"`MathfieldElement.speakHook`",computeEngine:"`MathfieldElement.computeEngine`",fontsDirectory:"`MathfieldElement.fontsDirectory`",soundsDirectory:"`MathfieldElement.soundsDirectory`",createHTML:"`MathfieldElement.createHTML`",onExport:"`mf.onExport`",onInlineShortcut:"`mf.onInlineShortcut`",onScrollIntoView:"`mf.onScrollIntoView`",locale:"MathfieldElement.locale = ...",strings:"MathfieldElement.strings = ...",decimalSeparator:"MathfieldElement.decimalSeparator = ...",fractionNavigationOrder:"MathfieldElement.fractionNavigationOrder = ..."},dn=class As extends HTMLElement{constructor(e){if(super(),this._observer=null,e){let n=[];for(let r of Object.keys(e))if(ks[r])if(ks[r].startsWith("mf."))if(ks[r].startsWith(`mf.${r}`))n.push(`Option \`${r}\` cannot be used as a constructor option. Use ${ks[r]}`);else{let i=ks[r].match(/([a-zA-Z]+) =/);n.push(`Option \`${r}\` has been renamed \`${i[1]}\``)}else n.push(`Option \`${r}\` cannot be used as a constructor option. Use ${ks[r]}`);if(n.length>0){console.group("%cMathLive 0.106.0: %cInvalid Options","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn("Some of the options passed to `new MathfieldElement(...)` are invalid. \n          See mathfield/changelog/ for details.");for(let r of n)console.warn(r);console.groupEnd()}}if(Pc()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open",delegatesFocus:!0}),this.shadowRoot&&"adoptedStyleSheets"in this.shadowRoot){this.shadowRoot.adoptedStyleSheets=[$c("core"),$c("mathfield"),$c("mathfield-element"),$c("ui"),$c("menu")],this.shadowRoot.appendChild(document.createElement("span"));let n=document.createElement("slot");n.style.display="none",this.shadowRoot.appendChild(n)}else this.shadowRoot.innerHTML="<style>"+tu("core")+tu("mathfield")+tu("mathfield-element")+tu("ui")+tu("menu")+'</style><span></span><slot style="display:none"></slot>';e&&this._setOptions(e)}static get formAssociated(){return Pc()}static get optionsAttributes(){return{"default-mode":"string","letter-shape-style":"string","min-font-scale":"number","max-matrix-cols":"number","popover-policy":"string","math-mode-space":"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","inline-shortcut-timeout":"string","script-depth":"string",placeholder:"string","virtual-keyboard-target-origin":"string","math-virtual-keyboard-policy":"string"}}static get observedAttributes(){return[...Object.keys(this.optionsAttributes),"contenteditable","disabled","readonly","read-only"]}static get fontsDirectory(){return this._fontsDirectory}static set fontsDirectory(e){e!==this._fontsDirectory&&(this._fontsDirectory=e,pq())}get fontsDirectory(){throw new Error("Use MathfieldElement.fontsDirectory instead")}set fontsDirectory(e){throw new Error("Use MathfieldElement.fontsDirectory instead")}static get soundsDirectory(){return this._soundsDirectory}static set soundsDirectory(e){this._soundsDirectory=e,this.audioBuffers={}}get soundsDirectory(){throw new Error("Use MathfieldElement.soundsDirectory instead")}set soundsDirectory(e){throw new Error("Use MathfieldElement.soundsDirectory instead")}static get keypressSound(){return this._keypressSound}static set keypressSound(e){var n,r,i;this.audioBuffers={},e===null?this._keypressSound={spacebar:null,return:null,delete:null,default:null}:typeof e=="string"?this._keypressSound={spacebar:e,return:e,delete:e,default:e}:typeof e=="object"&&"default"in e&&(this._keypressSound={spacebar:(n=e.spacebar)!=null?n:e.default,return:(r=e.return)!=null?r:e.default,delete:(i=e.delete)!=null?i:e.default,default:e.default})}static get plonkSound(){return this._plonkSound}static set plonkSound(e){this.audioBuffers={},this._plonkSound=e}static get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}static get speechEngine(){return this._speechEngine}static set speechEngine(e){this._speechEngine=e}static get speechEngineRate(){return this._speechEngineRate}static set speechEngineRate(e){this._speechEngineRate=e}static get speechEngineVoice(){return this._speechEngineVoice}static set speechEngineVoice(e){this._speechEngineVoice=e}static get textToSpeechMarkup(){return this._textToSpeechMarkup}static set textToSpeechMarkup(e){this._textToSpeechMarkup=e}static get textToSpeechRules(){return this._textToSpeechRules}static set textToSpeechRules(e){this._textToSpeechRules=e}static get textToSpeechRulesOptions(){return this._textToSpeechRulesOptions}static set textToSpeechRulesOptions(e){this._textToSpeechRulesOptions=e}static get locale(){return Qe.locale}static set locale(e){e==="auto"&&(e=navigator.language.slice(0,5)),Qe.locale=e}get locale(){throw new Error("Use MathfieldElement.locale instead")}set locale(e){throw new Error("Use MathfieldElement.locale instead")}static get strings(){return Qe.strings}static set strings(e){Qe.merge(e)}get strings(){throw new Error("Use MathfieldElement.strings instead")}set strings(e){throw new Error("Use MathfieldElement.strings instead")}static get decimalSeparator(){return this._decimalSeparator}static set decimalSeparator(e){this._decimalSeparator=e,this._computeEngine&&(this._computeEngine.decimalSeparator=this.decimalSeparator===","?"{,}":".")}get decimalSeparator(){throw new Error("Use MathfieldElement.decimalSeparator instead")}set decimalSeparator(e){throw new Error("Use MathfieldElement.decimalSeparator instead")}static get fractionNavigationOrder(){return lg.fractionNavigationOrder}static set fractionNavigationOrder(e){if(e!=="numerator-denominator"&&e!=="denominator-numerator")throw new Error("Invalid value");lg.fractionNavigationOrder!==e&&(lg.fractionNavigationOrder=e,TE())}static get computeEngine(){var e,n;if(this._computeEngine===void 0){let r=(e=window[Symbol.for("io.cortexjs.compute-engine")])==null?void 0:e.ComputeEngine;if(!r)return null;this._computeEngine=new r,this._computeEngine&&this.decimalSeparator===","&&(this._computeEngine.decimalSeparator="{,}")}return(n=this._computeEngine)!=null?n:null}static set computeEngine(e){this._computeEngine=e}get computeEngine(){throw new Error("Use MathfieldElement.computeEngine instead")}set computeEngine(e){throw new Error("Use MathfieldElement.computeEngine instead")}static get isFunction(){return typeof this._isFunction!="function"?()=>!1:this._isFunction}static set isFunction(e){this._isFunction=e,TE()}static async loadSound(e){delete this.audioBuffers[e];let n="";switch(e){case"keypress":n=this._keypressSound.default;break;case"return":n=this._keypressSound.return;break;case"spacebar":n=this._keypressSound.spacebar;break;case"delete":n=this._keypressSound.delete;break;case"plonk":n=this.plonkSound;break}if(typeof n!="string")return;n=n.trim();let r=this.soundsDirectory;if(!(r==null||r==="null"||n==="none"||n==="null"))try{let i=await(await fetch(await $A(`${r}/${n}`))).arrayBuffer(),o=await this.audioContext.decodeAudioData(i);this.audioBuffers[e]=o}catch{}}static async playSound(e){if((this.audioContext.state==="suspended"||this.audioContext.state==="interrupted")&&await this.audioContext.resume(),this.audioBuffers[e]||await this.loadSound(e),!this.audioBuffers[e])return;let n=this.audioContext.createBufferSource();n.buffer=this.audioBuffers[e];let r=this.audioContext.createGain();r.gain.value=MH,n.connect(r).connect(this.audioContext.destination),n.start()}showMenu(e){var n,r;return(r=(n=this._mathfield)==null?void 0:n.showMenu(e))!=null?r:!1}get mathVirtualKeyboard(){throw new Error("The `mathVirtualKeyboard` property is not available on the MathfieldElement. Use `window.mathVirtualKeyboard` instead.")}onPointerDown(){window.addEventListener("pointerup",e=>{let n=this._mathfield;if(n&&e.target===this&&!n.disabled){this.dispatchEvent(new MouseEvent("click",{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,movementX:e.movementX,movementY:e.movementY,relatedTarget:e.relatedTarget,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey}));let r=this.getOffsetFromPoint(e.clientX,e.clientY);r>=0&&As.openUrl($K(n,r)),e.pointerType==="touch"&&this.selectionIsCollapsed&&(this.position=r)}},{once:!0})}getPromptValue(e,n){var r,i;return(i=(r=this._mathfield)==null?void 0:r.getPromptValue(e,n))!=null?i:""}setPromptValue(e,n,r){var i;(i=this._mathfield)==null||i.setPromptValue(e,n,r)}getPromptRange(e){var n,r;return(r=(n=this._mathfield)==null?void 0:n.getPromptRange(e))!=null?r:null}getPrompts(e){var n,r;return(r=(n=this._mathfield)==null?void 0:n.getPrompts(e))!=null?r:[]}get form(){var e;return(e=this._internals)==null?void 0:e.form}get name(){var e;return(e=this.getAttribute("name"))!=null?e:""}get type(){return this.localName}get mode(){var e,n;return(n=(e=this._mathfield)==null?void 0:e.model.mode)!=null?n:this.defaultMode==="text"?"text":"math"}set mode(e){var n;(n=this._mathfield)==null||n.switchMode(e)}get expression(){if(this._mathfield)return window[Symbol.for("io.cortexjs.compute-engine")]?this._mathfield.expression:(console.error(`MathLive 0.106.0: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`),null)}set expression(e){var n,r;if(!this._mathfield)return;let i=(r=(n=As.computeEngine)==null?void 0:n.box(e).latex)!=null?r:null;i!==null&&this._mathfield.setValue(i),window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`MathLive 0.106.0: The Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://esm.run/@cortex-js/compute-engine"`)}get errors(){var e,n;return(n=(e=this._mathfield)==null?void 0:e.errors)!=null?n:[]}_getOptions(e){return this._mathfield?nu(this._mathfield.options,e):Et.has(this)?N({},nu(N(N({},hg()),e1(Et.get(this).options)),e)):null}getOptions(e){return console.warn("%cMathLive 0.106.0: %cDeprecated Usage%c\n      `mf.getOptions()` is deprecated. Read the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._mathfield?nu(this._mathfield.options,e):Et.has(this)?nu(N(N({},hg()),e1(Et.get(this).options)),e):null}reflectAttributes(){let e=hg(),n=this._getOptions();Object.keys(As.optionsAttributes).forEach(r=>{let i=go(r);As.optionsAttributes[r]==="on/off"?e[i]!==n[i]?this.setAttribute(r,n[i]?"on":"off"):this.removeAttribute(r):e[i]!==n[i]&&(As.optionsAttributes[r]==="boolean"?n[i]?this.setAttribute(r,""):this.removeAttribute(r):(typeof n[i]=="string"||typeof n[i]=="number")&&this.setAttribute(r,n[i].toString()))})}getOption(e){return console.warn("%cMathLive 0.106.0: %cDeprecated Usage%c\n      `mf.getOption()` is deprecated. Read the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._getOptions([e])[e]}_getOption(e){return this._getOptions([e])[e]}_setOptions(e){if(this._mathfield)this._mathfield.setOptions(e);else if(Et.has(this)){let n=N(N({},Et.get(this).options),e);Et.set(this,q(N({},Et.get(this)),{selection:{ranges:n.readOnly?[[0,0]]:[[0,-1]]},options:n}))}else Et.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:e,menuItems:void 0});this.reflectAttributes()}setOptions(e){console.group("%cMathLive 0.106.0: %cDeprecated Usage","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn(" `mf.setOptions()` is deprecated. Set the property directly on the mathfield instead.\n      See mathfield/changelog/ for details.");for(let n of Object.keys(e))ks[n]&&console.warn(`\`mf.setOptions({${n}:...})\` -> ${ks[n]}`);console.groupEnd(),this._setOptions(e)}executeCommand(...e){var n,r;let i;if(e.length===1?i=e[0]:i=[e[0],...e.slice(1)],i)return(r=(n=this._mathfield)==null?void 0:n.executeCommand(i))!=null?r:!1;throw new Error("Invalid selector")}getValue(e,n,r){var i,o;if(this._mathfield)return this._mathfield.model.getValue(e,n,r);if(Et.has(this)){let l,c,d;if(ag(e)?([l,c]=e.ranges[0],d=n):jg(e)?([l,c]=e,d=n):Ds(e)&&Ds(n)?(l=e,c=n,d=r):(l=0,c=-1,d=e),(d===void 0||d==="latex")&&l===0&&c===-1)return(o=(i=Et.get(this).value)!=null?i:this.textContent)!=null?o:""}return""}setValue(e,n){if(this._mathfield&&e!==void 0){if(this._mathfield.model.getValue()===e)return;n!=null||(n={silenceNotifications:!0,mode:"math"}),this._mathfield.setValue(e,n);return}if(Et.has(this)){let i=Et.get(this).options;Et.set(this,{value:e,selection:{ranges:[[-1,-1]],direction:"forward"},options:i,menuItems:void 0});return}let r=K0(this);Et.set(this,{value:e,selection:{ranges:[[-1,-1]],direction:"forward"},options:r,menuItems:void 0})}hasFocus(){var e,n;return(n=(e=this._mathfield)==null?void 0:e.hasFocus())!=null?n:!1}focus(){var e;(e=this._mathfield)==null||e.focus()}blur(){var e;(e=this._mathfield)==null||e.blur()}select(){var e;(e=this._mathfield)==null||e.select()}insert(e,n){var r,i;return(i=(r=this._mathfield)==null?void 0:r.insert(e,n))!=null?i:!1}applyStyle(e,n){var r;return(r=this._mathfield)==null?void 0:r.applyStyle(e,n)}queryStyle(e){var n,r;return(r=(n=this._mathfield)==null?void 0:n.queryStyle(e))!=null?r:"none"}getOffsetFromPoint(e,n,r){return this._mathfield?fg(this._mathfield,e,n,r):-1}getElementInfo(e){return HM(this._mathfield,e)}resetUndo(){var e;(e=this._mathfield)==null||e.resetUndo()}canUndo(){return this._mathfield?this._mathfield.canUndo():!1}canRedo(){return this._mathfield?this._mathfield.canRedo():!1}handleEvent(e){var n,r,i,o,l,c,d;if(qi.state!=="closed"||((r=(n=this._mathfield)==null?void 0:n.menu)==null?void 0:r.state)!=="closed")return;if(e.type==="pointerdown"){this.onPointerDown();let p=(i=this._mathfield)==null?void 0:i.keyboardDelegate;p?.blur(),p?.focus()}if(e.type==="focus"&&((o=this._mathfield)==null||o.focus()),e.type!=="blur")return;let f=_M();f&&(l=window?.mathVirtualKeyboard)!=null&&l.visible||((c=qi.scrim)==null?void 0:c.state)!=="closed"||f&&$U()||(d=this._mathfield)==null||d.blur()}connectedCallback(){var e,n,r,i;let o=this.shadowRoot,l=o.host,c=window.getComputedStyle(this).userSelect!=="none";if(c)l.addEventListener("pointerdown",this,!0);else{let p=o.querySelector("span");p.style.pointerEvents="none"}l.addEventListener("focus",this,!0),l.addEventListener("blur",this,!0),this._observer=new MutationObserver(()=>{var p;this.value=(p=this.textContent)!=null?p:""}),this._observer.observe(this,{childList:!0,characterData:!0,subtree:!0}),Pc()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),c&&!this.hasAttribute("contenteditable")&&this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let d=o.querySelector("slot:not([name])");if(d)try{this._style=d.assignedElements().filter(p=>p.tagName.toLowerCase()==="style").map(p=>p.textContent).join("")}catch(p){console.error(p)}if(this._style){let p=document.createElement("style");p.textContent=this._style,o.appendChild(p)}let f="";if(this.hasAttribute("value")?f=this.getAttribute("value"):f=(e=d?.assignedNodes().map(p=>p.nodeType===3?p.textContent:"").join("").trim())!=null?e:"",this._mathfield=new EH(o.querySelector(":host > span"),q(N({},(r=(n=Et.get(this))==null?void 0:n.options)!=null?r:K0(this)),{eventSink:this,value:f})),!Et.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(let p of Object.keys(As.optionsAttributes))this.upgradeProperty(go(p))}if(!((i=this._mathfield)!=null&&i.model)){this._mathfield=null;return}if(Et.has(this)){let p=this._mathfield,y=Et.get(this),v=y.menuItems;p.model.deferNotifications({content:!1,selection:!1},()=>{let x=y.value;x!==void 0&&p.setValue(x),p.model.selection=y.selection,Et.delete(this)}),v&&(this.menuItems=v)}window.queueMicrotask(()=>{this.isConnected&&this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))}),q3()}disconnectedCallback(){var e,n,r;if(this.shadowRoot.host.removeEventListener("pointerdown",this,!0),!this._mathfield)return;(e=this._observer)==null||e.disconnect(),this._observer=null,window.queueMicrotask(()=>this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})));let i=nu(this._mathfield.options,Object.keys(As.optionsAttributes).map(o=>go(o)));Et.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,menuItems:(r=(n=this._mathfield.menu)==null?void 0:n.menuItems)!=null?r:void 0,options:i}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(e){if(this.hasOwnProperty(e)){let n=this[e];delete this[e],(e==="readonly"||e==="read-only")&&(e="readOnly"),this[e]=n}}attributeChangedCallback(e,n,r){if(n===r)return;let i=r!==null;switch(e){case"contenteditable":Qt(this._mathfield);break;case"placeholder":r===!1&&(r=""),this.placeholder=r;break;case"disabled":this.disabled=i;break;case"read-only":case"readonly":this.readOnly=i;break}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(e){let n=!!e;n?(this.setAttribute("readonly",""),Pc()?this._internals.ariaReadOnly="true":this.setAttribute("aria-readonly","true"),this.setAttribute("aria-readonly","true")):(Pc()?this._internals.ariaReadOnly="false":this.removeAttribute("aria-readonly"),this.removeAttribute("readonly"),this.removeAttribute("read-only")),this._setOptions({readOnly:n})}get disabled(){return this.hasAttribute("disabled")}set disabled(e){var n;let r=!!e;r?this.setAttribute("disabled",""):this.removeAttribute("disabled"),Pc()?this._internals.ariaDisabled=r?"true":"false":this.setAttribute("aria-disabled",r?"true":"false"),r&&(n=this._mathfield)!=null&&n.hasFocus&&window.mathVirtualKeyboard.visible&&this._mathfield.executeCommand("hideVirtualKeyboard")}get value(){return this.getValue()}set value(e){this.setValue(e)}get defaultMode(){return this._getOption("defaultMode")}set defaultMode(e){this._setOptions({defaultMode:e})}get macros(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("macros")}set macros(e){this._setOptions({macros:e})}get registers(){if(!this._mathfield)throw new Error("Mathfield not mounted");let e=this;return new Proxy({},{get:(n,r)=>{if(typeof r=="string")return e._getOption("registers")[r]},set(n,r,i){return typeof r!="string"?!1:(e._setOptions({registers:q(N({},e._getOption("registers")),{[r]:i})}),!0)},ownKeys:()=>Reflect.ownKeys(e._getOption("registers")),getOwnPropertyDescriptor:(n,r)=>{let i=e._getOption("registers")[r];if(i!==void 0)return{configurable:!0,enumerable:!0,value:i,writable:!0}}})}set registers(e){this._setOptions({registers:e})}get colorMap(){return this._getOption("colorMap")}set colorMap(e){this._setOptions({colorMap:e})}get backgroundColorMap(){return this._getOption("backgroundColorMap")}set backgroundColorMap(e){this._setOptions({backgroundColorMap:e})}get letterShapeStyle(){return this._getOption("letterShapeStyle")}set letterShapeStyle(e){this._setOptions({letterShapeStyle:e})}get minFontScale(){return this._getOption("minFontScale")}set minFontScale(e){this._setOptions({minFontScale:e})}get maxMatrixCols(){return this._getOption("maxMatrixCols")}set maxMatrixCols(e){this._setOptions({maxMatrixCols:e})}get smartMode(){return this._getOption("smartMode")}set smartMode(e){this._setOptions({smartMode:e})}get smartFence(){return this._getOption("smartFence")}set smartFence(e){this._setOptions({smartFence:e})}get smartSuperscript(){return this._getOption("smartSuperscript")}set smartSuperscript(e){this._setOptions({smartSuperscript:e})}get scriptDepth(){return this._getOption("scriptDepth")}set scriptDepth(e){this._setOptions({scriptDepth:e})}get removeExtraneousParentheses(){return this._getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(e){this._setOptions({removeExtraneousParentheses:e})}get mathModeSpace(){return this._getOption("mathModeSpace")}set mathModeSpace(e){this._setOptions({mathModeSpace:e})}get placeholderSymbol(){return this._getOption("placeholderSymbol")}set placeholderSymbol(e){this._setOptions({placeholderSymbol:e})}get placeholder(){var e;return(e=this.getAttribute("placeholder"))!=null?e:""}set placeholder(e){var n;typeof e=="string"&&((n=this._mathfield)==null||n.setOptions({contentPlaceholder:e}))}get popoverPolicy(){return this._getOption("popoverPolicy")}set popoverPolicy(e){this._setOptions({popoverPolicy:e})}get environmentPopoverPolicy(){return this._getOption("environmentPopoverPolicy")}set environmentPopoverPolicy(e){this._setOptions({environmentPopoverPolicy:e})}get menuItems(){var e;if(!this._mathfield)throw new Error("Mathfield not mounted");return(e=this._mathfield.menu._menuItems.map(n=>n.menuItem))!=null?e:[]}set menuItems(e){var n;if(!this._mathfield)throw new Error("Mathfield not mounted");if(this._mathfield){let r=(n=this._mathfield.element)==null?void 0:n.querySelector("[part=menu-toggle]");r&&(r.style.display=e.length===0?"none":""),this._mathfield.menu.menuItems=e}}get mathVirtualKeyboardPolicy(){return this._getOption("mathVirtualKeyboardPolicy")}set mathVirtualKeyboardPolicy(e){this._setOptions({mathVirtualKeyboardPolicy:e})}get inlineShortcuts(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("inlineShortcuts")}set inlineShortcuts(e){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({inlineShortcuts:e})}get inlineShortcutTimeout(){return this._getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(e){this._setOptions({inlineShortcutTimeout:e})}get keybindings(){if(!this._mathfield)throw new Error("Mathfield not mounted");return this._getOption("keybindings")}set keybindings(e){if(!this._mathfield)throw new Error("Mathfield not mounted");this._setOptions({keybindings:e})}get onInsertStyle(){let e=this._getOption("onInsertStyle");return e===void 0?$3:e}set onInsertStyle(e){this._setOptions({onInsertStyle:e})}get onInlineShortcut(){return this._getOption("onInlineShortcut")}set onInlineShortcut(e){this._setOptions({onInlineShortcut:e})}get onScrollIntoView(){return this._getOption("onScrollIntoView")}set onScrollIntoView(e){this._setOptions({onScrollIntoView:e})}get onExport(){return this._getOption("onExport")}set onExport(e){this._setOptions({onExport:e})}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOptions({readOnly:e})}get isSelectionEditable(){var e,n;return(n=(e=this._mathfield)==null?void 0:e.isSelectionEditable)!=null?n:!1}setPromptState(e,n,r){var i;(i=this._mathfield)==null||i.setPromptState(e,n,r)}getPromptState(e){var n,r;return(r=(n=this._mathfield)==null?void 0:n.getPromptState(e))!=null?r:[void 0,!0]}get virtualKeyboardTargetOrigin(){return this._getOption("virtualKeyboardTargetOrigin")}set virtualKeyboardTargetOrigin(e){this._setOptions({virtualKeyboardTargetOrigin:e})}get selection(){return this._mathfield?this._mathfield.model.selection:Et.has(this)?Et.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(e){if(typeof e=="number"&&(e={ranges:[[e,e]]}),this._mathfield){this._mathfield.model.selection=e,Qt(this._mathfield);return}if(Et.has(this)){Et.set(this,q(N({},Et.get(this)),{selection:e}));return}Et.set(this,{value:void 0,selection:e,options:K0(this),menuItems:void 0})}get selectionIsCollapsed(){let e=this.selection;return e.ranges.length===1&&e.ranges[0][0]===e.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:Et.has(this)?Et.get(this).selection.ranges[0][0]:0}set position(e){if(this._mathfield&&(this._mathfield.model.position=e,Qt(this._mathfield)),Et.has(this)){Et.set(this,q(N({},Et.get(this)),{selection:{ranges:[[e,e]]}}));return}Et.set(this,{value:void 0,selection:{ranges:[[e,e]]},options:K0(this),menuItems:void 0})}get lastOffset(){var e,n;return(n=(e=this._mathfield)==null?void 0:e.model.lastOffset)!=null?n:-1}};dn.version="0.106.0",dn.openUrl=t=>{if(!t)return;let e=new URL(t);if(!["http:","https:","file:"].includes(e.protocol.toLowerCase())){dn.playSound("plonk");return}window.open(e,"_blank")},dn._fontsDirectory="./fonts/",dn._soundsDirectory="./sounds",dn.keypressVibration=!0,dn._keypressSound={spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"},dn._plonkSound="plonk.wav",dn.audioBuffers={},dn.createHTML=t=>t,dn._speechEngineRate="100%",dn._speechEngineVoice="Joanna",dn._textToSpeechMarkup="",dn._textToSpeechRules="mathlive",dn._textToSpeechRulesOptions={},dn.speakHook=kH,dn.readAloudHook=CH,dn.restoreFocusWhenDocumentFocused=!0,dn._decimalSeparator=".",dn._isFunction=t=>{var e,n;let r=globalThis.MathfieldElement.computeEngine;return(n=(e=r?.parse(t).domain)==null?void 0:e.isFunction)!=null?n:!1};var Su=dn;function go(t){return t.replace(/[^a-zA-Z\d]+(.)/g,(e,n)=>n.toUpperCase())}function K0(t){let e={readOnly:!1},n=Su.optionsAttributes;return Object.keys(n).forEach(r=>{var i;if(t.hasAttribute(r)){let o=t.getAttribute(r);r==="placeholder"?e.contentPlaceholder=o??"":n[r]==="boolean"?e[go(r)]=!0:n[r]==="on/off"?(o=(i=o?.toLowerCase())!=null?i:"",o==="on"||o==="true"?e[go(r)]=!0:o==="off"||o==="false"?e[go(r)]=!1:e[go(r)]=void 0):n[r]==="number"?e[go(r)]=Number.parseFloat(o??"0"):e[go(r)]=o}}),e}function Pc(){return!(!("ElementInternals"in window)||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var X3=Su,rS,iS,aS;if(Di()&&!((rS=window.customElements)!=null&&rS.get("math-field"))){window[iS=Symbol.for("io.cortexjs.mathlive")]!=null||(window[iS]={});let t=window[Symbol.for("io.cortexjs.mathlive")];t.version="0.106.0",globalThis.MathfieldElement=Su,(aS=window.customElements)==null||aS.define("math-field",Su)}function AH(t,e){let n=ol.singleton;return n?(n.show(),Wc(),n.currentLayer=e,n.render(),n.focus(),!0):!1}function TH(){let t=window.mathVirtualKeyboard;return t.visible?t.hide({animate:!0}):t.show({animate:!0}),!1}Cr({switchKeyboardLayer:AH,toggleVirtualKeyboard:TH,hideVirtualKeyboard:()=>(window.mathVirtualKeyboard.hide({animate:!0}),!1),showVirtualKeyboard:()=>(window.mathVirtualKeyboard.show({animate:!0}),!1)},{target:"virtual-keyboard"});function Ts(){var t;return globalThis[t=Symbol.for("io.cortexjs.mathlive")]!=null||(globalThis[t]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}function DH(){const[t,e]=ne.useState(""),n=ne.useRef(null);return ne.useEffect(()=>{n.current&&(n.current.value=t)},[t]),Ee.jsxs("div",{className:"w-full h-full flex flex-col justify-items-center p-4",children:[Ee.jsxs("div",{className:"flex items-center justify-center w-full ",children:[Ee.jsxs("div",{className:"flex items-center justify-between txtbox w-9/12 max-w-xs",children:[Ee.jsx("input",{type:"text",placeholder:"Search Questions",className:" txtbox w-full outline-none border-none"}),Ee.jsx(NU,{className:"text-grey dark:text-light-grey",size:24})]}),Ee.jsx(IU,{className:"text-grey dark:text-light-grey m-4",size:24})]}),Ee.jsxs("div",{className:`h-[90%] w-[97.5%] bg-grey/5 dark:bg--light-grey/10 rounded-out m-auto border-2 p-8\r
             border-light-grey dark:border-grey shadow-xl`,children:[Ee.jsx("p",{className:"txt-sub italic",children:"#Tags for the questions"}),Ee.jsx("p",{className:"txt",children:"Wow so much space I actually dont know what to do with myself here"}),Ee.jsx("input",{type:"text",className:"txtbox w-full max-w-xs",placeholder:"Answer"}),Ee.jsx("math-field",{ref:n,onInput:r=>e(r.target.value),style:{display:"block",minHeight:"60px",padding:"8px",backgroundColor:"#f0f0f0",border:"2px solid #888",borderRadius:"8px",fontSize:"18px",color:"black"},children:t}),Ee.jsxs("p",{children:["Value: ",t]})]})]})}function LH(){const{user:t}=ne.useContext(o1),{setOptions:e}=ne.useContext(sS);return Ee.jsxs("div",{children:[Ee.jsx("p",{children:"Social"}),Ee.jsx("p",{className:"txt-heading-colour",children:"Default Text"}),Ee.jsx("p",{className:"txt-heading",children:"Default Text"}),Ee.jsx("p",{className:"txt-bold",children:"Default Text"}),Ee.jsx("p",{className:"txt",children:"Default Text"}),Ee.jsx("p",{className:"txt-sub",children:"Default Text"}),Ee.jsx("input",{type:"text",className:"txtbox txt",placeholder:"Default Text"}),Ee.jsx("button",{className:" block blue-btn m-2 ",children:Ee.jsx("p",{children:"Default Text"})}),Ee.jsx("button",{className:" block plain-btn m-2 ",onClick:()=>{localStorage.setItem("THEME","dark"),e(n=>({...n,theme:"dark"}))},children:Ee.jsx("p",{children:"Dark Mode"})}),Ee.jsx("button",{className:" block red-btn m-2",onClick:()=>{localStorage.setItem("THEME","light"),e(n=>({...n,theme:"light"}))},children:Ee.jsx("p",{children:"Light Mode"})}),Ee.jsx("p",{children:t.email}),Ee.jsx("p",{children:t.uid}),Ee.jsx("p",{children:t.username})]})}function RH(){return Ee.jsx("div",{children:Ee.jsx("p",{children:"Social"})})}function c4(){const{user:n}=ne.useContext(o1),[r,i]=ne.useState("practice"),o=L2(),l=c=>{i(c),o(`/${c}`)};return Ee.jsxs("div",{className:"h-full flex flex-col p-4 group transition-all duration-250 bg-light-grey/5 dark:bg-grey/5",children:[Ee.jsxs("div",{className:"flex items-center justify-evenly rounded-out h-16 group-hover:bg-opaque p-2 mb-2",children:[Ee.jsx("img",{src:n.picture,className:"rounded-full border-light-grey border-2 w-7 group-hover:w-9 transition-all duration-250"}),Ee.jsxs("div",{className:"transition-all duration-250 group-hover:ml-2",children:[Ee.jsx("p",{className:"nav-txt txt-heading-colour text-blue dark:text-blue-light",children:n.username}),Ee.jsx("p",{className:"nav-txt txt-sub text-nowrap",children:"Rank: Elite"})]}),Ee.jsx(PU,{className:"nav-txt group-hover:w-8 text-grey dark:text-grey-light",size:24})]}),Ee.jsxs("div",{className:r=="practice"?"nav-item-selected":"nav-item",onClick:()=>{l("practice")},children:[Ee.jsx(OU,{strokeWidth:2,size:36,className:r=="practice"?"nav-icon-selected":"nav-icon",fill:r=="practice"?"currentColor":"none"}),Ee.jsx("p",{className:r=="practice"?"nav-txt-selected":"nav-txt",children:"Practice"})]}),Ee.jsxs("div",{className:r=="social"?"nav-item-selected":"nav-item",onClick:()=>{l("social")},children:[Ee.jsx(zU,{strokeWidth:2,size:36,className:r=="social"?"nav-icon-selected":"nav-icon",fill:r=="social"?"currentColor":"none"}),Ee.jsx("p",{className:r=="social"?"nav-txt-selected":"nav-txt",children:"Social"})]}),Ee.jsxs("div",{className:r=="games"?"nav-item-selected":"nav-item",onClick:()=>{l("games")},children:[Ee.jsx(BU,{strokeWidth:2,size:36,className:r=="games"?"nav-icon-selected":"nav-icon",fill:r=="games"?"currentColor":"none"}),Ee.jsx("p",{className:r=="games"?"nav-txt-selected":"nav-txt",children:"Games"})]})]})}const IH=GR([{path:"/",element:Ee.jsx(Ee.Fragment,{children:Ee.jsx(kU,{})})},{path:"/practice",element:Ee.jsxs(Ee.Fragment,{children:[Ee.jsx(c4,{}),Ee.jsx(DH,{})]})},{path:"/social",element:Ee.jsxs(Ee.Fragment,{children:[Ee.jsx(c4,{}),Ee.jsx(LH,{})]})},{path:"/games",element:Ee.jsxs(Ee.Fragment,{children:[Ee.jsx(c4,{}),Ee.jsx(RH,{})]})}]);function BH(){return Ee.jsx(oI,{router:IH})}function OH(){const[t,e]=ne.useState({}),[n,r]=ne.useState({theme:"light"});return ne.useEffect(()=>{(()=>{const o=localStorage.getItem("THEME");r({theme:o})})()},[]),Ee.jsx(sS.Provider,{value:{options:n,setOptions:r},children:Ee.jsx(o1.Provider,{value:{user:t,setUser:e},children:Ee.jsx("div",{className:`${n.theme=="dark"?"dark":""} bg-white
      dark:bg-black h-screen w-screen flex flex-row`,children:Ee.jsx(BH,{})})})})}eL.createRoot(document.getElementById("root")).render(Ee.jsx(ne.StrictMode,{children:Ee.jsx(OH,{})}));
